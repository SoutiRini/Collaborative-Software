[{"count": 0, "tags": [], "bug_id": 336, "attachment_id": null, "text": "I have a implementation of Basic authentication with\r\n JDBC Realm ,it worked correctly.but use long time \r\nit is wrong,log file report below error :\r\n2000-12-18 08:47:42 - ContextManager: JDBCRealm: The database connection is null or was found to be closed. Trying to re-open it.\r\n2000-12-18 08:47:42 - ContextManager: JDBCRealm: There was an SQLException while in authenticate: null\r\n2000-12-18 08:47:42 - ContextManager: JDBCRealm: SQLException: java.sql.SQLException: Communication link failure: java.io.IOException\r\n2000-12-18 08:47:59 - ContextManager: JDBCRealm: The database connection is null or was found to be closed. Trying to re-open it.\r\n2000-12-18 08:47:59 - ContextManager: JDBCRealm: There was an SQLException while in getUserRoles: monkey\r\n2000-12-18 08:47:59 - ContextManager: JDBCRealm: SQLException: java.sql.SQLException: Communication link failure: java.io.IOException\r\n2000-12-18 08:48:11 - ContextManager: JDBCRealm: The database connection is null or was found to be closed. Trying to re-open it.\r\n2000-12-18 08:48:11 - Ctx( /sample ): Exception in: R( /sample + /newfmg.jsp + null) - java.lang.NullPointerException\r\n\tat org.gjt.mm.mysql.PreparedStatement.executeQuery(PreparedStatement.java, Compiled Code)\r\n\tat org.apache.tomcat.request.JDBCRealm.authenticate(JDBCRealm.java:307, Compiled Code)\r\n\tat org.apache.tomcat.request.JDBCRealm.authenticate(JDBCRealm.java:482, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.doAuthenticate(ContextManager.java:837, Compiled Code)\r\n\tat org.apache.tomcat.core.RequestImpl.getRemoteUser(RequestImpl.java:341, Compiled Code)\r\n\tat org.apache.tomcat.request.JDBCRealm.authorize(JDBCRealm.java:503, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.doAuthorize(ContextManager.java:855, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.internalService(ContextManager.java:789, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.service(ContextManager.java:743, Compiled Code)\r\n\tat org.apache.tomcat.service.http.HttpConnectionHandler.processConnection(HttpConnectionHandler.java:210, Compiled Code)\r\n\tat org.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:416, Compiled Code)\r\n\tat org.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:498, Compiled Code)\r\n\tat java.lang.Thread.run(Thread.java:484, Compiled Code)\r\n\r\n2000-12-18 08:48:29 - Ctx( /sample ): Exception in: R( /sample + /newfmg.jsp + null) - java.lang.NullPointerException\r\n\tat org.gjt.mm.mysql.PreparedStatement.executeQuery(PreparedStatement.java, Compiled Code)\r\n\tat org.apache.tomcat.request.JDBCRealm.authenticate(JDBCRealm.java:307, Compiled Code)\r\n\tat org.apache.tomcat.request.JDBCRealm.authenticate(JDBCRealm.java:482, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.doAuthenticate(ContextManager.java:837, Compiled Code)\r\n\tat org.apache.tomcat.core.RequestImpl.getRemoteUser(RequestImpl.java:341, Compiled Code)\r\n\tat org.apache.tomcat.request.JDBCRealm.authorize(JDBCRealm.java:503, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.doAuthorize(ContextManager.java:855, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.internalService(ContextManager.java:789, Compiled Code)\r\n\tat org.apache.tomcat.core.ContextManager.service(ContextManager.java:743, Compiled Code)\r\n\tat org.apache.tomcat.service.http.HttpConnectionHandler.processConnection(HttpConnectionHandler.java:210, Compiled Code)\r\n\tat org.apache.tomcat.service.TcpWorkerThread.runIt(PoolTcpEndpoint.java:416, Compiled Code)\r\n\tat org.apache.tomcat.util.ThreadPool$ControlRunnable.run(ThreadPool.java:498, Compiled Code)\r\n\tat java.lang.Thread.run(Thread.java:484, Compiled Code)\r\n\r\n", "id": 312, "time": "2000-12-17T22:30:01Z", "creator": "dev@tomcat.apache.org", "creation_time": "2000-12-17T22:30:01Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 336, "attachment_id": null, "text": "It seems there are problems on reconnecting on Mysql JDBC drivers..\n\nAnd i found a bug on the reconnecting after a closed or expired connection , \nconnectionUSer and connectionPassword were not used when reconnecting, please \ncheck against 3.2.2 or 3.3 to see is this is solved , thanks.\n\nFixed in Tomcat 3.3 \nFixed on Tomcat 3.2.2\n\n", "id": 1309, "time": "2001-03-15T16:12:07Z", "creator": "nacho@apache.org", "creation_time": "2001-03-15T16:12:07Z", "is_private": false}]