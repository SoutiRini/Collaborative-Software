[{"count": 0, "tags": [], "creator": "jroith@gmail.com", "text": "This problem started with FPDF output taking down the web server. It doesn't\nseem to be related to PHP though, but it is possible.\n\nI tracked it down to a more general thing:\n\n1. Enable mod_ssl\n2. Enable mod_deflate and use \"SetOutputFilter DEFLATE\"\n3. Create a PHP file and add:\n\n<? sleep (1); ?>\n\nfollowed by a big chunk of text. For example I used a base64 encoded PDF file,\nbut it also works with any text and binary content. My test file is about 2 MB\nin size, but it also worked with less.\n\n4. Now request that in your Browser (I used Mozilla/5.0 (Windows; U; Windows NT\n5.1; en-US; rv:1.8.1.4) Gecko/20070515 Firefox/2.0.0.4) and hit the refresh\nbutton (after half a second) before the response arrives. As an alternative you\ncan also simply change the page or close your browser window.\n\n5. Apache will crash now (or after about 5 seconds.)\n\n- The error log is empty\n- This can always be reproduced. Not that it also works without the sleep, but\nis harder to reproduce then. I guess it also works with smaller files, but,\nagain, it will be harder to reproduce, since the response arrives to fast then.\n- It won't happen if either SSL or compression is not used.", "id": 104298, "time": "2007-06-11T09:37:54Z", "bug_id": 42636, "creation_time": "2007-06-11T09:37:54Z", "is_private": false, "attachment_id": null}, {"count": 1, "text": "Does this also happen without php, lets say if you use a cgi script or if you\njust take a huger file (>= 50 MB)?\nCan you provide a crash dump\n(http://httpd.apache.org/dev/debugging.html#backtrace-win)?", "bug_id": 42636, "is_private": false, "id": 104310, "time": "2007-06-11T13:01:12Z", "creator": "rpluem@apache.org", "creation_time": "2007-06-11T13:01:12Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 42636, "attachment_id": 20333, "id": 104320, "time": "2007-06-11T16:04:07Z", "creator": "jroith@gmail.com", "creation_time": "2007-06-11T16:04:07Z", "is_private": false, "text": "Created attachment 20333\nThis should be it, if I did it right."}, {"count": 3, "tags": [], "bug_id": 42636, "text": "Please note, that the statement that it can be always reproduced was a little\noptimistic: this time even my test php file only crashed once (I had to try\nseveral times.), but in the original program it always works. I used that to\ncreate the attachment.\n\nI'm going to try to get reproduce the situation without PHP tomorrow.", "id": 104321, "time": "2007-06-11T16:10:13Z", "creator": "jroith@gmail.com", "creation_time": "2007-06-11T16:10:13Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "marc.stern@approach.be", "attachment_id": null, "id": 111490, "time": "2007-12-06T02:44:45Z", "bug_id": 42636, "creation_time": "2007-12-06T02:44:45Z", "is_private": false, "text": "Does the same problem occur with mod_gzip as well, or is it specific to\nmod_deflate ?"}, {"count": 5, "tags": [], "bug_id": 42636, "text": "Were you ever able to reproduce without PHP in the mix?\n\nClosing but please feel free to reopen if you have a non-PHP testcase.", "id": 112347, "time": "2007-12-30T23:33:03Z", "creator": "wrowe@apache.org", "creation_time": "2007-12-30T23:33:03Z", "is_private": false, "attachment_id": null}]