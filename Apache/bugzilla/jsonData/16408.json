[{"count": 0, "tags": [], "creator": "jbiskeborn@msn.com", "attachment_id": null, "id": 30030, "time": "2003-01-24T20:59:59Z", "bug_id": 16408, "creation_time": "2003-01-24T20:59:59Z", "is_private": false, "text": "I thought you might be interested in a fix for a problem I had with ant.bat in \nant-1.5.1.\n \nFirst, I had to change:\nif exist \"%ANT_HOME%\" goto checkJava\nto: \nif exist \"%ANT_HOME%\"\\nul goto checkJava\n \nI think this has already been reported in bug 14495.\n \nThen, I found the for loop at :checkJava no longer worked.  It worked fine with \nANT_HOME=\\ant-1.5 but not ANT_HOME=\\ant-1.5.1 with the .1 added.  It wasn't a \nmatter of the path being too long.  It just didn't like seeing more than one \nextension.  In other words, the for loop accepted 1 followed by .5 but not 1 \nfollowed by .5 followed by .1.\n \nTo get it to work I changed:\nfor %%i in (\"%ANT_HOME%\\lib\\*.jar\") do call \"%ANT_HOME%\\bin\\lcp.bat\" %%i\nto:\nrem Substitute virtual disk z: for %ANT_HOME% in for loop.\nsubst z: \"%ANT_HOME%\"\nfor %%i in (\"z:\\lib\\*.jar\") do call \"%ANT_HOME%\\bin\\lcp.bat\" %%I\n \nAfter :end I added:\nrem Delete virtual disk z: used above.\nif exist z:\\nul subst z: /d\n \nThis solution depends on the last drive being set to z:, which it is in Windows \nMe and probably Windows 98, and the z: drive not being used, which is probably \nthe case.  There's probably a way to detect if both of these conditions are \ntrue.\n \nI think it's important that ANT_HOME include the version number so users can \nwrite scripts that check the version number."}, {"count": 1, "tags": [], "bug_id": 16408, "is_private": false, "id": 30037, "creation_time": "2003-01-25T10:22:22Z", "time": "2003-01-25T10:22:22Z", "creator": "conor@apache.org", "text": "If you refer to \nhttp://ant.apache.org/manual/install.html#installing\n\nyou will see that for Windows 98 (and ME), you should install Ant in a \"short\"\nfilename. A short filename is an 8.3 filename. The filename you have used,\n\\ant-1.5.1 is technically a long filename.\n\nI don't think relying on the availability of the z: drive is something we could\nadopt - it just makes too many assumptions about the user's environment.\n\nI would suggest you adopt a name like \\ant151 if you must have the version\nnumber in there. It should still be quite clear. \n\nHowever, if you want to write scripts that depend on the Ant version number, why\nnot do them in Ant, itself. Include this\n\n    <property resource=\"org/apache/tools/ant/version.txt\"/>\n\nThis will define the VERSION property with the Ant version. You can set\nconditions on the Ant version as follows\n\n      <condition property=\"ant141\">\n        <equals arg1=\"${VERSION}\" arg2=\"1.4.1\"/>\n      </condition>\n\n", "attachment_id": null}]