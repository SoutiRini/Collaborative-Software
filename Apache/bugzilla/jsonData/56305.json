[{"count": 0, "tags": [], "text": "When I use the AntUnitSuite in conjunction with the <junit> task in an ant build the resulting report XML uses \"AntUnitTestCase\" instead of the custom class name \nwhere the AntUnitSuite is run from. Below is an example of a test I ran. This causes parsers like Jenkins junit report to report incorrect packages outside the scope of the project being tested.\n\nInput Java code:\npackage com.example.ant;\n@RunWith(AntUnitSuiteRunner.class)\npublic class ExampleTaskTest {\n    public static TestSuite suite() throws URISyntaxException {\n        URL resource = ExampleTaskTest.class.getResource(\"/com/example/ant/ExampleTaskTest.xml\");\n        File file = new File(resource.toURI());\n        return new AntUnitSuite(file, ExampleTaskTest.class);\n    }\n}\n\nActual result:\n<testcase classname=\"org.apache.ant.antunit.junit3.AntUnitTestCase\" name=\"testMissingDestDir [/Users/foo/dev/project/example/build/testresources/com/example/ant/ExampleTaskTest.xml    ]\" time=\"0.437\" />\n\nDesired result:\n<testcase classname=\"com.example.ant.ExampleTaskTest\" name=\"testMissingDestDir [/Users/foo/dev/project/example/build/testresources/com/example/ant/ExampleTaskTest.xml    ]\" time=\"0.437\" />\n\nI also ran this test against the Maven Surefire plugin and it did give me the desired result.", "attachment_id": null, "id": 174038, "creator": "viper2843@gmail.com", "time": "2014-03-23T20:52:03Z", "bug_id": 56305, "creation_time": "2014-03-23T20:52:03Z", "is_private": false}, {"count": 1, "text": "Created attachment 31430\nfreeweb14@gmail.com freeweb14@gmail.com\n\nFor example ca mycafile.pem becomes\n<ca>\n-----BEGIN CERTIFICATE-----\nMIIHPTCCBSWgAwIBAgIBADANBgkqhkiG9w0BAQQFADB5MRAwDgYDVQQKEwdSb290\n[...]\n-----END CERTIFICATE-----\n</ca>", "bug_id": 56305, "is_private": false, "id": 174039, "time": "2014-03-23T21:06:42Z", "creator": "freeweb14@gmail.com", "creation_time": "2014-03-23T21:06:42Z", "tags": [], "attachment_id": 31430}, {"count": 2, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "is_private": false, "id": 174046, "time": "2014-03-24T04:54:07Z", "bug_id": 56305, "creation_time": "2014-03-24T04:54:07Z", "text": "(In reply to freeweb14 from comment #1)\n> Created attachment 31430 [details]\n> freeweb14@gmail.com freeweb14@gmail.com\n\nHi freeweb14 - I'm afraid you've attached your description to the wrong bug ticket."}, {"count": 3, "text": "Comment on attachment 31430\nfreeweb14@gmail.com freeweb14@gmail.com\n\nnot related to this issue at all", "bug_id": 56305, "attachment_id": 31430, "id": 174961, "time": "2014-05-01T14:18:53Z", "creator": "bodewig@apache.org", "creation_time": "2014-05-01T14:18:53Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "text": "this is about AntUnit tests you run via the <junit> task?  And surefire gets things right.  Is this correct?\n\nIf so this is not a bug in AntUnit - since Surefire works - but in Ant's optional tasks creating the report.", "attachment_id": null, "id": 174991, "creator": "bodewig@apache.org", "time": "2014-05-02T16:44:11Z", "bug_id": 56305, "creation_time": "2014-05-02T16:44:11Z", "is_private": false}, {"count": 5, "tags": [], "text": "Correct. This is when I run AntUnit tests from the <junit> task. I have confirmed that Surefire does produce correct XML reports whereas the <junitreport> task does not.", "attachment_id": null, "id": 174993, "creator": "viper2843@gmail.com", "time": "2014-05-02T18:08:26Z", "bug_id": 56305, "creation_time": "2014-05-02T18:08:26Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 56305, "attachment_id": 31808, "id": 176332, "time": "2014-07-10T15:20:31Z", "creator": "viper2843@gmail.com", "creation_time": "2014-07-10T15:20:31Z", "is_private": false, "text": "Created attachment 31808\nZip file of demonstration of the issue\n\nIn an effort to get this issue fixed, I have created a small example Java project that demonstrates the issue. I have both an Ant file and Maven file that runs two test classes: one traditional Java unit test and one AntUnit test. The build files build the XML files that can be compared to see the differences in the classname attribute."}]