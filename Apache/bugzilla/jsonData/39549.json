[{"count": 0, "tags": [], "creator": "Daniel.Martin@sungard.com", "attachment_id": null, "text": "Why does the <available> task search directories it was not asked to search?\n\nAlthough this behavior is COMPLETELY undocumented, the available task will, when\nsearching for a file, search not only the directories specified but will also\nsearch the parent directories of those specified, and even the grandparent\ndirectories.\n\nThat is, a task like this to determine whether a certain executeable is available:\n    <target name=\"findsvn\" depends=\"init\" >\n        <condition property=\"svn.available\">\n        <or>\n        <available file=\"svn.exe\" type=\"file\" >\n          <filepath>\n            <pathelement path=\"${env.PATH}\" />\n            <pathelement path=\"${env.Path}\" />\n            <pathelement path=\"${env.path}\" />\n          </filepath>\n        </available>\n        <available file=\"svn\" type=\"file\" >\n          <filepath>\n            <pathelement path=\"${env.PATH}\" />\n          </filepath>\n        </available>\n        </or>\n        </condition>\n    </target>\n\nWill say \"true\" EVEN WHEN THERE IS NO \"svn\" ON THE PATH, so long as there is a\nfile named \"svn\" or \"svn.exe\" in the parent or grandparent directory of\nsomething that is on the path.  The practical upshot of this for us is that our\nsystem logs get spammed with automount error messages by our automated build\nprocess, as one of the directories that gets searched by this target is \"/home\"\n(since we have \"/home/ccuser/bin\" on the path).\n\nI cannot imagine why anyone would want available to behave this way, and\ncertainly can't imagine making it this way by default, with no option to turn\noff the automatic searching of parent and grandparent directories.\n\nIt appears, however, that <available> has behaved this way for a long, long\ntime.  At the very least, this behavior should be documented.", "id": 89016, "time": "2006-05-11T01:41:58Z", "bug_id": 39549, "creation_time": "2006-05-11T01:41:58Z", "is_private": false}, {"count": 1, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "text": "This is indeed strange behaviour - parent and grandparent\nare searched but not greatgrandparent...\n\nThe code was added about four years ago, with the\ncomment asking for feedback. I have not checked the\ne-mail at the time, but there must have been a reason??\n\nI will ask on dev@ant, but in the meantime, I will\ndocument the behaviour and add an attribute to disable\nit.", "id": 93114, "time": "2006-09-06T20:21:10Z", "bug_id": 39549, "creation_time": "2006-09-06T20:21:10Z", "is_private": false}, {"count": 2, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "text": "I have changed <available> to only look in\nthe directories specified, and added an\noptional searchparents attribute to allow\nsearch *all* the parents.\nThanks for the report.", "id": 93672, "time": "2006-09-16T23:51:43Z", "bug_id": 39549, "creation_time": "2006-09-16T23:51:43Z", "is_private": false}]