[{"count": 0, "tags": [], "text": "Using Tomcat 6.0.33, our comet io servlet with apr 1.1.22, ssl enabled, on a system with moderate load, results in a crash-and-restart more or less identical to the one below at an apparently random interval of anywhere from a few minutes to a few hours. Unfortunately, we haven't yet found a way to reproduce this on demand.\n\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000010094b75, pid=3528, tid=892\n#\n# JRE version: 6.0_27-b07\n# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.2-b06 mixed mode windows-amd64 compressed oops)\n# Problematic frame:\n# C  [tcnative-1.dll+0x94b75]\n#\n# If you would like to submit a bug report, please visit:\n#   http://java.sun.com/webapps/bugreport/crash.jsp\n# The crash happened outside the Java Virtual Machine in native code.\n# See problematic frame for where to report the bug.\n#\n\n---------------  T H R E A D  ---------------\n\nCurrent thread (0x00000000069d4000):  JavaThread \"Message Feed 5\" daemon [_thread_in_native, id=892, stack(0x000000000af60000,0x000000000b060000)]\n\nsiginfo: ExceptionCode=0xc0000005, reading address 0x000000000000010c\n\nRegisters:\nRAX=0x0000000000000000, RBX=0x0000000005d77f10, RCX=0x000000000555ce40, RDX=0x00000000fffffff0\nRSP=0x000000000b05ed00, RBP=0x0000000000002328, RSI=0x00000000057d10d0, RDI=0x0000000005a97235\nR8 =0x000000d500920011, R9 =0x000000d600860012, R10=0x00000000c0000005, R11=0x00000000ffffffff\nR12=0x0000000005ee6000, R13=0x0000000000002328, R14=0x0000000000000017, R15=0x0000000000000000\nRIP=0x0000000010094b75, EFLAGS=0x0000000000010202\n\nTop of Stack: (sp=0x000000000b05ed00)\n0x000000000b05ed00:   0000000005d77f10 0000000000002328\n0x000000000b05ed10:   00000000057d10d0 0000000005a97235\n0x000000000b05ed20:   0000000000000023 0000000010094acc\n0x000000000b05ed30:   0000000005d77f10 00000000100967fa\n0x000000000b05ed40:   0000000005d77f10 0000000000002328\n0x000000000b05ed50:   00000000057d10d0 0000000005a97235\n0x000000000b05ed60:   0000000000000000 00000000010c185a\n0x000000000b05ed70:   0000000000000014 0000000005a97233\n0x000000000b05ed80:   000000000b05ed80 00000000069d4000\n0x000000000b05ed90:   0000000000002328 0000000005ee6000\n0x000000000b05eda0:   000000000b05eea8 0000000000002328\n0x000000000b05edb0:   0000000005ee6000 0000000000000000\n0x000000000b05edc0:   0000000005d77f10 00000000100995c5\n0x000000000b05edd0:   0000000000000000 0000000000000017\n0x000000000b05ede0:   0000000005ee6000 000000006d9f23d0\n0x000000000b05edf0:   000000001009949a 000000001000dcae \n\nInstructions: (pc=0x0000000010094b75)\n0x0000000010094b55:   00 00 44 8d 42 e1 c7 44 24 20 f4 02 00 00 e8 e8\n0x0000000010094b65:   7d f9 ff 41 bb ff ff ff ff 48 8b 83 80 00 00 00\n0x0000000010094b75:   44 3b 98 0c 01 00 00 74 1f 45 85 db 7e 3e 44 01\n0x0000000010094b85:   98 08 01 00 00 48 8b 83 80 00 00 00 44 29 98 0c \n\n\nRegister to memory mapping:\n\nRAX=0x0000000000000000 is an unknown value\nRBX=0x0000000005d77f10 is an unknown value\nRCX=0x000000000555ce40 is an unknown value\nRDX=0x00000000fffffff0 is an unknown value\nRSP=0x000000000b05ed00 is pointing into the stack for thread: 0x00000000069d4000\nRBP=0x0000000000002328 is an unknown value\nRSI=0x00000000057d10d0 is an unknown value\nRDI=0x0000000005a97235 is an unknown value\nR8 =0x000000d500920011 is an unknown value\nR9 =0x000000d600860012 is an unknown value\nR10=0x00000000c0000005 is an unknown value\nR11=0x00000000ffffffff is an unknown value\nR12=0x0000000005ee6000 is an unknown value\nR13=0x0000000000002328 is an unknown value\nR14=0x0000000000000017 is an unknown value\nR15=0x0000000000000000 is an unknown value\n\n\nStack: [0x000000000af60000,0x000000000b060000],  sp=0x000000000b05ed00,  free space=1019k\nNative frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)\nC  [tcnative-1.dll+0x94b75]  Java_org_apache_tomcat_jni_Proc_detach+0x7a545\n\n[error occurred during error reporting (printing native stack), id 0xc0000005]\n\nJava frames: (J=compiled Java code, j=interpreted, Vv=VM code)\nj  org.apache.tomcat.jni.Socket.sendbb(JII)I+0\nj  org.apache.coyote.http11.InternalAprOutputBuffer.flushBuffer()V+22\nj  org.apache.coyote.http11.InternalAprOutputBuffer$SocketOutputBuffer.doWrite(Lorg/apache/tomcat/util/buf/ByteChunk;Lorg/apache/coyote/Response;)I+51\nj  org.apache.coyote.http11.filters.IdentityOutputFilter.doWrite(Lorg/apache/tomcat/util/buf/ByteChunk;Lorg/apache/coyote/Response;)I+83\nj  org.apache.coyote.http11.InternalAprOutputBuffer.doWrite(Lorg/apache/tomcat/util/buf/ByteChunk;Lorg/apache/coyote/Response;)I+49\nj  org.apache.coyote.Response.doWrite(Lorg/apache/tomcat/util/buf/ByteChunk;)V+6\nj  org.apache.catalina.connector.OutputBuffer.realWriteBytes([BII)V+38\nj  org.apache.tomcat.util.buf.ByteChunk.append([BII)V+202\nj  org.apache.catalina.connector.OutputBuffer.writeBytes([BII)V+15\nj  org.apache.catalina.connector.OutputBuffer.write([BII)V+12\nj  org.apache.catalina.connector.CoyoteOutputStream.write([BII)V+7\nj  java.io.PrintStream.write([BII)V+16\nj  java.io.FilterOutputStream.write([B)V+5\nj  com.opentext.ecm.otsync.ws.ServletUtil.write(Ljavax/servlet/http/HttpServletResponse;Ljava/lang/String;)V+49\nj  com.opentext.ecm.otsync.ws.server.nio.CometFrontChannelResponseHandler.send(Ljava/util/Map;)V+30\nj  com.opentext.ecm.otsync.message.MessageService.onMessage(Lcom/opentext/ecm/otsync/message/Message;)V+16\nj  com.opentext.ecm.otsync.message.MessageService.onMessage(Ljava/lang/Object;)V+5\nj  com.opentext.ecm.otsync.util.MessageFeed.fireMessage(Ljava/lang/Object;)V+35\nj  com.opentext.ecm.otsync.util.MessageFeed.access$100(Lcom/opentext/ecm/otsync/util/MessageFeed;Ljava/lang/Object;)V+2\nj  com.opentext.ecm.otsync.util.MessageFeed$MessageFeedServiceThread.run()V+49\nj  java.lang.Thread.run()V+11\nv  ~StubRoutines::call_stub\n\n---------------  P R O C E S S  ---------------\n\nJava Threads: ( => current thread )\n  0x00000000069da800 JavaThread \"http-443-5\" daemon [_thread_blocked, id=2872, stack(0x000000000d800000,0x000000000d900000)]\n  0x00000000069d9800 JavaThread \"http-443-4\" daemon [_thread_in_native, id=2804, stack(0x000000000d700000,0x000000000d800000)]\n  0x00000000069d9000 JavaThread \"http-443-3\" daemon [_thread_blocked, id=2504, stack(0x000000000d600000,0x000000000d700000)]\n  0x00000000069d8000 JavaThread \"http-443-2\" daemon [_thread_blocked, id=3184, stack(0x000000000d500000,0x000000000d600000)]\n  0x00000000069d7800 JavaThread \"http-443-1\" daemon [_thread_blocked, id=2620, stack(0x000000000b460000,0x000000000b560000)]\n  0x00000000069d7000 JavaThread \"Message Feed 9\" daemon [_thread_blocked, id=4076, stack(0x000000000b360000,0x000000000b460000)]\n  0x00000000069d6000 JavaThread \"Message Feed 8\" daemon [_thread_blocked, id=756, stack(0x000000000b260000,0x000000000b360000)]\n  0x00000000069d5800 JavaThread \"Message Feed 7\" daemon [_thread_blocked, id=1868, stack(0x000000000b160000,0x000000000b260000)]\n  0x00000000069d4800 JavaThread \"Message Feed 6\" daemon [_thread_blocked, id=548, stack(0x000000000b060000,0x000000000b160000)]\n=>0x00000000069d4000 JavaThread \"Message Feed 5\" daemon [_thread_in_native, id=892, stack(0x000000000af60000,0x000000000b060000)]\n  0x00000000069d3000 JavaThread \"Message Feed 4\" daemon [_thread_blocked, id=2404, stack(0x000000000ae60000,0x000000000af60000)]\n  0x00000000069d2800 JavaThread \"Message Feed 3\" daemon [_thread_blocked, id=2740, stack(0x000000000ad60000,0x000000000ae60000)]\n  0x00000000069d1800 JavaThread \"Message Feed 2\" daemon [_thread_blocked, id=3132, stack(0x000000000ac60000,0x000000000ad60000)]\n  0x00000000069d1000 JavaThread \"Message Feed 1\" daemon [_thread_blocked, id=3792, stack(0x000000000aa00000,0x000000000ab00000)]\n  0x00000000069d0800 JavaThread \"Message Feed 0\" daemon [_thread_blocked, id=644, stack(0x000000000a8f0000,0x000000000a9f0000)]\n  0x000000000673a000 JavaThread \"ajp-8009-Acceptor-0\" daemon [_thread_in_native, id=432, stack(0x000000000a6e0000,0x000000000a7e0000)]\n  0x0000000006739800 JavaThread \"ajp-8009-CometPoller-7\" daemon [_thread_blocked, id=1820, stack(0x000000000a5e0000,0x000000000a6e0000)]\n  0x0000000006738800 JavaThread \"ajp-8009-CometPoller-6\" daemon [_thread_blocked, id=1852, stack(0x000000000a4e0000,0x000000000a5e0000)]\n  0x0000000006738000 JavaThread \"ajp-8009-CometPoller-5\" daemon [_thread_blocked, id=2688, stack(0x000000000a3e0000,0x000000000a4e0000)]\n  0x0000000006737000 JavaThread \"ajp-8009-CometPoller-4\" daemon [_thread_blocked, id=3336, stack(0x000000000a2e0000,0x000000000a3e0000)]\n  0x0000000006736800 JavaThread \"ajp-8009-CometPoller-3\" daemon [_thread_blocked, id=2768, stack(0x000000000a1e0000,0x000000000a2e0000)]\n  0x0000000006735800 JavaThread \"ajp-8009-CometPoller-2\" daemon [_thread_blocked, id=2000, stack(0x000000000a0e0000,0x000000000a1e0000)]\n  0x0000000006735000 JavaThread \"ajp-8009-CometPoller-1\" daemon [_thread_blocked, id=1888, stack(0x0000000009fe0000,0x000000000a0e0000)]\n  0x0000000006734800 JavaThread \"ajp-8009-CometPoller-0\" daemon [_thread_blocked, id=3464, stack(0x0000000009ee0000,0x0000000009fe0000)]\n  0x0000000006733800 JavaThread \"ajp-8009-Poller-7\" daemon [_thread_blocked, id=240, stack(0x0000000009de0000,0x0000000009ee0000)]\n  0x0000000006733000 JavaThread \"ajp-8009-Poller-6\" daemon [_thread_blocked, id=2892, stack(0x0000000009ce0000,0x0000000009de0000)]\n  0x0000000006732000 JavaThread \"ajp-8009-Poller-5\" daemon [_thread_blocked, id=1188, stack(0x0000000009be0000,0x0000000009ce0000)]\n  0x0000000006731800 JavaThread \"ajp-8009-Poller-4\" daemon [_thread_blocked, id=1424, stack(0x0000000009ae0000,0x0000000009be0000)]\n  0x0000000006730800 JavaThread \"ajp-8009-Poller-3\" daemon [_thread_blocked, id=1836, stack(0x00000000099e0000,0x0000000009ae0000)]\n  0x0000000006730000 JavaThread \"ajp-8009-Poller-2\" daemon [_thread_blocked, id=2520, stack(0x00000000098e0000,0x00000000099e0000)]\n  0x000000000672f000 JavaThread \"ajp-8009-Poller-1\" daemon [_thread_blocked, id=3356, stack(0x00000000097e0000,0x00000000098e0000)]\n  0x000000000672e800 JavaThread \"ajp-8009-Poller-0\" daemon [_thread_blocked, id=3920, stack(0x00000000096e0000,0x00000000097e0000)]\n  0x000000000672e000 JavaThread \"http-8080-1\" daemon [_thread_blocked, id=4008, stack(0x00000000095e0000,0x00000000096e0000)]\n  0x000000000672d000 JavaThread \"http-443-Acceptor-0\" daemon [_thread_in_native, id=2656, stack(0x00000000094e0000,0x00000000095e0000)]\n  0x000000000672c800 JavaThread \"http-443-CometPoller-7\" daemon [_thread_blocked, id=3208, stack(0x00000000093e0000,0x00000000094e0000)]\n  0x000000000672b800 JavaThread \"http-443-CometPoller-6\" daemon [_thread_in_native, id=464, stack(0x00000000092e0000,0x00000000093e0000)]\n  0x000000000672b000 JavaThread \"http-443-CometPoller-5\" daemon [_thread_in_native, id=1552, stack(0x00000000091e0000,0x00000000092e0000)]\n  0x00000000063f0000 JavaThread \"http-443-CometPoller-4\" daemon [_thread_in_native, id=200, stack(0x00000000090e0000,0x00000000091e0000)]\n  0x00000000063ef000 JavaThread \"http-443-CometPoller-3\" daemon [_thread_in_native, id=4032, stack(0x0000000008fe0000,0x00000000090e0000)]\n  0x00000000063ee800 JavaThread \"http-443-CometPoller-2\" daemon [_thread_in_native, id=2548, stack(0x0000000008ee0000,0x0000000008fe0000)]\n  0x00000000063ed800 JavaThread \"http-443-CometPoller-1\" daemon [_thread_in_native, id=588, stack(0x0000000008de0000,0x0000000008ee0000)]\n  0x00000000063ed000 JavaThread \"http-443-CometPoller-0\" daemon [_thread_blocked, id=264, stack(0x0000000008ce0000,0x0000000008de0000)]\n  0x00000000063ec000 JavaThread \"http-443-Poller-7\" daemon [_thread_blocked, id=1936, stack(0x0000000008be0000,0x0000000008ce0000)]\n  0x00000000063eb800 JavaThread \"http-443-Poller-6\" daemon [_thread_blocked, id=2640, stack(0x0000000008ae0000,0x0000000008be0000)]\n  0x00000000063eb000 JavaThread \"http-443-Poller-5\" daemon [_thread_blocked, id=3112, stack(0x00000000089e0000,0x0000000008ae0000)]\n  0x00000000063ea000 JavaThread \"http-443-Poller-4\" daemon [_thread_blocked, id=3724, stack(0x00000000088e0000,0x00000000089e0000)]\n  0x00000000063e9800 JavaThread \"http-443-Poller-3\" daemon [_thread_blocked, id=2840, stack(0x00000000087e0000,0x00000000088e0000)]\n  0x00000000063e8800 JavaThread \"http-443-Poller-2\" daemon [_thread_blocked, id=1516, stack(0x00000000086e0000,0x00000000087e0000)]\n  0x00000000063e8000 JavaThread \"http-443-Poller-1\" daemon [_thread_blocked, id=2576, stack(0x00000000085e0000,0x00000000086e0000)]\n  0x00000000063e7000 JavaThread \"http-443-Poller-0\" daemon [_thread_blocked, id=3144, stack(0x00000000084e0000,0x00000000085e0000)]\n  0x00000000063e6800 JavaThread \"http-8080-Acceptor-0\" daemon [_thread_in_native, id=1896, stack(0x00000000083e0000,0x00000000084e0000)]\n  0x00000000063e5800 JavaThread \"http-8080-Sendfile-0\" daemon [_thread_blocked, id=3188, stack(0x00000000082e0000,0x00000000083e0000)]\n  0x00000000063e5000 JavaThread \"http-8080-CometPoller-7\" daemon [_thread_blocked, id=2024, stack(0x00000000081e0000,0x00000000082e0000)]\n  0x00000000063e4800 JavaThread \"http-8080-CometPoller-6\" daemon [_thread_blocked, id=3980, stack(0x00000000080e0000,0x00000000081e0000)]\n  0x00000000063e3800 JavaThread \"http-8080-CometPoller-5\" daemon [_thread_blocked, id=2808, stack(0x0000000007fe0000,0x00000000080e0000)]\n  0x00000000063e3000 JavaThread \"http-8080-CometPoller-4\" daemon [_thread_blocked, id=1088, stack(0x0000000007ee0000,0x0000000007fe0000)]\n  0x00000000063e2000 JavaThread \"http-8080-CometPoller-3\" daemon [_thread_in_native, id=2972, stack(0x0000000007de0000,0x0000000007ee0000)]\n  0x00000000063e1800 JavaThread \"http-8080-CometPoller-2\" daemon [_thread_blocked, id=1032, stack(0x0000000007ce0000,0x0000000007de0000)]\n  0x00000000063e0800 JavaThread \"http-8080-CometPoller-1\" daemon [_thread_blocked, id=2336, stack(0x0000000007be0000,0x0000000007ce0000)]\n  0x000000000618b000 JavaThread \"http-8080-CometPoller-0\" daemon [_thread_blocked, id=4060, stack(0x0000000007ae0000,0x0000000007be0000)]\n  0x0000000005aab000 JavaThread \"http-8080-Poller-7\" daemon [_thread_blocked, id=3520, stack(0x00000000079e0000,0x0000000007ae0000)]\n  0x0000000005e90800 JavaThread \"http-8080-Poller-6\" daemon [_thread_blocked, id=1808, stack(0x00000000078e0000,0x00000000079e0000)]\n  0x00000000054de800 JavaThread \"http-8080-Poller-5\" daemon [_thread_blocked, id=2812, stack(0x00000000077e0000,0x00000000078e0000)]\n  0x00000000059cc000 JavaThread \"http-8080-Poller-4\" daemon [_thread_blocked, id=4004, stack(0x00000000076e0000,0x00000000077e0000)]\n  0x0000000005c71000 JavaThread \"http-8080-Poller-3\" daemon [_thread_blocked, id=2616, stack(0x00000000075e0000,0x00000000076e0000)]\n  0x00000000057c6000 JavaThread \"http-8080-Poller-2\" daemon [_thread_blocked, id=3204, stack(0x00000000074e0000,0x00000000075e0000)]\n  0x000000000582c800 JavaThread \"http-8080-Poller-1\" daemon [_thread_blocked, id=500, stack(0x00000000073e0000,0x00000000074e0000)]\n  0x0000000005d78800 JavaThread \"http-8080-Poller-0\" daemon [_thread_blocked, id=2464, stack(0x00000000072e0000,0x00000000073e0000)]\n  0x0000000005d7a800 JavaThread \"ContainerBackgroundProcessor[StandardEngine[Catalina]]\" daemon [_thread_blocked, id=1468, stack(0x00000000071e0000,0x00000000072e0000)]\n  0x0000000005ee1800 JavaThread \"GC Daemon\" daemon [_thread_blocked, id=760, stack(0x0000000007020000,0x0000000007120000)]\n  0x00000000003b1800 JavaThread \"Low Memory Detector\" daemon [_thread_blocked, id=1104, stack(0x0000000005150000,0x0000000005250000)]\n  0x00000000003b0000 JavaThread \"C2 CompilerThread1\" daemon [_thread_blocked, id=2612, stack(0x0000000005050000,0x0000000005150000)]\n  0x0000000000398800 JavaThread \"C2 CompilerThread0\" daemon [_thread_blocked, id=3644, stack(0x0000000004f50000,0x0000000005050000)]\n  0x0000000000397000 JavaThread \"Attach Listener\" daemon [_thread_blocked, id=1992, stack(0x0000000004e50000,0x0000000004f50000)]\n  0x0000000000394000 JavaThread \"Signal Dispatcher\" daemon [_thread_blocked, id=1472, stack(0x0000000004d50000,0x0000000004e50000)]\n  0x0000000000383000 JavaThread \"Finalizer\" daemon [_thread_blocked, id=2028, stack(0x0000000004a50000,0x0000000004b50000)]\n  0x0000000000381000 JavaThread \"Reference Handler\" daemon [_thread_blocked, id=2672, stack(0x0000000004950000,0x0000000004a50000)]\n  0x000000000046c000 JavaThread \"main\" [_thread_in_native, id=3620, stack(0x0000000000fb0000,0x00000000010b0000)]\n\nOther Threads:\n  0x000000000037a800 VMThread [stack: 0x0000000004850000,0x0000000004950000] [id=1860]\n  0x00000000003b8800 WatcherThread [stack: 0x0000000005250000,0x0000000005350000] [id=3504]\n\nVM state:not at safepoint (normal execution)\n\nVM Mutex/Monitor currently owned by a thread: None\n\nHeap\n def new generation   total 629120K, used 529350K [0x000000077ae00000, 0x00000007a58a0000, 0x00000007a58a0000)\n  eden space 559232K,  94% used [0x000000077ae00000, 0x000000079b2f18e8, 0x000000079d020000)\n  from space 69888K,   0% used [0x000000079d020000, 0x000000079d020000, 0x00000007a1460000)\n  to   space 69888K,   0% used [0x00000007a1460000, 0x00000007a1460000, 0x00000007a58a0000)\n tenured generation   total 1398144K, used 2512K [0x00000007a58a0000, 0x00000007fae00000, 0x00000007fae00000)\n   the space 1398144K,   0% used [0x00000007a58a0000, 0x00000007a5b14150, 0x00000007a5b14200, 0x00000007fae00000)\n compacting perm gen  total 22208K, used 22125K [0x00000007fae00000, 0x00000007fc3b0000, 0x0000000800000000)\n   the space 22208K,  99% used [0x00000007fae00000, 0x00000007fc39b6c8, 0x00000007fc39b800, 0x00000007fc3b0000)\nNo shared spaces configured.\n\nCode Cache  [0x00000000010b0000, 0x0000000001320000, 0x00000000040b0000)\n total_blobs=608 nmethods=302 adapters=259 free_code_cache=48393408 largest_free_block=489088\n\nDynamic libraries:\n0x0000000140000000 - 0x000000014001c000 \tD:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\bin\\Tomcat6.exe\n0x0000000077160000 - 0x0000000077309000 \tC:\\Windows\\SYSTEM32\\ntdll.dll\n0x0000000076c90000 - 0x0000000076daf000 \tC:\\Windows\\system32\\kernel32.dll\n0x000007fefd820000 - 0x000007fefd88c000 \tC:\\Windows\\system32\\KERNELBASE.dll\n0x000007feff140000 - 0x000007feff21b000 \tC:\\Windows\\system32\\ADVAPI32.dll\n0x000007feff220000 - 0x000007feff2bf000 \tC:\\Windows\\system32\\msvcrt.dll\n0x000007fefdf90000 - 0x000007fefdfaf000 \tC:\\Windows\\SYSTEM32\\sechost.dll\n0x000007fefdfb0000 - 0x000007fefe0dd000 \tC:\\Windows\\system32\\RPCRT4.dll\n0x000007fefe240000 - 0x000007fefefc8000 \tC:\\Windows\\system32\\SHELL32.dll\n0x000007fefe0e0000 - 0x000007fefe151000 \tC:\\Windows\\system32\\SHLWAPI.dll\n0x000007fefeff0000 - 0x000007feff057000 \tC:\\Windows\\system32\\GDI32.dll\n0x0000000077060000 - 0x000000007715a000 \tC:\\Windows\\system32\\USER32.dll\n0x000007fefe160000 - 0x000007fefe16e000 \tC:\\Windows\\system32\\LPK.dll\n0x000007fefe170000 - 0x000007fefe239000 \tC:\\Windows\\system32\\USP10.dll\n0x000007feff060000 - 0x000007feff08e000 \tC:\\Windows\\system32\\IMM32.DLL\n0x000007feff2c0000 - 0x000007feff3c9000 \tC:\\Windows\\system32\\MSCTF.dll\n0x000000006d7f0000 - 0x000000006dfa8000 \tD:\\Program Files\\Java\\jre6\\bin\\server\\jvm.dll\n0x000007fef9140000 - 0x000007fef917b000 \tC:\\Windows\\system32\\WINMM.dll\n0x000000006d760000 - 0x000000006d76e000 \tD:\\Program Files\\Java\\jre6\\bin\\verify.dll\n0x000000006d3b0000 - 0x000000006d3d7000 \tD:\\Program Files\\Java\\jre6\\bin\\java.dll\n0x000000006d7b0000 - 0x000000006d7c2000 \tD:\\Program Files\\Java\\jre6\\bin\\zip.dll\n0x000000006d540000 - 0x000000006d54a000 \tD:\\Program Files\\Java\\jre6\\bin\\management.dll\n0x0000000010000000 - 0x0000000010125000 \tD:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\bin\\tcnative-1.dll\n0x0000000077320000 - 0x0000000077327000 \tC:\\Windows\\system32\\PSAPI.DLL\n0x000007fefdd80000 - 0x000007fefddcd000 \tC:\\Windows\\system32\\WS2_32.dll\n0x000007feff130000 - 0x000007feff138000 \tC:\\Windows\\system32\\NSI.dll\n0x000007fefce10000 - 0x000007fefce65000 \tC:\\Windows\\system32\\MSWSOCK.dll\n0x000007fefcdf0000 - 0x000007fefce07000 \tC:\\Windows\\system32\\CRYPTSP.dll\n0x000007fefcca0000 - 0x000007fefcce7000 \tC:\\Windows\\system32\\rsaenh.dll\n0x000007fefd4b0000 - 0x000007fefd4bf000 \tC:\\Windows\\system32\\CRYPTBASE.dll\n0x000007fefc7d0000 - 0x000007fefc7d7000 \tC:\\Windows\\System32\\wshtcpip.dll\n0x000000006d600000 - 0x000000006d617000 \tD:\\Program Files\\Java\\jre6\\bin\\net.dll\n0x000007fefcdb0000 - 0x000007fefcdb7000 \tC:\\Windows\\System32\\wship6.dll\n0x000007fefcaa0000 - 0x000007fefcafb000 \tC:\\Windows\\system32\\DNSAPI.dll\n0x000007fefbb40000 - 0x000007fefbb67000 \tC:\\Windows\\system32\\IPHLPAPI.DLL\n0x000007fefbb30000 - 0x000007fefbb3b000 \tC:\\Windows\\system32\\WINNSI.DLL\n0x000007fefd990000 - 0x000007fefdb93000 \tC:\\Windows\\system32\\ole32.dll\n0x000007fefd580000 - 0x000007fefd58f000 \tC:\\Windows\\system32\\profapi.dll\n0x000007fefc260000 - 0x000007fefc275000 \tC:\\Windows\\system32\\NLAapi.dll\n0x000007fefaee0000 - 0x000007fefaef5000 \tC:\\Windows\\system32\\napinsp.dll\n0x000007fefaf10000 - 0x000007fefaf1b000 \tC:\\Windows\\System32\\winrnr.dll\n0x000007fefaf40000 - 0x000007fefaf48000 \tC:\\Windows\\system32\\rasadhlp.dll\n0x000007fefb930000 - 0x000007fefb983000 \tC:\\Windows\\System32\\fwpuclnt.dll\n0x000007feed220000 - 0x000007feed345000 \tC:\\Windows\\system32\\dbghelp.dll\n\nVM Arguments:\njvm_args: -Dcatalina.home=D:\\Program Files\\Apache Software Foundation\\Tomcat 6.0 -Dcatalina.base=D:\\Program Files\\Apache Software Foundation\\Tomcat 6.0 -Djava.endorsed.dirs=D:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\endorsed -Djava.io.tmpdir=D:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\temp -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=D:\\Program Files\\Apache Software Foundation\\Tomcat 6.0\\conf\\logging.properties -Xms2048m -Xmx2048m \njava_command: <unknown>\nLauncher Type: generic\n\nEnvironment Variables:\nPATH=C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;\nUSERNAME=WLECMSYNC01$\nOS=Windows_NT\nPROCESSOR_IDENTIFIER=Intel64 Family 6 Model 26 Stepping 5, GenuineIntel\n\n\n\n---------------  S Y S T E M  ---------------\n\nOS: Windows NT 6.1 , 64 bit Build 7601 Service Pack 1\n\nCPU:total 1 (1 cores per cpu, 1 threads per core) family 6 model 26 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt\n\nMemory: 4k page, physical 4193848k(2491232k free), swap 8385848k(5182188k free)\n\nvm_info: Java HotSpot(TM) 64-Bit Server VM (20.2-b06) for windows-amd64 JRE (1.6.0_27-b07), built on Jul 19 2011 01:08:22 by \"java_re\" with MS VC++ 8.0 (VS2005)\n\ntime: Sat Nov 05 05:43:09 2011\nelapsed time: 207 seconds", "attachment_id": null, "bug_id": 52153, "id": 151288, "time": "2011-11-08T14:05:20Z", "creator": "jwilkins@opentext.com", "creation_time": "2011-11-08T14:05:20Z", "is_private": false}, {"count": 1, "tags": [], "creator": "jwilkins@opentext.com", "attachment_id": null, "text": "We've confirmed the following:\n-only happens with ssl and apr\n-occurs (but not always) when a client's request times out after the response data is written, but before flush() or close() is called (we can reproduce relatively easily by forcing the writing thread to wait before closing the stream).", "id": 151525, "time": "2011-11-15T18:56:58Z", "bug_id": 52153, "creation_time": "2011-11-15T18:56:58Z", "is_private": false}, {"count": 2, "tags": [], "creator": "jwilkins@opentext.com", "attachment_id": null, "id": 151613, "time": "2011-11-17T21:00:12Z", "bug_id": 52153, "creation_time": "2011-11-17T21:00:12Z", "is_private": false, "text": "This problem appears to be resolved by building tcnative-1.dll with the latest APR lib (1.4.5), instead of the 1.3.12 used in the distributed build.\n\nWe will be testing this fix further in the coming days."}, {"count": 3, "tags": [], "creator": "jwilkins@opentext.com", "attachment_id": null, "text": "Negative on the apr upgrade fix--crashes still happening.", "id": 151702, "time": "2011-11-21T16:40:10Z", "bug_id": 52153, "creation_time": "2011-11-21T16:40:10Z", "is_private": false}, {"count": 4, "tags": [], "text": "Can you add the following line to conf/catalina.properties:\norg.apache.catalina.connector.RECYCLE_FACADES=true\n\nThat setting will prevent applications from writing to recycled request/response objects.", "attachment_id": null, "bug_id": 52153, "id": 151714, "time": "2011-11-22T10:30:16Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2011-11-22T10:30:16Z", "is_private": false}, {"count": 5, "tags": [], "text": "Thanks, testing RECYCLE_FACADES=true now. Initial tests are promising, but it will take production deployment to be sure. Will let you know.", "attachment_id": null, "bug_id": 52153, "id": 151722, "time": "2011-11-22T13:58:07Z", "creator": "jwilkins@opentext.com", "creation_time": "2011-11-22T13:58:07Z", "is_private": false}, {"count": 6, "tags": [], "creator": "jwilkins@opentext.com", "attachment_id": null, "text": "Test failed--the crash still happens with this setting enabled.", "id": 151725, "time": "2011-11-22T14:45:21Z", "bug_id": 52153, "creation_time": "2011-11-22T14:45:21Z", "is_private": false}, {"count": 7, "tags": [], "creator": "jtm@mostlyharmless.dk", "attachment_id": null, "text": "Just to confirm that this also happens on:\n\n---8<---\nOS: Windows 2000 Build 2195 Service Pack 4\n\nCPU:total 4 (1 cores per cpu, 2 threads per core) family 15 model 2 stepping 5, cmov, cx8, fxsr, mmx, sse, sse2, ht\n\nMemory: 4k page, physical 3964436k(1379056k free), swap 7194332k(2302652k free)\n\nvm_info: Java HotSpot(TM) Client VM (20.1-b02) for windows-x86 JRE (1.6.0_26-b03), built on May  4 2011 00:50:59 by \"java_re\" with MS VC++ 7.1 (VS2003)\n---8<---\n\nI can attach a JVM dump if you want.", "id": 152142, "time": "2011-12-13T13:40:37Z", "bug_id": 52153, "creation_time": "2011-12-13T13:40:37Z", "is_private": false}, {"count": 8, "tags": [], "text": "Possible dupe of bug #51813?\n\nIt looks like an OutputStream is being retained by some component and used after it should no longer be used (i.e. MessageFeedServiceThread).\n\nPlease re-try with latest Tomcat and tcnative.", "attachment_id": null, "bug_id": 52153, "id": 171064, "time": "2013-11-05T16:58:41Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-11-05T16:58:41Z", "is_private": false}, {"count": 9, "tags": [], "bug_id": 52153, "attachment_id": null, "text": "Due to the age of this bug, and the fact that it looks like it is the same issue as bug #51813 (which has been fixed). I'm marking this as WORKSFORME. Please REOPEN this bug if it can be reproduced using the latest version of tcnative (currently 1.1.29).", "id": 171850, "time": "2013-12-20T03:31:53Z", "creator": "chris@christopherschultz.net", "creation_time": "2013-12-20T03:31:53Z", "is_private": false}]