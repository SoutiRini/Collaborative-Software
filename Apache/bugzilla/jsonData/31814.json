[{"count": 0, "tags": [], "bug_id": 31814, "attachment_id": null, "text": "If a task that concatenates files is called multiple times (could be because\nmultiple tasks depend on that task) the intended content of that file is\nreplicated as many times. This is not because append is \"on\", this seems to be\nbecause the content of Concat.sourceFiles still has the list of files to\nconcatenate during a second execution and the content from Concat.sources is\nre-added again.", "id": 65386, "time": "2004-10-20T21:09:29Z", "creator": "elara@smartops.com", "creation_time": "2004-10-20T21:09:29Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 31814, "text": "Can you give an example build.xml that shows the\nproblem?", "id": 65420, "time": "2004-10-21T08:51:57Z", "creator": "peterreilly@apache.org", "creation_time": "2004-10-21T08:51:57Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 31814, "text": "Created attachment 13168\ntestcase", "id": 65434, "time": "2004-10-21T12:47:08Z", "creator": "elara@smartops.com", "creation_time": "2004-10-21T12:47:08Z", "is_private": false, "attachment_id": 13168}, {"count": 3, "tags": [], "bug_id": 31814, "text": "If you run the attached test case it will explain how to reproduce the problem.\n\nAs a workaround you may set a property on the target that does the concatenation\nand prevent the execution of that target if that property is set:\n<target name=\"doConcat\" unless=\"doConcat.done\">\n...\n<property name=\"doConcat.done\" value=\"true\"/>\n</target>\n", "id": 65435, "time": "2004-10-21T12:52:17Z", "creator": "elara@smartops.com", "creation_time": "2004-10-21T12:52:17Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 31814, "attachment_id": null, "text": "Thanks, This does show the problem.\n\nA work-around, pending a fix, is to make a target test1_2:\n<target name=\"test1_2\" depends=\"test1,test2\"/>\n\nand use that instead of ant test1 test2\nThis will cause the doConcat task to be only run once.\n\n", "id": 65437, "time": "2004-10-21T13:23:09Z", "creator": "peterreilly@apache.org", "creation_time": "2004-10-21T13:23:09Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 31814, "text": "I have commited a fix for this, it will be in the\nnext release of ant.", "id": 65441, "time": "2004-10-21T13:58:42Z", "creator": "peterreilly@apache.org", "creation_time": "2004-10-21T13:58:42Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 31814, "attachment_id": null, "text": "That workaround works fine, thank you.", "id": 65442, "time": "2004-10-21T14:33:36Z", "creator": "elara@smartops.com", "creation_time": "2004-10-21T14:33:36Z", "is_private": false}]