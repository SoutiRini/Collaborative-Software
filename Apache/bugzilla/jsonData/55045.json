[{"count": 0, "tags": [], "text": "Created attachment 30361\npatch to replace gets() with fgets() in test_find.c\n\nHello All,\n\n   In httpd-2.4.3, directory 'test', files 'test_parser.c' and\n'test_find.c', I found a calls to gets() which by definition\nis unsafe, so I replaced the calls with fgets() equivalents.\n\nThe patch files are listed below (in diff -u format):\n\n--- test_find.c.orig    2013-05-29 19:22:13.112875876 -0700\n+++ test_find.c 2013-05-29 19:26:27.226873980 -0700\n@@ -64,11 +64,11 @@\n     p = apr_pool_alloc_init();\n \n     printf(\"Enter field value to find items within:\\n\");\n-    if (!gets(line))\n+    if (!fgets(line, sizeof(line), stdin))\n         exit(0);\n \n     printf(\"Enter search item:\\n\");\n-    while (gets(tok)) {\n+    while (fgets(tok, sizeof(tok), stdin)) {\n         printf(\"  [%s] == %s\\n\", tok, ap_find_list_item(p, line, tok)\n                                   ? \"Yes\" : \"No\");\n         printf(\"Enter search item:\\n\");\n\t\t \n======================================================================\n\n--- test_parser.c.orig  2013-05-29 19:26:43.851869923 -0700\n+++ test_parser.c       2013-05-29 19:27:17.185871805 -0700\n@@ -64,7 +64,7 @@\n \n     p = apr_pool_alloc_init();\n \n-    while (gets(instr)) {\n+    while (fgets(instr, sizeof(instr), stdin)) {\n         printf(\"  [%s] ==\\n\", instr);\n         field = instr;\n         while ((newstr = ap_get_list_item(p, &field)) != NULL)\n\t\t \nI'm attaching the patch files to this e-mail.\n\nBill Parker (wp02855 at gmail dot com)", "attachment_id": 30361, "id": 167571, "creator": "wp02855@gmail.com", "time": "2013-06-01T20:47:46Z", "bug_id": 55045, "creation_time": "2013-06-01T20:47:46Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 55045, "attachment_id": 30362, "is_private": false, "id": 167572, "time": "2013-06-01T20:48:31Z", "creator": "wp02855@gmail.com", "creation_time": "2013-06-01T20:48:31Z", "text": "Created attachment 30362\npatch to replace gets() with fgets() in test_parser.c"}, {"count": 2, "tags": [], "bug_id": 55045, "attachment_id": 30361, "is_private": false, "id": 171894, "time": "2013-12-23T13:14:21Z", "creator": "christophe.jaillet@wanadoo.fr", "creation_time": "2013-12-23T13:14:21Z", "text": "Comment on attachment 30361\npatch to replace gets() with fgets() in test_find.c\n\n>--- test_find.c.orig\t2013-05-29 19:22:13.112875876 -0700\n>+++ test_find.c\t2013-05-29 19:26:27.226873980 -0700\n>@@ -64,11 +64,11 @@\n>     p = apr_pool_alloc_init();\n> \n>     printf(\"Enter field value to find items within:\\n\");\n>-    if (!gets(line))\n>+    if (!fgets(line, sizeof(line), stdin))\n>         exit(0);\n> \n>     printf(\"Enter search item:\\n\");\n>-    while (gets(tok)) {\n>+    while (fgets(tok, sizeof(tok), stdin)) {\n>         printf(\"  [%s] == %s\\n\", tok, ap_find_list_item(p, line, tok)\n>                                   ? \"Yes\" : \"No\");\n>         printf(\"Enter search item:\\n\");"}]