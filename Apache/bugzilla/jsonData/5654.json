[{"count": 0, "tags": [], "bug_id": 5654, "attachment_id": null, "is_private": false, "id": 9253, "time": "2002-01-02T04:11:21Z", "creator": "adejanovski@hotmail.com", "creation_time": "2002-01-02T04:11:21Z", "text": "When I try to render a page defined as follows : \n\n<fo:simple-page-master master-name=\"A4paysage\"\n           page-width=\"297mm\"  page-height=\"210mm\"\n          margin-top=\"0.5in\"  margin-bottom=\"0.5in\"\n          margin-left=\"0.5in\" margin-right=\"0.5in\">\n\t\t<fo:region-before extent=\"0cm\"/>      \n    \t\t<fo:region-body margin-top=\"0cm\" margin-bottom=\"0in\" margin-left=\"0cm\"/>\n\t\t<fo:region-after  extent=\"0in\"/>\n        </fo:simple-page-master>\n\nThe PDF renderer works fine but the PS renderer generates an unusable portrait page.\nDoes the ps renderer use the width and height defined in the page-master or is\nit ignored ?"}, {"count": 1, "tags": [], "creator": "jeremias.maerki@outline.ch", "attachment_id": null, "text": "PostScript does not care about \"portrait\" or \"landscape\". These facets are \noften device-dependent. Device-dependent stuff has not been adressed yet in the \nPostScript renderer. Of course, there is, for example, no \"BoundingBox\" \nor \"PageOrientation\" generated in the DSC comments at the moment, so Viewers or \nPrinters may have problems deciding what paper to choose. If you can force the \noutput device to use landscape (ex. GhostView) then the document will be \ndisplayed correctly.\n\nFor the device-dependent stuff I currently patch each PostScript file adding \nsome commands at the appropriate places that setup the output device (paper bin \netc.). Since PS renderer generates ASCII-type Postscript files and most DSC-\nComments, this is pretty simple and fast.", "id": 9256, "time": "2002-01-02T04:57:30Z", "bug_id": 5654, "creation_time": "2002-01-02T04:57:30Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 5654, "attachment_id": null, "is_private": false, "id": 33696, "time": "2003-03-24T14:53:44Z", "creator": "jsightler@eximtechnologies.com", "creation_time": "2003-03-24T14:53:44Z", "text": "Jeremias Maerki <jeremias.maerki@outline.ch> (email seemingly no longer valid)\nmentioned on June 17, 2002:\n\n>         write(\"%%Page: \" + page.getNumber() + \" \" + page.getNumber());\n>         if (page.getHeight() > page.getWidth()) {\n>             write(\"%%PageBoundingBox: 0 0 \" + pw + \" \" + ph);\n>             write(\"%%PageOrientation: Portrait\");\n>         } else {\n>             write(\"%%PageBoundingBox: 0 0 \" + ph + \" \" + pw);\n>             write(\"%%PageOrientation: Landscape\");\n>         }\n>         write(\"%%BeginPageSetup\");\n\nCould fix this problem.\n\nIs there any reason why a patch such as this shouldn't be applied?\n\nWe really need Landscape rendering here (of course, we'll just patch it\nourselves for the time being, but it would be nice if there were an \"official\" fix)."}, {"count": 3, "tags": [], "creator": "jsightler@eximtechnologies.com", "attachment_id": null, "text": "Ok, now that I've been hit with a cluestick (and noted that the fix I mentioned\nbelow won't work for some cases, included the one that I am using), I've done\nsome hacking. :-)\n\nI used fop.sh test.fo -awt to display the text, then I printed it to a file in\nlandscape mode.  I noticed that this did some very generic things to make\nlandscape work, so I tried to incorporate them into FOP.\n\nThat didn't totally work, I got a mirror image of what I wanted.  So I did some\nmore PostScript Googling/Hacking and came up with some slight changes to fix the\nmirror effect.\n\nThe following works for me, but I would appreciate it if someone who is a bit\nmore clueful about Postscript could point out any potential pitfalls:\n\n        write(\"%%Page: \" + page.getNumber() + \" \" + page.getNumber());\n        if (page.getHeight() > page.getWidth()) {\n            // Assume Portrait mode and do nothing (relying on the defaults)\n            write(\"%%PageBoundingBox: 0 0 \" +\n                Math.round(page.getWidth() / 1000f) + \" \" +\n                Math.round(page.getHeight() / 1000f));\n        } else {\n            write(\"/pgSave save def\");\n            write(\"0 0.0 translate 1 -1 scale[72 300 div 0 0 72 300 div 0\n0]concat\");\n            write(\"1 -1 scale\");\n            write(\"gsave\");\n            write(\"[0.0 -4.166666666666667 4.166666666666667 0.0 0.0\n3300.0000000000005] concat\");\n            write(\"newpath\");\n            write(\"%%PageBoundingBox: 0 0 \" +\n                Math.round(page.getHeight() / 1000f) + \" \" +\n                Math.round(page.getWidth() / 1000f));\n        }\n        write(\"%%BeginPageSetup\");\n\n", "id": 33703, "time": "2003-03-24T17:02:15Z", "bug_id": 5654, "creation_time": "2003-03-24T17:02:15Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 5654, "attachment_id": null, "is_private": false, "id": 33704, "time": "2003-03-24T17:03:46Z", "creator": "jsightler@eximtechnologies.com", "creation_time": "2003-03-24T17:03:46Z", "text": "Updated patch... forgot to flip the height/width properties:\n\n        write(\"%%Page: \" + page.getNumber() + \" \" + page.getNumber());\n        if (page.getHeight() > page.getWidth()) {\n            // Assume Portrait mode and do nothing (relying on the defaults)\n            write(\"%%PageBoundingBox: 0 0 \" +\n                Math.round(page.getWidth() / 1000f) + \" \" +\n                Math.round(page.getHeight() / 1000f));\n        } else {\n            write(\"/pgSave save def\");\n            write(\"0 0.0 translate 1 -1 scale[72 300 div 0 0 72 300 div 0\n0]concat\");\n            write(\"1 -1 scale\");\n            write(\"gsave\");\n            write(\"[0.0 -4.166666666666667 4.166666666666667 0.0 0.0\n3300.0000000000005] concat\");\n            write(\"newpath\");\n            write(\"%%PageBoundingBox: 0 0 \" +\n                Math.round(page.getHeight() / 1000f) + \" \" +\n                Math.round(page.getWidth() / 1000f));\n        }\n        write(\"%%BeginPageSetup\");\n"}, {"count": 5, "tags": [], "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "attachment_id": null, "id": 156854, "creator": "gadams@apache.org", "time": "2012-04-01T13:53:55Z", "bug_id": 5654, "creation_time": "2012-04-01T13:53:55Z", "is_private": false}]