[{"count": 0, "attachment_id": null, "bug_id": 32527, "text": "If I have log4j.xml  file in calss path and don't have any dom implementation.\n\nIt would be nice to catch java.lang.NoClassDefFoundError error and not load \nxml file at all.\nnow it just want initialize the program at all. And Java error mesage is not \nso descriptive as usual. So Untill I caught the exception myself I could not \nfigure out why and what call is missing.\n\nThis is how this looks:\nException in thread \"main\" java.lang.NoClassDefFoundError\n        at uut.TastCase01.method1(TastCase01.java:61)\n        at uut.TastCase01.main(TastCase01.java:45)\n\n\nI'm using: log4j-1.2.9.jar, jdk1.3.1_11, Windows XP,\n\nAlso I have -Dlog4j.configuration=log4jJour.xml\nand log4jJour.xml is in calss path.\n\nIf I have:\n} catch (NoClassDefFoundError e) {\n  e.printStackTrace();\n}\n\nthen I could see:\njava.lang.NoClassDefFoundError: org/w3c/dom/Node\n        at java.lang.Class.newInstance0(Native Method)\n        at java.lang.Class.newInstance(Class.java:232)\n        at \norg.apache.log4j.helpers.OptionConverter.instantiateByClassNameOptionConverter.\njava:319)\n        at org.apache.log4j.helpers.OptionConverter.selectAndConfigure\n(OptionConverter.java:449\n)\n        at org.apache.log4j.LogManager.<clinit>(LogManager.java:113)\n        at org.apache.log4j.Logger.getLogger(Logger.java:107)\n        at net.sf.jour.util.PropertiesBase.<clinit>(PropertiesBase.java:47)\n\n-- \nVlad\n\nps\n\npublic class PropertiesBase  {\n\n/*line 47*/\tprotected static final Logger log = Logger.getLogger\n(PropertiesBase.class);", "id": 67916, "time": "2004-12-04T01:57:46Z", "creator": "skarzhevskyy@gmail.com", "creation_time": "2004-12-04T01:57:46Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "hoju@visi.com", "text": "I can sort of see your point here that Log4j should do something more useful\nthan allow a NoClassDefFoundError or the like to propogate to the user and kill\nthe app.  Or, at a minimum, provide a clear stacktrace showing the reason for\nthe error as you have below.  However, I would also argue that you have made a\nconscious choice to use an XML config file and ought to also be expected to make\nsure that the standard XML libraries are in the classpath as well.  What else is\ngoing to parse an XML file?\n\nYou can avoid all this by simply using a Properties file.\n\nIn any case, this is not likely to be addressed in Log4j-1.2.x since Log4j-1.3\nis now the actively developed version.  I don't see this as super high priority,\nbut it's not a bad idea.  If you provide a patch, this will get addressed much\nmore quickly.  And keep in mind that the JoranConfigurator is now the default\nXML config file parser for Log4j, not DOMConfigurator which is deprecated.  Just\ncheck out the HEAD branch of the logging-log4j module and create a patch against\nthat.\n\nJake", "id": 67925, "time": "2004-12-04T07:07:06Z", "bug_id": 32527, "creation_time": "2004-12-04T07:07:06Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "The case was simple I forgot to add dom implementation to calss path because I \nwas testing in 1.4 initialy.\nThen I started to test in 1.3 and had been very disappointed because My app \nwas realy complex and calsses was instrumented using javassist under java 1.4 \nand then run under 1.3.\nSo I was thinking that somthing wron happens during instumentation and so on.\nSpend hell of the time debudin instrumentation and removing all 1.4 classes \nfrom my app that was not realy used in the application but did not know that \nuntill I fixed it all.\nAnd finaly I decided to catch exception in one class and then call my main \nclass. \n\nAny way I submited the bug because this is: \"not a bad idea\"\n\n--\nVlad", "is_private": false, "bug_id": 32527, "id": 67967, "time": "2004-12-06T03:53:20Z", "creator": "skarzhevskyy@gmail.com", "creation_time": "2004-12-06T03:53:20Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 32527, "text": "Added try/catch block in LogManager's default initialization code in rev 568761.", "id": 107065, "time": "2007-08-22T15:39:59Z", "creator": "carnold@apache.org", "creation_time": "2007-08-22T15:39:59Z", "is_private": false, "attachment_id": null}]