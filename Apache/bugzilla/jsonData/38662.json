[{"count": 0, "tags": [], "creator": "ddkilzer@kilzer.net", "text": "Summary:\n\nThe SMTPAppender class does not output any newline characters between stack\ntrace lines when appending the stack trace to the end of a mail message.\n\nSteps to reproduce:\n\n1. Configure log4j.xml to use the SMTPAppender to send a message.\n2. Run java code that will generate a log event that will be sent by the\nconfigured SMTPAppender.\n\nExpected results:\n\nThe stack trace in the message should have newlines between stack trace lines:\n\njava.net.ConnectException: Connection refused: connect\n\tat java.net.PlainSocketImpl.socketConnect(Native Method)\n\tat java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:305)\n\tat java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:171)\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:158)\n\tat java.net.Socket.connect(Socket.java:452)\n\tat java.net.Socket.connect(Socket.java:402)\n\tat java.net.Socket.<init>(Socket.java:309)\n\tat java.net.Socket.<init>(Socket.java:124)\n\nActual results:\n\nThe stack trace in the message does NOT have newlines between stack trace lines\n(looks much worse when viewing in a mail client):\n\njava.net.ConnectException: Connection refused: connect\tat\njava.net.PlainSocketImpl.socketConnect(Native Method)\tat\njava.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:305)\tat\njava.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:171)\tat\njava.net.PlainSocketImpl.connect(PlainSocketImpl.java:158)\tat\njava.net.Socket.connect(Socket.java:452)\tat\njava.net.Socket.connect(Socket.java:402)\tat\njava.net.Socket.<init>(Socket.java:309)\tat java.net.Socket.<init>(Socket.java:124)\n\nRegression:\n\nTested on log4j-1.2.8 and log4j-1.2.13.  Both of them exhibit the \"actual\nbehavior\" documented above.", "id": 85831, "time": "2006-02-15T22:21:41Z", "bug_id": 38662, "creation_time": "2006-02-15T22:21:41Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 38662, "attachment_id": 17705, "text": "Created attachment 17705\nPatch v1\n\nPatch v1 fixes the issue for me when log4j is built locally.\n\nNote that the email client I'm using happens to be MS Outlook XP (which makes\ninteresting choices for where to put line breaks), but I still think the stack\ntrace should have newlines after each line.", "id": 85832, "time": "2006-02-15T22:25:12Z", "creator": "ddkilzer@kilzer.net", "creation_time": "2006-02-15T22:25:12Z", "is_private": false}, {"count": 2, "tags": [], "creator": "carnold@apache.org", "attachment_id": null, "id": 92818, "time": "2006-08-31T19:57:54Z", "bug_id": 38662, "creation_time": "2006-08-31T19:57:54Z", "is_private": false, "text": "Not sure that it really should be Layout.LINE_SEP or '\\n', but log4j 1.3 already had the problem fixed using \nLINE_SEP so stuck with that.  Committed in log4j 1.2 branch in rev 439036."}]