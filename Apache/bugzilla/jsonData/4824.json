[{"count": 0, "tags": [], "creator": "wes@wesbarris.com", "text": "jakarta-tomcat-4.0.1-src doesn't appear to build properly according to\nthe included BUILDING.txt instructions.  I have downloaded the following\npackages onto a Solaris 7 system:\n\njakarta-ant-1.4.1/\njakarta-ant-1.4.1-optional.jar\njakarta-servletapi-4/\njakarta-tomcat-4.0.1-src/\njaxp-1.1/\nxerces-1_4_3/\n\n\nThe following statement is found in jakarta-tomcat-4.0.1-src/BUILDING.txt:\n\n----------------------------------------------------------------------\n(6) Steps (7) - (17) are optional, but are necessary to build a complete binary\n    distribution of Tomcat 4.0. Set the \"full.dist\" property to \"on\" in the\n    build.properties file (see step (17)) to build a complete distribution.\n    Regular contributors to Tomcat are encouraged to use the complete build\n    option.\n----------------------------------------------------------------------\n\nHowever, it appears that both steps 16 and 17 are necessary:\n\n----------------------------------------------------------------------\n(16) Customize Build Properties For This Subproject\n\nMost Jakarta subprojects allow you to customize Ant properties (with default\nvalues defined in the \"build.xml\" file.  This is done by creating a text file\nnamed \"build.properties\" in the source distribution directory (for property\ndefinitions local to this subproject) and/or your user home directory (for\nproperty definitions shared across subprojects).  You can use the included\n\"build.properties.sample\" file as a starting point for this.\n\nTomcat has many external dependencies that are satisfied by configuring\nappropriate values in your <code>build.properties</code> file.  The easiest\nway to satisfy these dependencies is to copy the \"build.properties.sample\"\nfile (in the top-level Tomcat source directory) to \"build.properties\", and\nthen edit it to suit your environment.  On Unix, this would be done as:\n\n  cd ${tomcat.source}\n  cp build.properties.sample build.properties\n  emacs build.properties\n----------------------------------------------------------------------\n\nThe instructions do not explain how to customize \"build.properties\".\nAll the instructions say is \"emacs build.properties\".  This really\ndoesn't provide any useful information.  Am I supposed to comment\ncertain lines out?\n\nWhen I attempt to run \"ant dist\", I get these errors:\n\n----------------------------------------------------------------\nBuildfile: build.xml\n\ndeploy-prepare:\n\ndeploy-static:\n\ndeploy:\n     [echo] Target: Catalina - Deploy ...\n\nflags:\n\nflags.display:\n     [echo] --- Build environment for Catalina ---\n     [echo] If ${property_name} is displayed, then the property is not set)\n     [echo] --- Build options ---\n     [echo] full.dist=${full.dist}\n     [echo] build.sysclasspath=${build.sysclasspath}\n     [echo] compile.debug=on\n     [echo] compile.deprecation=off\n     [echo] compile.optimize=on\n     [echo] --- Ant Flags ---\n     [echo] <style> task available (required)=true\n     [echo] --- JDK ---\n     [echo] jdk.1.2.present=true\n     [echo] jdk.1.3.present=true\n     [echo] jdk.1.4.present=${jdk.1.4.present}\n     [echo] --- Required Libraries ---\n     [echo] jaxp.present=true\n     [echo] jndi.present=true\n     [echo] regexp.present=true\n     [echo] servlet.present=true\n     [echo] --- Optional Libraries ---\n     [echo] javamail.present=${javamail.present}\n     [echo] jsse.present=${jsse.present}\n     [echo] jta.present=${jta.present}\n     [echo] junit.present=${junit.present}\n     [echo] ldap.present=true\n     [echo] tyrex.present=${tyrex.present}\n     [echo] --- Required JARs ---\n     [echo] jndi.jar.present(except JDK 1.3+)=${jndi.jar.present}\n     [echo] regexp.jar.present=true\n     [echo] servlet.jar.present=true\n     [echo] xerces.jar.present(except JDK 1.4+)=true\n     [echo] --- Optional JARs ---\n     [echo] tomcat-ajp.jar.present=true\n     [echo] javamail.jar.present=${javamail.jar.present}\n     [echo] jdbc20ext.jar.present=${jdbc20ext.jar.present}\n     [echo] jta.jar.present=${jta.jar.present}\n     [echo] junit.jar.present=${junit.jar.present}\n     [echo] ldap.jar.present=${ldap.jar.present}\n     [echo] tomcat-util.jar.present=true\n     [echo] tyrex.jar.present=${tyrex.jar.present}\n     [echo] --- Conditional compilation flags ---\n     [echo] compile.javamail=${compile.javamail}\n     [echo] compile.jmx=${compile.jmx}\n     [echo] compile.jndi=true\n     [echo] compile.jsse=${compile.jsse}\n     [echo] compile.jta=${compile.jta}\n     [echo] compile.junit=${compile.junit}\n     [echo] compile.ldap=true\n     [echo] compile.tyrex=${compile.tyrex}\n     [echo] --- Distribution flags ---\n     [echo] copy.tomcat-ajp.jar=true\n     [echo] copy.jdbc20ext.jar=${copy.jdbc20ext.jar}\n     [echo] copy.jndi.jar=${copy.jndi.jar}\n     [echo] copy.javamail.jar=${copy.javamail.jar}\n     [echo] copy.jta.jar=${copy.jta.jar}\n     [echo] copy.ldap.jar=${copy.ldap.jar}\n     [echo] copy.tyrex.jar=${copy.tyrex.jar}\n     [echo] copy.xerces.jar=true\n\nbuild-prepare:\n\ncopy-activation.jar:\n\ncopy-tomcat-ajp.jar:\n\ncopy-jdbc20ext.jar:\n\ncopy-jndi.jar:\n\ncopy-jsse.jar:\n\ncopy-jta.jar:\n\ncopy-ldap.jar:\n\ncopy-tomcat-util.jar:\n\ncopy-tyrex.jar:\n\ncopy-xerces.jar:\n\nbuild-static:\n\nbuild-main:\n    [javac] Compiling 4 source files to\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/build/server/classes\n    [javac] Compiling 8 source files to\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/build/server/classes\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/connector/HttpRequestFacade.java:198:\nMethod getRequestURL() not found in interface\njavax.servlet.http.HttpServletRequest.\n    [javac]         return ((HttpServletRequest) request).getRequestURL();\n    [javac]                                                            ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/connector/RequestFacade.java:139:\nMethod setCharacterEncoding(java.lang.String) not found in interface\njavax.servlet.ServletRequest.\n    [javac]         request.setCharacterEncoding(env);\n    [javac]                                     ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/connector/RequestFacade.java:175:\nMethod getParameterMap() not found in interface javax.servlet.ServletRequest.\n    [javac]         return request.getParameterMap();\n    [javac]                                       ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/connector/ResponseFacade.java:223:\nMethod resetBuffer() not found in interface javax.servlet.ServletResponse.\n    [javac]         response.resetBuffer();\n    [javac]                             ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/core/ApplicationHttpRequest.java:523:\nMethod getParameterMap() not found in interface\njavax.servlet.http.HttpServletRequest.\n    [javac]             parameters = copyMap(request.getParameterMap());\n    [javac]                                                         ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/core/ApplicationDispatcher.java:371:\nMethod resetBuffer() not found in interface javax.servlet.ServletResponse.\n    [javac]             response.resetBuffer();\n    [javac]                                 ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/session/StandardSession.java:1070:\nWrong number of arguments in constructor.\n    [javac]           new HttpSessionBindingEvent((HttpSession) this, name,\nvalue);\n    [javac]           ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/session/StandardSession.java:1182:\nWrong number of arguments in constructor.\n    [javac]             event = new HttpSessionBindingEvent\n    [javac]                     ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/session/StandardSession.java:1185:\nWrong number of arguments in constructor.\n    [javac]             event = new HttpSessionBindingEvent\n    [javac]                     ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/session/StandardSessionFacade.java:151:\nMethod getServletContext() not found in interface\njavax.servlet.http.HttpSession.\n    [javac]         return session.getServletContext();\n    [javac]                                         ^\n    [javac]\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/src/share/org/apache/catalina/authenticator/FormAuthenticator.java:422:\nMethod getParameterMap() not found in interface\njavax.servlet.http.HttpServletRequest.\n    [javac]         Map parameters = hreq.getParameterMap();\n    [javac]                                              ^\n    [javac] Note: 4 files use or override a deprecated API.  Recompile with\n\"-deprecation\" for details.\n    [javac] 11 errors, 1 warning\n\nTotal time: 11 seconds\n\nBUILD FAILED\n\n/usr/local/jakarta-tomcat-4.0.1-src/catalina/build.xml:480: Compile failed,\nmessages should have been provided.\n----------------------------------------------------------------\n\nBeing new to tomcat, I don't understand what these errors are telling\nme.", "id": 7817, "time": "2001-11-12T21:33:01Z", "bug_id": 4824, "creation_time": "2001-11-12T21:33:01Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "Step 16 is required indeed. That's a typo, sorry.\n\nThere's a problem with the version of the servlet.jar you have, apparently. I \nwould say you have the version 2.2 of the API (you need 2.3). You should \nrebuild it from the servletapi-4 package.", "id": 7818, "time": "2001-11-12T21:49:01Z", "bug_id": 4824, "creation_time": "2001-11-12T21:49:01Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "wes@wesbarris.com", "text": "How do I tell what version of the servlet API I have?  I downloaded\njakarta-servletapi-4.tar.gz from the jakarta.apache.org web site.  Would\nthat make it API version 4.0?  Am I supposed to do anything with\n/usr/local/jakarta-servletapi-4/lib/servlet.jar?  BUILDING.txt of the\njakarta-tomcat-4.0.1-src just says unpack the distribution.  However,\nREADME.txt of the jakarta-servletapi-4 says:\n\nIn general, you will need to add the \"servlet.jar\" file (found in the \"lib\"\nsubdirectory of this release) into the compilation class path for your\nprojects that depend on these APIs.\n\nI have unpacked everything in /usr/local so the base.path for everything\nis the same.", "id": 7883, "time": "2001-11-13T14:24:59Z", "bug_id": 4824, "creation_time": "2001-11-13T14:24:59Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 4824, "text": "The right version is about 75 KB in size, while 2.2 is much smaller.\n\n*** This bug has been marked as a duplicate of 4855 ***", "id": 7894, "time": "2001-11-13T15:54:27Z", "creator": "remm@apache.org", "creation_time": "2001-11-13T15:54:27Z", "tags": [], "is_private": false}]