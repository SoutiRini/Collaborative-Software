[{"count": 0, "tags": [], "creator": "marni@sbcglobal.net", "is_private": false, "text": "In the following file:\n/*\n * $Header: /home/cvs/jakarta-tomcat-\ncatalina/catalina/src/share/org/apache/catalina/startup/ExpandWar.java,v 1.4 \n2003/07/26 14:24:52 remm Exp $\n * $Revision: 1.4 $\n * $Date: 2003/07/26 14:24:52 $\n\nLine #216, For a directory enrtry it is looking for '/', instead it should \nlook for both '/' and '\\'.\n\nI am creating a WAR file using java.util.jar.JarEntry( and its related \nfiles ), I am getting a WEB-INF/web.xml not found error;\n\nHere is the log from Tomcat:\n2003-08-08 11:36:31   Have created expansion directory C:\\Program Files\\Apache \nSoftware Foundation\\Tomcat 5.0\\webapps\\test3\n2003-08-08 11:36:31   Have opened JAR file successfully\n2003-08-08 11:36:31   Have retrieved entries enumeration\n2003-08-08 11:36:31   Am processing entry META-INF/MANIFEST.MF\n2003-08-08 11:36:31   Creating parent directory C:\\Program Files\\Apache \nSoftware Foundation\\Tomcat 5.0\\webapps\\test3\\META-INF\n2003-08-08 11:36:31   Creating expanded file META-INF/MANIFEST.MF\n2003-08-08 11:36:31   Am processing entry META-INF/\n2003-08-08 11:36:31   Creating parent directory C:\\Program Files\\Apache \nSoftware Foundation\\Tomcat 5.0\\webapps\\test3\\META-INF\n2003-08-08 11:36:31   Am processing entry WEB-INF\\\n2003-08-08 11:36:31   Creating expanded file WEB-INF\\\n2003-08-08 11:36:31   Am processing entry WEB-INF\\web.xml\n2003-08-08 11:36:31   Creating expanded file WEB-INF\\web.xml\n2003-08-08 11:36:31 HTMLManager: ManagerServlet.install[/test3]\njava.io.FileNotFoundException: C:\\Program Files\\Apache Software \nFoundation\\Tomcat 5.0\\webapps\\test3\\WEB-INF\\web.xml (The system cannot find \nthe path specified)\n\tat java.io.FileOutputStream.open(Native Method)\n\tat java.io.FileOutputStream.<init>(Unknown Source)\n\tat java.io.FileOutputStream.<init>(Unknown Source)\n\tat org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:307)\n\tat org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:232)\n\tat org.apache.catalina.core.StandardHostDeployer.install\n(StandardHostDeployer.java:303)\n\tat org.apache.catalina.core.StandardHost.install(StandardHost.java:835)\n\tat org.apache.catalina.manager.ManagerServlet.deploy\n(ManagerServlet.java:857)\n\tat org.apache.catalina.manager.HTMLManagerServlet.deployInternal\n(HTMLManagerServlet.java:327)\n\tat org.apache.catalina.manager.HTMLManagerServlet.doPost\n(HTMLManagerServlet.java:307)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:763)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:856)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:286)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:206)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:253)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardContextValve.invokeInternal\n(StandardContextValve.java:256)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:210)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:565)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:190)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:174)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:149)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:156)\n\tat org.apache.catalina.core.StandardValveContext.invokeNext\n(StandardValveContext.java:151)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.ContainerBase.invoke\n(ContainerBase.java:974)\n\tat org.apache.coyote.tomcat5.CoyoteAdapter.service\n(CoyoteAdapter.java:207)\n\tat org.apache.coyote.http11.Http11Processor.process\n(Http11Processor.java:647)\n\tat \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnecti\non(Http11Protocol.java:489)\n\tat org.apache.tomcat.util.net.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java:575)\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run\n(ThreadPool.java:649)\n\tat java.lang.Thread.run(Unknown Source)", "id": 42421, "time": "2003-08-08T16:54:31Z", "bug_id": 22258, "creation_time": "2003-08-08T16:54:31Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Also make sure line# 225", "is_private": false, "id": 42423, "creator": "marni@sbcglobal.net", "time": "2003-08-08T17:08:05Z", "bug_id": 22258, "creation_time": "2003-08-08T17:08:05Z", "attachment_id": null}, {"count": 2, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "id": 42424, "time": "2003-08-08T17:16:06Z", "bug_id": 22258, "creation_time": "2003-08-08T17:16:06Z", "is_private": false, "text": "- I've never seen this code fail.\n- I doubt that anything but '/' is legal as a path separator in entries name.\n\nPlease do not reopen the bug unless you can prove that '\\' is legal in an entry\nname in a ZIP."}]