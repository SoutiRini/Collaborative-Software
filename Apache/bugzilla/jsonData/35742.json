[{"count": 0, "tags": [], "bug_id": 35742, "attachment_id": null, "is_private": false, "id": 77300, "time": "2005-07-14T17:44:50Z", "creator": "apache@ser1.net", "creation_time": "2005-07-14T17:44:50Z", "text": "In short, httpd processes handling \"~foo\" (userdir) requests segfault if the  \nuser is invalid.  The log message on the server is:  \n  \n   [notice] child pid 1956 exit signal Segmentation fault (11) \n \nOn the client, one gets a connection broken error. \n \nI first noticed this when trying to add a purely LDAP user -- IE, \nno /etc/passwd entry.  That addition worked fine; I could log in with ssh, get \nuseful results from getent, su to the user, etc; but hitting \nhttp://myserver.com/~user caused the aforementioned segfault.  Adding the user \nto /etc/passwd fixed the problem; out of curiosity, I tried accessing \n\"http://myserver.com/~foo\" (where \"foo\" is in neither /etc/password nor LDAP) \nand got the same segfault -- so I don't think it has to do with LDAP in \nparticular, but rather that mod_userdir can't resolve the user directory.  I \nwould expect an error, but a segfault doesn't seem like appropriate behavior. \n \nAs an aside, even if this is fixed, I wonder why mod_userdir can't locate \ndirectories for LDAP-only users.  Does mod_userdir go to /etc/passwd directly, \nrather than using getent or other NSS API? \n \n--- SER"}, {"count": 1, "tags": [], "creator": "slive@apache.org", "text": "Apache httpd uses the standard API: getpwnam/getpwnam_r.\n\nSince mod_userdir in general does not have a problem with non-existent users\n(for example http://people.apache.org/~notauser ), the problem is most likely\nsomething specific to your system.  To figure out the details, you'll need to do\na little more debugging, for example:\nhttp://httpd.apache.org/dev/debugging.html", "id": 77335, "time": "2005-07-15T15:40:23Z", "bug_id": 35742, "creation_time": "2005-07-15T15:40:23Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "jorton@redhat.com", "text": "Smells like bug 34053 - can you try the patch referenced in the Debian bug report?", "id": 77427, "time": "2005-07-19T11:30:56Z", "bug_id": 35742, "creation_time": "2005-07-19T11:30:56Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "chip@force-elite.com", "text": "The getpwnam_r bug has been fixed in APR trunk.", "id": 77429, "time": "2005-07-19T12:04:38Z", "bug_id": 35742, "creation_time": "2005-07-19T12:04:38Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 35742, "attachment_id": null, "is_private": false, "id": 109093, "time": "2007-10-07T17:31:56Z", "creator": "nick@webthing.com", "creation_time": "2007-10-07T17:31:56Z", "text": "No response to Joe and Paul; assuming fixed as per comment 2."}]