[{"count": 0, "tags": [], "bug_id": 23789, "is_private": false, "text": "I had a simple delete task\n<delete dir=\"${build.dir}\" includeEmptyDirs=\"true\" />\nand wanted to exclude something\n  excludes=\"**/transform/**/*.* ${ASM_jar}\"\nDoing that I got the DEPRECATED error and added\n  <fileset dir=\"${build.dir}\">\n    <exclude name=\"**/transform/*.class\" />\n    <include name=\"**/*.*\" />\n  </fileset>\nresulting in\n<delete dir=\"${build.dir}\" includeEmptyDirs=\"true\">\n  <fileset dir=\"${build.dir}\">\n    <exclude name=\"**/transform/*.class\" />\n    <include name=\"**/*.*\" />\n  </fileset>\n</delete>\n\nBUILD FAILED\nfile:build.xml:667: WEB-INF/classes not found.\n\nThe exclude statement came too late and all its contents were already gone!\n\nSuggested resolution:\nif a nested fileset is present, warn about deleting what is specified in \"dir\"", "id": 45545, "time": "2003-10-13T17:02:43Z", "creator": "hauser@acm.org", "creation_time": "2003-10-13T17:02:43Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "count": 1, "id": 45571, "time": "2003-10-14T08:15:48Z", "bug_id": 23789, "creation_time": "2003-10-14T08:15:48Z", "text": "It is perfectly legal to use both the attribute and nested filesets, a warning may\neven be annoying for users that do so on purpose."}, {"count": 2, "tags": [], "bug_id": 23789, "text": "under the \"fail-safe\" principle, how about warning anyway and have for this\ndelicate task \"delete\" a *expert* flag that suppresses the warnings!", "id": 45579, "time": "2003-10-14T09:00:24Z", "creator": "hauser@acm.org", "creation_time": "2003-10-14T09:00:24Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 23789, "is_private": false, "count": 3, "id": 45747, "time": "2003-10-15T16:09:08Z", "creator": "gus.heck@olin.edu", "creation_time": "2003-10-15T16:09:08Z", "text": "From the manual entry for the dir atribute:\n\nThe directory to delete, including all its files and subdirectories.\nNote: dir is not used to specify a directory name for file; file and dir are\nindependent of each other.\nWARNING: Do not set dir to \".\", \"${basedir}\", or the full-pathname equivalent\nunless you truly intend to recursively remove the entire contents of the current\nbase directory (and the base directory itself, if different from the current\nworking directory).\n\nGranted, it doesn't say that dir is independant of the filesets, but since\nfilesets have their own dir atribute it isn't that supprising. I'd say perhaps\nclarify in the manual at most. But I think the current entry is fairly clear, so\nmaybe not even that."}]