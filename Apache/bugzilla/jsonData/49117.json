[{"count": 0, "text": "While trying to add manifest to the jar file, the JAR task fails with the error:\n\"Unable to rename old file <> to temporary file.\"\n\nThis was an upgrade from jdk1.5 to jdk1.6. The build works fine with the jdk1.5.", "bug_id": 49117, "attachment_id": null, "id": 136124, "time": "2010-04-14T05:07:16Z", "creator": "arinjaybaj@gmail.com", "creation_time": "2010-04-14T05:07:16Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 49117, "text": "Are you using an operating system that locks files that are open (like\nWindows)?\n\nIf you've just created the jar and then try to update it in a subsequent task\nthe file may not have been closed properly - in this case\nthis would be a duplicate of bug 45960 and is supposed to be fixed\nwith Ant 1.8.0.", "id": 136210, "time": "2010-04-16T16:35:49Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-16T16:35:49Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 49117, "attachment_id": null, "is_private": false, "id": 136315, "time": "2010-04-22T06:35:16Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-22T06:35:16Z", "text": "Could you please try Ant 1.8.0 and report back?"}, {"count": 3, "tags": [], "bug_id": 49117, "attachment_id": null, "is_private": false, "id": 136321, "time": "2010-04-22T07:52:39Z", "creator": "arinjaybaj@gmail.com", "creation_time": "2010-04-22T07:52:39Z", "text": "(In reply to comment #2)\n> Could you please try Ant 1.8.0 and report back?\n\nI did tried with Ant 1.8.0 and I am getting the same issue. However, if I am facing that only in the case of a manifest update.\nIf I remove the target which updates the manifest, then the script completes but I fail with classnotfoundexceptions as the manifest is not updated with the appropriate classpaths.\n\nCan you please help?"}, {"count": 4, "tags": [], "bug_id": 49117, "text": "It would be good if you could provide a small testcase build file, I'll give it a try myself.\n\nAre you running Windows?", "id": 136322, "time": "2010-04-22T08:00:25Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-22T08:00:25Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "bodewig@apache.org", "attachment_id": 25335, "text": "Created attachment 25335\npassing test\n\nThe attached test file works fine for me (Java6 on Windows 7).", "id": 136323, "time": "2010-04-22T08:04:49Z", "bug_id": 49117, "creation_time": "2010-04-22T08:04:49Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 49117, "text": "(In reply to comment #5)\n> Created an attachment (id=25335) [details]\n> passing test\n> \n> The attached test file works fine for me (Java6 on Windows 7).\n\n\nI am running Java6 on Win Xp Professional SP3.\n\n<jar jarfile=\"${file.input}\" update=\"yes\">\n<manifest>\n<attribute name=\"Class-Path\" value=\"${lib.path} ${manifest.default.classpath}\"/>\n</manifest>\n</jar>", "id": 136324, "time": "2010-04-22T08:10:47Z", "creator": "arinjaybaj@gmail.com", "creation_time": "2010-04-22T08:10:47Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 49117, "attachment_id": null, "text": "does my attached build file cause any problems for you?", "id": 136325, "time": "2010-04-22T08:19:33Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-22T08:19:33Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 49117, "attachment_id": null, "text": "(In reply to comment #7)\n> does my attached build file cause any problems for you?\n\nThe file which you have shared works well with 1.6.5 as well.", "id": 136326, "time": "2010-04-22T08:48:02Z", "creator": "arinjaybaj@gmail.com", "creation_time": "2010-04-22T08:48:02Z", "is_private": false}, {"count": 9, "text": "so what is different in your case?", "bug_id": 49117, "attachment_id": null, "id": 136327, "time": "2010-04-22T09:02:29Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-22T09:02:29Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "creator": "bodewig@apache.org", "text": "In case my last question sounded a bit rude, sorry about that, that wasn't intended.\n\nIn order to fix the problem you see, we will need to figure out what the difference between your testcase and my minimal snippet is.  In an ideal world we'd be able to distill a reproducable testcase.\n\nI understand you won't be able to provide us with the full build environment you are using.  If you don't manage to trim it down to the problem, maybe a start could be if you provided us with the -debug log of your build process when it fails using Ant 1.8.0.\n\nIf even the logfile would reveal sensitive information than feel free to send it to me in private email rather than attaching it to the issue.", "id": 136335, "time": "2010-04-23T03:43:44Z", "bug_id": 49117, "creation_time": "2010-04-23T03:43:44Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 49117, "text": "(In reply to comment #10)\n> In case my last question sounded a bit rude, sorry about that, that wasn't\n> intended.\n> \n> In order to fix the problem you see, we will need to figure out what the\n> difference between your testcase and my minimal snippet is.  In an ideal world\n> we'd be able to distill a reproducable testcase.\n> \n> I understand you won't be able to provide us with the full build environment\n> you are using.  If you don't manage to trim it down to the problem, maybe a\n> start could be if you provided us with the -debug log of your build process\n> when it fails using Ant 1.8.0.\n> \n> If even the logfile would reveal sensitive information than feel free to send\n> it to me in private email rather than attaching it to the issue.\n\nLet me give a try to produce a similar one and we can try reproducing it at your end.", "id": 136338, "time": "2010-04-23T05:07:27Z", "creator": "arinjaybaj@gmail.com", "creation_time": "2010-04-23T05:07:27Z", "is_private": false, "attachment_id": null}, {"count": 12, "tags": [], "creator": "arinjaybaj@gmail.com", "attachment_id": null, "text": "Does this give any idea which we can try?\n\n <target name=\"ear.create\" depends=\"ear.environment.setup\">\n        <antcall target=\"jar.create\"/>\n        <antcall target=\"manifest.create\"/> <<<It fails here>>>\n\tAfter the updation of manifest above and executing the other targets, it creates the ear.\n\t<ear >\n\t</ear>\n<target>", "id": 136344, "time": "2010-04-23T06:02:01Z", "bug_id": 49117, "creation_time": "2010-04-23T06:02:01Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 49117, "attachment_id": 25341, "is_private": false, "id": 136346, "time": "2010-04-23T07:01:11Z", "creator": "bodewig@apache.org", "creation_time": "2010-04-23T07:01:11Z", "text": "Created attachment 25341\ntest using antcall\n\nI'm afraid the antcall layer isn't enough to cause problems - the attached build file still works for me."}, {"count": 14, "tags": [], "creator": "arinjaybaj@gmail.com", "attachment_id": null, "text": "(In reply to comment #13)\n> Created an attachment (id=25341) [details]\n> test using antcall\n> \n> I'm afraid the antcall layer isn't enough to cause problems - the attached\n> build file still works for me.\n\nSorry for the delay!\nI will require your email id ...will not be possible to send you the build but will try to reproduce something similar.", "id": 136727, "time": "2010-05-07T10:37:57Z", "bug_id": 49117, "creation_time": "2010-05-07T10:37:57Z", "is_private": false}, {"count": 15, "tags": [], "bug_id": 49117, "is_private": false, "id": 136728, "attachment_id": null, "creator": "arinjaybaj@gmail.com", "creation_time": "2010-05-07T10:41:14Z", "time": "2010-05-07T10:41:14Z", "text": "(In reply to comment #14)\n> (In reply to comment #13)\n> > Created an attachment (id=25341) [details] [details]\n> > test using antcall\n> > \n> > I'm afraid the antcall layer isn't enough to cause problems - the attached\n> > build file still works for me.\n> \n> Sorry for the delay!\n> I will require your email id ...will not be possible to send you the build but\n> will try to reproduce something similar.\n\nFor the 1.8.0, I get this at the end...after I put a debug to the build:\n\nC:\\work\\subscriptions\\cvssubscriptions\\esc\\source\\java\\build\\build.xml:1709: Una\nble to rename old file (C:\\work\\subscriptions\\cvssubscriptions\\esc\\source\\java\\b\nuildpackage\\buildtemp\\eartemp\\ICECommon-ejbs.jar) to temporary file\n        at org.apache.tools.ant.taskdefs.Zip.renameFile(Zip.java:757)\n        at org.apache.tools.ant.taskdefs.Zip.executeMain(Zip.java:636)\n        at org.apache.tools.ant.taskdefs.Zip.execute(Zip.java:568)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)\n        at net.sf.antcontrib.logic.IfTask.execute(IfTask.java:217)\n        at sun.reflect.GeneratedMethodAccessor71.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.java:154)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)\n        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(Single\nCheckExecutor.java:38)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1212)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:441)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)\n\n        at sun.reflect.GeneratedMethodAccessor72.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)\n        at net.sf.antcontrib.logic.ForEach.executeSequential(ForEach.java:178)\n        at net.sf.antcontrib.logic.ForEach.execute(ForEach.java:254)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)\n        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(Single\nCheckExecutor.java:38)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1212)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:441)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)\n\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor66.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)\n        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(Single\nCheckExecutor.java:38)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1212)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:441)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)\n\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)\n        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav\na:106)\n        at org.apache.tools.ant.Task.perform(Task.java:348)\n        at org.apache.tools.ant.Target.execute(Target.java:390)\n        at org.apache.tools.ant.Target.performTasks(Target.java:411)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1360)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1329)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExe\ncutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1212)\n        at org.apache.tools.ant.Main.runBuild(Main.java:801)\n        at org.apache.tools.ant.Main.startAnt(Main.java:218)\n        at org.apache.tools.ant.Main.start(Main.java:180)\n        at org.apache.tools.ant.Main.main(Main.java:269)"}, {"count": 16, "text": "This is happening for me in 64-Bit Java, Windows 7 and 1.8.2 ANT environment, When I tried it with 32-Bit Java it worked fine", "bug_id": 49117, "attachment_id": null, "id": 148091, "time": "2011-07-22T18:46:06Z", "creator": "agunasingam@manh.com", "creation_time": "2011-07-22T18:46:06Z", "tags": [], "is_private": false}, {"count": 17, "text": "can you provide a build file allowing to reproduce the problem ?", "bug_id": 49117, "attachment_id": null, "id": 165944, "time": "2013-03-18T02:32:30Z", "creator": "antoine@apache.org", "creation_time": "2013-03-18T02:32:30Z", "tags": [], "is_private": false}]