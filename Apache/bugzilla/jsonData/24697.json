[{"count": 0, "tags": [], "bug_id": 24697, "text": "I have patched the ant's 1.5.3  JUnit task to fork only once and then run all\ntest suites. When the number of test suites is quite large this makes a huge\ndifference.", "id": 47326, "time": "2003-11-14T00:38:16Z", "creator": "anton@atlassian.com", "creation_time": "2003-11-14T00:38:16Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 24697, "attachment_id": 9102, "id": 47327, "time": "2003-11-14T00:39:21Z", "creator": "anton@atlassian.com", "creation_time": "2003-11-14T00:39:21Z", "is_private": false, "text": "Created attachment 9102\nThe necessary modifications"}, {"count": 2, "tags": [], "bug_id": 24697, "attachment_id": 9103, "id": 47328, "time": "2003-11-14T00:40:02Z", "creator": "anton@atlassian.com", "creation_time": "2003-11-14T00:40:02Z", "is_private": false, "text": "Created attachment 9103\nThe modified JUnit task"}, {"count": 3, "tags": [], "bug_id": 24697, "attachment_id": 9104, "text": "Created attachment 9104\nThe mofifications for the JUNit task", "id": 47329, "time": "2003-11-14T00:40:57Z", "creator": "anton@atlassian.com", "creation_time": "2003-11-14T00:40:57Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 24697, "text": "Created attachment 11174\nUnified diff (against 1.6.1) which combines changes in above 3 files as a patch", "id": 55484, "time": "2004-04-07T18:25:03Z", "creator": "corporate_gadfly@hotmail.com", "creation_time": "2004-04-07T18:25:03Z", "is_private": false, "attachment_id": 11174}, {"count": 5, "attachment_id": null, "creator": "corporate_gadfly@hotmail.com", "text": "Typical usage for the above patch would be something like:\n\n1. untar (or unzip) the apache-ant-1.6.1-src package\n2. cd apache-ant-1.6.1\n3. patch -p 1 < ../unified-diff-1.6.1-fork-jvm-once-per-unit-test.diff\n4. ant\n\nIn your own project, inside the build.xml file, your <junit> target has to\nsupply an attribute fork=\"once\" for it to make any effect.\n\nHope this helps someone.", "id": 55485, "time": "2004-04-07T18:35:43Z", "bug_id": 24697, "creation_time": "2004-04-07T18:35:43Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 24697, "attachment_id": 11228, "id": 55759, "time": "2004-04-14T14:47:31Z", "creator": "corporate_gadfly@hotmail.com", "creation_time": "2004-04-14T14:47:31Z", "is_private": false, "text": "Created attachment 11228\nObviates earlier patch 04/07/04 18:25 which had an extra unnecessary .orig file in it"}, {"count": 7, "tags": [], "bug_id": 24697, "attachment_id": null, "text": "Thanks Haroon, the patch is a real time saver.  I should be able to review the\nchanges sometime this week.\n", "id": 55766, "time": "2004-04-14T16:29:52Z", "creator": "bodewig@apache.org", "creation_time": "2004-04-14T16:29:52Z", "is_private": false}, {"count": 8, "tags": [], "text": "Mega COOL!!! ;-)\n\nI haven't looked at the patch, but something we'd really like to do to be able \nto fork once not all <batchtest>, but to also fork once each individual \n<fileset> contained in the <batchtest>.\n\nI'm not sure whether it's possible with this patch. --DD", "is_private": false, "id": 55768, "creator": "ddevienne@lgc.com", "time": "2004-04-14T16:34:45Z", "bug_id": 24697, "creation_time": "2004-04-14T16:34:45Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "It currently only turn the fork attribute of the task from boolean into boolean +\n\"once\".  It doesn't look impossible to extend the same logic to the fork attributes\nof <test> (rather meaningless) and <batchtest>.\n\nLet's do this patch here first and then you provide the second one, OK? ;-)", "is_private": false, "id": 55770, "creator": "bodewig@apache.org", "time": "2004-04-14T16:42:43Z", "bug_id": 24697, "creation_time": "2004-04-14T16:42:43Z", "attachment_id": null}, {"count": 10, "tags": [], "bug_id": 24697, "text": "Darn! You didn't bite ;-) Patches from me are extremely rare, as you well know. \nI'm more a user than a developer...\n\nOK. I assume the test doesn't affect <junitreport> in any way? Thanks, --DD", "id": 55771, "time": "2004-04-14T16:45:31Z", "creator": "ddevienne@lgc.com", "creation_time": "2004-04-14T16:45:31Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "text": "Dominique, I always knew that propertyset, sync or subant must have been written\nby somebody else ;-)\n\nBack to the patch.\n\nI'll take the basic idea but will have to change quite a bit of it.  In particular\nI can't simply change the signature of the setFork method to accept something\nelse but a boolean since that would break backwards compatibility.  I'll probably\nintroduce a new attribute.  The alternative would be to extend the \"String loses\nvs. more advanced\" logic in IntrospectionHelper to pick setFork(SomeClass) over\nsetFork(boolean).\n\nIt certainly shouldn't affect the generated XML output and thus junitreport will\nbe save.", "is_private": false, "id": 55814, "creator": "bodewig@apache.org", "time": "2004-04-15T10:10:27Z", "bug_id": 24697, "creation_time": "2004-04-15T10:10:27Z", "attachment_id": null}, {"count": 12, "tags": [], "bug_id": 24697, "attachment_id": null, "text": "Hmm, on second thought a new attribute forkStyle=\"once|perTest|perBatch\" may be\nsuperior anyway.  perTest would be the default.\n", "id": 55815, "time": "2004-04-15T10:15:31Z", "creator": "bodewig@apache.org", "creation_time": "2004-04-15T10:15:31Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 24697, "attachment_id": null, "text": "OK, I went the forkstyle route.  I used your changes to FormatterElement unchanged\nand reshuffled the rest a bit.  In particular the changes to JUnitTask look very\ndifferent now, but the result should be similar.\n\nIn particular, the haltonfailure attribute (and friends) of individual tests will\nstill take precedence over the settings for the task - this means we may be forced\nto run multiple VMs anyway.\n\nforkstyle has the additional benefit that we may even use different algortithms\nlater.\n\nAnton, if you want to get listed in Ant's CONTRIBUTORS file, please drop me a\nnot with your fill name.\n", "id": 55827, "time": "2004-04-15T13:59:27Z", "creator": "bodewig@apache.org", "creation_time": "2004-04-15T13:59:27Z", "is_private": false}, {"count": 14, "tags": [], "bug_id": 24697, "text": "*** Bug 10413 has been marked as a duplicate of this bug. ***", "id": 56149, "time": "2004-04-21T06:34:05Z", "creator": "bodewig@apache.org", "creation_time": "2004-04-21T06:34:05Z", "is_private": false, "attachment_id": null}, {"count": 15, "attachment_id": null, "creator": "bodewig@apache.org", "is_private": false, "id": 56454, "time": "2004-04-27T07:45:25Z", "bug_id": 24697, "creation_time": "2004-04-27T07:45:25Z", "tags": [], "text": "renamed forkstyle to forkmode, will probably go into 1.6.2 like this."}]