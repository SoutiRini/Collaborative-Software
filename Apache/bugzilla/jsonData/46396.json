[{"count": 0, "tags": [], "creator": "p.ustyugov@inets.ru", "attachment_id": null, "is_private": false, "id": 123303, "time": "2008-12-14T23:36:48Z", "bug_id": 46396, "creation_time": "2008-12-14T23:36:48Z", "text": "I have vhost like this structure:\n\n/www/some_host/htdocs - doc root\n/www/some_host/htdocs/usr/user1 - user1 dir\n/www/some_host/htdocs/usr/user2 - user2 dir \n/www/some_host/htdocs/usr/user3 - user3 dir\n...\n\nI use authorization for this vhost, and try restrict every \nautorized user inside his user dir. User_name correspond with dir_name.\n\nI use next simple .htaccess file for my vhost:\n=======================================\nOrder Allow,Deny\nAllow from All\n\nAuthType Basic\nAuthName \"Some Secured Area\"\nAuthUserFile /www/some_host/usr.passwd\nRequire valid-user\nSatisfy All\n\nRewriteEngine On\nRewriteBase /\nRewriteCond %{REMOTE_USER} !^$\nRewriteRule !^/usr/%{REMOTE_USER}/ /usr/%{REMOTE_USER}/ [R]\n=======================================\nIf user try to get out from own dir, server forcibly redirect him to correct dir.\nBut, this rules don't work, because mod_rewrite not interpolate server variables in pattern.\n\nIf i user next rules (rule block for every user), it's work fine:\n...\nRewriteCond %{REMOTE_USER} ^user1$\nRewriteRule !^/usr/user1/ /usr/user1/ [R]\nRewriteCond %{REMOTE_USER} ^user2$\nRewriteRule !^/usr/user2/ /usr/user2/ [R]\nRewriteCond %{REMOTE_USER} ^user3$\nRewriteRule !^/usr/user3/ /usr/user3/ [R]\n...\nBut, for hundred users i need write minimum two hundreds rules ..."}, {"count": 1, "tags": [], "bug_id": 46396, "is_private": false, "text": "Your configuration approach is wrong. Bugzilla is no user support forum, but for reporting bugs. Please post your question to users@httpd.apache.org.", "id": 123305, "time": "2008-12-14T23:51:28Z", "creator": "rpluem@apache.org", "creation_time": "2008-12-14T23:51:28Z", "attachment_id": null}]