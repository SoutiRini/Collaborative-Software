[{"count": 0, "tags": [], "bug_id": 34618, "text": "Since I upgraded httpd from 2.0.53 to 2.0.54, I have frequently segmentation\nfaults (redhat 7.3).\n\nMy httpd execute libphp4.so.\n\nIf I run this little script php, I generate the problem systematically :\nfor($i=0;$i<1000;$i++){\n   $l = ldap_connect(\"ldap.univ.fr\");\n} \n\n(ldap.univ.fr doesn't exists).\n\nIf I compile httpd-2.0.54 with util_ldap.c from httpd-2.0.53 version, the\nproblem  disappear", "id": 74120, "time": "2005-04-26T11:52:38Z", "creator": "vincent.mathieu@univ-nancy2.fr", "creation_time": "2005-04-26T11:52:38Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 74242, "time": "2005-04-28T17:28:28Z", "bug_id": 34618, "creation_time": "2005-04-28T17:28:28Z", "is_private": false, "text": "*** Bug 34620 has been marked as a duplicate of this bug. ***"}, {"count": 2, "tags": [], "bug_id": 34618, "attachment_id": null, "text": "Brad Nicholes requested that someone test this patch:\n\nhttp://svn.apache.org/viewcvs/httpd/httpd/trunk/modules/ldap/util_ldap.c?rev=164919&r1=164918&r2=164919&view=diff", "id": 74243, "time": "2005-04-28T17:30:04Z", "creator": "jorton@redhat.com", "creation_time": "2005-04-28T17:30:04Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 34618, "text": "(In reply to comment #2)\n> Brad Nicholes requested that someone test this patch:\n> \n>\nhttp://svn.apache.org/viewcvs/httpd/httpd/trunk/modules/ldap/util_ldap.c?rev=164919&r1=164918&r2=164919&view=diff\n\nI try to execute this patch (with 2.0.54 util_ldap.c).\nI have an error during patch executing :\n\nFile to patch: util_ldap.c\npatching file util_ldap.c\nHunk #1 FAILED at 247.\nHunk #2 succeeded at 321 (offset -9 lines).\nHunk #3 FAILED at 1784.\nHunk #4 FAILED at 1917.\n3 out of 4 hunks FAILED -- saving rejects to file util_ldap.c.rej\n", "id": 74256, "time": "2005-04-28T21:36:00Z", "creator": "vincent.mathieu@univ-nancy2.fr", "creation_time": "2005-04-28T21:36:00Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 34618, "text": "Brad, can you provide a patch which applies to 2.0.x which mod_ldap users can test?", "id": 74257, "time": "2005-04-28T22:11:41Z", "creator": "jorton@redhat.com", "creation_time": "2005-04-28T22:11:41Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "creator": "bnicholes@apache.org", "attachment_id": 14873, "id": 74259, "time": "2005-04-28T23:06:41Z", "bug_id": 34618, "creation_time": "2005-04-28T23:06:41Z", "is_private": false, "text": "Created attachment 14873\nswitch to connection timout per ldap connection\n\nTest the ldap connection timeout on a per connection basis rather than global"}, {"count": 6, "tags": [], "text": "(In reply to comment #5)\n> Created an attachment (id=14873) [edit]\n\nGood!\nI compiled apache2.0.54 with your patch.\nI do not have any more segmentation faults\n\nThank's", "attachment_id": null, "id": 74271, "creation_time": "2005-04-29T11:53:47Z", "time": "2005-04-29T11:53:47Z", "creator": "vincent.mathieu@univ-nancy2.fr", "bug_id": 34618, "is_private": false}, {"count": 7, "tags": [], "bug_id": 34618, "attachment_id": null, "text": "Created backport proposal in the STATUS file.  Just waiting for the three +1 \nvotes.", "id": 74276, "time": "2005-04-29T16:44:12Z", "creator": "bnicholes@apache.org", "creation_time": "2005-04-29T16:44:12Z", "is_private": false}, {"count": 8, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 74432, "time": "2005-05-04T14:03:14Z", "bug_id": 34618, "creation_time": "2005-05-04T14:03:14Z", "is_private": false, "text": "*** Bug 34705 has been marked as a duplicate of this bug. ***"}, {"count": 9, "tags": [], "creator": "justo.alonso@gmail.com", "attachment_id": null, "text": "I installed the patch and compiled it, and at first it seemed to work. But I do\nsome tests, works, and then if some time passes from the last test and I make a\nnew one, the apache process hangs.\n\nI think that the ldap connection pool has some issues with the connection\ntimeouts and that makes the apache process to be unresponsive,", "id": 74493, "time": "2005-05-05T17:47:43Z", "bug_id": 34618, "creation_time": "2005-05-05T17:47:43Z", "is_private": false}, {"count": 10, "tags": [], "creator": "bnicholes@apache.org", "attachment_id": null, "id": 75034, "time": "2005-05-18T22:04:40Z", "bug_id": 34618, "creation_time": "2005-05-18T22:04:40Z", "is_private": false, "text": "The patch has been backported to 2.0.55-dev"}, {"count": 11, "tags": [], "bug_id": 34618, "attachment_id": null, "text": "i tried the patch with apache 2.0.54 and recompiled. I still getseg faults in\nthe error log\n\n[Tue Jul 12 11:57:52 2005] [notice] child pid 24029 exit signal Aborted (6)\n[Tue Jul 12 11:57:54 2005] [notice] child pid 23956 exit signal Segmentation\nfault (11)\n\nany ideas", "id": 77204, "time": "2005-07-12T04:02:10Z", "creator": "joshua.ibrahim@emagine-int.com", "creation_time": "2005-07-12T04:02:10Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 34618, "attachment_id": null, "text": "I tried the patch on a LDAP enabled apache-2.0.54 on SuSE Enterprise Linux 9 \nbut get more segmentation faults afterwards. This apache was compiled against \nthe builtin openldap 2.2.6 in SLES9.\n\nAfter installation of openldap-2.2.27 and recompilation of apache against this \nversion the segmentation faults are gone.\n\nThis seems to be related to the following patch in openldap 2.2.20\n\nhttp://www.openldap.org/its/index.cgi/Software%20Bugs?\nid=3487;expression=TIMEOUT;casesensitive=1;usearchives=1;statetype=-1\n", "id": 77449, "time": "2005-07-19T19:28:02Z", "creator": "markus.schuh@sdm.de", "creation_time": "2005-07-19T19:28:02Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 34618, "text": "We also applied the patch to 2.0.54 and the segmentation fault errors appeared \nagain, although less frequent. I see there was a bug fixed in openldap, we use \nmod_ldap and auth_ldap, should we be using openldap?", "id": 77531, "time": "2005-07-22T06:18:18Z", "creator": "broughan@hotmail.com", "creation_time": "2005-07-22T06:18:18Z", "is_private": false, "attachment_id": null}, {"count": 14, "tags": [], "bug_id": 34618, "attachment_id": null, "text": "Yes, you need to update OpenLDAP\n\n(In reply to comment #13)\n> We also applied the patch to 2.0.54 and the segmentation fault errors \nappeared \n> again, although less frequent. I see there was a bug fixed in openldap, we \nuse \n> mod_ldap and auth_ldap, should we be using openldap?\n\n", "id": 77539, "time": "2005-07-22T08:57:59Z", "creator": "bnicholes@apache.org", "creation_time": "2005-07-22T08:57:59Z", "is_private": false}, {"count": 15, "tags": [], "creator": "broughan@hotmail.com", "attachment_id": null, "text": "We are having the same problem with Microsoft Active Directory Service (Windows \n2000), we don't use OpenLDAP.\n\nWe did the patch on 2.0.54 but didn't help. So we're looking for a Windows 2000 \nbug now?\n\nIs this bug closed because it works with OpenLDAP server? Can anyone else test \non Windows 2000?\n\n\n(In reply to comment #14)\n> Yes, you need to update OpenLDAP\n> (In reply to comment #13)\n> > We also applied the patch to 2.0.54 and the segmentation fault errors \n> appeared \n> > again, although less frequent. I see there was a bug fixed in openldap, we \n> use \n> > mod_ldap and auth_ldap, should we be using openldap?\n\n", "id": 78559, "time": "2005-08-17T03:59:52Z", "bug_id": 34618, "creation_time": "2005-08-17T03:59:52Z", "is_private": false}, {"count": 16, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "text": "Broughan, this bug concerns a specific issue with OpenLDAP introduced in 2.0.54\nwhich is now fixed for 2.0.55.\n\nBug 18334 seems to be a generic \"problems with Microsoft LDAP SDK\" bug.", "id": 78621, "time": "2005-08-18T11:05:08Z", "bug_id": 34618, "creation_time": "2005-08-18T11:05:08Z", "is_private": false}]