[{"count": 0, "tags": [], "text": "I have installed tomcat 4.1.24. \nI am using MicroSoft SQL SERVER 2000 and i have copied the .jar files to \n\\common\\lib folder\nwhen i say get connection , the following exception araises.\njava.sql.SQLException: Cannot load JDBC driver class 'null'\n\n\nHere is my server.xml file\n==========================\n<?xml version='1.0' encoding='utf-8'?>\n<Server className=\"org.apache.catalina.core.StandardServer\" debug=\"0\" \nport=\"8005\" shutdown=\"SHUTDOWN\">\n  <Listener className=\"org.apache.catalina.mbeans.ServerLifecycleListener\" \ndebug=\"0\" jsr77Names=\"false\"/>\n  <Listener \nclassName=\"org.apache.catalina.mbeans.GlobalResourcesLifecycleListener\" \ndebug=\"0\"/>\n  <GlobalNamingResources>\n    <Environment name=\"simpleValue\" override=\"true\" type=\"java.lang.Integer\" \nvalue=\"30\"/>\n    <Resource auth=\"Container\" description=\"User database that can be updated \nand saved\" name=\"UserDatabase\" scope=\"Shareable\" \ntype=\"org.apache.catalina.UserDatabase\"/>\n    <Resource name=\"CardAlertDB\" scope=\"Shareable\" type=\"javax.sql.DataSource\"/>\n    <ResourceParams name=\"UserDatabase\">\n      <parameter>\n        <name>factory</name>\n        <value>org.apache.catalina.users.MemoryUserDatabaseFactory</value>\n      </parameter>\n      <parameter>\n        <name>pathname</name>\n        <value>conf/tomcat-users.xml</value>\n      </parameter>\n    </ResourceParams>\n    <ResourceParams name=\"CardAlertDB\">\n      <parameter>\n        <name>maxWait</name>\n        <value>5000</value>\n      </parameter>\n      <parameter>\n        <name>maxActive</name>\n        <value>4</value>\n      </parameter>\n      <parameter>\n        <name>password</name>\n        <value>password</value>\n      </parameter>\n      <parameter>\n        <name>url</name>\n        <value>jdbc:microsoft:sqlserver://192.9.200.3:1433</value>\n      </parameter>\n      <parameter>\n        <name>driverClassName</name>\n        <value>com.microsoft.jdbc.sqlserver.SQLServerDriver</value>\n      </parameter>\n      <parameter>\n        <name>maxIdle</name>\n        <value>2</value>\n      </parameter>\n      <parameter>\n        <name>username</name>\n        <value>sa</value>\n      </parameter>\n    </ResourceParams>\n  </GlobalNamingResources>\n  <Service className=\"org.apache.catalina.core.StandardService\" debug=\"0\" \nname=\"Tomcat-Standalone\">\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\" \nacceptCount=\"100\" bufferSize=\"2048\" compression=\"off\" connectionLinger=\"-1\" \nconnectionTimeout=\"20000\" debug=\"0\" disableUploadTimeout=\"true\" \nenableLookups=\"true\" maxKeepAliveRequests=\"100\" maxProcessors=\"75\" \nminProcessors=\"5\" port=\"8080\" \nprotocolHandlerClassName=\"org.apache.coyote.http11.Http11Protocol\" \nproxyPort=\"0\" redirectPort=\"8443\" scheme=\"http\" secure=\"false\" \ntcpNoDelay=\"true\" useURIValidationHack=\"false\">\n      <Factory className=\"org.apache.catalina.net.DefaultServerSocketFactory\"/>\n    </Connector>\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\" \nacceptCount=\"10\" bufferSize=\"2048\" compression=\"off\" connectionLinger=\"-1\" \nconnectionTimeout=\"20000\" debug=\"0\" disableUploadTimeout=\"false\" \nenableLookups=\"true\" maxKeepAliveRequests=\"100\" maxProcessors=\"75\" \nminProcessors=\"5\" port=\"8009\" \nprotocolHandlerClassName=\"org.apache.jk.server.JkCoyoteHandler\" proxyPort=\"0\" \nredirectPort=\"8443\" scheme=\"http\" secure=\"false\" tcpNoDelay=\"true\" \nuseURIValidationHack=\"false\">\n      <Factory className=\"org.apache.catalina.net.DefaultServerSocketFactory\"/>\n    </Connector>\n    <Engine className=\"org.apache.catalina.core.StandardEngine\" debug=\"0\" \ndefaultHost=\"localhost\" \nmapperClass=\"org.apache.catalina.core.StandardEngineMapper\" name=\"Standalone\">\n      <Host className=\"org.apache.catalina.core.StandardHost\" appBase=\"webapps\" \nautoDeploy=\"true\" configClass=\"org.apache.catalina.startup.ContextConfig\" \ncontextClass=\"org.apache.catalina.core.StandardContext\" debug=\"0\" \ndeployXML=\"true\" \nerrorReportValveClass=\"org.apache.catalina.valves.ErrorReportValve\" \nliveDeploy=\"true\" mapperClass=\"org.apache.catalina.core.StandardHostMapper\" \nname=\"localhost\" unpackWARs=\"true\">\n        <Context className=\"org.apache.catalina.core.StandardContext\" \ncachingAllowed=\"true\" \ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\" \ncrossContext=\"false\" debug=\"0\" displayName=\"Tomcat Administration Application\" \ndocBase=\"../server/webapps/admin\" \nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" path=\"/admin\" \nprivileged=\"true\" reloadable=\"false\" swallowOutput=\"false\" useNaming=\"true\" \nwrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n          <Logger className=\"org.apache.catalina.logger.FileLogger\" debug=\"0\" \ndirectory=\"logs\" prefix=\"localhost_admin_log.\" suffix=\".txt\" timestamp=\"true\" \nverbosity=\"1\"/>\n        </Context>\n        <Context className=\"org.apache.catalina.core.StandardContext\" \ncachingAllowed=\"true\" \ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\" \ncrossContext=\"false\" debug=\"0\" displayName=\"Webdav Content Management\" \ndocBase=\"F:\\Program Files\\Apache Group\\Tomcat 4.1\\webapps\\webdav\" \nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" path=\"/webdav\" \nprivileged=\"false\" reloadable=\"false\" swallowOutput=\"false\" useNaming=\"true\" \nwrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n        </Context>\n        <Context className=\"org.apache.catalina.core.StandardContext\" \ncachingAllowed=\"true\" \ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\" \ncrossContext=\"true\" debug=\"0\" displayName=\"Tomcat Examples\" docBase=\"examples\" \nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" path=\"/examples\" \nprivileged=\"false\" reloadable=\"true\" swallowOutput=\"false\" useNaming=\"true\" \nwrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n          <Logger className=\"org.apache.catalina.logger.FileLogger\" debug=\"0\" \ndirectory=\"logs\" prefix=\"localhost_examples_log.\" suffix=\".txt\" \ntimestamp=\"true\" verbosity=\"1\"/>\n          <Parameter name=\"context.param.name\" override=\"false\" \nvalue=\"context.param.value\"/>\n          <Ejb home=\"com.wombat.empl.EmployeeRecordHome\" name=\"ejb/EmplRecord\" \nremote=\"com.wombat.empl.EmployeeRecord\" type=\"Entity\"/>\n          <Ejb description=\"Example EJB Reference\" \nhome=\"com.mycompany.mypackage.AccountHome\" name=\"ejb/Account\" \nremote=\"com.mycompany.mypackage.Account\" type=\"Entity\"/>\n          <Environment name=\"maxExemptions\" override=\"true\" \ntype=\"java.lang.Integer\" value=\"15\"/>\n          <Environment name=\"foo/name4\" override=\"true\" \ntype=\"java.lang.Integer\" value=\"10\"/>\n          <Environment name=\"minExemptions\" override=\"true\" \ntype=\"java.lang.Integer\" value=\"1\"/>\n          <Environment name=\"foo/bar/name2\" override=\"true\" \ntype=\"java.lang.Boolean\" value=\"true\"/>\n          <Environment name=\"name3\" override=\"true\" type=\"java.lang.Integer\" \nvalue=\"1\"/>\n          <Environment name=\"foo/name1\" override=\"true\" type=\"java.lang.String\" \nvalue=\"value1\"/>\n          <LocalEjb description=\"Example Local EJB Reference\" \nhome=\"com.mycompany.mypackage.ProcessOrderHome\" \nlocal=\"com.mycompany.mypackage.ProcessOrder\" name=\"ejb/ProcessOrder\" \ntype=\"Session\"/>\n          <Resource auth=\"SERVLET\" name=\"jdbc/EmployeeAppDb\" scope=\"Shareable\" \ntype=\"javax.sql.DataSource\"/>\n          <Resource auth=\"Container\" name=\"mail/Session\" scope=\"Shareable\" \ntype=\"javax.mail.Session\"/>\n          <ResourceParams name=\"jdbc/EmployeeAppDb\">\n            <parameter>\n              <name>user</name>\n              <value>sa</value>\n            </parameter>\n            <parameter>\n              <name>password</name>\n              <value></value>\n            </parameter>\n            <parameter>\n              <name>driverName</name>\n              <value>jdbc:HypersonicSQL:database</value>\n            </parameter>\n            <parameter>\n              <name>driverClassName</name>\n              <value>org.hsql.jdbcDriver</value>\n            </parameter>\n          </ResourceParams>\n          <ResourceParams name=\"mail/Session\">\n            <parameter>\n              <name>mail.smtp.host</name>\n              <value>localhost</value>\n            </parameter>\n          </ResourceParams>\n          <ResourceLink global=\"simpleValue\" name=\"linkToGlobalResource\" \ntype=\"java.lang.Integer\"/>\n        </Context>\n        <Context className=\"org.apache.catalina.core.StandardContext\" \ncachingAllowed=\"true\" \ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\" \ncrossContext=\"false\" debug=\"0\" displayName=\"Tomcat Documentation\" \ndocBase=\"F:\\Program Files\\Apache Group\\Tomcat 4.1\\webapps\\tomcat-docs\" \nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" path=\"/tomcat-\ndocs\" privileged=\"false\" reloadable=\"false\" swallowOutput=\"false\" \nuseNaming=\"true\" wrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n        </Context>\n        <Context className=\"org.apache.catalina.core.StandardContext\" \ncachingAllowed=\"true\" \ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\" \ncrossContext=\"false\" debug=\"0\" displayName=\"Tomcat Manager Application\" \ndocBase=\"../server/webapps/manager\" \nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" path=\"/manager\" \nprivileged=\"true\" reloadable=\"false\" swallowOutput=\"false\" useNaming=\"true\" \nwrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n          <ResourceLink global=\"UserDatabase\" name=\"users\" \ntype=\"org.apache.catalina.UserDatabase\"/>\n        </Context>\n        <Context className=\"org.apache.catalina.core.StandardContext\" \ncachingAllowed=\"true\" \ncharsetMapperClass=\"org.apache.catalina.util.CharsetMapper\" cookies=\"true\" \ncrossContext=\"false\" debug=\"0\" displayName=\"Welcome to Tomcat\" \ndocBase=\"F:\\Program Files\\Apache Group\\Tomcat 4.1\\webapps\\ROOT\" \nmapperClass=\"org.apache.catalina.core.StandardContextMapper\" path=\"\" \nprivileged=\"false\" reloadable=\"false\" swallowOutput=\"false\" useNaming=\"true\" \nwrapperClass=\"org.apache.catalina.core.StandardWrapper\">\n          <Resource auth=\"Container\" description=\"DB Connection\" \nname=\"jdbc/CardAlertDB\" scope=\"Shareable\" type=\"javax.sql.DataSource\"/>\n          <Resource auth=\"Container\" description=\"DB Connection\" \nname=\"CardAlertDB\" scope=\"Shareable\" type=\"javax.sql.DataSource\"/>\n        </Context>\n        <Logger className=\"org.apache.catalina.logger.FileLogger\" debug=\"0\" \ndirectory=\"logs\" prefix=\"localhost_log.\" suffix=\".txt\" timestamp=\"true\" \nverbosity=\"1\"/>\n      </Host>\n      <Logger className=\"org.apache.catalina.logger.FileLogger\" debug=\"0\" \ndirectory=\"logs\" prefix=\"catalina_log.\" suffix=\".txt\" timestamp=\"true\" \nverbosity=\"1\"/>\n      <Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\" debug=\"0\" \nresourceName=\"UserDatabase\" validate=\"true\"/>\n    </Engine>\n  </Service>\n</Server>\n\nMy web.xml file\n===============\n<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?>\n\n<!DOCTYPE web-app\n    PUBLIC \"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN\"\n    \"http://java.sun.com/dtd/web-app_2_3.dtd\">\n\n<web-app>\n  <description>MySQL Test App</description>\n  <resource-ref>\n      <description>DB Connection</description>\n      <res-ref-name>CardAlertDB</res-ref-name>\n      <res-type>javax.sql.DataSource</res-type>\n      <res-auth>Container</res-auth>\n  </resource-ref>\n</web-app>\n\n\nCan anybody help me regarding this?", "attachment_id": null, "id": 38652, "creator": "maheswarand@ducont.com", "time": "2003-06-10T09:37:26Z", "bug_id": 20637, "creation_time": "2003-06-10T09:37:26Z", "is_private": false}, {"count": 1, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "Ok, well, double check with the data source and JNDI howtos: you need a resource\nlink to your global resource in your Context element. The error means that the\ndata source definition doesn't have any of the needed parameters (including\ndriver class).\n\nIf you don't need to share the datasource among apps, you'd maybe want to define\nit locally on the Context. It's definitely less error prone.", "id": 38654, "time": "2003-06-10T09:45:14Z", "bug_id": 20637, "creation_time": "2003-06-10T09:45:14Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 20637, "attachment_id": null, "is_private": false, "id": 38656, "time": "2003-06-10T10:07:12Z", "creator": "maheswarand@ducont.com", "creation_time": "2003-06-10T10:07:12Z", "text": "I have configured database in tomcat administration and i have given the \nsetting as required and u may find that in server.xml\n\nin my getConnection class\n===========================\nic = new InitialContext();\nDataSource ds = (DataSource) ic.lookup(\"java:comp/env/CardAlertDB\");\ncon = ds.getConnection(); <-- i am getting error at this point\n\ncan anybody help me?\n"}, {"id": 38665, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "count": 3, "text": "Please follow up with the tomcat-user list. Bugzilla is not meant for debugging\nissues or a helpdesk. ", "time": "2003-06-10T11:39:44Z", "bug_id": 20637, "creation_time": "2003-06-10T11:39:44Z", "is_private": false}]