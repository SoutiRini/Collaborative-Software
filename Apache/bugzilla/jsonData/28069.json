[{"attachment_id": null, "tags": [], "bug_id": 28069, "is_private": false, "count": 0, "id": 54914, "time": "2004-03-31T00:15:53Z", "creator": "joshsandusky@yahoo.com", "creation_time": "2004-03-31T00:15:53Z", "text": "I get the following exception when I have the BCEL ClassParser parse a \nparticular class file.\n\norg.apache.bcel.classfile.ClassFormatException: Invalid byte tag in constant \npool: 60\n\tat org.apache.bcel.classfile.Constant.readConstant(Constant.java:145)\n\tat org.apache.bcel.classfile.ConstantPool.<init>(ConstantPool.java:103)\n\tat org.apache.bcel.classfile.ClassParser.readConstantPool\n(ClassParser.java:254)\n\tat org.apache.bcel.classfile.ClassParser.parse(ClassParser.java:162)\n\tat Test.main(Test.java:13)\n\nHere is a little test class that I use to reproduce the error:\n\nimport org.apache.bcel.classfile.ClassParser;\nimport org.apache.bcel.classfile.JavaClass;\npublic class Test\n{\n\tpublic static void main(String[] args)\n\t{\n\t\ttry\n\t\t{\n\t\t\tClassParser parser = new ClassParser(args[0]);\n\t\t\tJavaClass jc = parser.parse();\n\t\t}\n\t\tcatch (Exception e)\n\t\t{\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n}\n\nThe exception occurs when it attempts to parse the \nLocaleElements_zh__PINYIN.class, which is a Chinese locale file found inside \nthe icu4j.jar file... a jar that is part of the Jena distribution.\n\nIf you run the above test program with the argument of \nLocaleElements_zh__PINYIN.class as the first and only argument, you reproduce \nthe exception. And, as I mentioned above, this class file can be found inside \nicu4j.jar. Go to the following web site to obtain the Jena distribution, which \nhas the icu4j.jar file inside the lib/ directory:\nhttp://prdownloads.sourceforge.net/jena/Jena-2.1.zip?download\n\nThe odd thing is, all of the other chinese (zh) files do not throw the \nexception... only the PINYIN file.\n\nThis bug occurred with BCEL version 5.1 running on Windows XP Professional: \nVersion 2002, Service Pack 1."}, {"count": 1, "tags": [], "creator": "tcurdt@apache.org", "attachment_id": null, "text": "please attache the class file ...the zip file is no longer downloadable", "id": 86374, "time": "2006-03-02T04:36:48Z", "bug_id": 28069, "creation_time": "2006-03-02T04:36:48Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 28069, "is_private": false, "text": "without the class file we cannot reproduce it", "id": 100257, "time": "2007-03-10T07:42:54Z", "creator": "tcurdt@apache.org", "creation_time": "2007-03-10T07:42:54Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "slonopotamusorama@gmail.com", "text": "Get the same error here.\n\nJar: http://repo1.maven.org/maven2/com/ibm/icu/icu4j/2.6.1/icu4j-2.6.1.jar", "id": 120553, "time": "2008-09-11T23:33:39Z", "bug_id": 28069, "creation_time": "2008-09-11T23:33:39Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "slonopotamusorama@gmail.com", "attachment_id": null, "text": "Stacktrace:\n\norg.apache.bcel.classfile.ClassFormatException: Invalid byte tag in constant pool: 60\n\tat org.apache.bcel.classfile.Constant.readConstant(Constant.java:146)\n\tat org.apache.bcel.classfile.ConstantPool.<init>(ConstantPool.java:67)\n\tat org.apache.bcel.classfile.ClassParser.readConstantPool(ClassParser.java:222)\n\tat org.apache.bcel.classfile.ClassParser.parse(ClassParser.java:136)\n\tat org.apache.maven.shared.jar.classes.JarClassesAnalysis.analyze(JarClassesAnalysis.java:92)", "id": 120554, "time": "2008-09-11T23:34:48Z", "bug_id": 28069, "creation_time": "2008-09-11T23:34:48Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 28069, "is_private": false, "text": "Running javap on the file, produces the same problems, so i believe this is just a bad class file.\n\nC:\\>javap -v LocaleElements_zh__PINYIN\njava.lang.ClassFormatError: invalid constant type: 60\n        at sun.tools.javap.ClassData.readCP(ClassData.java:180)\n        at sun.tools.javap.ClassData.read(ClassData.java:81)\n        at sun.tools.javap.ClassData.<init>(ClassData.java:52)\n        at sun.tools.javap.JavapPrinter.<init>(JavapPrinter.java:28)\n        at sun.tools.javap.Main.displayResults(Main.java:201)\n        at sun.tools.javap.Main.perform(Main.java:61)\n        at sun.tools.javap.Main.entry(Main.java:49)\n        at sun.tools.javap.Main.main(Main.java:34)\nERROR:fatal error\nException in thread \"main\" java.lang.NullPointerException\n        at sun.tools.javap.JavapPrinter.javaclassname(JavapPrinter.java:791)\n        at sun.tools.javap.JavapPrinter.printclassHeader(JavapPrinter.java:60)\n        at sun.tools.javap.JavapPrinter.print(JavapPrinter.java:36)\n        at sun.tools.javap.Main.displayResults(Main.java:202)\n        at sun.tools.javap.Main.perform(Main.java:61)\n        at sun.tools.javap.Main.entry(Main.java:49)\n        at sun.tools.javap.Main.main(Main.java:34)\n\n\nI'd suggest looking at the tool that generated the class file.", "id": 120570, "time": "2008-09-12T18:09:48Z", "creator": "dbrosius@apache.org", "creation_time": "2008-09-12T18:09:48Z", "attachment_id": null}]