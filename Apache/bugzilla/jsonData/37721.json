[{"count": 0, "tags": [], "bug_id": 37721, "attachment_id": null, "is_private": false, "id": 83025, "time": "2005-11-30T19:31:26Z", "creator": "dstarr@allofe.net", "creation_time": "2005-11-30T19:31:26Z", "text": "If you have a form that has enctype=\"multipart/form-data\" and post a value that \ncontains \"../../\" the browser hangs.\n\nUpon checking the error log the following message shows up: \"(70007)The timeout \nspecified has expired: core_output_filter: writing data to the network\"\n\nIf you post \"../\" it works.  Also, it will work if you use https.\nHere are two urls to the same program one http the other https, where you can \nduplicate the problem.  The php script simply outputs the html for the form, \nand on submission it does a print_r of $_REQUEST and $_FILES\n\nhttp://www.auctionplus.com/academic_demo/test.php\nhttps://www.auctionplus.com/academic_demo/test.php"}, {"count": 1, "tags": [], "bug_id": 37721, "attachment_id": null, "id": 83027, "time": "2005-11-30T19:32:32Z", "creator": "dstarr@allofe.net", "creation_time": "2005-11-30T19:32:32Z", "is_private": false, "text": "*** Bug 37720 has been marked as a duplicate of this bug. ***"}, {"count": 2, "tags": [], "creator": "nd@perlig.de", "attachment_id": null, "text": "I'm wondering, how that could be an apache bug. The httpd does not parse the\nmultipart form in any way. Perhaps you want to file a report at php's?", "id": 83028, "time": "2005-11-30T19:52:58Z", "bug_id": 37721, "creation_time": "2005-11-30T19:52:58Z", "is_private": false}, {"count": 3, "tags": [], "creator": "dstarr@allofe.net", "is_private": false, "text": "I thought it might be a php bug too, however I tried creating the same form in \na plain html file and posting to the same html file.  I know that html cannot \nhandle the post, but wanted to remove any connection to php.  If it worked it \nshould have given a message to the effect that you can't post to the http \nfile.  However it still hangs.  I have created html versions of the test.  The \nlinks are below.\n\nhttp://www.auctionplus.com/academic_demo/test.html\nhttps://www.auctionplus.com/academic_demo/test.html", "id": 83029, "time": "2005-11-30T20:02:19Z", "bug_id": 37721, "creation_time": "2005-11-30T20:02:19Z", "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 37721, "attachment_id": null, "is_private": false, "id": 83030, "time": "2005-11-30T21:15:36Z", "creator": "nick@webthing.com", "creation_time": "2005-11-30T21:15:36Z", "text": "Looks a priori like a bug in your script.  What we need is an example document \nthat demonstrates the behaviour, so we can post it to our own upload handlers. "}, {"count": 5, "tags": [], "bug_id": 37721, "attachment_id": 17091, "text": "Created attachment 17091\nPHP Script to duplicate issue", "id": 83032, "time": "2005-11-30T21:42:57Z", "creator": "dstarr@allofe.net", "creation_time": "2005-11-30T21:42:57Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 37721, "attachment_id": 17092, "is_private": false, "id": 83033, "time": "2005-11-30T21:43:35Z", "creator": "dstarr@allofe.net", "creation_time": "2005-11-30T21:43:35Z", "text": "Created attachment 17092\nHTML Script to duplicate issue"}, {"count": 7, "tags": [], "bug_id": 37721, "attachment_id": null, "id": 83035, "time": "2005-11-30T22:56:36Z", "creator": "dstarr@allofe.net", "creation_time": "2005-11-30T22:56:36Z", "is_private": false, "text": "I'm not sure if this will help narrow it down or not, but it does not work on \nIE or Firefox on either Mac or Windows.  But Safari on Mac does work."}, {"count": 8, "tags": [], "text": "I tested your HTML page without PHP loaded into the server and I do not see any\nproblem. It just returns immediately. Same with PHP 5.1.1. Seems to be a problem\nthat is specfic to your environment.\nBrowser: Mozilla on Linux.\nUsing the same browser to your http address causes a hang.", "is_private": false, "id": 83036, "creator": "rpluem@apache.org", "time": "2005-11-30T23:03:52Z", "bug_id": 37721, "creation_time": "2005-11-30T23:03:52Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 37721, "attachment_id": null, "is_private": false, "id": 83037, "time": "2005-11-30T23:09:51Z", "creator": "nick@webthing.com", "creation_time": "2005-11-30T23:09:51Z", "text": "We're not responsible for bugs in PHP.  And you still haven't supplied a \nsample upload that triggers the alleged \"bug\". "}, {"count": 10, "tags": [], "creator": "dstarr@allofe.net", "attachment_id": null, "text": "The problem doesn't occur with any specific file being uploaded.  You can leave \nthe file upload box empty and put ../../ in the text box and it breaks.\n\nHere is a link to a phpinfo file to get environment information about the PHP + \nApache install.\n\nhttp://www.auctionplus.com/phpinfo.php\n", "id": 83039, "time": "2005-11-30T23:33:48Z", "bug_id": 37721, "creation_time": "2005-11-30T23:33:48Z", "is_private": false}, {"count": 11, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "As this seems to be specific to your environment please attach your configuration.", "id": 83045, "time": "2005-12-01T00:19:24Z", "bug_id": 37721, "creation_time": "2005-12-01T00:19:24Z", "is_private": false}, {"count": 12, "tags": [], "text": "Created attachment 17094\nApache conf file", "attachment_id": 17094, "id": 83047, "creator": "dstarr@allofe.net", "time": "2005-12-01T00:36:16Z", "bug_id": 37721, "creation_time": "2005-12-01T00:36:16Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 37721, "attachment_id": null, "is_private": false, "id": 83048, "time": "2005-12-01T00:45:19Z", "creator": "nick@webthing.com", "creation_time": "2005-12-01T00:45:19Z", "text": "Well, I can enter that in any field of three upload forms I just tried, and \nthe worst that happens is that it complains of a bad request (as it also does \nif I enter other garbage such as \"foobar\" in the fields in \nquestion).  ../../../.. in a filepath is just fine. \n \nTested with both mod_upload and CGI parsing the input. "}, {"count": 14, "tags": [], "bug_id": 37721, "attachment_id": null, "id": 83049, "time": "2005-12-01T00:57:00Z", "creator": "dstarr@allofe.net", "creation_time": "2005-12-01T00:57:00Z", "is_private": false, "text": "Just to clarify, the ../../ could be in a value posted from a hidden input, \ntext input, or select input and the input type=file can be left blank.\n\nIt must be some interaction of the browser and the web server since it works \nfine in Safari on Mac"}]