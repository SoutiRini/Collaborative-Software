[{"attachment_id": null, "tags": [], "bug_id": 32252, "text": "If I add a counter to a forEach controller then the value set by the counter\nisn't created until the second time through.  For example, I have a forEach\ncontroller and under it I have a counter that sets the value of the \"myCount\"\nvariable. If I use the myCount variable in a sampler then ${myCount} evaluates\nto ${myCount} in the output rather than, for example, the number 1.  If I add\nthe counter and the sampler into a loop controller under the forEach controller\nthen in the first loop ${myCount} evaluates to ${myCount} but on the next loop\n${myCount} evaluates to 1. All other controllers work properly with the counter.\nThis setup should show the bug:\n\nTestPlan (inputVar_1 is set to a value)\nThreadGroup 1 \n   - ForEach Controller (input variable: inputVar)\n      - Counter (start: 1, variable reference: forCount)\n      - Http Sampler (uses ${forCount} somewhere)\nThreadGroup 2 \n   - ForEach Controller (input variable: inputVar)\n      - Loop Controller (loop count: 2)\n         - Counter (start: 1, variable reference: loopCount)\n         - Http Sampler (uses ${loopCount} somewhere)\nThreadGroup 3\n   - (Not a ForEach) Controller\n      - Counter (start: 1, variable reference: myCount)\n      - Http Sampler (uses ${myCount} somewhere)\n\nThe results are as follows (where -> indicates evaluation of an expression):\n\nThreadGroup 1: ${forCount} -> ${forCount}\nThreadGroup 2, iteration 1: ${loopCount} -> ${loopCount}\nThreadGroup 2, iteration 2: ${loopCount} -> 1\nThreadGroup 3: ${myCount} -> 1\n\nOf course, each run should should evaluate like ThreadGroup 3.\n\nI am running on Windows XP SP2, using Java 1.4.2_05, and running Jmeter 2.0.1. I\nalso tested the most recent nightly build (Jmeter 2.0.2 RC1 build 11/8/04) and\nit had the same behavior.  I can provide a testplan that shows this behavior, if\nrequested.", "count": 0, "id": 66940, "time": "2004-11-15T19:54:24Z", "creator": "observewisdom@yahoo.com", "creation_time": "2004-11-15T19:54:24Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 13482\nDemonstrates the bug with ForEach controllers and counters\n\nAttached is a JMX file which gives an example of this bug.", "attachment_id": 13482, "bug_id": 32252, "id": 67064, "time": "2004-11-17T19:21:59Z", "creator": "observewisdom@yahoo.com", "creation_time": "2004-11-17T19:21:59Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 32252, "attachment_id": null, "id": 72545, "creation_time": "2005-03-17T04:13:16Z", "time": "2005-03-17T04:13:16Z", "creator": "sebb@apache.org", "text": "Thanks for the report - bug has been fixed in 2.0 branch", "is_private": false}]