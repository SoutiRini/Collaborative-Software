[{"count": 0, "tags": [], "text": "Created attachment 29698\nTest web application.\n\nHello, \n\nI noticed that there is a jsp compilation problem when the application context root contains white spaces.\n\nSteps to reproduce:\nDeploy the attached application and request:\nhttp://<host>:<port>/Space%20AppTest/testClassInvoker.jsp\n\nThen the following exception is received in response:\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:661)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:728)\nroot cause \njava.lang.IllegalArgumentException: Negative time\n\tjava.io.File.setLastModified(File.java:1258)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:376)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:353)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:340)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n\nI would like to propose a small patch that fixes this. The fix simply moves the decoding in org.apache.naming.resources.DirContextURLConnection.connect() method a little bit earlier.\nWithout the fix path.startsWith(contextPath + \"/\") check returns false in our case, as contexPath is in decoded form, while path is not decoded yet.\n\nThanks and Best Regards,\nPolina", "attachment_id": 29698, "bug_id": 54249, "id": 163886, "time": "2012-12-05T12:57:49Z", "creator": "polina.genova@gmail.com", "creation_time": "2012-12-05T12:57:49Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 29699\nProposed patch.", "is_private": false, "id": 163887, "creator": "polina.genova@gmail.com", "time": "2012-12-05T12:59:43Z", "bug_id": 54249, "creation_time": "2012-12-05T12:59:43Z", "attachment_id": 29699}, {"count": 2, "tags": [], "bug_id": 54249, "attachment_id": null, "text": "For the record, Tomcat 8 is not affected by this bug as it uses a new resources implementation.", "id": 164332, "time": "2013-01-02T21:16:03Z", "creator": "markt@apache.org", "creation_time": "2013-01-02T21:16:03Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 54249, "attachment_id": null, "is_private": false, "id": 164333, "time": "2013-01-02T21:27:33Z", "creator": "markt@apache.org", "creation_time": "2013-01-02T21:27:33Z", "text": "Thanks for the report and the patch. This has been fixed in trunk and 7.0.x and will be included in 7.0.35 onwards."}]