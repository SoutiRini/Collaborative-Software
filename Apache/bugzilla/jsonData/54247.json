[{"count": 0, "tags": [], "bug_id": 54247, "attachment_id": 29697, "is_private": false, "id": 163882, "time": "2012-12-05T10:00:36Z", "creator": "benoit_rey@hotmail.com", "creation_time": "2012-12-05T10:00:36Z", "text": "Created attachment 29697\nTomcat log (first stop with service manager, second stop with shutdown port)\n\nTomcat 7.0.33 is installed as Windows service and is using JDK 1.7.0_09.\nJmxRemoteLifecycleListener is used :\n<Listener className=\"org.apache.catalina.mbeans.JmxRemoteLifecycleListener\" \n\t\trmiRegistryPortPlatform=\"8999\" rmiServerPortPlatform=\"9999\" />\n\nWhen Tomcat is stopped through the Windows service manager or the Common Daemon Service Manager, the JmxRemoteLifecycleListener listener fail to stop with the following exception :\n\n05-Dec-2012 10:44:49.306 SEVERE [Thread-36] org.apache.catalina.mbeans.JmxRemoteLifecycleListener.destroyServer The JMX connector server could not be stopped for the Platform server\n java.io.IOException: Cannot bind to URL: javax.naming.NoInitialContextException: Cannot instantiate class: org.apache.naming.java.javaURLContextFactory [Root exception is java.lang.ClassNotFoundException: org/apache/naming/java/javaURLContextFactory]\n\tat javax.management.remote.rmi.RMIConnectorServer.newIOException(RMIConnectorServer.java:826)\n\tat javax.management.remote.rmi.RMIConnectorServer.stop(RMIConnectorServer.java:569)\n\tat org.apache.catalina.mbeans.JmxRemoteLifecycleListener.destroyServer(JmxRemoteLifecycleListener.java:282)\n\tat org.apache.catalina.mbeans.JmxRemoteLifecycleListener.lifecycleEvent(JmxRemoteLifecycleListener.java:226)\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\n\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)\n\tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:402)\n\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:347)\n\tat org.apache.catalina.core.StandardServer.stopInternal(StandardServer.java:748)\n\tat org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)\n\tat org.apache.catalina.startup.Catalina.stopServer(Catalina.java:486)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:601)\n\tat org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:371)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:453)\nCaused by: javax.naming.NoInitialContextException: Cannot instantiate class: org.apache.naming.java.javaURLContextFactory [Root exception is java.lang.ClassNotFoundException: org/apache/naming/java/javaURLContextFactory]\n\tat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:674)\n\tat javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307)\n\tat javax.naming.InitialContext.init(InitialContext.java:242)\n\tat javax.naming.InitialContext.<init>(InitialContext.java:216)\n\tat javax.management.remote.rmi.RMIConnectorServer.stop(RMIConnectorServer.java:558)\n\t... 15 more\nCaused by: java.lang.ClassNotFoundException: org/apache/naming/java/javaURLContextFactory\n\tat java.lang.Class.forName0(Native Method)\n\tat java.lang.Class.forName(Class.java:264)\n\tat com.sun.naming.internal.VersionHelper12.loadClass(VersionHelper12.java:63)\n\tat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:671)\n\t... 19 more\n\nIf Tomcat is stopped through the use of the shutdown port, the JmxRemoteLifecycleListener listener stop gently."}, {"count": 1, "tags": [], "bug_id": 54247, "attachment_id": null, "is_private": false, "id": 164328, "time": "2013-01-02T20:41:31Z", "creator": "markt@apache.org", "creation_time": "2013-01-02T20:41:31Z", "text": "Thanks for the report. This has been fixed in trunk and 7.0.x and will be included in 7.0.35 onwards."}]