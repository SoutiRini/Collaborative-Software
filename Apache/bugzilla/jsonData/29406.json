[{"count": 0, "attachment_id": null, "bug_id": 29406, "text": "The new behavior of Tomcat 5 which sets the ContextClassLoader in the \nJAASRealm to the server classloader prevents from defining LoginModules within \nthe context of a web app.  The JAASRealm implementation on Tomcat 5 is \ndifferent from the one on Tomcat 4 in that it sets the current Thread \nClassLoaderContext to that of the Catalina core itself before accessing a \nLoginModule.\n\nThis issue is discussed on Jetspeed 2 issue tracking under:\nhttp://nagoya.apache.org/jira/browse/JS2-55\n\nand on J2's mailing list at:\nhttp://nagoya.apache.org/eyebrowse/ReadMsg?listName=jetspeed-\ndev@jakarta.apache.org&msgNo=14605\n\nSome of the negatives of that new implementation is that all services used by \nthe LoginModule must now be part of Tomcat classloader.\n\nIn an application where user management leverages some caching, this requires \nduplication of the caching layer, one for the server and one for the web \napplication.  This seems unneccessary.\n\nI copied the jetspeed-dev list on this issue for information and will include \na patch created by Ate Douma to address this issue.\n\nRegards,\n\nDavid Le Strat.", "id": 58802, "time": "2004-06-05T17:10:52Z", "creator": "dlestrat@apache.org", "creation_time": "2004-06-05T17:10:52Z", "tags": [], "is_private": false}, {"attachment_id": 11771, "tags": [], "creator": "dlestrat@apache.org", "text": "Created attachment 11771\nTomcat 5 JAASRealm Proposed Changes.", "count": 1, "id": 58803, "time": "2004-06-05T17:12:49Z", "bug_id": 29406, "creation_time": "2004-06-05T17:12:49Z", "is_private": false}, {"count": 2, "tags": [], "creator": "remm@apache.org", "attachment_id": null, "text": "I personally do not use the JAAS functionality of Tomcat, so I have no real\nopinion on this, but I expect the answer to be a \"no\" (or, rather: \"yes, we'll\nadd a flag, with the default being what we're currently doing\").\nNote: please submit patches rather than full files.", "id": 58804, "time": "2004-06-05T17:26:30Z", "bug_id": 29406, "creation_time": "2004-06-05T17:26:30Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 29406, "attachment_id": null, "text": "A flag will do. Thank you. Which versions of Tomcat will be impacted by your \nproposed changed and under what timeline (just for info).\n\nLet me know if you want me to attach the patch instead of the source file.\n\nRegards,\n\nDavid Le Strat.", "id": 58805, "time": "2004-06-05T17:41:49Z", "creator": "dlestrat@apache.org", "creation_time": "2004-06-05T17:41:49Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 29406, "attachment_id": null, "text": "Yes, please attach just a patch.  If you do it today I'll try to get it into \nTomcat 5.0.27 which will be built tomorrow.  Otherwise, it will be the tomcat \nrelease after that, probably 3-4 weeks away.", "id": 59322, "time": "2004-06-16T15:45:20Z", "creator": "yoavs@computer.org", "creation_time": "2004-06-16T15:45:20Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 29406, "text": "OK, I've added an attribute called useContextClassLoader, and accessors for \nthis attribute.  The default value is true, meaning use the context \nClassLoader.  This maintains backwards compatability by default.  You can set \nthis attribute to false to get the old behavior which is what you desire.", "id": 61272, "time": "2004-07-28T21:32:49Z", "creator": "yoavs@computer.org", "creation_time": "2004-07-28T21:32:49Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "creator": "asfbugzilla@nuru.net", "text": "The behavior (and name) of this flag is confusing and it seems not to be \nproperly implemented.  See bug 33186.", "id": 69969, "time": "2005-01-22T01:45:26Z", "bug_id": 29406, "creation_time": "2005-01-22T01:45:26Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 29406, "attachment_id": null, "text": "Please do not reopen this bug report.", "id": 69976, "time": "2005-01-22T13:08:51Z", "creator": "remm@apache.org", "creation_time": "2005-01-22T13:08:51Z", "is_private": false}]