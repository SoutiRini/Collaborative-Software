[{"count": 0, "tags": [], "bug_id": 21097, "attachment_id": null, "text": "The following build.xml file with ant 1.4 run on a Win2K machine (the build.xml \nis under directory \"foo\" in my C drive) correctly generates the output\n\n     [echo]        foo = C:/foo\n     [echo]        bar = C:/bar\n\nbut on ant 1.5.3 on the same machine generates the incorrect output\n\n\n     [echo]        foo = C:\\foo\n     [echo]        bar = C:\\foo/../bar\n\nI tried specifying dirsep and pathsep as \"/\" rather than targetos, but that did \nnot make a differnce.  If you can give me a workaround, I will reduce the \nseverity of this bug, but I am stuck on not being able to upgrade beyond ant \n1.4 (same problem is also on 1.5) right now as I have a target in one of my \nbuild.xml files that depends on this functionality to correctly write out an \noutput file needed by another program that expects unix separated paths.  Note \nI have tried this both under Cygwin and under the DOS command prompt, same \nresults either way.\n\n<?xml version=\"1.0\" ?>\n<project name=\"foo\" default=\"init\">\n\n  <property name=\"foo.rootdir\" value=\"${basedir}\"/>\n  <property name=\"bar.rootdir\" value=\"${foo.rootdir}/../bar\"/>\n\n  <path id=\"foo.rootdir.path\">\n    <pathelement location=\"${foo.rootdir}\"/>\n  </path>\n\n  <path id=\"bar.rootdir.path\">\n    <pathelement location=\"${bar.rootdir}\"/>\n  </path>\n\n  <target name=\"init\">\n    <pathconvert targetos=\"unix\" property=\"foo.rootdir\" \nrefid=\"foo.rootdir.path\"/>\n    <pathconvert targetos=\"unix\" property=\"bar.rootdir\" \nrefid=\"bar.rootdir.path\"/>\n    <echo>\n       foo = ${foo.rootdir}\n       bar = ${bar.rootdir}\n    </echo>\n  </target>\n\n</project>", "id": 39449, "time": "2003-06-25T22:46:00Z", "creator": "fgarcia222@yahoo.com", "creation_time": "2003-06-25T22:46:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 21097, "text": "Your problem is that :\n- properties are immutable,\n- pathconvert cannot write to a property which exists already\nchange your build.xml like this :\n  <target name=\"init\">\n    <pathconvert targetos=\"unix\" property=\"foo.rootdir2\" \nrefid=\"foo.rootdir.path\"/>\n    <pathconvert targetos=\"unix\" property=\"bar.rootdir2\" \nrefid=\"bar.rootdir.path\"/>\n    <echo>\n       foo = ${foo.rootdir2}\n       bar = ${bar.rootdir2}\n    </echo>\n  </target>\n\nAnd it will work like a charm.\nCheers. Antoine.", "id": 39587, "time": "2003-06-29T14:51:35Z", "creator": "antoine@apache.org", "creation_time": "2003-06-29T14:51:35Z", "is_private": false, "attachment_id": null}]