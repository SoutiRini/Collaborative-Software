[{"count": 0, "tags": [], "text": "When trying to revoke a permission on a node in slide, the following error  \noccurs:  \n18 Apr 2005 11:56:34 - org.apache.slide.store.impl.rdbms.StandardRDBMSAdapter  \n- ERROR - SQL error 907 on /files/conference:ORA-00907: missing right  \nparenthesis  \n  \njava.sql.SQLException: ORA-00907: missing right parenthesis  \n  \n        at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)  \n        at oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)  \n        at oracle.jdbc.ttc7.Oall7.receive(Oall7.java:582)  \n        at oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1986)  \n        at  \noracle.jdbc.ttc7.TTC7Protocol.parseExecuteFetch(TTC7Protocol.java:1144)  \n        at  \noracle.jdbc.driver.OracleStatement.executeNonQuery(OracleStatement.java:2152)  \n        at  \noracle.jdbc.driver.OracleStatement.doExecuteOther(OracleStatement.java:2035)  \n        at  \noracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2876)  \n        at  \noracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:609)  \n        at  \norg.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:101)  \n        at  \norg.apache.slide.store.impl.rdbms.CommonRDBMSAdapter.revokePermission(CommonRDBMSAdapter.java:235)  \n        at  \norg.apache.slide.store.impl.rdbms.AbstractRDBMSStore.revokePermission(AbstractRDBMSStore.java:479)  \n        at  \norg.apache.slide.store.AbstractStore.revokePermission(AbstractStore.java:759)  \n        at  \norg.apache.slide.store.ExtendedStore.revokePermission(ExtendedStore.java:658)  \n        at  \norg.apache.slide.security.SecurityImpl.revokePermission(SecurityImpl.java:369)  \n        at org.apache.slide.macro.MacroImpl.deleteObject(MacroImpl.java:814)  \n        at org.apache.slide.macro.MacroImpl.delete(MacroImpl.java:524)  \n        at org.apache.slide.macro.MacroImpl.delete(MacroImpl.java:482)  \n        at  \norg.apache.slide.webdav.method.DeleteMethod.executeRequest(DeleteMethod.java:156)  \n        at  \norg.apache.slide.webdav.method.AbstractWebdavMethod.run(AbstractWebdavMethod.java:405)  \n        at  \norg.apache.slide.webdav.WebdavServlet.service(WebdavServlet.java:155)  \n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)  \n        at  \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:252)  \n        at  \norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)  \n        at  \norg.apache.slide.webdav.filter.LogFilter.doFilter(LogFilter.java:141)  \n        at  \norg.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:202)  \n        at  \norg.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:173)  \n        at  \norg.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214)  \n        at  \norg.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:178)  \n        at  \norg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:407)  \n        at  \norg.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126)  \n        at  \norg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:105)  \n        at  \norg.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)  \n        at  \norg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)  \n        at  \norg.apache.coyote.http11.Http11Processor.process(Http11Processor.java:825)  \n        at  \norg.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:738)  \n        at  \norg.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526)  \n        at  \norg.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)  \n        at  \norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)  \n        at java.lang.Thread.run(Thread.java:534)  \n  \n  \nLooking at line of code, we get this wrong request:  \n\"delete from PERMISSIONS where PERMISSIONS.OBJECT_ID in (select ou.URI_ID from  \nURI ou, URI su, URI au where ou.URI_STRING = ? and SUBJECT_ID = su.URI_ID and  \nsu.URI_STRING = ? and ACTION_ID = au.URI_ID and au.URI_STRING = ? and  \nVERSION_NO\" + ((revisionNumber == null) ? \" IS NULL \" : \" = '\" +  \nrevisionNumber.toString() + \"'\"  \n  \nwhere i think we should read this:  \n\"delete from PERMISSIONS where PERMISSIONS.OBJECT_ID in (select ou.URI_ID from  \nURI ou, URI su, URI au where ou.URI_STRING = ? and SUBJECT_ID = su.URI_ID and  \nsu.URI_STRING = ? and ACTION_ID = au.URI_ID and au.URI_STRING = ? and  \nVERSION_NO\" + (((revisionNumber == null) ? \" IS NULL \" : \" = '\" +  \nrevisionNumber.toString() + \"'\")  +\")\"", "attachment_id": null, "id": 73766, "creator": "delbd@oma.be", "time": "2005-04-18T14:07:34Z", "bug_id": 34501, "creation_time": "2005-04-18T14:07:34Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 34501, "is_private": false, "id": 73767, "time": "2005-04-18T14:18:40Z", "creator": "mkalen@apache.org", "creation_time": "2005-04-18T14:18:40Z", "tags": [], "text": "Already fixed in CVS by Stefan L\u00fctzkendorf, see URL."}]