[{"count": 0, "attachment_id": null, "bug_id": 5597, "text": "If, when configuring a servlet, the order of the elements is incorrect, you get\na NullPointerException in XmlMapper.java and a somewhat confusing message to the\nconsole (stdout/stderr).\n\nweb.xml has:\n    <servlet>\n\t<servlet-name>myservlet</servlet-name>\n\t<init-param>\n            <param-name>aParam</param-name>\n            <param-value>and its value</param-value>\n\t</init-param>\n\t<servlet-class>com.myco.some.ClassName</servlet-class>\n\t<load-on-startup>2</load-on-startup>\n    </servlet>\n\nIf I put the servlet-class definition before the init-param then everything is\nfine.  In localhost_log I have:\n\n2001-12-27 14:05:00 ContextConfig[/xigole] Parse error in application web.xml\njava.lang.NullPointerException\n    at org.apache.catalina.util.xml.XmlMapper.readXml(XmlMapper.java:295)\n    at\norg.apache.catalina.startup.ContextConfig.applicationConfig(ContextConfig.java:256)\n    at org.apache.catalina.startup.ContextConfig.start(ContextConfig.java:824)\n    at\norg.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:224)\n    at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:155)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1131)\n    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3334)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:785)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:454)\n    at org.apache.catalina.core.StandardHost.install(StandardHost.java:712)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:599)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:777)\n    at\norg.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:463)\n    at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:155)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1131)\n    at org.apache.catalina.core.StandardHost.start(StandardHost.java:612)\n    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1123)\n    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:307)\n    at org.apache.catalina.core.StandardService.start(StandardService.java:388)\n    at org.apache.catalina.core.StandardServer.start(StandardServer.java:505)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:776)\n    at org.apache.catalina.startup.Catalina.execute(Catalina.java:681)\n    at org.apache.catalina.startup.Catalina.process(Catalina.java:179)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:243)\n\n2001-12-27 14:05:00 ContextConfig[/xigole]: Marking this application unavailable\ndue to previous error(s)\n\nand the console has:\n\nERROR reading java.io.ByteArrayInputStream@60f2f6\nAt The content of element type \"servlet\" must match\n\"(icon?,servlet-name,display-name?,description?,(servlet-class|jsp-file),init-param*,load-on-startup?,security-role-ref*)\".\n\nStarting service Tomcat-Apache\nApache Tomcat/4.0.1\n\nO/S is: SunOS turtle 5.8 Generic_108528-12 sun4u sparc SUNW,Ultra-5_10\nJava is: Java HotSpot(TM) Client VM (build 1.3.1_01, mixed mode)", "id": 9177, "time": "2001-12-27T13:25:44Z", "creator": "scott@xigole.com", "creation_time": "2001-12-27T13:25:44Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 5597, "text": "Unless some people would really want to see this fixed in 4.0.x (and the fix is\nlow risk), I would not attempt to fix that cosmetic issue (which I never\nencountered) since the XMLMapper has been abandoned in the HEAD branch.", "id": 9278, "time": "2002-01-02T09:05:43Z", "creator": "remm@apache.org", "creation_time": "2002-01-02T09:05:43Z", "tags": [], "is_private": false}]