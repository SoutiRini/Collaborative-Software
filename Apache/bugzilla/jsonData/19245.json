[{"count": 0, "tags": [], "bug_id": 19245, "is_private": false, "text": "I use encoding iso-8859-2 on my pages. I've made a header file for all my \njsp files, and i've used directive page with pageEncoding property \nset inside my header file. But, in files that this header is included from, \nit seems not to work. Here is a simple example:\n\n-------------------- first.jsp\n\n<%@ include file=\"second.jsp\" %>\n\n\u00b1\u00b2\u00b3\n\n\n-------------------- second.jsp\n\n<%@page pageEncoding=\"utf-8\" %>\n\n\u00b1\u00b2\u00b3 <BR>\n\n\n-------------------- RESULT\n\nHTTP/1.1 200 OK\nSet-Cookie: JSESSIONID=874E94484EAEF96897C8652BEB697066; Path=/example\nContent-Type: text/html;charset=utf-8\nContent-Length: 26\nDate: Wed, 23 Apr 2003 11:00:36 GMT\nServer: Apache Coyote/1.0\nConnection: close\n\n\n\n\u00ef\u00bf\u0153\u00ef\u00bf\u0153\u00ef\u00bf\u0153 <BR>\n\n\n\u00c2\u00b1\u00c2\u00b2\u00c2\u00b3\n\n\n\n---------------------------\n\n\nAccording to JSP Syntax:\n\n\"No matter where you position the page directive in a JSP page or included\nfiles, it applies to the entire translation unit.\"\n\nBut, as you can see, two different lines of text are displayed.", "id": 35882, "time": "2003-04-23T11:29:36Z", "creator": "lukasikg@elf.ii.uj.edu.pl", "creation_time": "2003-04-23T11:29:36Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 19245, "is_private": false, "id": 36330, "time": "2003-04-29T21:41:00Z", "creator": "kin-man.chung@sun.com", "creation_time": "2003-04-29T21:41:00Z", "tags": [], "text": "JSP 1.2 spec does not allow a page directive with a pageEncoding be specified in\nboth the including and the (statically) included page.  However, if the\npageEncoding is specified only in the included page, it would be too late to\napply it to the including page, because the including page would already have\nbeen opened and processed (at least partially, up to the include directive).\n\nThis spec bug has been fixed in JSP 2.0, which is implemented in Tomcat 5.  Now\nit allows different pageEncodings be specified in the including and the included\npages.\n\nSince this is a spec bug, it won't be fixed.  Please check out TC5."}, {"count": 2, "tags": [], "creator": "kin-man.chung@sun.com", "attachment_id": null, "is_private": false, "id": 36343, "time": "2003-04-29T23:03:46Z", "bug_id": 19245, "creation_time": "2003-04-29T23:03:46Z", "text": "*** Bug 14188 has been marked as a duplicate of this bug. ***"}, {"count": 3, "tags": [], "creator": "medthomas@ntlworld.com", "attachment_id": null, "is_private": false, "id": 44007, "time": "2003-09-10T23:03:22Z", "bug_id": 19245, "creation_time": "2003-09-10T23:03:22Z", "text": "*** Bug 22645 has been marked as a duplicate of this bug. ***"}, {"count": 4, "tags": [], "bug_id": 19245, "is_private": false, "id": 44009, "creation_time": "2003-09-10T23:05:45Z", "time": "2003-09-10T23:05:45Z", "creator": "medthomas@ntlworld.com", "text": "*** Bug 19617 has been marked as a duplicate of this bug. ***", "attachment_id": null}, {"count": 5, "tags": [], "creator": "HeartBit@runeconsulting.com", "attachment_id": null, "id": 44083, "time": "2003-09-12T04:08:29Z", "bug_id": 19245, "creation_time": "2003-09-12T04:08:29Z", "is_private": false, "text": "---\nIndex: ParserController.java\n===================================================================\nRCS file: /home/cvspublic/jakarta-tomcat-\n4.0/jasper/src/share/org/apache/jasper/compiler/ParserController.java,v\nretrieving revision 1.18\ndiff -u -r1.18 ParserController.java\n--- ParserController.java\t21 May 2002 01:40:13 -0000\t1.18\n+++ ParserController.java\t22 Aug 2003 02:40:56 -0000\n@@ -122,9 +122,8 @@\n     /*\n      * The encoding of the \"top\" file. This encoding is used\n      * for included files by default.\n-     * Defaults to \"ISO-8859-1\" per JSP spec.\n      */\n-    private String topFileEncoding = \"ISO-8859-1\"; \n+    private String topFileEncoding = System.getProperty(\"file.encoding\"); \n     \n     /*\n      * The 'new' encoding required to read a page.\n\n--- \n"}, {"count": 6, "attachment_id": null, "bug_id": 19245, "is_private": false, "id": 44084, "time": "2003-09-12T04:50:34Z", "creator": "william.barker@wilshire.com", "creation_time": "2003-09-12T04:50:34Z", "tags": [], "text": "The suggested patch clearly violates the JSP-Spec (which mandates iso-8859-1 as \nthe default encoding).  See Kin-Man's comments above."}, {"count": 7, "tags": [], "bug_id": 19245, "is_private": false, "id": 44088, "creation_time": "2003-09-12T06:39:05Z", "time": "2003-09-12T06:39:05Z", "creator": "HeartBit@runeconsulting.com", "text": "I think that JSP spec only care about the encoding of input(HTTPRequest)/output\n(HTTPResponse). And the encoding of the JSP file itself should be treated as \nsystem default encoding unless it has specified as following. <xml \nencoding=\"HERE\">", "attachment_id": null}, {"count": 8, "tags": [], "creator": "william.barker@wilshire.com", "attachment_id": null, "id": 44092, "time": "2003-09-12T07:11:19Z", "bug_id": 19245, "creation_time": "2003-09-12T07:11:19Z", "is_private": false, "text": "You are 100% wrong. The pageEncoding is specified to default to the content-\ntype encoding, which defaults to iso-latin-1.\n\nPlease do me the courtesy of actually reading the JSP spec before wasting my \ntime expounding your wild theories."}, {"count": 9, "tags": [], "bug_id": 19245, "is_private": false, "id": 44105, "creation_time": "2003-09-12T10:33:41Z", "time": "2003-09-12T10:33:41Z", "creator": "mg@fork.pl", "text": "Hi \nI don't want to fight \"reopens against won't fix\" ;) but - what about my\nproposed patch from bug 19617? It makes Tomcat4 MORE specs compliant. Kim-Man\nChung said  that he has no objections to my patch. \n\nPlease understand that now it's impossible to use encoding other than iso-8859-1\nin included files - it's major flaw for all non-ascii programmers.", "attachment_id": null}]