[{"attachment_id": null, "tags": [], "bug_id": 30482, "text": "I encountered this problem trying to deploy a struts based application on JBoss\n3.2.5 running the bundled Tomcat 5.0.26.  Was able to reproduce on 5.0.27. \nBasically, when deploying a WAR file, it appears the JSP compiler is having some\nproblems finding portions of the taglibs and/or message resources.  This\napplication will run on both Tomcat 4.1 and JBoss 3.2.3 which runs Tomcat 4.1. \nHave included the stacktrace here and will attach a sample project that can be\ndeployed to test any fixes.\n\nHave encountered some inklings of this problem on various forums, etc.\nhttp://www.junlu.com/msg/49694.html\nhttp://www.junlu.com/msg/77969.html\nhttp://forums.atlassian.com/thread.jspa?threadID=2372&tstart=0\n\nHowever, they mention previous versions and it seems to be very strange that it\nis happening again in the latter versions.\n\nStacktrace:\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: 7 in the jsp file: /forms/loginForm.jsp\nGenerated servlet error:\n/home/cuppett/jboss-3.2.5/server/all/work/jboss.web/localhost/_/org/apache/jsp/forms/loginForm_jsp.java:109:\n_jspx_meth_bean_message_0(javax.servlet.jsp.tagext.JspTag,javax.servlet.jsp.PageContext)\nin org.apache.jsp.forms.loginForm_jsp cannot be applied to\n(org.apache.struts.taglib.html.FormTag,javax.servlet.jsp.PageContext)\n        if (_jspx_meth_bean_message_0(_jspx_th_html_form_0, _jspx_page_context))\n            ^\n\n\nAn error occurred at line: 7 in the jsp file: /forms/loginForm.jsp\nGenerated servlet error:\n/home/cuppett/jboss-3.2.5/server/all/work/jboss.web/localhost/_/org/apache/jsp/forms/loginForm_jsp.java:115:\n_jspx_meth_bean_message_1(javax.servlet.jsp.tagext.JspTag,javax.servlet.jsp.PageContext)\nin org.apache.jsp.forms.loginForm_jsp cannot be applied to\n(org.apache.struts.taglib.html.FormTag,javax.servlet.jsp.PageContext)\n        if (_jspx_meth_bean_message_1(_jspx_th_html_form_0, _jspx_page_context))\n            ^\n\n\nAn error occurred at line: 7 in the jsp file: /forms/loginForm.jsp\nGenerated servlet error:\n/home/cuppett/jboss-3.2.5/server/all/work/jboss.web/localhost/_/org/apache/jsp/forms/loginForm_jsp.java:119:\n_jspx_meth_html_text_0(javax.servlet.jsp.tagext.JspTag,javax.servlet.jsp.PageContext)\nin org.apache.jsp.forms.loginForm_jsp cannot be applied to\n(org.apache.struts.taglib.html.FormTag,javax.servlet.jsp.PageContext)\n        if (_jspx_meth_html_text_0(_jspx_th_html_form_0, _jspx_page_context))\n            ^\n\n\nAn error occurred at line: 7 in the jsp file: /forms/loginForm.jsp\nGenerated servlet error:\n/home/cuppett/jboss-3.2.5/server/all/work/jboss.web/localhost/_/org/apache/jsp/forms/loginForm_jsp.java:125:\n_jspx_meth_bean_message_2(javax.servlet.jsp.tagext.JspTag,javax.servlet.jsp.PageContext)\nin org.apache.jsp.forms.loginForm_jsp cannot be applied to\n(org.apache.struts.taglib.html.FormTag,javax.servlet.jsp.PageContext)\n        if (_jspx_meth_bean_message_2(_jspx_th_html_form_0, _jspx_page_context))\n            ^\n\n\nAn error occurred at line: 7 in the jsp file: /forms/loginForm.jsp\nGenerated servlet error:\n/home/cuppett/jboss-3.2.5/server/all/work/jboss.web/localhost/_/org/apache/jsp/forms/loginForm_jsp.java:129:\n_jspx_meth_html_password_0(javax.servlet.jsp.tagext.JspTag,javax.servlet.jsp.PageContext)\nin org.apache.jsp.forms.loginForm_jsp cannot be applied to\n(org.apache.struts.taglib.html.FormTag,javax.servlet.jsp.PageContext)\n        if (_jspx_meth_html_password_0(_jspx_th_html_form_0, _jspx_page_context))\n            ^\n\n\nAn error occurred at line: 7 in the jsp file: /forms/loginForm.jsp\nGenerated servlet error:\n/home/cuppett/jboss-3.2.5/server/all/work/jboss.web/localhost/_/org/apache/jsp/forms/loginForm_jsp.java:135:\n_jspx_meth_html_submit_0(javax.servlet.jsp.tagext.JspTag,javax.servlet.jsp.PageContext)\nin org.apache.jsp.forms.loginForm_jsp cannot be applied to\n(org.apache.struts.taglib.html.FormTag,javax.servlet.jsp.PageContext)\n        if (_jspx_meth_html_submit_0(_jspx_th_html_form_0, _jspx_page_context))\n            ^\n6 errors\n\n\n\n\torg.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:84)\n\torg.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:332)\n\torg.apache.jasper.compiler.Compiler.generateClass(Compiler.java:412)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:472)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:451)\n\torg.apache.jasper.compiler.Compiler.compile(Compiler.java:439)\n\torg.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:511)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:295)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\torg.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:966)\n\torg.apache.jsp.login_jsp._jspService(login_jsp.java:80)\n\torg.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:94)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:810)\n\torg.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:324)\n\torg.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292)\n\torg.apache.jasper.servlet.JspServlet.service(JspServlet.java:236)\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:810)", "count": 0, "id": 61566, "time": "2004-08-05T01:21:33Z", "creator": "steve@cuppett.com", "creation_time": "2004-08-05T01:21:33Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 30482, "text": "Can you give me a test case that demonstrates this problem?", "count": 1, "id": 61616, "time": "2004-08-05T22:34:43Z", "creator": "kin-man.chung@sun.com", "creation_time": "2004-08-05T22:34:43Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 30482, "attachment_id": 12348, "is_private": false, "id": 61619, "time": "2004-08-05T23:04:10Z", "creator": "steve@cuppett.com", "creation_time": "2004-08-05T23:04:10Z", "text": "Created attachment 12348\nThe necessary JARs to compile are mentioned in the build.xml file.  I used Struts 1.1"}, {"count": 3, "tags": [], "bug_id": 30482, "attachment_id": null, "is_private": false, "id": 61848, "time": "2004-08-11T17:47:21Z", "creator": "kin-man.chung@sun.com", "creation_time": "2004-08-11T17:47:21Z", "text": "I was not able to read you attachment.  It's not a jar or zip file.  Can you\njust give me a war file?"}, {"count": 4, "tags": [], "creator": "funkman@joedog.org", "is_private": false, "text": "*** Bug 30613 has been marked as a duplicate of this bug. ***", "id": 61875, "time": "2004-08-12T11:27:37Z", "bug_id": 30482, "creation_time": "2004-08-12T11:27:37Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "steve@cuppett.com", "is_private": false, "text": "It's a .tar.bz2 file.", "id": 61878, "time": "2004-08-12T11:39:46Z", "bug_id": 30482, "creation_time": "2004-08-12T11:39:46Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 30482, "text": "Tomcat 5 requires servlet 2.4 and JSP 2.0, so you'll need to use servlet-api.jar\nand servlet-api.jar from <tc5>/common/lib.  Removing servlet.jar, which appears\nto be from Tomcat 4, from your application should work.", "count": 6, "id": 61921, "time": "2004-08-12T23:20:23Z", "creator": "kin-man.chung@sun.com", "creation_time": "2004-08-12T23:20:23Z", "is_private": false}, {"count": 7, "tags": [], "creator": "koenigworks9@yahoo.es", "is_private": false, "text": "\nYes, me too.\nI have the same situation JBoss_3_2_5 with Apache Tomcat/5.0.26 and Struts 1.1:\n\n2009-04-15 11:08:16,197 ERROR [org.apache.jasper.compiler.Compiler] Javac exception \nCompile failed; see the compiler error output for details.\n\tat org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:944)\n\tat org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:764)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:382)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)\n\n2009-04-15 11:08:16,204 ERROR [org.apache.jasper.compiler.Compiler] Error compiling file: /opt/HP/jboss02/jboss-3.2.5/.../index_jsp.java     [javac] Compiling 1 source file\n\n2009-04-15 11:08:16,227 ERROR [org.jboss.web.localhost.Engine] StandardWrapperValve[jsp]: Servlet.service() for servlet jsp threw exception\norg.apache.jasper.JasperException: Unable to compile class for JSP\n\nAn error occurred at line: 30 in the jsp file: /index.jsp\nGenerated servlet error:\n/opt/HP/jboss02/jboss-3.2.5/.../index_jsp.java:132: _jspx_meth_html_text_0(javax.servlet.jsp.tagext.JspTag,javax.servlet.jsp.PageContext) in org.apache.jsp.index_jsp cannot be applied to (org.apache.struts.taglib.html.FormTag,javax.servlet.jsp.PageContext)\n              if (_jspx_meth_html_text_0(_jspx_th_html_form_0, _jspx_page_context))\n                  ^\n\tat org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:84)\n\tat org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:332)\n\tat org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:412)\n\tat org.apache.jasper.compiler.Compiler.compile(Compiler.java:472)\n\n\nFound also other forums with the same problem and NO answer at all:\nhttp://www.theserverside.com/discussions/thread.tss?thread_id=31373\nhttp://markmail.org/message/a3effh4fz2fdmfiz#query:+page:1+mid:skmjzpw5dzoatf23+state:results\n\nInvestigating deep through the process (3 days of work) my conclusion is not an application problem so don't change your code/config. The application works in another server correctly, so it seems an incompatibility of the instalation/application container version. Here reviewing, re-installing or updating struts lib / struts config did not solve the problem.\n\nIt simply generates an incompatible java code from JSPs (I think its \"jasper\" library that handles this thing). Later on in the process the class compiler will claim an error blaming your struts, but this only a symptom.\n\nMy solution was moving on to an older version of jboss/tomcat that was installed somewhere else, then everything worked again.", "id": 126252, "time": "2009-04-15T04:03:14Z", "bug_id": 30482, "creation_time": "2009-04-15T04:03:14Z", "attachment_id": null}]