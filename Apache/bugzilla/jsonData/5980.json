[{"count": 0, "tags": [], "creator": "wette_d@ociweb.com", "attachment_id": null, "text": "The following is fully reproducable on Windows XP Pro.\nFor Ant on Windows XP Pro (I don't know about other Windows flavors or \nUnix/Linux), if you are using the following tag:\n\n   <property environment=\"env\" />\n\nthen it will break with J2SE1.4 Release Candidate. Running a build script will \nstop at this tag with an error dialog as follows:\n\n  16 bit MS-DOS Subsystem\n  C:\\WINDOWS\\system32\\ntvdm.exe\n  Error while setting up environment for the application. \n  Choose 'Close' to terminate the application.\n\nand a NullPointerException is raised at:\norg.apache.tools.ant.ProjectHelper.parse(ProjectHelper.java:142)\n\n\nSun made some changes to the Runtime.exec/Process implementation \n(see: http://developer.java.sun.com/developer/bugParade/bugs/4244515.html) , \nwhich breaks Ant's ability to get the environement by exec'ing the DOS 'set' \ncommand. \n\nThe Ant code that's broken is in: \norg.apache.tools.ant.taskdefs.Execute.getProcEnvCommand()\n\nI imagine may break other things as well where Ant execs shell commands.", "id": 9805, "time": "2002-01-23T15:22:13Z", "bug_id": 5980, "creation_time": "2002-01-23T15:22:13Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 5980, "attachment_id": null, "id": 9819, "time": "2002-01-23T20:54:34Z", "creator": "wette_d@ociweb.com", "creation_time": "2002-01-23T20:54:34Z", "is_private": false, "text": "I've found the fix. The Execute class treats Windows XP like 95/98 rather than \nlike NT/2000 for purposes of exec'ing shell commands. using the Ant1.5alpha, a \nchanged 2 occurrences in org.apache.tools.ant.taskdefs.Execute from            \n\n  if ( osname.indexOf(\"nt\") >= 0 ||  osname.indexOf(\"2000\") >= 0) {\n\nto \n\n  if ( osname.indexOf(\"nt\") >= 0 || \n       osname.indexOf(\"2000\") >= 0 ||\n       osname.indexOf(\"xp\") >= 0) {\n\nNow it seems to work correctly again."}, {"count": 2, "tags": [], "text": "A patch has been applied on 29-JAN-2002 to the development tree by Stefan\nBodewig.", "attachment_id": null, "bug_id": 5980, "id": 10192, "time": "2002-02-02T02:37:51Z", "creator": "umagesh@apache.org", "creation_time": "2002-02-02T02:37:51Z", "is_private": false}]