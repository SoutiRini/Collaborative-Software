[{"count": 0, "tags": [], "creator": "Clement_Pellerin@ibi.com", "attachment_id": null, "is_private": false, "id": 137690, "time": "2010-06-16T15:33:04Z", "bug_id": 49450, "creation_time": "2010-06-16T15:33:04Z", "text": "The KeyStoreResolver creates an iterator once and always returns the same iterator afterwards. After the iterator is traversed once, it will always appear empty. Even if the implementation would be changed to reset the alias enumeration to the beginning, the single iterator instance approach will never be thread-safe.\n\nTo reproduce, run the KeyStoreResolverTest in attachment.\n\nThe solution is to return a new iterator instance each time.\nThis patch is built on top of the patch found in Bug 49447.\nThis patch also fixes a bug with the NoSuchElementException that was introduced in the patch attached to 49447."}, {"count": 1, "tags": [], "creator": "Clement_Pellerin@ibi.com", "attachment_id": 25600, "text": "Created attachment 25600\nproposed source code patch with junit", "id": 137691, "time": "2010-06-16T15:35:20Z", "bug_id": 49450, "creation_time": "2010-06-16T15:35:20Z", "is_private": false}, {"count": 2, "tags": [], "creator": "coheigea@apache.org", "attachment_id": null, "text": "\nPatch applied, thanks. I modified it slightly so that the KeyStoreResolver checks the KeyStore in the constructor, and throws a StorageResolverException if there is a problem. This is for backwards compatiblity reasons.\n\nColm.", "id": 137702, "time": "2010-06-17T09:27:38Z", "bug_id": 49450, "creation_time": "2010-06-17T09:27:38Z", "is_private": false}]