[{"count": 0, "attachment_id": null, "bug_id": 16872, "text": "Win 2K, no-ssl standard build (apache_2.0.44-win32-x86-no_ssl.msi).\nHit a static HTML page using 'ab' and the machine after, say, 2000 hits gets \n100% CPU saturation on the Apache process, cannot serve any more pages and \ndoes not recover.  It complains \"Server ran out of threads to serve requests\".\n\n\nThe log file (given I started Apache in Console mode) says:\n\n[Thu Feb 06 14:01:03 2003] [notice] Parent: Created child process 724\n[Thu Feb 06 14:01:03 2003] [notice] Child 724: Child process is running\n[Thu Feb 06 14:01:03 2003] [notice] Child 724: Acquired the start mutex.\n[Thu Feb 06 14:01:03 2003] [notice] Child 724: Starting 250 worker threads.\n[Thu Feb 06 14:05:02 2003] [warn] Server ran out of threads to serve requests. \nConsider raising the ThreadsPerChild setting\n\n*****and now I press CTRL-C to halt Apache******\n[Thu Feb 06 14:05:39 2003] [notice] Parent: Received shutdown signal -- \nShutting down the server.\n[Thu Feb 06 14:05:39 2003] [notice] Child 724: Exit event signaled. Child \nprocess is ending.\n[Thu Feb 06 14:05:40 2003] [notice] Child 724: Released the start mutex\n[Thu Feb 06 14:05:41 2003] [notice] Child 724: Waiting for 250 worker threads \nto exit.\n[Thu Feb 06 14:06:09 2003] [notice] Parent: Forcing termination of child \nprocess 184 \n\nMy ThreadsPerChild is the default for the Win build... ie 250.\n\nThis seemed very similar to bug 13991; however this case was reported on \n2.0.42 and \"fixed\" in 2.0.43 or rather the problem didn't reoccur.  I \ndowngraded to 2.0.43 and the problem persisted.\n\nTrying on a second Win2K box does not show the problem, therefore I have to \nassume some other environmental conditions are at play.\n\nThe failing box is Win2K (I will supply Service Pack info later) at a major \nISP behind a firewall (unknown type).\nThe loadtest was run on a Linux box with highbandwidth to the Windows box.  \nThe load command was:\n./ab -n 10000 -c 400 http://111.222.333.444/\n\nThe ok Win2K box is on the same local network as the Linux box as is Service \nPack 3.\n\nWould this be some IP stack issue?\n\nIncidentally, I ran spawn-of-Satan IIS on the failing box; it performed fine \nunder the load test.\n\nWhat other information would be useful?", "id": 30880, "time": "2003-02-07T10:16:46Z", "creator": "andrew.liles@wheel.co.uk", "creation_time": "2003-02-07T10:16:46Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 16872, "attachment_id": null, "is_private": false, "id": 58696, "time": "2004-06-03T23:52:35Z", "creator": "jorton@redhat.com", "creation_time": "2004-06-03T23:52:35Z", "text": "If \"number of concurrent connections\" > \"maximum number of threads configured\",\nno, httpd cannot process new connections; this is due to the \"one thread per\nconnection\" model -- I'm not sure there's a real bug here.  httpd should recover\nonce you stop hitting it with 400 concurrent ab connections; if not, that's a\nbug, please reopen."}]