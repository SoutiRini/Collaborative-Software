[{"count": 0, "tags": [], "bug_id": 41458, "is_private": false, "text": "When calling the tar task like this\n\n  <target name=\"tgz\">\n      <tar destfile=\"${build}/release.tgz\">\n          <fileset dir=\"src/site\"/>\n          <tarfileset src=\"src/release.tgz\"/>\n      </tar>\n  </target>\n\nI get an error:\n\nProblem creating TAR: request to write '0' bytes exceeds size in header of '-1'\nbytes for entry ''\n\nA just slightly different built source tgz also gives the error:\n\n problem reading /.../src/release.tgz\n\nFor reference the problematic tgz archives are attached.", "id": 98487, "time": "2007-01-25T00:41:52Z", "creator": "tcurdt@apache.org", "creation_time": "2007-01-25T00:41:52Z", "attachment_id": null}, {"text": "Created attachment 19454\ntar failing", "tags": [], "bug_id": 41458, "is_private": false, "count": 1, "id": 98488, "time": "2007-01-25T00:43:57Z", "creator": "tcurdt@apache.org", "creation_time": "2007-01-25T00:43:57Z", "attachment_id": 19454}, {"count": 2, "attachment_id": 19455, "creator": "tcurdt@apache.org", "text": "Created attachment 19455\n2nd tar failing", "id": 98489, "time": "2007-01-25T00:44:51Z", "bug_id": 41458, "creation_time": "2007-01-25T00:44:51Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 41458, "is_private": false, "text": "Created attachment 19456\n3rd tar failing", "id": 98490, "time": "2007-01-25T00:45:14Z", "creator": "tcurdt@apache.org", "creation_time": "2007-01-25T00:45:14Z", "attachment_id": 19456}, {"count": 4, "attachment_id": null, "creator": "tcurdt@apache.org", "text": "This is due to the fact that the tgz is compressed it works with uncompressed\ntars. In compliance with the tar/untar task the tarfileset should have a\n\"compress\" attribute which wraps the input stream into the appropriate\ncompressing  InputStream (like GZIPInputStream).\n\nFrankly speaking I would rather use \"compression\" not \"compress\" everywhere.", "id": 98493, "time": "2007-01-25T02:02:09Z", "bug_id": 41458, "creation_time": "2007-01-25T02:02:09Z", "tags": [], "is_private": false}, {"count": 5, "attachment_id": null, "creator": "bodewig@apache.org", "text": "If it really is \"just\" the compression, \n\n  <target name=\"tgz\">\n      <tar destfile=\"${build}/release.tgz\">\n          <fileset dir=\"src/site\"/>\n          <tarfileset>\n              <gzipresource>\n                  <file file=\"src/release.tgz\"/>\n              </gzipresource>\n          </tarfileset>\n      </tar>\n  </target>\n\nshould work.\n\nIt is far too late to change any attribute names, of course 8-)", "id": 98498, "time": "2007-01-25T03:37:27Z", "bug_id": 41458, "creation_time": "2007-01-25T03:37:27Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 41458, "text": "see comment #5", "id": 129339, "time": "2009-07-31T07:02:23Z", "creator": "bodewig@apache.org", "creation_time": "2009-07-31T07:02:23Z", "is_private": false, "attachment_id": null}]