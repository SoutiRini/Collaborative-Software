[{"count": 0, "tags": [], "text": "In the new FOP Version we got the NullPointerExeption always when we use the \nattribute \"border-separation\" on table. This bug is easy to find. Try the \nfollowing xsl.\n\nBackground: the new altova stylevision 2006 make intensive use of border-\nseparation when you want to design tables. The previous version had a different \nhandling. That was the reason why the bug was discovered.\nBecause of the advantages of FOP 0.92 we don't want to go back to FOP 0.20.5 \n(this Version has no problems).\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" \nxmlns:fo=\"http://www.w3.org/1999/XSL/Format\" \nxmlns:fn=\"http://www.w3.org/2005/xpath-functions\" \nxmlns:xdt=\"http://www.w3.org/2005/xpath-datatypes\" \nxmlns:xs=\"http://www.w3.org/2001/XMLSchema\">\n    <xsl:output version=\"1.0\" method=\"html\" encoding=\"UTF-8\" indent=\"no\" />\n    <xsl:variable name=\"fo:layout-master-set\">\n        <fo:layout-master-set>\n            <fo:simple-page-master master-name=\"default-page\" page-\nheight=\"11in\" page-width=\"8.5in\" margin-left=\"0.6in\" margin-right=\"0.6in\">\n                <fo:region-body margin-top=\"0.79in\" margin-bottom=\"0.79in\" />\n            </fo:simple-page-master>\n        </fo:layout-master-set>\n    </xsl:variable>\n    <xsl:template match=\"/\">\n        <xsl:variable name=\"maxwidth\" select=\"7.30000\" />\n        <fo:root>\n            <xsl:copy-of select=\"$fo:layout-master-set\" />\n            <fo:page-sequence master-reference=\"default-page\" initial-page-\nnumber=\"1\" format=\"1\">\n                <fo:flow flow-name=\"xsl-region-body\">\n                    <fo:block>\n                        <xsl:variable name=\"tablewidth0\" select=\"$maxwidth * \n1.00000\" />\n                        <xsl:variable name=\"sumcolumnwidths0\" \nselect=\"0.04167\" />\n                        <xsl:variable name=\"defaultcolumns0\" select=\"1\" />\n                        <xsl:variable name=\"defaultcolumnwidth0\">\n                            <xsl:choose>\n                                <xsl:when test=\"$defaultcolumns0 &gt; 0\">\n                                    <xsl:value-of select=\"($tablewidth0 - \n$sumcolumnwidths0) div $defaultcolumns0\" />\n                                </xsl:when>\n                                <xsl:otherwise>\n                                    <xsl:value-of select=\"0.000\" />\n                                </xsl:otherwise>\n                            </xsl:choose>\n                        </xsl:variable>\n                        <xsl:variable name=\"columnwidth0_0\" \nselect=\"$defaultcolumnwidth0\" />\n                        <fo:table table-layout=\"fixed\" width=\"{$tablewidth0}in\" \nspace-before.optimum=\"1pt\" space-after.optimum=\"2pt\" border-collapse=\"separate\" \nborder-separation=\"0.04167in\" color=\"black\" display-align=\"center\">\n                            <fo:table-column column-width=\"{$columnwidth0_0}\nin\" />\n                            <fo:table-body>\n                                <fo:table-row>\n                                    <fo:table-cell padding-top=\"0.02083in\" \npadding-bottom=\"0.02083in\" padding-left=\"0.02083in\" padding-right=\"0.02083in\">\n                                        <fo:block padding-top=\"1pt\" padding-\nbottom=\"1pt\">\n                                            <fo:inline>\n                                                <xsl:text>fg</xsl:text>\n                                            </fo:inline>\n                                        </fo:block>\n                                    </fo:table-cell>\n                                </fo:table-row>\n                            </fo:table-body>\n                        </fo:table>\n                    </fo:block>\n                </fo:flow>\n            </fo:page-sequence>\n        </fo:root>\n    </xsl:template>\n</xsl:stylesheet>", "is_private": false, "bug_id": 39712, "id": 89729, "time": "2006-06-03T13:35:01Z", "creator": "diethard.kumpf@dimari.de", "creation_time": "2006-06-03T13:35:01Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "adelmelle@apache.org", "is_private": false, "id": 89938, "attachment_id": null, "bug_id": 39712, "creation_time": "2006-06-08T09:34:37Z", "time": "2006-06-08T09:34:37Z", "text": "Sorry for the delay in responding to this... \n\nConfirmed: I altered our testcase 'table-border-separate3.xml' to use border-separation=\"...\", and the \ntest no longer completes succesfully, although I don't receive a NPE during the test cycle (again: a \ncompletely empty area tree is the result).\n\nRunning the FO standalone throws an NPE with the following stack trace:\n\njava.lang.NullPointerException\n        at org.apache.fop.fo.properties.CompoundPropertyMaker.convertProperty\n(CompoundPropertyMaker.java:172)\n        at org.apache.fop.fo.properties.LengthPairProperty$Maker.convertProperty\n(LengthPairProperty.java:61)\n        at org.apache.fop.fo.properties.PropertyMaker.make(PropertyMaker.java:437)\n        at org.apache.fop.fo.properties.CompoundPropertyMaker.make(CompoundPropertyMaker.java:\n212)\n        at org.apache.fop.fo.PropertyList.convertAttributeToProperty(PropertyList.java:355)\n        at org.apache.fop.fo.PropertyList.addAttributesToList(PropertyList.java:305)\n        at org.apache.fop.fo.FObj.processNode(FObj.java:122)\n        at org.apache.fop.fo.FOTreeBuilder$MainFOHandler.startElement(FOTreeBuilder.java:318)\n        at org.apache.fop.fo.FOTreeBuilder.startElement(FOTreeBuilder.java:185)\n"}, {"count": 2, "tags": [], "bug_id": 39712, "attachment_id": null, "text": "FWIW, just ran a second test, specifying the border-separation fully, like:\n\nborder-separation.block-progression-direction=\"...\"\nborder-separation.inline-progression-direction=\"...\"\n\nand then the test completes succesfully.\n", "id": 89940, "time": "2006-06-08T09:45:40Z", "creator": "adelmelle@apache.org", "creation_time": "2006-06-08T09:45:40Z", "is_private": false}, {"count": 3, "tags": [], "creator": "adelmelle@apache.org", "attachment_id": null, "is_private": false, "id": 89943, "time": "2006-06-08T10:10:06Z", "bug_id": 39712, "creation_time": "2006-06-08T10:10:06Z", "text": "Fixed in FOP Trunk: http://svn.apache.org/viewvc?rev=412714&view=rev\n\nThanks for reporting!"}, {"count": 4, "tags": [], "bug_id": 39712, "is_private": false, "text": "*** Bug 40186 has been marked as a duplicate of this bug. ***", "id": 91907, "time": "2006-08-04T19:51:44Z", "creator": "adelmelle@apache.org", "creation_time": "2006-08-04T19:51:44Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "adelmelle@apache.org", "attachment_id": null, "id": 94777, "time": "2006-10-12T09:59:45Z", "bug_id": 39712, "creation_time": "2006-10-12T09:59:45Z", "is_private": false, "text": "*** Bug 40744 has been marked as a duplicate of this bug. ***"}, {"count": 6, "tags": [], "creator": "gadams@apache.org", "attachment_id": null, "is_private": false, "id": 156289, "time": "2012-04-01T07:08:31Z", "bug_id": 39712, "creation_time": "2012-04-01T07:08:31Z", "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]