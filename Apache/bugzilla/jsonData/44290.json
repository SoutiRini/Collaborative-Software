[{"count": 0, "tags": [], "creator": "jergendutch@gmail.com", "attachment_id": null, "id": 113104, "time": "2008-01-24T05:49:52Z", "bug_id": 44290, "creation_time": "2008-01-24T05:49:52Z", "is_private": false, "text": "I am running mod_jk/1.2.26 on a front end server talking to a group of tomcats\nrunning on solaris boxes at the back end.\n\nThe other day one of the Solaris boxes froze, leaving the network connection to\nthe switch up. mod_jk failed to notice that the tomcats on this box were down\nand kept sending requests.\n\nWe can reproduce this consistently: if we halt the box, mod_jk does not notice\nthat the tomcat is down. On one occasion we waited more than one hour, and still\nrequests were being sent to the dead tomcat.\n\nmod_jk has lots of options for setting timeouts, but none of them seem to deal\nwith this use case.\n\nOn Linux, we can workaround this by setting the mod_jk socket_timeout however\nthis setting is not supported on solaris. It would be nice to offer a workaround\non this platform to make failure monitoring useful."}, {"count": 1, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "Please provide your configuration.", "id": 113106, "time": "2008-01-24T06:05:23Z", "bug_id": 44290, "creation_time": "2008-01-24T06:05:23Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "jergendutch@gmail.com", "attachment_id": null, "id": 113108, "time": "2008-01-24T06:27:48Z", "bug_id": 44290, "creation_time": "2008-01-24T06:27:48Z", "is_private": false, "text": "workers.properties:\n\n# default worker list\nworker.list=word,jkstatus\n\n# worker template\nworker.template.port=9009\nworker.template.type=ajp13\nworker.template.lbfactor=1\nworker.template.socket_keepalive=0\nworker.template.connect_timeout=5000\nworker.template.prepost_timeout=2000\nworker.template.reply_timeout=40000\nworker.template.connection_pool_size=1\nworker.template.connection_pool_timeout=60\n\n# workers definition\nworker.tomcat1.reference=worker.template\nworker.tomcat1.host=tomtom1.online.local\n\n# load balancer definition\nworker.word.type=lb\nworker.word.max_reply_timeouts=3\nworker.word.balance_workers=escappdev1\n\n# status definition\nworker.jkstatus.type=status"}, {"count": 3, "tags": [], "creator": "rainer.jung@kippdata.de", "text": "Sorry for the long silence.\n\nIf you are still observing this, could you please update to 1.2.32? There have been lots of improvement. If the problem persists, please provide a JK log file. If you can reproduce the problem on a test system, a debug log file would be nice, otherwise the info log level should still be helpful.\n\nIn addition: please issue \"netstat -an\" on the Apache and Tomcat servers once the problem happens and provide the output.\n\nThanks!", "id": 150907, "time": "2011-10-25T18:26:00Z", "bug_id": 44290, "creation_time": "2011-10-25T18:26:00Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "Closing this as WORKSFORME since I don't expect this issue to be possible with the releases from the last few years. Properly using cping/cpong and connect_timeout should prevent the behavior described in the original post.", "attachment_id": null, "bug_id": 44290, "id": 179967, "time": "2014-12-22T18:20:27Z", "creator": "rainer.jung@kippdata.de", "creation_time": "2014-12-22T18:20:27Z", "is_private": false}]