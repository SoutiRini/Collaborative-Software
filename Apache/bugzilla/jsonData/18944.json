[{"attachment_id": null, "tags": [], "bug_id": 18944, "is_private": false, "count": 0, "id": 34948, "time": "2003-04-11T09:55:21Z", "creator": "birch@outpost24.com", "creation_time": "2003-04-11T09:55:21Z", "text": "Hi,\n\nI have being running Tomcat 4.1.18 for some time now without some big\nproblems :-)\n\nBut now I tried upgrade to 4.1.24, but this gives me suddenly a strange\nerror. I have not changed anything except upgrading to 4.1.24. The\nconfiguration is the same.\n\nEverything looks ok and is running after a startup. But during a\nshutdown this exception appears and the framework is not shut down\ncorrectly (many java processes keeps running).\n\nThe only thing I need to change to avoid this is clientAuth=\"false\" from\n\"true\" on the SSL connector. But I use clientAuth=\"true\" so I need it.\n\nAny ideas ?! A bug ?! A change in the configuration ?!\n\nThe exception:\nStopping service Tomcat-Standalone\n2003-04-10 16:05:36,661 [Thread-7] ERROR\norg.apache.tomcat.util.net.PoolTcpEndpoint - Caught exception trying to\nunlock accept.\njava.net.ConnectException: Connection refused\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\n        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:305)\n        at\njava.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:171)\n        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:158)\n        at java.net.Socket.connect(Socket.java:426)\n        at java.net.Socket.connect(Socket.java:376)\n        at java.net.Socket.<init>(Socket.java:291)\n        at java.net.Socket.<init>(Socket.java:119)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.closeServerSocket(PoolTcpEndpoint.java:326)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket(PoolTcpEndpoint.java:397)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:529)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:536)\n2003-04-10 16:05:36,669 [Thread-7] ERROR\norg.apache.tomcat.util.net.PoolTcpEndpoint - Caught exception trying to\nclose socket.\njava.lang.NullPointerException\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.closeServerSocket(PoolTcpEndpoint.java:338)\n        at\norg.apache.tomcat.util.net.PoolTcpEndpoint.acceptSocket(PoolTcpEndpoint.java:397)\n        at\norg.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:529)\n        at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)\n        at java.lang.Thread.run(Thread.java:536)\n\n\nBest regards\n\nJesper Birch"}, {"count": 1, "tags": [], "bug_id": 18944, "attachment_id": null, "is_private": false, "id": 35702, "time": "2003-04-21T14:01:30Z", "creator": "Keith@Apache.org", "creation_time": "2003-04-21T14:01:30Z", "text": "Fixed in cvs head"}]