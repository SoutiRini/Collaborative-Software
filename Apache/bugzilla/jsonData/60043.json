[{"count": 0, "tags": [], "bug_id": 60043, "text": "Already posted this to the mailinglist here:\n\nhttp://tomcat.10.x6.nabble.com/Question-about-suspectTimeout-property-of-pool-configuration-possible-Bug-does-only-work-with-removed-td5054070.html\n\nIf you configure the pool to have:\n\n logAbandoned=\"true\"\n suspectTimeout=\"120\"\n\nset it does not report leaked connections even if you got leaked connections hanging in the busy queue.\nTo me this looks like a bug.\n\nDocs tell this:\n\n\n  Similar to to the removeAbandonedTimeout value but instead of treating\n  the connection as abandoned, and potentially closing the connection,\n  this simply logs the warning if logAbandoned is set to true.\n\n\nLooking at the code however the suspect() method of a connection is only called from the PoolCleaner thread in the \"checkAbandoned()\" method.\n\nBut before calling that one it does check the pool configuration like this:\n\nif (pool.getPoolProperties().isRemoveAbandoned())\n                        pool.checkAbandoned();\n\nbut i don't want to configure removeAbandoned to true - i just want to get the suspect working like expected from reading the documentation of the property without actually removing the leaked connections.\n\nImho this needs to be changed - either the condition here is extended to look for suspectTimeout or the suspect is called in an extra method - i don't care which one is used ;).", "id": 193321, "time": "2016-08-25T11:11:45Z", "creator": "krah.tm+apache@gmail.com", "creation_time": "2016-08-25T11:11:45Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 60043, "text": "Thanks for the report.\nThe fix will be in :\n- 9.0.x for 9.0.0.M10 onwards\n- 8.5.x for 8.5.5 onwards\n- 8.0.x for 8.0.37 onwards\n- 7.0.x for 7.0.71 onwards", "id": 193397, "time": "2016-08-30T07:30:46Z", "creator": "kfujino@apache.org", "creation_time": "2016-08-30T07:30:46Z", "is_private": false, "attachment_id": null}]