[{"count": 0, "tags": [], "creator": "kostella@mayaviz.com", "attachment_id": null, "id": 19438, "time": "2002-07-12T17:59:27Z", "bug_id": 10752, "creation_time": "2002-07-12T17:59:27Z", "is_private": false, "text": "A recent (ahem) version of cygwin/cygpath fails to build the classpath used by the final line of \nthe 'ant' wrapper script. This results in:\n\n  Exception in thread \"main\" \njava.lang.NoClassDefFoundError: org/apache/tools/ant/Main\n\nThe problem seems to be \nthat when assembling the list of jars, the jar paths are half dos and half unix and when \nconcatenated together they do not make it through cygpath correctly. I got this as the classpath \narg in the final line:\n\n C:\\dev\\ant/lib/xml-\napis.jar:C:\\dev\\ant/lib/xercesImpl.jar:C:\\dev\\ant/lib/optional.jar:C:\\dev\\ant/lib/ant.jar:/cygdrive/c/java/jdk1.3.1_03/jre/lib/rt.jar:/cygdrive/c/java/jdk1.3.1_03/lib/tools.jar\n\nwhich \nis not a legal classpath on either platform.\n\nI corrected the problem by forcing the \nindividual jar paths to be unix paths instead of dos paths by modifying the 'ant' script \nthus:\n\nline 125:\n# add in the dependency .jar files in non-RPM mode (the default)\nfor i in \n\"${ANT_LIB}\"/*.jar\ndo\n  #### CHANGE BEGINS HERE\n  # For Cygwin, switch paths to unix format \nbefore converting back\n  if $cygwin; then\n    i=`cygpath --path --unix \"$i\"`\n  fi\n  #### CHANGE ENDS \nHERE\n  # if the directory is empty, then it will return the input string\n\nI'm not sure which \nversion of cygwin is installed on the failing machine, but \ncygcheck shows this:\n\n    Cygwin DLL \nversion info:\n        DLL version: 1.3.10\n        DLL epoch: 19\n        DLL bad signal mask: 19005\n        DLL old \ntermios: 5\n        DLL malloc env: 28\n        API major: 0\n        API minor: 51\n        Shared data: 3\n        DLL identifier: \ncygwin1\n        Mount registry: 2\n        Cygnus registry name: Cygnus Solutions\n        Cygwin registry name: \nCygwin\n        Program options name: Program Options\n        Cygwin mount registry name: mounts v2\n        \nCygdrive flags: cygdrive flags\n        Cygdrive prefix: cygdrive prefix\n        Cygdrive default \nprefix:\n        Build date: Mon Feb 25 11:14:34 EST 2002\n        Shared id: cygwin1S3"}, {"text": "4th one today :)\n\n*** This bug has been marked as a duplicate of 10664 ***", "tags": [], "bug_id": 10752, "is_private": false, "count": 1, "id": 19442, "time": "2002-07-12T18:37:53Z", "creator": "sbailliez@apache.org", "creation_time": "2002-07-12T18:37:53Z", "attachment_id": null}]