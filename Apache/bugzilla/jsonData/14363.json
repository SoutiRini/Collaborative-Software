[{"count": 0, "attachment_id": null, "bug_id": 14363, "is_private": false, "id": 25880, "time": "2002-11-07T18:25:34Z", "creator": "arvanitis@scra.org", "creation_time": "2002-11-07T18:25:34Z", "tags": [], "text": "If I define a filterset and assign it an id in my main build file, I can not \naccess it from my subprojects (even with the inheritRefs argument set \nto \"true\". Other references (path, etc) are visible to my subproject.\n\nI am creating a filterset in my main project that looks like this:\n\n<filterset id=\"myFilterset\">\n  <filter token=\"ATTACHMENT_UPLOAD_DIR\" value=\"${attachment.upload.dir}\"/>\n  <filter token=\"ATTACHMENT_DOWNLOAD_DIR\" value=\"${attachment.download.dir}\"/>\n</filterset>\n\nIf I reference the filterset by refid inside of this ant and it works fine. I \nthen call a task in a subproject using:\n\n    <target name=\"mySubproject\" >\n        <ant antfile=\"${subproject.dir}/subproject.xml\" \n            inheritAll=\"true\" \n            inheritRefs=\"true\" \n            target=\"mySubprojectTask\"/>\n    </target>\n\nThis subproject contains the code:\n\n <copy todir=\"${copy.to.dir}\">\n   <fileset dir=\"${copy.from.dir}\">\n      <include name=\"**/*.xml\" />\n   </fileset>\n   <filterset refid=\"myFilterset\"/>\n</copy>\n\nThe ant build process errors out and displays a message saying that the \nmyFilterset reference has not been defined. If I cut and paste the filterset \ndefinition as-is into the subproject, the build process works fine, so I have \nverified that its not an error in the definition, or the subproject target. \nThis same subproject target uses various paths set up in the main project, so I \nhave verified that other items (paths) are visible when the ant subproject task \nis called."}, {"count": 1, "tags": [], "text": "Using \n\ntest1.xml:\n<project default=\"t\">\n  <filterset id=\"myFilterset\">\n    <filter token=\"ATTACHMENT_UPLOAD_DIR\" value=\"${attachment.upload.dir}\"/>\n    <filter token=\"ATTACHMENT_DOWNLOAD_DIR\" value=\"${attachment.download.dir}\"/>\n </filterset>\n\n  <target name=\"t\">\n    <ant antfile=\"test2.xml\" \n         inheritAll=\"true\" \n         inheritRefs=\"true\" \n         target=\"t2\"/>\n  </target>\n</project>\n\ntest2.xml:\n<project default=\"t\">\n  <target name=\"t\">\n    <delete dir=\"testdir\"/>\n  </target>\n\n  <target name=\"t2\">\n    <mkdir dir=\"testdir\"/>\n    <copy todir=\"testdir\">\n      <fileset dir=\".\">\n        <include name=\"*.xml\" />\n      </fileset>\n      <filterset refid=\"myFilterset\"/>\n    </copy>\n  </target>\n</project>\n\nit works for me with both, CVS HEAD and Ant 1.5.1.  Either your build file is\nmore complicated than that (in which case I need more input) or there is a\njust a typo or similar.", "is_private": false, "bug_id": 14363, "id": 25916, "time": "2002-11-08T12:48:53Z", "creator": "bodewig@apache.org", "creation_time": "2002-11-08T12:48:53Z", "attachment_id": null}]