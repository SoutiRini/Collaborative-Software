[{"count": 0, "tags": [], "creator": "gerard2.chevalier@schneider-electric.com", "text": "I setup a proxy to a tomcat server and I have problem with the ProxyPassMatch directive.\n\nIf I write :\nProxyPassMatch ^(/.*\\.page)$ ajp://hostname:8009$1\nthen I get the following error :\nSyntax error on line 573 of C:/Program Files/Apache Software Foundation/Apache2.2/conf/httpd.conf:\nProxyPass Unable to parse URL\n\nI noticed that it is the concatenation of hostname + port + $1 that causes trouble.\nIf I remove :8009 or $1, the directive can be parsed, but of course it is not what I want !\n\nI found the following workaroud :\nProxyPassMatch ^/(.*\\.page)$ ajp://hostname:8009/$1\n\nThat makes it work.\n\nDo you confirm that the initial syntax should work ?", "id": 124661, "time": "2009-02-04T07:26:39Z", "bug_id": 46665, "creation_time": "2009-02-04T07:26:39Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "poirier@pobox.com", "text": "Looking at the code, the proxy does try to parse the second parameter as a URL before ever substituting anything into it, so your workaround makes sense.\n\nI don't know the proxy well enough to say if it's necessary for it to work that way, though.\n", "id": 124666, "time": "2009-02-04T08:29:04Z", "bug_id": 46665, "creation_time": "2009-02-04T08:29:04Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "I just noticed this error occurs regardless whether one is using ajp or not.\n\nThe docs for ProxyPassMatch give this reference:\n^(/.*\\.gif)$ http://backend.example.com$1 \n\nBut if backend.example.com is on a non-default port - you get the error \"ProxyPass Unable to parse URL\" - for example:\n\nERROR\nProxyPassMatch (/foo.+) http://backend.example.com:2829$1\n\nBut if you add a / after the port and before the regex substitution, then all is OK (as long as the regex is fixed so as no to provide an extra prefixed / )\n\nOK\nProxyPassMatch /(foo.+) http://backend.example.com:2829/$1", "attachment_id": null, "bug_id": 46665, "id": 129963, "time": "2009-08-26T11:55:01Z", "creator": "funkman@apache.org", "creation_time": "2009-08-26T11:55:01Z", "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 46665, "text": "Thanks for the report and analysis.\n\nFixing this would be disproportionately disruptive, so instead I'm documenting it and pointing to this bug report for explanation and workaround ideas.\n\nMarking WONTFIX.", "id": 129976, "time": "2009-08-27T01:48:32Z", "creator": "nick@webthing.com", "creation_time": "2009-08-27T01:48:32Z", "tags": [], "is_private": false}]