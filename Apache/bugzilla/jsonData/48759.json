[{"count": 0, "tags": [], "bug_id": 48759, "text": "Hi,\n\n   I save a similar issue with the one presented here : http://marc.info/?l=apache-modules&m=115463732419493&q=raw. When migrating my custom module from a Solaris10 machine (where I had the apache compiled on 32 bit) to a SuSE11 one (64 bit platform, gcc and apache build on 64 bit) my module crashes in the post_config phase with a SIGSEGV:\n\nProgram received signal SIGSEGV, Segmentation fault.\ndump_config_data (p=0x6ba138, plog=0x6fc348, ptemp=0x6c0168, s=0x0) at idu_config.c:341\n341         idu_config_t *config = get_idu_module_config(s->module_config);\n\n\nIn post_config hook:\n\n    idu_config_t *config = get_idu_module_config( (ap_conf_vector_t *) s->module_config);\n\n     config->process_pool = p;\n    \n    /* Log the module configuration to idu.log  */\n    dump_config_data(p, plog, ptemp, s);\n\nand in the module I have declared :\n\nmodule AP_MODULE_DECLARE_DATA idu_module;\n\nidu_config_t* get_idu_module_config(ap_conf_vector_t *conf_vector) {\n    return (idu_config_t*) ap_get_module_config(conf_vector, &idu_module);\n}", "id": 134602, "time": "2010-02-17T14:16:51Z", "creator": "alinachegalati@yahoo.com", "creation_time": "2010-02-17T14:16:51Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "Backtrace in gdb:\n\n(gdb) backtrace\n#0  dump_config_data (p=0x6ba138, plog=0x6fc348, ptemp=0x6c0168, s=0x0) at idu_config.c:341\n#1  0x00007ffff52d9316 in post_config (p=0x6ba138, plog=0x6fc348, ptemp=0x6c0168, s=0x0) at mod_idu.c:392\n#2  0x00000000004414a4 in ap_run_post_config ()\n#3  0x000000000042896b in main ()", "attachment_id": null, "id": 134603, "creator": "alinachegalati@yahoo.com", "time": "2010-02-17T14:22:11Z", "bug_id": 48759, "creation_time": "2010-02-17T14:22:11Z", "is_private": false}, {"count": 2, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "text": "This is not the place to debug your module.\n(I see from your mailing list post that you're casting the return code from\napr_pstrdup().  If that is because you don't have the proper function\nprototypes included, fix that first; lack of prototypes is a common cause of\ncrashes in 64-bit mode when C's assumed int return value is a different size\nthan a pointer.  Anyway, this is the wrong place for such a discussion.)", "id": 134604, "time": "2010-02-17T14:25:36Z", "bug_id": 48759, "creation_time": "2010-02-17T14:25:36Z", "is_private": false}, {"count": 3, "tags": [], "creator": "alinachegalati@yahoo.com", "attachment_id": null, "text": "Thanks Jeff. Following your indications fixed the problem. I had a variable declared as int when it should have been apr_size_t instead of  int.", "id": 134613, "time": "2010-02-17T19:20:28Z", "bug_id": 48759, "creation_time": "2010-02-17T19:20:28Z", "is_private": false}]