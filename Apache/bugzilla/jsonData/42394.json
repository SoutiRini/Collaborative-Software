[{"count": 0, "tags": [], "bug_id": 42394, "attachment_id": null, "is_private": false, "id": 103087, "time": "2007-05-11T04:40:48Z", "creator": "thorsten@apache.org", "creation_time": "2007-05-11T04:40:48Z", "text": "I have the default pub with the default content. I edit and published the index.\nNow in\nhttp://localhost:8888/default/authoring/index.html?lenya.usecase=tab.revisions\nI see different versions.\n\nRequesting http://localhost:8888/default/authoring/index.html?lenya.revision=1\nwill show me the last revision (with all the test edition). I would have\nexpected it will show me the initial page (without any edition).\n\nTrying http://localhost:8888/default/authoring/index.html?lenya.revision=2 is\nthrowing an ugly exception:\nNo entry found for\n[lenya://lenya/pubs/default/content/authoring/f2027f00-ff09-11db-a881-fac2875bd236/en],\nrevision [2]\n\norg.apache.cocoon.ProcessingException: Failed to process pipeline at\n<map:serialize type=\"xml\"> -\nfile:/home/thorsten/src/apache/lenya-1.4.x/build/lenya/webapp/lenya/modules/homepage/sitemap.xmap:65:36\nat <map:transform type=\"cinclude\"> -\nfile:/home/thorsten/src/apache/lenya-1.4.x/build/lenya/webapp/lenya/modules/homepage/sitemap.xmap:64:41\nat <map:transform> -\n...\nCaused by: org.apache.excalibur.source.SourceException: Cannot get input stream\nfor\ncocoon://modules/news/header.xml/default/authoring/f2027f00-ff09-11db-a881-fac2875bd236/en\n\tat\norg.apache.cocoon.components.source.impl.SitemapSource.getInputStream(SitemapSource.java:252)\n\tat\norg.apache.lenya.cms.cocoon.source.SiteSource.getInputStream(SiteSource.java:151)\n\tat\norg.apache.cocoon.components.source.SourceUtil.getInputSource(SourceUtil.java:522)\n\t... 96 more\n\nFurther if I try to rollback to another version it is actually not doing anything."}, {"count": 1, "tags": [], "text": "Created attachment 20174\nbroken-revision-index.html", "attachment_id": 20174, "bug_id": 42394, "id": 103088, "time": "2007-05-11T04:43:48Z", "creator": "thorsten@apache.org", "creation_time": "2007-05-11T04:43:48Z", "is_private": false}, {"count": 2, "tags": [], "text": "(In reply to comment #0)\n\n> Trying http://localhost:8888/default/authoring/index.html?lenya.revision=2 is\n> throwing an ugly exception:\n\nThis is because of the news inclusion. The system tries to load revision 2 of\nthe news, but it doesn't exist. I guess we can't apply the revision request\nparameter to the include format.", "attachment_id": null, "bug_id": 42394, "id": 103156, "time": "2007-05-14T01:26:17Z", "creator": "andreas@apache.org", "creation_time": "2007-05-14T01:26:17Z", "is_private": false}, {"count": 3, "text": "(In reply to comment #0)\n\n> Requesting http://localhost:8888/default/authoring/index.html?lenya.revision=1\n> will show me the last revision (with all the test edition). I would have\n> expected it will show me the initial page (without any edition).\n\nThe homepage module didn't take the lenya.revision parameter into account. That\nshould work now.", "bug_id": 42394, "attachment_id": null, "id": 103163, "time": "2007-05-14T05:57:17Z", "creator": "andreas@apache.org", "creation_time": "2007-05-14T05:57:17Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "creator": "andreas@apache.org", "attachment_id": 20191, "id": 103165, "time": "2007-05-14T06:08:07Z", "bug_id": 42394, "creation_time": "2007-05-14T06:08:07Z", "is_private": false, "text": "Created attachment 20191\nRepositorySource: Apply revision parameter only if it matches the main document of the request\n\nAs I suggested on lenya-dev:\n\n\"Whenever a repository source is generated, compare its path\nwith the path of the HTTP request. If it is the same, use the\nrevision parameter, if not, don't use it. Well, if we want to\nemphasize convention over configuration, this might be the\neasiest solution. But the same problem occurs as with the\nfirst option.\""}, {"count": 5, "tags": [], "bug_id": 42394, "attachment_id": null, "text": "I tested and reviewed the patch and it seems to work fine. \n\nPlease go ahead and apply it to trunk.\n\nTIA", "id": 103177, "time": "2007-05-14T07:52:35Z", "creator": "thorsten@apache.org", "creation_time": "2007-05-14T07:52:35Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 42394, "is_private": false, "text": "Done.", "id": 103181, "time": "2007-05-14T08:07:43Z", "creator": "andreas@apache.org", "creation_time": "2007-05-14T08:07:43Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 42394, "is_private": false, "text": "Renaming Lenya 1.4 to 2.0", "id": 105528, "time": "2007-07-16T01:59:04Z", "creator": "thorsten@apache.org", "creation_time": "2007-07-16T01:59:04Z", "attachment_id": null}]