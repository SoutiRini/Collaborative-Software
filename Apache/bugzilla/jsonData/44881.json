[{"count": 0, "tags": [], "creator": "alexanderv@gmx.net", "attachment_id": null, "text": "Using /dev/random as entropy source on Linux systems without a hardware RNG is generally not a good idea since /dev/random blocks if the system cannot gather enough entropy. This may result in severe performance degradation for applications that use libapr. An example is Subversion on many Linux distributions.\n\nhttp://subversion.tigris.org/issues/show_bug.cgi?id=2590\nhttp://subversion.tigris.org/faq.html#slow-private-svnserve\n\nThere seems to be no evidence that /dev/urandom will produce more insecure random data than /dev/random for most practical purposes. So /dev/urandom would be a more reasonable default for the APR on Linux.", "id": 115912, "time": "2008-04-26T08:11:25Z", "bug_id": 44881, "creation_time": "2008-04-26T08:11:25Z", "is_private": false}, {"attachment_id": null, "tags": [], "bug_id": 44881, "is_private": false, "count": 1, "id": 115943, "time": "2008-04-27T23:29:28Z", "creator": "bojan@rexursive.com", "creation_time": "2008-04-27T23:29:28Z", "text": "Suggested fix:\n\nIndex: configure.in\n===================================================================\n--- configure.in        (revision 651703)\n+++ configure.in        (working copy)\n@@ -1955,7 +1955,7 @@\n   if test \"$apr_devrandom\" = \"yes\"; then\n     # /dev/random on OpenBSD doesn't provide random data, so\n     # prefer /dev/arandom, which does; see random(4).\n-    for f in /dev/arandom /dev/random /dev/urandom; do\n+    for f in /dev/arandom /dev/urandom /dev/random; do\n       if test -r $f; then\n         apr_devrandom=$f\n         rand=1"}, {"count": 2, "text": "The attached patch from comment #1 has been rejected, because this function should use the strongest possible source of entropy.\n\nA new function has been proposed that will be capable of using both random and pseudo random sources, but will only be made available in the trunk. Meaning, 0.9.x, 1.2.x and 1.3.x will not have this feature.", "bug_id": 44881, "attachment_id": null, "id": 116122, "time": "2008-05-01T16:12:49Z", "creator": "bojan@rexursive.com", "creation_time": "2008-05-01T16:12:49Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "jorton@redhat.com", "is_private": false, "text": "See dev@apr for followup discussion; now committed.\n\ntrunk: http://svn.apache.org/viewvc?rev=652830&view=rev\n1.3.x: http://svn.apache.org/viewvc?rev=652872&view=rev", "id": 116163, "time": "2008-05-02T11:59:22Z", "bug_id": 44881, "creation_time": "2008-05-02T11:59:22Z", "attachment_id": null}, {"count": 4, "text": "First of all, a fix for the Linux issue should not have negative impacts on other operating systems. OpenBSD (arandom) and FreeBSD (random == urandom) will not be affected. But I don't know if this requirement is fulfilled for other platforms the APR is intended to run on.\n\n/dev/urandom is NOT a PSEUDO random device. It draws it's entropy from a pool exactly like /dev/random does[1]. This entropy is fed into a cryptographically secure random number generator that generates output regardless of the amount of entropy that's actually available[1,2].\n\nRef.:\n[1] linux/drivers/char/random.c\n[2] http://kerneltrap.org/mailarchive/linux-kernel/2007/12/9/495011\n", "bug_id": 44881, "attachment_id": null, "id": 116197, "time": "2008-05-03T04:52:50Z", "creator": "alexanderv@gmx.net", "creation_time": "2008-05-03T04:52:50Z", "tags": [], "is_private": false}]