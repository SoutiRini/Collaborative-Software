[{"count": 0, "tags": [], "text": "I am running tomcat 4.1.30 (with ant.jar included) on an AMD64 Red Hat AS 3.0\n\nI used both the j2se for linux (32bit) and the blackdown implementation for \nAMD64. \n\nThe stacktrace points to line 178 in CompilerAdapterFactory:\n\ntry {\n   CompilerAdapterFactory.class.getClassLoader().loadClass(MODERN_COMPILER);\n   return true;\n} catch (ClassNotFoundException cnfe2) {\n}\n\nAparently the getClassLoader() method returns null. According to the api \ndocumentation this is possible for some implementations. As a result tomcat is \nunable to compile jsp's (jsp -> servlet works, servlet -> class doesn't)\n\nIt would be a good idea to catch the NullpointerException and add a line of \nlogging.\n\norg.apache.jasper.JasperException: Unable to compile class for JSP\n        at org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:478)\n        at org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:190)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2422)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:163)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1040)\n        at org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1151)\n        at java.lang.Thread.run(Thread.java:534)\n----- Root Cause -----\njava.lang.NullPointerException\n        at \norg.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.doesModernCompile\nrExist(CompilerAdapterFactory.java:178)\n        at \norg.apache.tools.ant.taskdefs.compilers.CompilerAdapterFactory.getCompiler\n(CompilerAdapterFactory.java:132)\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:969)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:799)\n        at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:320)\n        at org.apache.jasper.compiler.Compiler.compile(Compiler.java:370)\n        at org.apache.jasper.JspCompilationContext.compile\n(JspCompilationContext.java:473)\n        at org.apache.jasper.servlet.JspServletWrapper.service\n(JspServletWrapper.java:190)\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:295)\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n        at org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:256)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:191)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2422)\n        at org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:171)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:163)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:641)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n        at \norg.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNex\nt(StandardPipeline.java:643)\n        at org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:480)\n        at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)\n        at org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1040)\n        at org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1151)\n        at java.lang.Thread.run(Thread.java:534)", "is_private": false, "id": 64301, "creator": "patrick.hensgens@LogicaCMG.com", "time": "2004-09-28T12:12:05Z", "bug_id": 31450, "creation_time": "2004-09-28T12:12:05Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 64405, "time": "2004-09-30T12:44:50Z", "bug_id": 31450, "creation_time": "2004-09-30T12:44:50Z", "is_private": false, "text": "fixed in CVS, thanks."}]