[{"count": 0, "attachment_id": null, "creator": "wangdong.08@gmail.com", "is_private": false, "id": 132542, "time": "2009-12-01T03:14:22Z", "bug_id": 48316, "creation_time": "2009-12-01T03:14:22Z", "tags": [], "text": "when a cache is hit in the quick_handler, the cache_url_handler will execute ap_run_insert_filter to hook all the filter to the request. as the line 207 in mod_cache.c (2.2.13)\n-----------------------------------\n      /* We are in the quick handler hook, which means that no output\n       * filters have been set. So lets run the insert_filter hook.\n       */\n      ap_run_insert_filter(r);\n-------------------------------------\n\nbut it didn't work, when the core_insert_filter is invoked by ap_run_insert_filter, the core_dir_config's output_filters is stil NULL, so no filter is hooked to the request. \n\nI found that the core_dir_config->output_filters doesn't stop to be NULL until the ap_location_walk. so the ap_run_insert_filter in ap_invoke_handler works all right, but in quick_handler it doesn't."}, {"count": 1, "tags": [], "text": "By definition, quick_handler is not to be adding extra content filters, once\nwe find the cache entry, the protocol filters transmit it to the client.\n\nCan you explain what you are trying to do?  Perhaps this is better closed\nand discussion moved to modules-dev@ or dev@ httpd (whichever is a more\nappropriate list your comments).", "is_private": false, "id": 132546, "creation_time": "2009-12-01T04:04:40Z", "time": "2009-12-01T04:04:40Z", "creator": "wrowe@apache.org", "bug_id": 48316, "attachment_id": null}]