[{"count": 0, "tags": [], "bug_id": 54749, "attachment_id": null, "id": 166132, "time": "2013-03-25T09:29:43Z", "creator": "rstoyanchev@yahoo.com", "creation_time": "2013-03-25T09:29:43Z", "is_private": false, "text": "The programmatic EchoEndpoint causes stack overflow when Disconnect is pressed. Is there a good reason for calling session.close inside onClose?\n\njava.lang.StackOverflowError\n        at java.lang.Thread.getContextClassLoader(Thread.java:1444)\n        at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:377)\n        at org.apache.tomcat.websocket.WsSession.close(WsSession.java:337)\n        at websocket.echo.EchoEndpoint.onClose(EchoEndpoint.java:40)\n        at org.apache.tomcat.websocket.WsSession.fireEndpointOnClose(WsSession.java:380)\n        at org.apache.tomcat.websocket.WsSession.close(WsSession.java:337)\n        at websocket.echo.EchoEndpoint.onClose(EchoEndpoint.java:40)"}, {"count": 1, "tags": [], "bug_id": 54749, "text": "Though there isn't a \"good reason\" for calling session.close inside onClose, the spec says that calling session.close should be a no-op after the first time. It definitely should not result in an error.", "id": 166135, "time": "2013-03-25T13:23:07Z", "creator": "nicholas@nicholaswilliams.net", "creation_time": "2013-03-25T13:23:07Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "Thanks for the report. I picked this up already while reviewing the close code for bug 54746. Latest trunk should be protected against this.", "id": 166141, "time": "2013-03-25T17:50:59Z", "bug_id": 54749, "creation_time": "2013-03-25T17:50:59Z", "is_private": false}]