[{"count": 0, "attachment_id": null, "bug_id": 984, "is_private": false, "id": 1286, "time": "2001-03-15T06:31:17Z", "creator": "madunphy@bigfoot.com", "creation_time": "2001-03-15T06:31:17Z", "tags": [], "text": "Me again,\n\nThe generated DTD file (via the antstructure task) defines the property and \ntest (nested element of Junit) elements as: \n\n<!ATTLIST property\n    id ID #IMPLIED\n    refid IDREF #IMPLIED\n    name CDATA #IMPLIED\n    classpath CDATA #IMPLIED\n    file CDATA #IMPLIED\n    userproperty %boolean; #IMPLIED\n    resource CDATA #IMPLIED\n    environment CDATA #IMPLIED\n    classpathref IDREF #IMPLIED\n    taskname CDATA #IMPLIED\n    value CDATA #IMPLIED\n    location CDATA #IMPLIED\n    description CDATA #IMPLIED\n>\n\n<!ATTLIST test\n    id ID #IMPLIED\n    showsuccess %boolean; #IMPLIED\n    output CDATA #IMPLIED\n    fork %boolean; #IMPLIED\n    classpath CDATA #IMPLIED\n    jvm CDATA #IMPLIED\n    dir CDATA #IMPLIED\n    classname CDATA #IMPLIED\n    showtrace %boolean; #IMPLIED\n    forceshowtrace %boolean; #IMPLIED\n    maxmemory CDATA #IMPLIED\n    showbanner CDATA #IMPLIED\n    args CDATA #IMPLIED\n    classpathref IDREF #IMPLIED\n    taskname CDATA #IMPLIED\n    failonerror %boolean; #IMPLIED\n    description CDATA #IMPLIED\n    jvmargs CDATA #IMPLIED\n>\n\nbut the docs do not specify these attributes. The test element requires a name \nattribute to run. Therefore I'd say the DTD is incorrect."}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "text": "<junit> doesn't support a nested property element at all, you might mean\n<sysproperty>, but the DTD snippet is for the <property> task (and correct).\n\nAs for <test>, well, a DTD is too limited to cover the full Ant syntax. The\nsnippet you show is for the <test> task, not for <junit>'s child element. As\na DTD has no way of saying \"this is the DTD for a test element if it is a child\nof junit, in all other cases use that\", there is nothing we can do when name\ncollisions happen.\n\nWe try to avoid them, but as you see, things happen.\n\nYou could remove the test task from your CLASSPATH before running antstructure\nto get a better DTD.", "id": 1287, "time": "2001-03-15T06:46:19Z", "bug_id": 984, "creation_time": "2001-03-15T06:46:19Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 984, "attachment_id": null, "is_private": false, "id": 1291, "time": "2001-03-15T07:01:05Z", "creator": "madunphy@bigfoot.com", "creation_time": "2001-03-15T07:01:05Z", "text": "Thanks Stefan,\n\nIf what you say about the property task (and that is what I meant) is correct,  \nthen that implies that the documentation is incorrect as I see no reference to \nthe userproperty attribute in the docs for the property task. The docs refer to \nthe attributes:\n\nname\nvalue\nrefid\nresource\nfile\nlocation\nenvironment\nclasspath\nclasspathref\n\nShould we open another bug rather than reopening this one?"}, {"count": 3, "tags": [], "creator": "bodewig@apache.org", "text": "lets say the DTD for <property> reveals an attribute that has not been intended\nas such.\n\nThe DTD is based on method signatures, the class implementing <property> has a\nmethod named setUserProperty which leads to the DTD entry. But its purpose\nhas been different.\n\nTechnically you can use a userproperty attribute in a <property> task, but this\nis not what the method should be used for - and therefore you won't find\ndocumentation on it.", "id": 1292, "time": "2001-03-15T07:19:19Z", "bug_id": 984, "creation_time": "2001-03-15T07:19:19Z", "is_private": false, "attachment_id": null}]