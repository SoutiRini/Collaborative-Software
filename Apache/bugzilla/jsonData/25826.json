[{"count": 0, "tags": [], "creator": "damon@sicore.org", "attachment_id": null, "text": "For some reason the jarfile.getParentFile() returns null (docs indicate this is valid when the \npathname does not indicate a parent directory.  This works fine in Ant 1.5.3.\n\nWhen attempting to use the ejbjar tag I encounter the following:\n\njava.lang.NullPointerException\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.GenericDeploymentTool.writeJar(GenericDeploymentTool\n.java:788)\n        at \norg.apache.tools.ant.taskdefs.optional.ejb.GenericDeploymentTool.processDescriptor(GenericDeplo\nymentTool.java:479)\n        at org.apache.tools.ant.taskdefs.optional.ejb.EjbJar.execute(EjbJar.java:640)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:306)\n        at org.apache.tools.ant.Task.perform(Task.java:401)\n        at org.apache.tools.ant.Target.execute(Target.java:338)\n        at org.apache.tools.ant.Target.performTasks(Target.java:365)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1237)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1094)\n        at org.apache.tools.ant.Main.runBuild(Main.java:669)\n        at org.apache.tools.ant.Main.startAnt(Main.java:220)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:215)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:90)\n\n\nHere is my build.xml snippet:\n\n<ejbjar srcdir=\"${build.dir}\"\n                cmpversion=\"2.0\"\n                flatdestdir=\"true\"\n                descriptordir=\"${meta-inf.dir}\"\n                dependency=\"full\"\n                basejarname=\"my_ejb\"\n                manifest=\"src/metadata/my/MANIFEST.MF\">\n                  <include name=\"ejb-jar.xml\"/>\n                  <include name=\"${configuration.dir}/**\"/>\n                  <exclude name=\"jboss.xml\"/>\n                  <jboss destdir=\"${jars.dir}/\"/>\n                  <dtd publicId=\"-//Sun Microsystems, Inc.//DTD Enterprise JavaBeans 2.0//EN\"\n                       location=\"${ejb_2_0.dtd.name}\"/></ejbjar>", "id": 49859, "time": "2003-12-30T17:26:09Z", "bug_id": 25826, "creation_time": "2003-12-30T17:26:09Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 25826, "attachment_id": null, "id": 49893, "time": "2003-12-31T12:32:35Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-12-31T12:32:35Z", "is_private": false, "text": "This is stange, you do not seem to be setting the\ndestdir attribute on the <ejbjar/> task."}, {"count": 2, "tags": [], "bug_id": 25826, "text": "Yeah, and I managed to get it working if I add the destdir.  However, the docs state that it isn't \nnecessary if you use at <jboss> element which contains the destdir.   I guess it is required in both \nplaces now.\n\nHere's what the docs say regarding destdir in the ejbjar element:  \n\nNote that this attribute is only used if the task is generating generic jars (i.e. no vendor-specific \ndeployment elements have been specified).\n\nSee:  http://ant.apache.org/manual/OptionalTasks/ejb.html#ejbjar\n\nEither way, a NullPointerException should not occur, but rather an error message explaining what's \nmissing.", "id": 49915, "time": "2003-12-31T20:46:24Z", "creator": "damon@sicore.org", "creation_time": "2003-12-31T20:46:24Z", "is_private": false, "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "peter.reilly@corvil.com", "is_private": false, "id": 50057, "time": "2004-01-05T11:46:39Z", "bug_id": 25826, "creation_time": "2004-01-05T11:46:39Z", "tags": [], "text": "I did not see the comment for the destdir attriubute, I just looked at\nthe \"required\" column for the attribute.\n\nOn looking closer, this is a bug introduced with version 1.11 of\nJBossDeploymentTool.java\n\"Adds functionality that makes jboss element look for jbosscmp-jdbc.xml\ndescriptor if ejbjar has cmpversion=\"2.0\" set\nPR: 14709\"\n\nThe problem should now be fixed in cvs HEAD"}]