[{"count": 0, "tags": [], "creator": "joh_m@gmx.de", "attachment_id": 22202, "text": "Created attachment 22202\nPatch to support converting passwords to UTF-8 in mod_authnz_ldap.c\n\nHello,\n\nwe are using basic authentication against an LDAPv3 server, which talks UTF-8.\n\nThe authentication fails, if a user has special characters in his password (like the paragraph character \u00a7).\nThis is 0xA7 in ISO-8859-1 from the client, but should be 0xC2A7 in UTF-8 to the directory server.\nThis happens with every character, which is not ASCII, because it is a two-byte character then. (First bit is always 0 in UTF-8 for one-byte characters)\n\nmod_authnz_ldap only converts usernames correctly (if given \"AuthLDAPCharsetConfig conf/charset.conv\"), but not passwords!\n\nI have written a patch against httpd 2.2.9.\nSee attachments.\n\n\n========\nLOG FILE\n========\n[Thu Jun 26 18:18:51 2008] [debug] mod_authnz_ldap.c(376): [client 10.192.120.192] [30522] auth_ldap authenticate: using URL ldap://ldap.intranet.mycompany.com:38\n9/ou=Users,o=MYCOMPANY,c=de?uid?sub\n[Thu Jun 26 18:18:54 2008] [warn] [client 10.192.120.192] [30522] auth_ldap authenticate: user J23259 authentication failed; URI /webhosting/ [ldap_simple_bin\nd_s() to check user credentials failed][Invalid credentials]\n[Thu Jun 26 18:18:54 2008] [error] [client 10.192.120.192] user J23259: authentication failure for \"/webhosting/\": Password Mismatch", "id": 118153, "time": "2008-07-01T10:06:51Z", "bug_id": 45318, "creation_time": "2008-07-01T10:06:51Z", "is_private": false}, {"count": 1, "tags": [], "text": "out of curiousity, what client are you using and does it synch up with\nthe settings in /docs/conf/charset.conv ?", "attachment_id": null, "id": 118156, "creator": "covener@gmail.com", "time": "2008-07-01T10:14:42Z", "bug_id": 45318, "creation_time": "2008-07-01T10:14:42Z", "is_private": false}, {"count": 2, "tags": [], "text": "(In reply to comment #1)\n> out of curiousity, what client are you using and does it synch up with\n> the settings in /docs/conf/charset.conv ?\n> \n\nWe tried with Internet Explorer 6 and Mozilla Firefox.\nThe client always sends authentication data in ISO-8859-1.\n\nWhat do you mean by \"synch up with the settings\"?", "attachment_id": null, "id": 118160, "creator": "joh_m@gmx.de", "time": "2008-07-01T12:12:29Z", "bug_id": 45318, "creation_time": "2008-07-01T12:12:29Z", "is_private": false}, {"count": 3, "tags": [], "creator": "bnicholes@apache.org", "attachment_id": null, "text": "Just as a bit of background, when I added the support for UTF-8 user names, I didn't bother with converting the password as well because the Novell LDAP implementation couldn't handle UTF-8 passwords.  I'm not sure about other LDAP implementations but my assumptions is that a UTF-8 password may not work everywhere.", "id": 118161, "time": "2008-07-01T13:15:30Z", "bug_id": 45318, "creation_time": "2008-07-01T13:15:30Z", "is_private": false}, {"count": 4, "text": "(In reply to comment #3)\n> Just as a bit of background, when I added the support for UTF-8 user names, I\n> didn't bother with converting the password as well because the Novell LDAP\n> implementation couldn't handle UTF-8 passwords.  I'm not sure about other LDAP\n> implementations but my assumptions is that a UTF-8 password may not work\n> everywhere.\n> \n\nWe use Novell eDirectory AFAIK.\nAnyway, if an LDAP implementation cannot handle UTF-8 passwords it would be alright, because in this case you wouldn't have to convert anything would you?", "creator": "joh_m@gmx.de", "attachment_id": null, "id": 118162, "time": "2008-07-01T13:42:23Z", "bug_id": 45318, "creation_time": "2008-07-01T13:42:23Z", "tags": [], "is_private": false}, {"count": 5, "tags": [], "text": "fixed in trunk in r902654", "attachment_id": null, "id": 133866, "creator": "sf@sfritsch.de", "time": "2010-01-24T13:53:27Z", "bug_id": 45318, "creation_time": "2010-01-24T13:53:27Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 45318, "attachment_id": null, "id": 139218, "time": "2010-08-18T15:46:35Z", "creator": "sf@sfritsch.de", "creation_time": "2010-08-18T15:46:35Z", "is_private": false, "text": "*** Bug 48017 has been marked as a duplicate of this bug. ***"}, {"count": 7, "tags": [], "bug_id": 45318, "text": "backported in r1005537, will be in 2.2.17", "id": 140566, "time": "2010-10-07T13:31:49Z", "creator": "sf@sfritsch.de", "creation_time": "2010-10-07T13:31:49Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "Backported to 2.2.17", "attachment_id": null, "id": 140567, "creator": "wrowe@apache.org", "time": "2010-10-07T13:33:07Z", "bug_id": 45318, "creation_time": "2010-10-07T13:33:07Z", "is_private": false}]