[{"count": 0, "tags": [], "creator": "moreda@alfa21.com", "attachment_id": null, "text": "Using apache as a reverse proxy in a scenario where the real servers are using\nbasic authentication, the remote user name is not logged.\n\nBest regards.", "id": 63879, "time": "2004-09-20T15:06:39Z", "bug_id": 31311, "creation_time": "2004-09-20T15:06:39Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 12804\nPatch to retrieve remote user if available in auth headers", "is_private": false, "bug_id": 31311, "id": 63880, "time": "2004-09-20T15:09:34Z", "creator": "moreda@alfa21.com", "creation_time": "2004-09-20T15:09:34Z", "attachment_id": 12804}, {"count": 2, "tags": [], "bug_id": 31311, "is_private": false, "id": 63881, "attachment_id": null, "creator": "moreda@alfa21.com", "creation_time": "2004-09-20T15:10:57Z", "time": "2004-09-20T15:10:57Z", "text": "Proposed patch available in previous comment"}, {"count": 3, "tags": [], "bug_id": 31311, "attachment_id": null, "id": 64022, "time": "2004-09-22T09:20:05Z", "creator": "jorton@redhat.com", "creation_time": "2004-09-22T09:20:05Z", "is_private": false, "text": "I don't think this is really correct.  A logged username should mean the user\nhas been authenticated *to this server*.  If the server is acting as a proxy and\nnot enforcing authentication itself, then it should not log a username.\n\nAny other opinions?"}, {"count": 4, "tags": [], "bug_id": 31311, "attachment_id": null, "id": 64024, "time": "2004-09-22T09:33:55Z", "creator": "moreda@alfa21.com", "creation_time": "2004-09-22T09:33:55Z", "is_private": false, "text": "Ok, I see.\nCould it be more correct a specific extension to log the remote user fowarded to\nthe real server in reverse proxy scenarios? (I can try to make up another patch).\nAny other option to do the trick?"}, {"count": 5, "tags": [], "bug_id": 31311, "attachment_id": null, "id": 64025, "time": "2004-09-22T09:42:25Z", "creator": "jorton@redhat.com", "creation_time": "2004-09-22T09:42:25Z", "is_private": false, "text": "A mod_proxy extension to do this as a new mod_log_config tag (registered using\nap_register_log_handler) would make more sense, I think.  To be correct really\nit should extract the username directly from the header and should also support\nDigest, so it could get messy."}, {"count": 6, "tags": [], "bug_id": 31311, "is_private": false, "id": 64026, "attachment_id": null, "creator": "nick@webthing.com", "creation_time": "2004-09-22T10:13:40Z", "time": "2004-09-22T10:13:40Z", "text": "I tend to agree with Joe's first comment and lean towards WONTFIX.\n\nBut is this report correct?   Are you saying the proxy sets r->user to a value\nto a value that's meant for the backend server, or is this from Proxy-Authenticate?"}, {"count": 7, "tags": [], "text": "(In reply to comment #6)\n> I tend to agree with Joe's first comment and lean towards WONTFIX.\n\nPlease fix (see how below), for otherwise the reverse proxy is not usable for \nus.\n\n> But is this report correct?   Are you saying the proxy sets r->user to a value\n> to a value that's meant for the backend server, or is this from Proxy-\nAuthenticate?\n\nIf in doubt what data to log then I suggest to make a switch (let the admin \nchoose) for what to log in that field.\n\nAt our site we cannot build appache2 just because reverse proxy logging is \nincomplete (no offense).\n\nTIA", "is_private": false, "id": 106916, "creator": "klaus.witzel@cobss.com", "time": "2007-08-19T16:07:50Z", "bug_id": 31311, "creation_time": "2007-08-19T16:07:50Z", "attachment_id": null}]