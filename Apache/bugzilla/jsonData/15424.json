[{"count": 0, "tags": [], "bug_id": 15424, "text": "This bug is similar to bug #95, which is marked as resolved but appears to not actually have been \nresolved.\n\nWhen I use the java target to run a program, I get the error message:\n\nrun:\n     \n[java] Could not find Instrumentor. Make sure you have it in your classpath\n\nI think this is a \nbug for several reasons:\n- I use the same classpath for the javac target, which compiles \ncorrectly.\n- The class file exists in that classpath.\n- When I run java manually at the shell \nprompt, it works.\n\n\nHere is my build file:\n\n<?xml version=\"1.0\"?>\n<project \nname=\"profiler\" default=\"run\">\n\n  <property name=\"src\" value=\"src\"/>\n  <property \nname=\"build\" value=\"build\"/>\n\n  <path id=\"classpath\">\n    <pathelement \npath=\"${build}\"/>\n    <pathelement location=\"/home/mhao/lib/jiapi.jar\"/>\n    <pathelement \nlocation=\"/home/mhao/lib/log4j.jar\"/>\n    <pathelement \nlocation=\"/home/mhao/lib/regexp.jar\"/>\n  </path>\n\n  <target name=\"init\">\n    <mkdir \ndir=\"${build}\"/>\n  </target>\n\n  <target name=\"build\" depends=\"init\">\n    <javac \nsrcdir=\"${src}\" destdir=\"${build}\">\n      <classpath refid=\"classpath\"/>\n    </javac>\n  \n</target>\n\n  <target name=\"run\" depends=\"build\">\n    <java classname=\"Instrumentor\">\n      \n<classpath refid=\"classpath\"/>\n    </java>\n  </target>\n\n  <target name=\"clean\">\n    <delete \ndir=\"${build}\"/>\n  </target>\n\n</project>\n\n\n\nHere are the relevant portions of ant -\ndebug:\n\nbuild:\nfileset: Setup scanner in dir /home/mhao/profiler/src with patternSet{ \nincludes: [] excludes: [] }\n    [javac] Profiler.java added as \n/home/mhao/profiler/build/Profiler.class doesn't exist.\n    [javac] SimpleProgram.java \nadded as /home/mhao/profiler/build/SimpleProgram.class doesn't exist.\n    [javac] \nInstrumentor.java added as /home/mhao/profiler/build/Instrumentor.class doesn't \nexist.\n    [javac] Compiling 3 source files to /home/mhao/profiler/build\n    [javac] Using \nmodern compiler\ndropping /ade/mhao_rdbms/dbjava/classes11/gss_1.1.0.zip from path as it \ndoesn't exist\ndropping /ade/mhao_rdbms/sqlj/lib/classes.zip from path as it doesn't \nexist\ndropping /ade/mhao_rdbms/rdbms/jlib/aqapi11.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/classes from path as it doesn't exist\ndropping \n/vobs/dbfs/lib/ifs.jar from path as it doesn't exist\ndropping /vobs/dbfs/lib/antlr.jar \nfrom path as it doesn't exist\ndropping /vobs/dbfs/lib/vbj30.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/external/JWS1.2/lib/jdsk.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/external/JWS1.2/lib/jst.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/external/JWS1.2/lib/pjbean.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/external/JWS1.2/lib/servlet.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/external/JWS1.2/lib/ssl.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/external/JWS1.2/lib/x509v1.jar from path as it doesn't \nexist\ndropping /vobs/dbfs/lib/ldapjdk.jar from path as it doesn't exist\ndropping \n/vobs/dbfs/lib/xml4j.jar from path as it doesn't exist\ndropping /vobs/dbfs/lib/vbcpp.jar \nfrom path as it doesn't exist\ndropping /ade/mhao_rdbms/oracle/ordim/lib/ordim.zip from \npath as it doesn't exist\ndropping /ade/mhao_rdbms/src/server/xmlsupp/xsu/lib/sax2.jar \nfrom path as it doesn't exist\n    [javac] Compilation arguments:\n    [javac] '-d'\n    [javac] \n'/home/mhao/profiler/build'\n    [javac] '-classpath'\n    [javac] \n'/home/mhao/profiler/build:/home/mhao/lib/jiapi.jar:/home/mhao/lib/log4j.jar:/home/mhao/\nlib/regexp.jar:/usr/local/packages/ant/lib/xml-\napis.jar:/usr/local/packages/ant/lib/xercesImpl.jar:/\nusr/local/packages/ant/lib/textarea-\n2.2.3.jar:/usr/local/packages/ant/lib/sax-\n2.0.1.jar:/usr/local/p\nackages/ant/lib/oro-\n2.0.6.jar:/usr/local/packages/ant/lib/optional.jar:/usr/local/packages/ant/lib/l\nog4j-\n1.2.6.jar:/usr/local/packages/ant/lib/jdom-\n1.0b8.jar:/usr/local/packages/ant/lib/jaxp-\n1.2.jar:/\nusr/local/packages/ant/lib/jalopy-ant-\n0.5.5.jar:/usr/local/packages/ant/lib/jalopy-\n1.0b8.jar:/usr/lo\ncal/packages/ant/lib/ant.jar:/usr/local/packages/ant/lib/aelfred-\n1.2.jar:/home/mhao/profiler:/home/m\nhao/lib/bcel.jar:/home/mhao/packages/jiapi/lib/jiapi.jar:/home/mhao/lib/openjgraph.jar:/home/mhao/li\nb:/ade/mhao_rdbms/dbjava/lib/classes111.zip:/ade/mhao_rdbms/dbjava/lib/nls_charset11.zip:/ade/mhao_r\ndbms/dbjava/lib/nls_charset12.zip:/usr/local/packages/jdk1.1.6/lib/classes.zip:/ade/mhao_rdbms/oracl\ne/oracore/lib/lclasses11.zip:/ade/mhao_rdbms/network/jlib/netthin.jar:/ade/mhao_rdbms/rdbms/jlib/jms\ncommon.jar:/ade/mhao_rdbms/oracle/javavm/lib/aurora.zip:/ade/mhao_rdbms/oracle/ordvir/lib/ordvir.zip\n:/ade/mhao_rdbms/oracle/ordim/lib/ordim815.zip:/ade/mhao_rdbms/sqlj/lib/translator.zip:/ade/mhao_rdb\nms/sqlj/lib/runtime.zip:/ade/mhao_rdbms/oracle/ordvir/lib/ordvir815.zip:/ade/mhao_rdbms/oracle/ordim\n/lib/ordhttp.zip:/ade/mhao_rdbms/rdbms/jlib/xsu12.jar:/ade/mhao_rdbms/rdbms/jlib/xquery.jar:/ade/mha\no_rdbms/oracle/lib/xmlparserv2.jar:/ade/mhao_rdbms/oracle/lib/xschema.jar:/usr/local/packages/jdk1.4\n.0/lib/tools.jar'\n \n   [javac] '-sourcepath'\n    [javac] '/home/mhao/profiler/src'\n    [javac] '-g:none'\n    [javac] \n    \n[javac] The ' characters around the executable and arguments are\n    [javac] not part of the \ncommand.\n    [javac] Files to be compiled:\n    [javac]     \n/home/mhao/profiler/src/Profiler.java\n    [javac]     \n/home/mhao/profiler/src/SimpleProgram.java\n    [javac]     \n/home/mhao/profiler/src/Instrumentor.java\n\nrun:\n     [java] Running in same VM Executing \n'Instrumentor' with \nforce loading Instrumentor\nFinding class Instrumentor\nClass \njava.lang.Object loaded from parent loader\n\n<snip>\n\n     [java] Could not find \nInstrumentor. Make sure you have it in your classpath\n\nBUILD SUCCESSFUL", "id": 27913, "attachment_id": null, "creator": "mhao@mit.edu", "creation_time": "2002-12-17T01:20:39Z", "time": "2002-12-17T01:20:39Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 15424, "is_private": false, "id": 27914, "creation_time": "2002-12-17T01:32:04Z", "time": "2002-12-17T01:32:04Z", "creator": "stevel@apache.org", "text": "\"I use the same classpath for the javac target, which compiles \ncorrectly.\"\n\nIn javac you compile the file. In java you should be running it. Which means you\nneed to add the output directory of javac to the classpath. Are you doing this?\npost your build file.", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 15424, "text": "Um, I did post my build file.", "id": 27915, "time": "2002-12-17T01:36:48Z", "creator": "mhao@mit.edu", "creation_time": "2002-12-17T01:36:48Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 15424, "text": "so you did. oops.\n\n1. try declaring your build classes with \n<pathelement location=\"${build}\"/>\n\n2. try fork=true in <java>", "id": 27917, "time": "2002-12-17T02:14:54Z", "creator": "stevel@apache.org", "creation_time": "2002-12-17T02:14:54Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 15424, "is_private": false, "id": 27920, "attachment_id": null, "creator": "mhao@mit.edu", "creation_time": "2002-12-17T02:24:19Z", "time": "2002-12-17T02:24:19Z", "text": "#1 didn't work; #2 did.  Thanks!"}]