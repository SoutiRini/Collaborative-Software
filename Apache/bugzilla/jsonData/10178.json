[{"count": 0, "tags": [], "text": "<?xml version=\"1.0\" encoding=\"iso-8859-1\" standalone=\"yes\"?> header causes \nproxy server to loose parts of buffer.\n\nAfter upgrade to 1.3.26 our XML API stopped working and we isolated the \nfollowing problem:\n\nThe following API XML response when passing through Proxy server:\n\n<?xml version=\"1.0\" encoding=\"iso-8859-1\" standalone=\"yes\"?><response><Auth \nstatus=\"0\"/><Version \nstatus=\"0\"><number>1.61</number><url>http://release.openair1.com/download/OpenAi\nrOffLine161.exe</url><size>1246882</size></Version><Read \nstatus=\"0\"><Slip><type>T</type><description/><total>0.00</total><projectid/><tax\n_location_name/><updated><Date><year>2002</year><minute>18</minute><second>35</s\necond><hour>10</hour><month>01</month><day>07</day></Date></updated><notes>Raz\nDva\nTri\nChetyre</notes><currency>USD</currency><total_with_tax/><categoryid/><rate>0.00<\n/rate><payment_typeid/><userid>1</userid><gl_code>1234455454</gl_code><unitm/><i\nd>11</id><timer_start/><minute/><projecttaskid/><created><Date><year>2000</year>\n<minute>45</minute><second>53</second><hour>10</hour><month>11</month><day>17</d\nay></Date></created><cost>0.000</cost><city/><invoiceid/><itemid/><date><Date><y\near>2000</year><minute/><second/><hour/><month>11</month><day>13</day></Date></d\nate><hour>4</hour><customerid>40</customerid><quantity>0.00</quantity></Slip></r\nesponse>\n\nwould return nothing, or would cut off buffer returning only the end of the \nfull response. When we tried to connect to webserver directly (bypassing \nproxy), the whole response was returned with no porblems. Then we tried putting \na line break after initial:\n<?xml version=\"1.0\" encoding=\"iso-8859-1\" standalone=\"yes\"?>. As the result the \nwhole response below that line was intact but this line got chewed off by \nproxy. Then we put the following sequence:\n<?xml version=\"1.0\" encoding=\"iso-8859-1\" standalone=\"yes\"?> \\n <?xml \nversion=\"1.0\" encoding=\"iso-8859-1\" standalone=\"yes\"?> <the rest of the \nresponse>\n\n(Two identical headers with line break in between and then full response) The \nfirst header got chewed off, the second one remained there and the rest of the \nresponse was fine. This hack enabled us to get back to working API.\n\nWe can replicate this problem on all machines running new version of Apachi.", "is_private": false, "bug_id": 10178, "id": 18466, "time": "2002-06-24T14:23:01Z", "creator": "fima@openair.com", "creation_time": "2002-06-24T14:23:01Z", "attachment_id": null}, {"attachment_id": 2321, "tags": [], "bug_id": 10178, "text": "Created attachment 2321\nFix drop of leading line of response for non-http proxied responses", "count": 1, "id": 19335, "time": "2002-07-11T16:41:26Z", "creator": "Jon.Strabala@QuantumSI.com", "creation_time": "2002-07-11T16:41:26Z", "is_private": false}, {"count": 2, "text": "I have supplied a patch for correcting\nthis bug, basically if a non-HTTP response\nis received 1.3.26 will drop the 1st line\neven though it is not a header, refer to\nmy attachement for a non-certified quick\nfix.  \n\nThe basic fix was to write a 'peek' function\nto look at a line without consuming the\ninput buffer when checking for a true HTTP\nheader response to a proxied request.\n\nI felt it was important to post it due \nto the inability to use 1.3.24 which \ndoesn't have this bug - BUT has a nasty\nsecurity flaw i.e. the CERT chunk bug.", "bug_id": 10178, "attachment_id": null, "id": 19336, "time": "2002-07-11T16:50:31Z", "creator": "Jon.Strabala@QuantumSI.com", "creation_time": "2002-07-11T16:50:31Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "text": "mod_proxy is not designed to be a generic, all-purpose proxy. We will investigate this \npatch, but it is likely not to be included in 1.3 in deference to 2.0.", "attachment_id": null, "bug_id": 10178, "id": 34733, "time": "2003-04-08T15:09:26Z", "creator": "jim@apache.org", "creation_time": "2003-04-08T15:09:26Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 10178, "text": "enabling the PatchAvailable keyword\nupdated doc on submitting patches is at http://httpd.apache.org/dev/patches.html\n", "id": 47897, "time": "2003-11-21T22:42:08Z", "creator": "trawick@apache.org", "creation_time": "2003-11-21T22:42:08Z", "is_private": false, "attachment_id": null}]