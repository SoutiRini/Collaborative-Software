[{"count": 0, "tags": [], "bug_id": 43913, "attachment_id": null, "text": "I found a strange problem than came with an httpd directive even it may be\ncaused by acrobat reader plug-in or by the way browsers react in the particular\ncase.\n\nI\u2019m using different httpd servers on different platforms, all using version 2.0.\nFor this explanation, the first one is a RedHat Enterprise LINUX release 4,\nupdate 4, with httpd server version 2.0.52.\n\nThe DNS name of server daet99.d1.f1.enterprise\n\nThe httpd.conf file contains the following directive:\n\nAlias /hpwd \"/FS03/hpwd\"\n<Directory \"/FS03/hpwd\">\n        Options Indexes MultiViews\n        AllowOverride None\n        Order allow,deny\n        Allow from all\n</Directory>\n\nOn the server, the directory involved contains:\nls -lh /FS03/hpwd/\ntotal 99M\n-rw-r--r--  1 root root 68K Nov 16 11:32 CSS-2.0.pdf\n-rw-r--r--  1 root root 12M Nov 16 11:28 mysql-refman-5.0-en.a4.pdf\n-rw-r--r--  1 root root 87M Nov 19 10:37 Yes-CloseToTheEdge.mp3\n\nThere are 2 PDF files, a small one and a large one, and a very large MP3 file.\n\nI use the following browsers on my windows workstation:\nMicrosoft Internet Explorer 6.0.2900.2180.xpsp_sp2_gdr.070227-2254 and Mozilla\nFirefox 2.0.0.9\nBoth browsers use plug-in to handle pdf and mp3 files (Acrobat Reader for pdf,\nand Apple Quicktime for mp3). I use Acrobat Reader 7.0.\n\nEverything\u2019s ok with both browsers when I type the complete URL of the different\nfiles (http://daet99.d1.f1.enterprise/hpwd/CSS-2.0.pdf for example) \n\nNow I add the following directives to block direct access to pdf and mp3 files,\nand only accept access from another httpd server with DNS name\ndaet6.d1.f1.enterprise:\n\n<Files ~ \"\\.pdf$\">\n   Order allow,deny\n   SetEnvIf Referer \"^http:\\/\\/daet6\\.d1\\.f1\\.enterprise\\/\" hpwdAccess\n   Allow from env=hpwdAccess\n</Files>\n<Files ~ \"\\.mp3$\">\n   Order allow,deny\n  SetEnvIf Referer \"^http:\\/\\/daet6\\.d1\\.f1\\.enterprise\\/\" hpwdAccess\n   Allow from env=hpwdAccess\n</Files>\n\nNow I got an error message when I try to access file with previous URL. Fine,\nthat\u2019s what I wanted.\n\nThen I create a web page that contains, among other:\n\n<a href=\"http://daet99.d1.f1.enterprise/hpwd/mysql-refman-5.0-en.a4.pdf\">Mysql\nReference Manual (12Mb)</a>\n<br>\n<a href=\"http://daet99.d1.f1.enterprise/hpwd/CSS-2.0.pdf\">CSS Reference Card\n(64K)</a>\n<br>\n<a href=\"http://daet99.d1.f1.enterprise/hpwd/Yes-CloseToTheEdge.mp3\">Close to\nthe Edge (Yes)</a>\n<hr>\n\nAnd I install the page so it\u2019s may be use with URL http://daet6.d1.f1.enterprise/...\n\nNow when I click on the links, using the new page:\nWith MS Internet Explorer:\nEverything\u2019s OK\nWith Mozilla Firefox:\nOK for small PDF file and large mp3 file, but with large PDF file, I received\n(after a while) the following popup message:\n\nAcrobat Reader\nA file I/O error occurred. The file connection timed out.\n\nIf I change the setup for pdf handling in firefox, to use acrobat reader program\nrather than acrobat plug-in, if works fine.\n\nSo it seems that the problem is within Acrobat Reader plug-in on Firefox, even\nif it\u2019s after including httpd directives, but:\nIf I try to save the files using right click and \u201csave target link as \u2026\u201d it\nworks fine on Firefox but it failed on IE, for all three files, with a popup\nmessage:\n\nInternet Explorer cannot download \u2026\nInternet Explorer was not able to open the Internet site. The requested site is\neither unavailable or cannot be found. Please try again later.\n\nI made another test where I change role between daet99 and daet6 (daet6 is HP/UX\n11.11 with httpd server 2.0.55), with same results. I also made a test with\nhttpd server 2.2.4 (fedora 7). Same result.", "id": 110840, "time": "2007-11-20T03:34:35Z", "creator": "jean.miart@sanofi-aventis.com", "creation_time": "2007-11-20T03:34:35Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 43913, "attachment_id": null, "text": "Same result with Firefox 2.0.0.3 browser on Fedora 7 platform with Adobe Reader 8.\n", "id": 110843, "time": "2007-11-20T05:35:02Z", "creator": "jean.miart@sanofi-aventis.com", "creation_time": "2007-11-20T05:35:02Z", "is_private": false}, {"count": 2, "text": "Please use a user support forum.\n\nYou're more likely to get help if you cut down on confusing narrative and add\ntechnical detail.  A URL that that demonstrates your problem would help.", "creator": "nick@webthing.com", "is_private": false, "id": 110853, "time": "2007-11-20T07:48:23Z", "bug_id": 43913, "creation_time": "2007-11-20T07:48:23Z", "tags": [], "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 43913, "attachment_id": null, "is_private": false, "id": 110970, "time": "2007-11-21T17:37:09Z", "creator": "slive@apache.org", "creation_time": "2007-11-21T17:37:09Z", "text": "The problem is that when the Acrobat reader plugin does range requests, it\ndoesn't send the referer header that you're looking for."}]