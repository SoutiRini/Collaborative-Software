[{"count": 0, "tags": [], "text": "/bin/ksh /disk1/config/Apache/httpd-2.0.43/srclib/apr/libtool --silent\n--mode=compile /opt/SUNWspro/bin/cc  -g -mt    -DSOLARIS2=7\n-D_POSIX_PTHREAD_SEMANTICS -D_REENTRANT   \n-I/disk1/config/Apache/httpd-2.0.43/srclib/apr/include\n-I/disk1/config/Apache/httpd-2.0.43/srclib/apr-util/include\n-I/usr/config/Apache/httpd-2.0.43/srclib/apr-util/include -I/usr/local/include\n-I. -I/usr/config/Apache/httpd-2.0.43/os/unix\n-I/usr/config/Apache/httpd-2.0.43/server/mpm/prefork\n-I/usr/config/Apache/httpd-2.0.43/modules/http\n-I/usr/config/Apache/httpd-2.0.43/modules/filters\n-I/usr/config/Apache/httpd-2.0.43/modules/proxy\n-I/usr/config/Apache/httpd-2.0.43/include\n-I/usr/config/Apache/httpd-2.0.43/modules/dav/main  -c prefork.c && touch\nprefork.lo\n\"prefork.c\", line 562: undefined symbol: ap_max_mem_free\n\"prefork.c\", line 717: cannot recover from previous errors\ncc: acomp failed for prefork.c", "is_private": false, "bug_id": 14243, "id": 25648, "time": "2002-11-04T22:14:49Z", "creator": "kemp@network-services.uoregon.edu", "creation_time": "2002-11-04T22:14:49Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "kemp@network-services.uoregon.edu", "is_private": false, "count": 1, "id": 25649, "time": "2002-11-04T22:20:54Z", "bug_id": 14243, "creation_time": "2002-11-04T22:20:54Z", "text": "Uh, this is true on GCC as well.  I just tried SUNWspro to\ncover all bases.  This problem was also in the last couple\nof distributions, so it's been there for a bit.  ap_max_mem_free\nis undefined.  This may be a case of not enough ifndefs in certain\nparts of the code that use resource limitting."}, {"count": 2, "tags": [], "text": "I think you're going to have to do most of the debugging yourself because we \nhaven't seen this error ourselves and it likely is some sort of setup problem.\n\nHere is how ap_max_mem_free should get defined:\n\nprefork.c includes mpm_common.h\n\nmpm_common.h includes mpm.h\n(verify that mpm.h is picked up from server/mpm/prefork directory)\n\nmpm.h has this line:\n\n#define AP_MPM_WANT_SET_MAX_MEM_FREE\n\nmpm_common.h has this code after the include of mpm.h:\n\n#ifdef AP_MPM_WANT_SET_MAX_MEM_FREE\nextern apr_uint32_t ap_max_mem_free;\nextern const char *ap_mpm_set_max_mem_free(cmd_parms *cmd, void *dummy,\n                                           const char *arg);\n#endif\n\nThus prefork.c should see the declaration of ap_max_mem_free.\n\nI think the only way this can fail is that the wrong mpm.h is getting\npicked up.\n\nThese should be the only copies of mpm.h in your tree:\n\n$ find . -name mpm.h\n./server/mpm/beos/mpm.h\n./server/mpm/st/mpm.h\n./server/mpm/worker/mpm.h\n./server/mpm/prefork/mpm.h\n./server/mpm/winnt/mpm.h\n./server/mpm/netware/mpm.h\n./server/mpm/experimental/leader/mpm.h\n./server/mpm/experimental/perchild/mpm.h\n./server/mpm/experimental/threadpool/mpm.h\n./server/mpm/mpmt_os2/mpm.h\n\nPut \"#error prefork mpm.h was included\" at the top of server/mpm/prefork/mpm.h, \ntry the make again, and see if you see that error message when prefork.c is \ncompiled.\n\nIf you don't, you're not picking up the right mpm.h and you need to see which \none you are getting.\n\nBe sure to look in /usr/local/include for some mpm.h.  You may have done an\ninstall to there a long time ago, leaving an old mpm.h which was missing\nsome later code.\n\n", "attachment_id": null, "bug_id": 14243, "id": 25668, "time": "2002-11-05T11:23:27Z", "creator": "trawick@apache.org", "creation_time": "2002-11-05T11:23:27Z", "is_private": false}, {"count": 3, "tags": [], "creator": "trawick@apache.org", "attachment_id": null, "id": 26188, "time": "2002-11-13T15:52:26Z", "bug_id": 14243, "creation_time": "2002-11-13T15:52:26Z", "is_private": false, "text": "When you are able to work through the suggestions in the previous update,\nif you still haven't resolved the problem, please reopen the PR.\n\nFor now we will assume that there is an old or invalid mpm.h somewhere on\nyour system which is getting picked up by the compilation.\n"}]