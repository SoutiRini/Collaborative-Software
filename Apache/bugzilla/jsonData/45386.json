[{"count": 0, "tags": [], "bug_id": 45386, "attachment_id": null, "is_private": false, "id": 118589, "time": "2008-07-11T17:01:21Z", "creator": "mohnish.kodnani@gmail.com", "creation_time": "2008-07-11T17:01:21Z", "text": "Exec Task hangs on Linux with the following stack. I have searched the bug database and it seems this has been reported for quite some time but has never been fixed. \nWe are using the following task which is hanging.  \n<project name=\"dmregr\" basedir=\".\">\n     <target name=\"run\">\n        <exec executable=\"dmbasic\" dir=\"${DMT_UTILS}\" output=\"${basedir}/log/dmregr.out\">\n            <env key=\"DM_SHARED\" value=\"${dm.shared.dir}\"/>\n            <env key=\"SEPARATOR\" value=\"${SEPARATOR}\"/>\n            <env key=\"DMT_UTILS\" value=\"${DMT_UTILS}\"/>\n            <env key=\"DMT_USR\" value=\"${DMT_USR}\"/>\n            <env key=\"DMT_USP\" value=\"${DMT_USP}\"/>\n            <env key=\"DMT_DB\" value=\"${DMT_DB}\"/>\n            <env key=\"DMT_DBP\" value=\"${DMT_DBP}\"/>\n            <env key=\"DMT_ARCH_NT\" value=\"${DMT_ARCH_NT}\"/>\n            <env key=\"DMT_MAX_TIME\" value=\"${DMT_MAX_TIME}\"/>\n            <env key=\"DMT_SLEEP_FACTOR\" value=\"${DMT_SLEEP_FACTOR}\"/>\n            <env key=\"DMT_QUIET\" value=\"${DMT_QUIET}\"/>\n            <env key=\"DMT_AUTO\" value=\"${DMT_AUTO}\"/>\n            <arg line=\"-f run.ebs -e Entry_Point -- ${install.owner.name} ${install.owner.password}\"/>\n        </exec>\n    </target>\n</project>\n\n\nThread 330: (state = BLOCKED)\n - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\n - java.lang.Thread.join(long) @bci=38, line=1095 (Interpreted frame)\n - java.lang.Thread.join() @bci=2, line=1148 (Interpreted frame)\n - org.apache.tools.ant.taskdefs.PumpStreamHandler.stop() @bci=15, line=138 (Interpreted frame)\n - org.apache.tools.ant.taskdefs.Execute.execute() @bci=175, line=485 (Interpreted frame)\n - org.apache.tools.ant.taskdefs.ExecTask.runExecute(org.apache.tools.ant.taskdefs.Execute) @bci=10, line=621 (Interpreted frame)\n - org.apache.tools.ant.taskdefs.ExecTask.runExec(org.apache.tools.ant.taskdefs.Execute) @bci=25, line=662 (Interpreted frame)\n - org.apache.tools.ant.taskdefs.ExecTask.execute() @bci=41, line=487 (Interpreted frame)\n - org.apache.tools.ant.UnknownElement.execute() @bci=58, line=288 (Interpreted frame)\n - sun.reflect.NativeMethodAccessorImpl.invoke0(java.lang.reflect.Method, java.lang.Object, java.lang.Object[]) @bci=0 (Interpreted frame)\n - sun.reflect.NativeMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=87, line=39 (Interpreted frame)\n - sun.reflect.DelegatingMethodAccessorImpl.invoke(java.lang.Object, java.lang.Object[]) @bci=6,line=25 (Interpreted frame)\n - java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) @bci=111, line=585 (Interpreted frame)\n - org.apache.tools.ant.dispatch.DispatchUtils.execute(java.lang.Object) @bci=518, line=105 (Interpreted frame)\n - org.apache.tools.ant.Task.perform() @bci=22, line=348 (Interpreted frame)\n - org.apache.tools.ant.Target.execute() @bci=53, line=357 (Interpreted frame)\n - org.apache.tools.ant.Target.performTasks() @bci=11, line=385 (Interpreted frame)\n - org.apache.tools.ant.Project.executeSortedTargets(java.util.Vector) @bci=145, line=1329 (Interpreted frame)\n - org.apache.tools.ant.Project.executeTarget(java.lang.String) @bci=27, line=1298 (Interpreted frame)\n - com.documentum.server.autotest.environments.dmregr.DmregrConfiguration.execute(java.util.Properties) @bci=340 (Interpreted frame)\n - com.documentum.server.autotest.Launch.main(java.lang.String[]) @bci=990 (Interpreted frame)"}, {"count": 1, "tags": [], "text": "how does the com.documentum.server.autotest.environments line get into the stack trace?  Are you running the Ant process from within another process?\n\nDoes this hang if you execute the build file from the command line?\n\nMost \"exec hangs\" problems can be traced to Ant trying to read input and passing it to the forked executable (so try setting inputstring=\"\" on your task).", "attachment_id": null, "id": 120016, "creator": "bodewig@apache.org", "time": "2008-08-22T04:04:40Z", "bug_id": 45386, "creation_time": "2008-08-22T04:04:40Z", "is_private": false}]