[{"count": 0, "tags": [], "creator": "bimbra@us.ibm.com", "text": "Environment:\nUsing CATALINA_BASE:   /apacheTomcat7/apache-tomcat-7.0.23 \nUsing CATALINA_HOME:   /apacheTomcat7/apache-tomcat-7.0.23                   \nUsing CATALINA_TMPDIR: /apacheTomcat7/apache-tomcat-7.0.23/temp              \nUsing JRE_HOME:        /QOpenSys/QIBM/ProdData/JavaVM/jdk60/32bit/jre        \nUsing CLASSPATH:       /apacheTomcat7/apache-tomcat-7.0.23/bin/bootstrap.jar:\n/apacheTomcat7/apache-tomcat-7.0.23/bin/tomcat-juli.jar                      \nServer version: Apache Tomcat/7.0.23                                         \nServer built:   Nov 20 2011 07:36:25                                         \nServer number:  7.0.23.0                                                     \nOS Name:        OS/400                                                       \nOS Version:     V7R1M0                                                       \nArchitecture:   PowerPC                                                      \nJVM Version:    jvmap3260sr9-20101130                                        \nJVM Vendor:     IBM Corporation                                              \n\nOut of the box start failed with :-\nThrowable occurred: org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_start]) for component [StandardServer[18005]] in state [INITIALIZING]\n\nI then updated server.xml to prepend a 1 before the port numbers:-\n<Server port=\"18005\" shutdown=\"SHUTDOWN\">\n<Connector port=\"18080\" protocol=\"HTTP/1.1\"\n               connectionTimeout=\"20000\"\n               redirectPort=\"18443\" />\n<Connector port=\"18009\" protocol=\"AJP/1.3\" redirectPort=\"18443\" />\nStart is failing with:-\nDec 2, 2011 1:07:01 PM org.apache.catalina.core.AprLifecycleListener init\nINFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /QSYS.LIB/SST.LIB:/QSYS.LIB:/QSYS.LIB/QSYS2.LIB:/QSYS.LIB/QUSRSYS.LIB:/QSYS.LIB/QHLPSYS.LIB:/QSYS.LIB/QSHELL.LIB:/QSYS.LIB/BIMBRA.LIB:/QSYS.LIB/QGPL.LIB:/QSYS.LIB/QTEMP.LIB:/QSYS.LIB/VLOGTOOL3.LIB:/QOpenSys/QIBM/ProdData/JavaVM/jdk60/32bit/jre/lib/ppc:/QOpenSys/QIBM/ProdData/JavaVM/jdk60/32bit/jre/lib/ppc/classic:/QOpenSys/QIBM/ProdData/JavaVM/jdk60/32bit/jre/lib/ppc/default\nDec 2, 2011 1:07:01 PM org.apache.catalina.startup.Catalina start\nSEVERE: Catalina.start: \nThrowable occurred: org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_start]) for component [StandardServer[18005]] in state [INITIALIZING]\nat org.apache.catalina.util.LifecycleBase.invalidTransition(LifecycleBase.java:408)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:144)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:624)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\nat java.lang.reflect.Method.invoke(Method.java:611)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)\nDec 2, 2011 1:07:01 PM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 2 ms", "id": 151927, "time": "2011-12-02T19:25:02Z", "bug_id": 52278, "creation_time": "2011-12-02T19:25:02Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 52278, "text": "A slight update to the details I posted earlier.\nThe default port number is 8005.\nThe 'out of the box' failure to start the server is:-\nOut of the box start failed with :-\nThrowable occurred: org.apache.catalina.LifecycleException: An invalid\nLifecycle transition was attempted ([before_start]) for component\n[StandardServer[8005]] in state [INITIALIZING]", "count": 1, "id": 151928, "time": "2011-12-02T20:07:35Z", "creator": "bimbra@us.ibm.com", "creation_time": "2011-12-02T20:07:35Z", "is_private": false}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "text": "Something isn't right with your system. The error message shows that the Server object either failed to initialise or has not finished initialisation when start() was called. If it failed, I'd expect to see an error message. If it hasn't finished, start() should never be called since this should be single-threaded at this point.\n\nI don't think it is a threading issue because again, the start process is still single threaded at the point you see the error message.\n\nThis works for me on a variety of platforms and JVMs (Oracle/Windows, Oracle/Linux, OpenJDK/FreeBSD). I am suspicious that this is happening on an IBM JVM but I find it hard to believe a JVM issue this fundamental exists in that JVM.\n\nSince this works for me (and a bunch of other people) the best way to troubleshoot / investigate this is via the users mailing list. Bugzilla is not suited to that kind of work. If the users list discussion concludes that there is a bug then this issue can be re-opened once the necessary details (steps to reproduce or a logical explanation of what the bug is if reproduction is hard) have been added.", "id": 152134, "time": "2011-12-12T23:03:59Z", "bug_id": 52278, "creation_time": "2011-12-12T23:03:59Z", "attachment_id": null}]