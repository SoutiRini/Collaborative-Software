[{"text": "This has been reported on the users list\n\nhttp://mail-archives.apache.org/mod_mbox/tomcat-users/201502.mbox/%3CCAHvOsHzPt9hK8iGSTfXCzCcUSMq4N0DH5o1WRzTFvW-pKdVRRg%40mail.gmail.com%3E\nhttp://tomcat.markmail.org/thread/du5j6z54cw2pfdvz\n\n<quote>\nI'm using Tomcat 8.0.18.\nI've following ant build.xml:\n\n<import file=\"${tomcat.home}/bin/\ncatalina-tasks.xml\"/>\n\n   <target name=\"jspc\">\n\n    <jasper\n             validateXml=\"false\"\n             uriroot=\"${webapp.path}\"\n             webXmlFragment=\"${webapp.path}/WEB-INF/generated_web.xml\"\n             outputDir=\"${webapp.path}/WEB-INF/src\" />\n\n  <validator path=\"${webapp.path}\" />\n...\n  </target>\n\n<jasper> task works great, but <validator> task throws\njava.lang.NoClassDefFoundError: org/apache/catalina/Globals\n\n</quote>\n\n\nSearching the jars, \"org/apache/catalina/Globals.class\" is in catalina.jar, which is not listed in bin/catalina-tasks.xml\n\nI think that catalina-tasks.xml shall list all jars from ${catalina.home}/lib/*.jar, instead of naming just a few of those.  Besides catalina.jar others that are missing are *-i18n-*.jar ones.", "tags": [], "bug_id": 57558, "is_private": false, "count": 0, "id": 180903, "time": "2015-02-10T15:39:23Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2015-02-10T15:39:23Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 57558, "attachment_id": null, "text": "Fixed in trunk and 8.0.x for 8.0.19 onwards.", "id": 180917, "time": "2015-02-10T20:35:38Z", "creator": "markt@apache.org", "creation_time": "2015-02-10T20:35:38Z", "is_private": false}, {"text": "This is observed on 7.0.59 and current 6.0.x as well. I will backport the fix.", "tags": [], "bug_id": 57558, "is_private": false, "count": 2, "id": 180921, "time": "2015-02-10T21:01:28Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2015-02-10T21:01:28Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "text": "Complete sample build.xml (to be put into $CATALINA_HOME):\n\n[[[\n<project default=\"jspc\">\n  <property name=\"tomcat.home\" location=\"${basedir}\" />\n  <property name=\"webapp.path\" location=\"${basedir}/webapps/examples\" />\n\n  <import file=\"${tomcat.home}/bin/catalina-tasks.xml\"/>\n\n   <target name=\"jspc\">\n\n    <jasper\n             validateXml=\"false\"\n             uriroot=\"${webapp.path}\"\n             webXmlFragment=\"${webapp.path}/WEB-INF/generated_web.xml\"\n             outputDir=\"${webapp.path}/WEB-INF/src\" />\n\n    <validator path=\"${webapp.path}\" />\n\n  </target>\n</project>\n]]]", "id": 180922, "time": "2015-02-10T21:02:24Z", "bug_id": 57558, "creation_time": "2015-02-10T21:02:24Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 57558, "attachment_id": null, "id": 180924, "time": "2015-02-10T21:29:39Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2015-02-10T21:29:39Z", "is_private": false, "text": "Fixed in Tomcat 7 by r1658815 and will be in 7.0.60.\nProposed for Tomcat 6."}, {"count": 5, "tags": [], "bug_id": 57558, "text": "For a record:\n\nStacktrace in Tomcat 6 is\n[[[\nbuild.xml:15: java.lang.NoClassDefFoundError: org\n/apache/catalina/Globals\n        at org.apache.catalina.ant.ValidatorTask.execute(ValidatorTask.java:95)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:292)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at ...\n]]]\n\nThe line that refers the Globals class in ValidatorTask.java:\n\n   Digester digester = DigesterFactory.newDigester(\n           true, true, null, Globals.IS_SECURITY_ENABLED);", "id": 180925, "time": "2015-02-10T21:35:45Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2015-02-10T21:35:45Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 57558, "text": "Fixed in Tomcat 6 by r1660788 and will be in 6.0.44 onwards.", "id": 181163, "time": "2015-02-19T04:09:10Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2015-02-19T04:09:10Z", "is_private": false, "attachment_id": null}]