[{"count": 0, "text": "Created attachment 31357\nPatch to set comet to false in recycleInternal\n\norg.apache.coyote.http11.Http11AprProcessor objects are not being properly recycled prior to insertion into the ConnectionHandler's reycledProcessors.\nSpecifically, Http11AprProcessor.comet is not set to false. When an Http11AprProcessor is returned from the recycledProcessors with this flag set to true, the connection is immediately aborted by tomcat.\n\nWe have both comet and traditional http connections occurring to the same tomcat and when in this state the manifestation is that periodically the client connection is aborted. Resetting the above mentioned flag in recycleInternal seems to address the issue, although we haven't tracked down the exact cause of the missing COMET_END that would have avoided this. See attached diff for the change.", "bug_id": 56201, "attachment_id": 31357, "id": 173559, "time": "2014-02-28T20:41:59Z", "creator": "bennett.schneider@tekcomms.com", "creation_time": "2014-02-28T20:41:59Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "bug_id": 56201, "attachment_id": null, "id": 173560, "time": "2014-02-28T21:09:48Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2014-02-28T21:09:48Z", "is_private": false, "text": "> Version: 7.0.23\n\nThe current version of Tomcat 7 is 7.0.52.\n\nAs of now, you patch is wrong.  The \"comet\" flag does not belong to Http11AprProcessor. It belongs to its parent class, AbstractHttp11Processor, and is properly reset in AbstractHttp11Processor.recycle(..)\n\nThat specific line originates from r1373667 that was a fix for bug 53697 (18 months ago).\n\n*** This bug has been marked as a duplicate of bug 53697 ***"}]