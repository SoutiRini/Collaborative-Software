[{"count": 0, "tags": [], "bug_id": 15606, "attachment_id": null, "id": 28164, "time": "2002-12-22T10:57:18Z", "creator": "jaframe@net-yan.com", "creation_time": "2002-12-22T10:57:18Z", "is_private": false, "text": "Platform /OS : PC / Windows 95, 98 and XP\nApache : 2.0.42 and 2.043\nPHP : 4.2.3 and 4.3.0RC3\n\nI use PHP scripts to write png image files to disk and then generate the HTML \nimage tags to display them on a web page. The image filenames are fixed. This \nworked well with versions of Apache prior to 2.0.42, however, since trying \n2.0.42 and 2.0.43 I sometimes get the contents of the image file displayed in \nthe browser. Typically the first time the browser accesses the web page the \nimages are ok if I then refresh the images are streamed back without the img \ntag in the HTML. It appears if I wait a while, eg after 1 minute, and then \nrefresh the image(s) display correctly.\n\nThe relevant part of the HTML streamed to the browser is as follows :\n\n1) IMG tag lost (1st image displays ok, 2nd is garbled) :\n\n<BR><P class=\"Data\" align = \"center\"><b>HKO Graph From 1999-01-20 To 2002-12-\n22</b>\n<BR><BR><IMG SRC=\"./images/hko_tandp_chart.png\" ALT=\"[HKO Temp and Pressure \nChart]\">\n<BR><BR>\u2030PNG\n\u001a\n   \nI    \nHDR  \u0001\u00c2   n\b\u0002   ;\u00d3\u201e3  \b8IDATx\u0153\u00ed\u00dcQ\u2013\u00a4*\f\u20aca\u00bdg\u2013\u00dc\u00bb\u02dc\u00de\u00b3\u00f7\u00c1\u00d3\u001c\u2020@\b\t\u00a2v\u00fd\u00dfS\u00b5 ...........\n\n\n2) IMG tags preserved (both images ok) :\n\n<BR><P class=\"Data\" align = \"center\"><b>HKO Graph From 1999-01-20 To 2002-12-\n22</b>\n<BR><BR><IMG SRC=\"./images/hko_tandp_chart.png\" ALT=\"[HKO Temp and Pressure \nChart]\">\n<BR><BR><IMG SRC=\"./images/hko_rain_chart.png\" ALT=\"[HKO Daily Rainfall \nChart]\"></P><BR>    </TD></TR>\n\nI've tried the same scripts with the default Apache 2.0.40 / PHP setup under \nRedHat Linux 8.0 and they consistently work well."}, {"count": 1, "text": "Tried with PHP 4.30RC4 but same problem.\n\nSetting \"KeepAlive Off\" or changing \"KeepAliveTimeout 15\" to \n\"KeepAliveTimeout 1\" in httpd.conf appears to solve the problem.", "bug_id": 15606, "is_private": false, "id": 28174, "time": "2002-12-22T17:55:48Z", "creator": "jaframe@net-yan.com", "creation_time": "2002-12-22T17:55:48Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 15606, "attachment_id": null, "id": 53168, "time": "2004-02-28T00:07:24Z", "creator": "Christopher.D.Knight@nasa.gov", "creation_time": "2004-02-28T00:07:24Z", "is_private": false, "text": "FYI, for mod_cache.c:\n\n170c170\n<             ap_cache_liststr(NULL, pragma, \"no-cache\", NULL) || (auth != NULL)) {\n---\n>             ap_cache_liststr(NULL, pragma, \"no-cache\", NULL)) {\n\nIs this correct?"}, {"count": 3, "tags": [], "bug_id": 15606, "text": "whoops, wrong bug...apologies...", "id": 53169, "time": "2004-02-28T00:07:53Z", "creator": "Christopher.D.Knight@nasa.gov", "creation_time": "2004-02-28T00:07:53Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 15606, "attachment_id": null, "id": 62760, "time": "2004-08-30T11:09:20Z", "creator": "chip@force-elite.com", "creation_time": "2004-08-30T11:09:20Z", "is_private": false, "text": "Old Old Versions of PHP and Apache.\n\nIf this still happens with modern versions, please disable Sendfile, and MMap.\nIf it is still a problem, please re-open the bug. \n\nThanks for using Apache!"}]