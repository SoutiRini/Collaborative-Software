[{"attachment_id": null, "tags": [], "bug_id": 11026, "text": "I use Apache Tomcat 4.0.3 lite edition for JDK1.4.0.\nafter days' running, Apache Tomcat deny offer service. I have encountered this \nproblem for 2 times.\n\nApache Tomcat/4.0.3 - HTTP Status 500 - Internal Server Error\n\n--------------------------------------------------------------------------------\n\ntype Exception report\n\nmessage Internal Server Error\n\ndescription The server encountered an internal error (Internal Server Error) \nthat prevented it from fulfilling this request.\n\nexception \n\njava.io.IOException: Server returned HTTP response code: 500 for URL: http://...\n(a servlet)\nat sun.net.www.protocol.http.HttpURLConnection.getInputStream\n(HttpURLConnection.java:691)\nat exam.AdminObj.getUrlResp(AdminObj.java:59)\nat org.apache.jsp.stat_0005fquery$jsp._jspService(stat_0005fquery$jsp.java:262)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\nat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:202)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:382)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:474)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\nat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\nat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\nat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\nat org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2343)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\nat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:170)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\nat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:468)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\nat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\nat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\nat org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:472)\nat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\nat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1012)\nat org.apache.catalina.connector.http.HttpProcessor.run(HttpProcessor.java:1107)\nat java.lang.Thread.run(Thread.java:536)\n\n\n\n--------------------------------------------------------------------------------", "count": 0, "id": 19946, "time": "2002-07-22T03:39:11Z", "creator": "abelli@tecomasia.com.cn", "creation_time": "2002-07-22T03:39:11Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 11026, "attachment_id": null, "text": "After restart Tomcat, everything is OK.", "id": 19947, "time": "2002-07-22T03:43:20Z", "creator": "abelli@tecomasia.com.cn", "creation_time": "2002-07-22T03:43:20Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 11026, "attachment_id": null, "text": "You have to point at a specific problem which would cause Tomcat to fail, since\nthe bug is hard to reproduce.\nI would recommend trying 4.1.7 Beta and see if it helps.", "id": 19950, "time": "2002-07-22T07:15:35Z", "creator": "remm@apache.org", "creation_time": "2002-07-22T07:15:35Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 11026, "attachment_id": null, "text": "Code:\n        URL u = new URL(url);\n        URLConnection uc = u.openConnection();\n        uc.setDoOutput(true);\n        OutputStream os = uc.getOutputStream();\n        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(os));\n        bw.write(req);\n        bw.flush();\n        bw.close();\n        os.close();\n        InputStream is = uc.getInputStream(); //error occurs <font \ncolor=red>here</font>\n        Document d = null;\n\nError message:\nApache Tomcat/4.0.4 - HTTP Status 500 - Internal Server Error\n\n--------------------------------------------------------------------------------\n\ntype Exception report\n\nmessage Internal Server Error\n\ndescription The server encountered an internal error (Internal Server Error) \nthat prevented it from fulfilling this request.\n\nexception \n\njava.io.IOException: Server returned HTTP response code: 500 for URL: \nhttp://abel:8080/exam/admin\n\tat sun.net.www.protocol.http.HttpURLConnection.getInputStream\n(HttpURLConnection.java:691)\n\tat exam.AdminObj.getUrlResp(AdminObj.java:60)\n\tat org.apache.jsp.exam_0005ftype_0005frese$jsp._jspService\n(exam_0005ftype_0005frese$jsp.java:110)\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:107)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:201)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:381)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:473)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:853)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:190)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.CertificatesValve.invoke\n(CertificatesValve.java:246)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2347)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:180)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.ErrorDispatcherValve.invoke\n(ErrorDispatcherValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.ErrorReportValve.invoke\n(ErrorReportValve.java:170)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:468)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:174)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1027)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1125)\n\tat java.lang.Thread.run(Thread.java:536)\n\n\n\n--------------------------------------------------------------------------------\n", "id": 19955, "time": "2002-07-22T07:23:59Z", "creator": "abelli@tecomasia.com.cn", "creation_time": "2002-07-22T07:23:59Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 11026, "is_private": false, "text": "I found a solution, but I do not know it is bug of my program or of tomcat. in \none JSP page, I have an object of URL. I get an object of InputStream through \nURLConnection.getInputStream(). I do not close the object of InputStream at the \nend of JSP file. after a short long time of running, then tomcat deny offer \nservice.\n\nIf I close the object of InputStream at the end of JSP file, then tomcat is OK.\n\nIt seems that the object of InputStream gotten through \nURLConnection.getInputStream() cannot be close automatically. Or it is the \nresponsibilities of developer to close all objects of InputStream/OutputStream?\n", "id": 20649, "time": "2002-08-05T06:32:25Z", "creator": "abelli@tecomasia.com.cn", "creation_time": "2002-08-05T06:32:25Z", "attachment_id": null}]