[{"count": 0, "tags": [], "bug_id": 30114, "attachment_id": null, "id": 60624, "time": "2004-07-15T08:10:09Z", "creator": "Michael.Stringer@intervoice.com", "creation_time": "2004-07-15T08:10:09Z", "is_private": false, "text": "Using an AntCall task with a param to call a target which subsquently calls\nanother buildfile using <ant inheritAll=\"false\" ...> causes all properties to be\ninherited.\n\nUsing <ant inheritAll=\"false\" ..> works correctly if the target it is in is\ncalled directly, through a depends or an AntCall that doesn't pass any params.\n\nThis behaviour has been observed in ant version 1.5.3 and 1.6.1 under both\nSolaris and Windows."}, {"count": 1, "tags": [], "bug_id": 30114, "attachment_id": 12116, "text": "Created attachment 12116\nFile 1 of 2 that replicates this bug", "id": 60625, "time": "2004-07-15T08:11:58Z", "creator": "Michael.Stringer@intervoice.com", "creation_time": "2004-07-15T08:11:58Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 30114, "attachment_id": 12117, "id": 60626, "time": "2004-07-15T08:12:16Z", "creator": "Michael.Stringer@intervoice.com", "creation_time": "2004-07-15T08:12:16Z", "is_private": false, "text": "Created attachment 12117\nFile 2 of 2 that replicates this bug"}, {"count": 3, "tags": [], "bug_id": 30114, "attachment_id": null, "is_private": false, "id": 60627, "time": "2004-07-15T08:49:42Z", "creator": "peterreilly@apache.org", "creation_time": "2004-07-15T08:49:42Z", "text": "This is invalid. The examples just use one property \"deploy_dir\". This\ngets passed as a parameter in the <antcall> call. When a parameter is\nused in an <antcall> task, it behaves like a user property and gets passed\nto subsequent <ant> and <antcall> calls.  This is (sort of) explained in the\n<ant> and <antcall> manual pages. Modifing the examples as follows:\nbuild.xml:\n<project default=\"run\" basedir=\".\">\n  <property name=\"deploy_dir\" value=\"build/release\" />\n  <property name=\"x\" value=\"outer\"/>\n\n  <target name=\"run\" depends=\"test1,test2,test3\" />\n\n  <target name=\"test1\">\n    <ant inheritAll=\"false\" antfile=\"deploy.xml\" />\n  </target>\n\n  <target name=\"test2\">\n    <antcall target=\"called\" />\n  </target>\n\n  <target name=\"test3\">\n    <antcall target=\"called\">\n      <param name=\"deploy_dir\"      value=\"build/view\"/>\n    </antcall>\n  </target>\n\n  <target name=\"called\">\n    <ant inheritAll=\"false\" antfile=\"deploy.xml\" />\n  </target>\n</project>\n\ndeploy.xml:\n<project default=\"test\" basedir=\".\">\n  <property name=\"deploy_dir\"      value=\"build/bob\"/>\n  <property name=\"x\" value=\"inner\"/>\n  <target name=\"test\">\n    <echo>deploy_dir = ${deploy_dir}</echo>\n    <echo>x = ${x}</echo>\n  </target>\n</project>\n\nIn all cases, the x is set to \"inner\".\n"}, {"count": 4, "tags": [], "bug_id": 30114, "attachment_id": null, "is_private": false, "id": 60632, "time": "2004-07-15T09:15:24Z", "creator": "Michael.Stringer@intervoice.com", "creation_time": "2004-07-15T09:15:24Z", "text": "I see what you are saying and I admit that I overlooked the one paragraph saying\nthat any params passed will override all inheritAll=\"false\".\n\nI feel that there should be a mechanism to stop this behaviour as sometimes it\nis necessary to pass a param to a task and not have it override the same\nproperty in later projects. By specifying one param in a high up task can lead\nto dozens of later tasks inheriting a parameter that was only intended for one task.\n\nAt the very least the manual should be clarified and state explicitly that param\ncauses the property to become a user property."}, {"count": 5, "tags": [], "bug_id": 30114, "attachment_id": null, "id": 63371, "time": "2004-09-10T17:09:05Z", "creator": "peterreilly@apache.org", "creation_time": "2004-09-10T17:09:05Z", "is_private": false, "text": "The manual in cvs now says:\nThese properties become equivalent to properties you define on the command line.\nThese are special properties and they will always get passed down, even through\nadditional <*ant*> tasks with inheritall set to false (see above).\n\nThis will be in the next ant release. "}]