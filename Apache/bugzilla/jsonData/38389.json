[{"count": 0, "tags": [], "creator": "paul@mediamens.nl", "text": "I'm actually using Tomcat 5.5.15, but I could't select it in the list. But I've \nalso got this problem with 5.5.12.\n\nI've got the following awfully simple JSP:\n---------------------------------------------\n<%@ page import=\"java.util.Arrays,java.util.Comparator\" %>\n<%\n  MyClass[] list = new MyClass[2];\n  list[0] = new MyClass();\n  list[1] = new MyClass();\n  Arrays.sort(list,new Comparator<MyClass>()\n            {\n              public int compare(MyClass mo1, MyClass mo2)\n              {\n                return -1; // whatever\n              }\n            });\n%>\n<%!\n  public class MyClass\n  {\n    String text = \"blah\";\n    public String getText() { return text; }\n  }\n%>\n---------------------------------------------\nIt compiles fine, but when executed it crashes like this:\n\njava.lang.AbstractMethodError: org.apache.jsp.error_jsp$1.compare\n(Ljava/lang/Object;Ljava/lang/Object;)I\n\tat java.util.Arrays.mergeSort(Arrays.java:1284)\n\tat java.util.Arrays.sort(Arrays.java:1223)\n\tat org.apache.jsp.error_jsp._jspService(org.apache.jsp.error_jsp:64)\n        ...more...\n\nAt first I thought it's a JDK error, but when I replace Tomcat's jasper-\ncompiler-jdt.jar by an Ant-compiler jar, the code runs fine !!\n\nThe above code also runs fine when I replace \"MyClass\" by \"Object\" in the \nComparator definition, but this is ofcourse not what Java 5 is about :-)\n\nI've already updated to Suns JDK 1.5.0_06, but that didn't change anything.\n\nAny clues? Tanx!", "id": 85007, "time": "2006-01-25T21:28:03Z", "bug_id": 38389, "creation_time": "2006-01-25T21:28:03Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 38389, "attachment_id": null, "id": 85008, "time": "2006-01-25T21:36:26Z", "creator": "pr@objektpark.de", "creation_time": "2006-01-25T21:36:26Z", "is_private": false, "text": "Have you set the correct jspServlet compiler init parameter for jdt java 5 support?\n\nconf/web.xml\n\n    <servlet>\n        <servlet-name>jsp</servlet-name>\n        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>\n        <init-param>\n            <param-name>fork</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <param-name>xpoweredBy</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <param-name>compilerSourceVM</param-name>\n            <param-value>1.5</param-value>\n        </init-param>\n        <init-param>\n            <param-name>compilerTargetVM</param-name>\n            <param-value>1.5</param-value>\n        </init-param>\n        <load-on-startup>3</load-on-startup>\n    </servlet>"}, {"count": 2, "tags": [], "bug_id": 38389, "attachment_id": null, "text": "Yep, my other JSPs are filled with Java 5 specific stuff and compile/run fine. \nBut, just to be sure I checked the web.xml anyway: it's indeed correctly set to \nsourceVM and targetVM 1.5", "id": 85009, "time": "2006-01-25T21:41:46Z", "creator": "paul@mediamens.nl", "creation_time": "2006-01-25T21:41:46Z", "is_private": false}, {"count": 3, "attachment_id": null, "bug_id": 38389, "text": "Strange, but it seams like a real JDT 3.1 bug.\nPlease report this to the JDT eclipse community.\n\nThanx\nPeter\n", "id": 85011, "time": "2006-01-25T22:03:48Z", "creator": "pr@objektpark.de", "creation_time": "2006-01-25T22:03:48Z", "tags": [], "is_private": false}, {"count": 4, "text": "See https://bugs.eclipse.org/bugs/show_bug.cgi?id=125254 for explanation about\nthis problem.", "bug_id": 38389, "attachment_id": null, "id": 85032, "time": "2006-01-26T05:31:25Z", "creator": "olivier_thomann@ca.ibm.com", "creation_time": "2006-01-26T05:31:25Z", "tags": [], "is_private": false}, {"count": 5, "text": "Great, I have commit the patch from Olivier.\n\nMany thanks for your help to fix it\nPeter", "bug_id": 38389, "attachment_id": null, "id": 85037, "time": "2006-01-26T08:00:29Z", "creator": "pr@objektpark.de", "creation_time": "2006-01-26T08:00:29Z", "tags": [], "is_private": false}, {"count": 6, "text": "No problem. We might consider adding some validation in the Compiler constructor\nto prevent such cases.\nIf you would get an exception or an error immediately before the compilation,\nthis would never happen. We were in a case where the compilation looks good, but\nbecause the bridge method was not generated at runtime an AbstractMethodError is\nthrown. This is not good.\nSee https://bugs.eclipse.org/bugs/show_bug.cgi?id=125340 for this enhancement\nrequest against JDT/Core component.", "bug_id": 38389, "attachment_id": null, "id": 85059, "time": "2006-01-26T16:38:07Z", "creator": "olivier_thomann@ca.ibm.com", "creation_time": "2006-01-26T16:38:07Z", "tags": [], "is_private": false}, {"count": 7, "tags": [], "bug_id": 38389, "text": "(Just a resolution conclusion comment.)\n\n\nRESOLUTION:\n\nThis problem is fixed in Tomcat 5.5.16.\n\nTomcat 5.5.16 changelog:\n( http://tomcat.apache.org/tomcat-5.5-doc/changelog.html )\n\n\"Jasper: 38389: Set correct JDT Compiler option to java 1.5 compliance. Patch\nfrom Olivier Thomann and Paul Hamer (pero)\"\nhttp://issues.apache.org/bugzilla/show_bug.cgi?id=38389", "id": 90299, "time": "2006-06-16T11:38:21Z", "creator": "efilippov@ngs.ru", "creation_time": "2006-06-16T11:38:21Z", "is_private": false, "attachment_id": null}]