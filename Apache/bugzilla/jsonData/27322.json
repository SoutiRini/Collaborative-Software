[{"count": 0, "tags": [], "text": "(*) I have the Berkeley DB 4.2 libraries installed in a non-standard location \n(/opt/ISWberkeleydb).  \n\n(*) I use the following to configure Apache 2.0.48:\n\nLDFLAGS=\"-R/opt/ISWberkeleydb/lib -R/opt/GNUgdb/lib -R/opt/ISWopenssl/lib\" \\\nPATH=/usr/local/bin:$PATH \\\n../httpd-2.0.48/configure \\\n    --prefix=/opt/ISWapache \\\n    --with-gdbm=/opt/GNUgdbm \\\n    --enable-modules=all \\\n    --with-mpm=worker \\\n    --enable-mods-shared=all \\\n    --enable-ssl \\\n    --with-ssl=/opt/ISWopenssl \\\n    --enable-suexec \\\n    --with-suexec-bin=/sbin/suexec \\\n    --with-suexec-caller=apache \\\n    --with-suexec-userbin=www \\\n    --with-suexec-uidmin=10001 \\\n    --with-suexec-gidmin=10001 \\\n    --with-suexec-safepath=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:\n/usr/local/bin \\\n    --with-dbm=db4 \\\n    --with-berkeley-db=/opt/ISWberkeleydb\n\nThe configure script will not properly detect the Berkeley DB 4.2 libraries.\n\nIf I add /opt/ISWberkeleydb/lib to the system search paths (using the crle \ncommand), the above configure command will work (so I have a workaround).  \n\n(*) When I look into the config.log file in srclib/apr-util/config.log, I can \nsee that the -R/opt/ISWberkeleydb/lib that I provided in the LDFLAGS environment \nvariable is not being used:\n\nconfigure:13128: result: no\nconfigure:12933: checking db.h usability\nconfigure:12942: gcc -c  -g -O2 -pthreads -I/opt/GNUgdbm/include -I/opt/ISWberke\nleydb/include conftest.c >&5\nconfigure:12945: $? = 0\nconfigure:12948: test -s conftest.o\nconfigure:12951: $? = 0\nconfigure:12960: result: yes\nconfigure:12964: checking db.h presence\nconfigure:12971: gcc -E -I/opt/GNUgdbm/include -I/opt/ISWberkeleydb/include conf\ntest.c\nconfigure:12977: $? = 0\nconfigure:12995: result: yes\nconfigure:13013: checking for db.h\nconfigure:13020: result: yes\nconfigure:13036: checking for db\nconfigure:13099: gcc -o conftest  -g -O2 -pthreads -I/opt/GNUgdbm/include -I/opt\n/ISWberkeleydb/include  -L/opt/ISWberkeleydb/lib conftest.c -L/opt/GNUgdbm/lib  \n-ldb >&5\nconfigure:13102: $? = 0\nconfigure:13104: ./conftest\nld.so.1: ./conftest: fatal: libdb-4.2.so: open failed: No such file or directory\n/dsk/data0/build/httpd-2.0.48/srclib/apr-util/configure: line 1: 26875 Killed   \n               ./conftest$ac_exeext\nconfigure:13107: $? = 137\nconfigure: program exited with status 137\nconfigure: failed program was:\n#line 13056 \"configure\"\n#include \"confdefs.h\"\n\n#include <stdio.h>\n#include <db.h>\nmain ()\n{\n  int major, minor, patch;\n\n  db_version(&major, &minor, &patch);\n\n  /* Sanity check: ensure that db.h constants actually match the db library */\n  if (major != DB_VERSION_MAJOR\n      || minor != DB_VERSION_MINOR\n      || patch != DB_VERSION_PATCH)\n    exit (1);\n\n  /* Run-time check:  ensure the library claims to be the correct version. */\n\n  if (4 != -1) {\n    if (major < 4)\n      exit (1);\n    if (major > 4)\n      exit (0);\n  }\n\n  if (0 != -1) {\n    if (minor < 0)\n      exit (1);\n    if (minor > 0)\n      exit (0);\n  }\n\n  if (-1 == -1\n      || patch >= -1)\n    exit (0);\n  else\n    exit (1);\n}\n\nconfigure:13128: result: no\nconfigure:13382: error: Berkeley db4 not found", "attachment_id": null, "id": 53213, "creator": "nelson@vericel.com", "time": "2004-02-29T07:54:58Z", "bug_id": 27322, "creation_time": "2004-02-29T07:54:58Z", "is_private": false}, {"count": 1, "tags": [], "creator": "chip@force-elite.com", "attachment_id": null, "text": "As of 2.0.49, Try:\n --with-berkeley-db=HEADER:LIB\nso,\n--with-berkeley-db=/opt/ISWberkeleydb/include:/opt/ISWberkeleydb/lib", "id": 59081, "time": "2004-06-11T02:08:10Z", "bug_id": 27322, "creation_time": "2004-06-11T02:08:10Z", "is_private": false}, {"count": 2, "tags": [], "text": "No Feedback. Assuming this was fixed with 2.0.49.", "attachment_id": null, "id": 59598, "creator": "chip@force-elite.com", "time": "2004-06-19T16:47:25Z", "bug_id": 27322, "creation_time": "2004-06-19T16:47:25Z", "is_private": false}]