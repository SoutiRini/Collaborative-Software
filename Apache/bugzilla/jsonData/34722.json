[{"count": 0, "tags": [], "bug_id": 34722, "attachment_id": null, "is_private": false, "id": 74349, "time": "2005-05-03T12:14:29Z", "creator": "rmaxwell@curamsoftware.com", "creation_time": "2005-05-03T12:14:29Z", "text": "I have just upgraded to ant 1.6.3 while using anthill to build nightly \nversions of our software. We use clover reporting to help us test and get a \ncode coverage of the tests, but over the past few days i have been getting \nbuild failures due to the new version of ant.\nthe problem stems from a java.lang.nullpointerexception error.\n\na full stack trace is below\n\nBUILD FAILED\nC:\\Tools\\AntHill\\AllSDEJ\\CuramSDEJ\\build_scripts\\build.xml:125: The following \nerror occurred while executing t\nhis line:\nC:\\Tools\\AntHill\\AllSDEJ\\CuramSDEJ\\build_scripts\\build.xml:1140: \njava.lang.NullPointerException\n        at org.apache.tools.ant.ProjectHelper.addLocationToBuildException\n(ProjectHelper.java:539)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:384)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:107)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets\n(DefaultExecutor.java:40)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.Main.runBuild(Main.java:668)\n        at org.apache.tools.ant.Main.startAnt(Main.java:187)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)\nCaused by: C:\\Tools\\AntHill\\AllSDEJ\\CuramSDEJ\\build_scripts\\build.xml:1140: \njava.lang.NullPointerException\n        at org.apache.tools.ant.Task.perform(Task.java:373)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets\n(SingleCheckExecutor.java:37)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:382)\n        ... 13 more\nCaused by: java.lang.NullPointerException\n        at org.apache.tools.ant.DirectoryScanner.isMorePowerfulThanExcludes\n(DirectoryScanner.java:1208)\n        at org.apache.tools.ant.DirectoryScanner.couldHoldIncluded\n(DirectoryScanner.java:1167)\n        at org.apache.tools.ant.DirectoryScanner.slowScan\n(DirectoryScanner.java:972)\n        at org.apache.tools.ant.DirectoryScanner.getExcludedFiles\n(DirectoryScanner.java:1335)\n        at org.apache.tools.ant.taskdefs.CloverCompilerAdapter.setJavac(1.3.5-\nbuild-598:285)\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:928)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:757)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        ... 19 more\n--- Nested Exception ---\nC:\\Tools\\AntHill\\AllSDEJ\\CuramSDEJ\\build_scripts\\build.xml:1140: \njava.lang.NullPointerException\n        at org.apache.tools.ant.Task.perform(Task.java:373)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets\n(SingleCheckExecutor.java:37)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:382)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:107)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets\n(DefaultExecutor.java:40)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.Main.runBuild(Main.java:668)\n        at org.apache.tools.ant.Main.startAnt(Main.java:187)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)\nCaused by: java.lang.NullPointerException\n        at org.apache.tools.ant.DirectoryScanner.isMorePowerfulThanExcludes\n(DirectoryScanner.java:1208)\n        at org.apache.tools.ant.DirectoryScanner.couldHoldIncluded\n(DirectoryScanner.java:1167)\n        at org.apache.tools.ant.DirectoryScanner.slowScan\n(DirectoryScanner.java:972)\n        at org.apache.tools.ant.DirectoryScanner.getExcludedFiles\n(DirectoryScanner.java:1335)\n        at org.apache.tools.ant.taskdefs.CloverCompilerAdapter.setJavac(1.3.5-\nbuild-598:285)\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:928)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:757)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        ... 19 more\n--- Nested Exception ---\njava.lang.NullPointerException\n        at org.apache.tools.ant.DirectoryScanner.isMorePowerfulThanExcludes\n(DirectoryScanner.java:1208)\n        at org.apache.tools.ant.DirectoryScanner.couldHoldIncluded\n(DirectoryScanner.java:1167)\n        at org.apache.tools.ant.DirectoryScanner.slowScan\n(DirectoryScanner.java:972)\n        at org.apache.tools.ant.DirectoryScanner.getExcludedFiles\n(DirectoryScanner.java:1335)\n        at org.apache.tools.ant.taskdefs.CloverCompilerAdapter.setJavac(1.3.5-\nbuild-598:285)\n        at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:928)\n        at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:757)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets\n(SingleCheckExecutor.java:37)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:382)\n        at org.apache.tools.ant.taskdefs.CallTarget.execute\n(CallTarget.java:107)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n        at org.apache.tools.ant.Task.perform(Task.java:364)\n        at org.apache.tools.ant.Target.execute(Target.java:341)\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets\n(DefaultExecutor.java:40)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.Main.runBuild(Main.java:668)\n        at org.apache.tools.ant.Main.startAnt(Main.java:187)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)\n\nTotal time: 31 seconds"}, {"count": 1, "tags": [], "bug_id": 34722, "attachment_id": 14916, "id": 74351, "time": "2005-05-03T12:30:20Z", "creator": "rmaxwell@curamsoftware.com", "creation_time": "2005-05-03T12:30:20Z", "is_private": false, "text": "Created attachment 14916\njust the stack trace of the failure"}, {"count": 2, "tags": [], "text": "ah, I believe I see how DirectoryScanner.slowScan() is broken in 1.6.3 .  Looks\nlike a 1.6.4 release will be necessary. :(", "attachment_id": null, "bug_id": 34722, "id": 74363, "time": "2005-05-03T15:49:25Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-03T15:49:25Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 34722, "attachment_id": null, "id": 74382, "time": "2005-05-03T16:29:14Z", "creator": "rmaxwell@curamsoftware.com", "creation_time": "2005-05-03T16:29:14Z", "is_private": false, "text": "a bug within ant version 1.6.3 that would be fixed in 1.6.4"}, {"count": 4, "tags": [], "text": "not sure I understood that last comment.  I'm about to attach a patched version\nof ant.jar, if you could verify that it fixes the problem.", "attachment_id": null, "bug_id": 34722, "id": 74385, "time": "2005-05-03T16:34:15Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-03T16:34:15Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 34722, "attachment_id": null, "is_private": false, "id": 74386, "time": "2005-05-03T16:48:28Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-03T16:48:28Z", "text": "I think the jar is too big for an attachment.  I will attach the modified file \nas well as a diff.  Let me know if you need me to e-mail the jar to you \nprivately."}, {"count": 6, "tags": [], "bug_id": 34722, "attachment_id": 14919, "is_private": false, "id": 74387, "time": "2005-05-03T16:49:27Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-03T16:49:27Z", "text": "Created attachment 14919\nmodified DirectoryScanner.java"}, {"count": 7, "tags": [], "text": "Created attachment 14920\ndiff", "attachment_id": 14920, "bug_id": 34722, "id": 74388, "time": "2005-05-03T16:50:12Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-03T16:50:12Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 34722, "attachment_id": null, "is_private": false, "id": 74389, "time": "2005-05-03T17:18:22Z", "creator": "bodewig@apache.org", "creation_time": "2005-05-03T17:18:22Z", "text": "Matt, you can always publish the jar via http://people.apache.org/~mbenson/\n\n+1 to your patch"}, {"count": 9, "attachment_id": null, "bug_id": 34722, "is_private": false, "id": 74390, "time": "2005-05-03T17:25:15Z", "creator": "rmaxwell@curamsoftware.com", "creation_time": "2005-05-03T17:25:15Z", "tags": [], "text": "I sent an e-mail to you with my address\nCheers again"}, {"count": 10, "tags": [], "text": "Got the jar and added it into the lib directory, then went and tried it out. \nWorked perfectly for all the normal ant builds, but when it came back to using \nclover with it i got the following error below, i'm not sure if this is an ant \nproblem, but it works fine with ant 1.6.2 .\n\nBUILD FAILED\nC:\\work\\testWAS\\CuramSDEJ\\build_scripts\\clover.xml:29: Could not create task \nor type of type: clover-setup.\n\nAnt could not find the task or a class this task relies upon.\n\nThis is common and has a number of causes; the usual\nsolutions are to read the manual pages then download and\ninstall needed JAR files, or fix the build file:\n - You have misspelt 'clover-setup'.\n   Fix: check your spelling.\n - The task needs an external JAR file to execute\n     and this is not found at the right place in the classpath.\n   Fix: check the documentation for dependencies.\n   Fix: declare the task.\n - The task is an Ant optional task and the JAR file and/or libraries\n     implementing the functionality were not found at the time you\n     yourself built your installation of Ant from the Ant sources.\n   Fix: Look in the ANT_HOME/lib for the 'ant-' JAR corresponding to the\n     task and make sure it contains more than merely a META-INF/MANIFEST.MF.\n     If all it contains is the manifest, then rebuild Ant with the needed\n     libraries present in ${ant.home}/lib/optional/ , or alternatively,\n     download a pre-built release version from apache.org\n - The build file was written for a later version of Ant\n   Fix: upgrade to at least the latest release version of Ant\n - The task is not an Ant core or optional task\n     and needs to be declared using <taskdef>.\n - You are attempting to use a task defined using\n    <presetdef> or <macrodef> but have spelt wrong or not\n   defined it at the point of use\n\nRemember that for JAR files to be visible to Ant tasks implemented\nin ANT_HOME/lib, the files must be in the same directory or on the\nclasspath\n\nPlease neither file bug reports on this problem, nor email the\nAnt mailing lists, until all of these causes have been explored,\nas this is not an Ant bug.\n        at org.apache.tools.ant.UnknownElement.getNotFoundException\n(UnknownElement.java:493)\n        at org.apache.tools.ant.UnknownElement.makeObject(UnknownElement.java\n(Compiled Code))\n        at org.apache.tools.ant.UnknownElement.maybeConfigure\n(UnknownElement.java(Compiled Code))\n        at org.apache.tools.ant.Task.perform(Task.java(Compiled Code))\n        at org.apache.tools.ant.Target.execute(Target.java(Compiled Code))\n        at org.apache.tools.ant.Target.performTasks(Target.java:369)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets\n(DefaultExecutor.java:40)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n        at org.apache.tools.ant.Main.runBuild(Main.java:668)\n        at org.apache.tools.ant.Main.startAnt(Main.java:187)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)\n\nTotal time: 1 minute 2 seconds", "attachment_id": null, "bug_id": 34722, "id": 74420, "time": "2005-05-04T10:18:08Z", "creator": "rmaxwell@curamsoftware.com", "creation_time": "2005-05-04T10:18:08Z", "is_private": false}, {"count": 11, "tags": [], "text": "Sorry just haven't got the clover.jar file in the ant lib directory.\nI can probably suggest that this bug is now fixed and that it can be therefore \nclosed?", "attachment_id": null, "bug_id": 34722, "id": 74425, "time": "2005-05-04T11:59:32Z", "creator": "rmaxwell@curamsoftware.com", "creation_time": "2005-05-04T11:59:32Z", "is_private": false}, {"count": 12, "tags": [], "text": "Thanks for reporting the problem, and for testing the patch! Marking target as\n1.7 for now but this will be in a 1.6.4 release in the near future.", "is_private": false, "id": 74437, "creator": "mbenson@apache.org", "time": "2005-05-04T15:53:43Z", "bug_id": 34722, "creation_time": "2005-05-04T15:53:43Z", "attachment_id": null}]