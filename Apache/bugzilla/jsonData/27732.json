[{"count": 0, "text": "On using the task \"deploy\" with Tomcat 4.x/5.x, ant V1.6x (including the beta1\nand the final 1.6.1 won't report the duplicate usage of the same target. I had\nthe same target used twice, for explanation, here's a code snippet of my build.xml:\n---snip---\n\t<!-- Deployment -->\n\t<target name=\"deploy\" depends=\"deploy:foo,deploy:bar\"/>\n\t<target name=\"deploy.do\">\n\t\t<deploy url=\"${tomcat_url}\"\n        \t        username=\"${tomcat_user}\"\n                        password=\"${tomcat_pass}\" \n\t\t\tpath=\"${subproject.app_path}\"                                                 \n                      war=\"${deploy}/myproj_${subproject.name}_${version}.war\"/>\n\t</target>\n\t<!--target name=\"deploy\" depends=\"deploy:foo,deploy:bar\"/-->\n\t<target name=\"deploy:foo\" depends=\"war:foo\">\n\t\t<antcall target=\"deploy.do\">\n\t\t\t<param name=\"subproject.name\" value=\"foo\"/>\n\t\t\t<param name=\"subproject.app_path\" value=\"/Foo\"/>\n\t\t</antcall>\n\t</target>\n\t<target name=\"deploy:bar\" depends=\"war:bar\">\n\t\t<antcall target=\"deploy.do\">\n\t\t\t<param name=\"subproject.name\" value=\"bar\"/>\n\t\t\t<param name=\"subproject.app_path\" value=\"/Bar\"/>\n\t\t</antcall>\n\t</target>\n---snip---\n\nAs you cann see above, the line with the two depends terms is twice in the file.\nThe elder ant version 1.5.4 marked the build.xml as buggy and reported the\nmistake of using the task twice...Shouldn't this be reported the new ant\nversions too?", "bug_id": 27732, "is_private": false, "id": 54135, "time": "2004-03-17T10:20:16Z", "creator": "T.Schuler@eurodata.de", "creation_time": "2004-03-17T10:20:16Z", "tags": [], "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 27732, "is_private": false, "text": "We are aware of that, thanks anyway.\nhttp://marc.theaimsgroup.com/?l=ant-dev&m=107705023700332&w=2\n\nWe decided that that behaviour should be used:\n  1. multiple targets defined in ONE buildfile is an error, while definitions\n  via <import> is correct\n     --> modify the test (more tests)\n     --> modify the sources\n\nSuggestion and voting started on http://marc.theaimsgroup.com/?l=ant-\ndev&m=107726812221546&w=2.\n\nThe changelog for Ant\u00b4s build.xml sais that that should be resolved on \n26.02.2004. A test with a build from 27.Feb shows that it\u00b4s fixed.", "id": 54140, "time": "2004-03-17T12:36:16Z", "creator": "jan@materne.de", "creation_time": "2004-03-17T12:36:16Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 27732, "is_private": false, "text": "Actually, I'm not sure if this report was about <import>, especially as it \nrefers to behavior differences between 1.5.4 and 1.6.x... On closer inspection, \nthe report appears to be about duplicate targets defined in the same buildfile; \nhowever in the example provided there is no such duplication as the second \ndeclaration of target \"deploy\" is commented out.  Not a big deal, although a \ncolorizing XML editor might have avoided the issue entirely.  Also, especially \nfrom 1.6.0 forward, the use of the colon within a target name is, I believe, \ndiscouraged, due to its special meaning with regard to buildfile inheritance \nusing the <import> task.  If all are agreed we could change the resolution to \nINVALID.", "id": 54147, "time": "2004-03-17T15:17:26Z", "creator": "mbenson@apache.org", "creation_time": "2004-03-17T15:17:26Z", "attachment_id": null}, {"count": 3, "text": "I did a fresh build yesterday from cvs head sources. Duplicate target names ARE\nstill allowed within the same build file. What happens is that the second\noccurance of the same name is renamed to projectname.targetname, e.g. suppose in\nproject \"foo\" there are targets \"bar0\" and \"bar0\". Then the second occurance of\n\"bar0\" will be renamed \"foo.bar0\" and can be executed from the commandline with\n'ant foo.bar0'. Jan's comments make it sound like this is not the expected\nbehaviour? ", "bug_id": 27732, "is_private": false, "id": 54164, "time": "2004-03-17T16:25:11Z", "creator": "danson@germane-software.com", "creation_time": "2004-03-17T16:25:11Z", "tags": [], "attachment_id": null}, {"count": 4, "text": "Dale:  can you provide a sample build.xml that reproduces this behavior?\n\nThanks,\nMatt", "bug_id": 27732, "is_private": false, "id": 54167, "time": "2004-03-17T16:39:56Z", "creator": "mbenson@apache.org", "creation_time": "2004-03-17T16:39:56Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 27732, "text": "I was mistaken about building from cvs head, I was actually using the 1.6.1\nsource distribution. I've attached a sample build file. Here's the output using\n-projecthelp:\n\n$ ant -f dup_targets.xml -projecthelp\nBuildfile: dup_targets.xml\n\nMain targets:\n\n target4               first target4\n test_project.target4  second target4\nDefault target: target4\n\nNow try to add a third target with the same name. The second one is replaced\nwith the third one.", "id": 54178, "attachment_id": null, "creator": "danson@germane-software.com", "creation_time": "2004-03-17T19:15:12Z", "time": "2004-03-17T19:15:12Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 27732, "text": "Created attachment 10834\nDuplicate target example build file.", "id": 54179, "time": "2004-03-17T19:16:34Z", "creator": "danson@germane-software.com", "creation_time": "2004-03-17T19:16:34Z", "is_private": false, "attachment_id": 10834}, {"count": 7, "tags": [], "bug_id": 27732, "attachment_id": null, "text": "Hmmm.. CVS HEAD doesn't give me any input at all from -p with duplicate targets.\n\nOh, also, my earlier comment about colons in target names was wrong.  The \n<import> notation uses a dot, not a colon.\n", "id": 54190, "time": "2004-03-17T21:53:45Z", "creator": "mbenson@apache.org", "creation_time": "2004-03-17T21:53:45Z", "is_private": false}, {"count": 8, "text": "Testing a fix, BTW.", "bug_id": 27732, "is_private": false, "id": 54191, "time": "2004-03-17T21:54:24Z", "creator": "mbenson@apache.org", "creation_time": "2004-03-17T21:54:24Z", "tags": [], "attachment_id": null}, {"count": 9, "tags": [], "creator": "mbenson@apache.org", "is_private": false, "text": "Fixed in CVS.", "id": 54192, "time": "2004-03-17T22:11:52Z", "bug_id": 27732, "creation_time": "2004-03-17T22:11:52Z", "attachment_id": null}]