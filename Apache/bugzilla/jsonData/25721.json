[{"count": 0, "tags": [], "bug_id": 25721, "attachment_id": null, "id": 49590, "time": "2003-12-23T10:20:03Z", "creator": "david.harrigan@hpi.co.uk", "creation_time": "2003-12-23T10:20:03Z", "is_private": false, "text": "Hi,\n\nIn Ant 1.6.0 (also in 1.5.4), the exec task process, with arg path is\nincorrectly setting the path if &quot; is used. E.g.,\n\n<exec dir=\"${dist.dir}\"\nexecutable=\"${websphere.dir}/bin/ejbdeploy.${script.filename.extension}\"\noutput=\"${log.dir}/generatestubs.log\">\n            <arg path=\"${dist.dir}/ear.jar\"/>\n            <arg path=\"${build.tmp.dir}\"/>\n            <arg path=\"${dist.dir}/ear_deployable.jar\"/>\n            <arg value=\"-cp\"/>\n            <arg\npath=\"&quot;${lib.dir}/gnu/regexp/${regexp.version}/regexp.jar:${websphere.dir}/lib/xerces.jar:${dist.dir}/hpiutil.jar&quot;\"/>\n        </exec>\n\nUsing\n\nant -verbose generatestub (name of the target)\n\nGenerating stubs and skeletons, please wait...this may take several minutes...\n     [exec] Current OS is Linux\n     [exec] Output redirected to\n/home/david/public_html/hpc/build/logs/generatestubs.log\n     [exec] Executing '/opt/WebSphere/AppServer/bin/ejbdeploy.sh' with arguments:\n     [exec] '/home/david/public_html/ear/build/dist/ear.jar'\n     [exec] '/home/david/public_html/ear/build/tmp'\n     [exec] '/home/david/public_html/ear/build/dist/ear_deployable.jar'\n     [exec] '-cp'\n     [exec]\n'/home/david/public_html/newbuild/\"/home/david/public_html/lib/gnu/regexp/1.1.4/regexp.jar:/opt/WebSphere/AppServer/lib/xerces.jar:/home/david/public_html/ear/build/dist/earutil.jar\"'\n\nNotice the '/home/david/public_html/newbuild/\" at the start of the arg path.\nThis causes the script to not find the -cp jars. but funnily enough, it works\nunder Windows (NT/2000/XP).\n\nIf I remove the &quot; from the arg path, I get...\n\n[echo] Generating stubs and skeletons, please wait...this may take several\nminutes...\n     [exec] Current OS is Linux\n     [exec] Output redirected to\n/home/david/public_html/hpc/build/logs/generatestubs.log\n     [exec] Executing '/opt/WebSphere/AppServer/bin/ejbdeploy.sh' with arguments:\n     [exec] '/home/david/public_html/ear/build/dist/ear.jar'\n     [exec] '/home/david/public_html/ear/build/tmp'\n     [exec] '/home/david/public_html/ear/build/dist/ear_deployable.jar'\n     [exec] '-cp'\n     [exec]\n'/home/david/public_html/lib/gnu/regexp/1.1.4/regexp.jar:/opt/WebSphere/AppServer/lib/xerces.jar:/home/david/public_html/hpc/build/dist/earutil.jar'\n\nThis correctly makes the script find the jar, but most importantly it now fails\nto work under Windows (NT, XP and 2000).\n\nAny clues?"}, {"count": 1, "tags": [], "bug_id": 25721, "is_private": false, "id": 49593, "creation_time": "2003-12-23T10:52:07Z", "time": "2003-12-23T10:52:07Z", "creator": "peter.reilly@corvil.com", "text": "I do not think that this is a bug.\nYou are passing a filename begining with a \" (which is a valid\ncharacter for a filename) to the\npath argument of \"arg\". This is a relative filename and so\ngets converted to an absolute filename by prepending\n${basedir}/.\n\nThe problem you are having is that for some reason\nthe path needs to be quoted for your script/batch file\nejbdeploy.? on windows. The stange thing is that\nthe script file understands the mal-formed path (with\nthe '${basedir}\\' prepend).\n\n\nOne solution is to not use the path attribute and to\nwrite the path by name:\n            <arg\npath=\"&quot;${lib.dir}/gnu/regexp/${regexp.version}/regexp.jar${path.separator}${websphere.dir}/lib/xerces.jar${path.separator}${dist.dir}/hpiutil.jar&quot;\"/>\n\n\n ", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 25721, "attachment_id": null, "text": "Opps, that should be\n<arg value=\"&quot;....../>\n\nYou could also try using the pathconvert task to\ncreate the pathstring.", "id": 49594, "time": "2003-12-23T10:54:36Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-12-23T10:54:36Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 25721, "attachment_id": null, "text": "Hi,\n\nThanks. Did the arg value with ${path.separator}. Worked a treat.\n\n-=david=-", "id": 49597, "time": "2003-12-23T11:31:08Z", "creator": "david.harrigan@hpi.co.uk", "creation_time": "2003-12-23T11:31:08Z", "is_private": false}]