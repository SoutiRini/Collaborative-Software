[{"count": 0, "tags": [], "bug_id": 44748, "attachment_id": null, "text": "Tomcat version info:\nServer version: Apache Tomcat/5.5.17\nServer built:   Apr 14 2006 02:08:29\nServer number:  5.5.17.0\nOS Name:        Linux\nOS Version:     2.6.9-42.ELsmp\nArchitecture:   i386\nJVM Version:    1.5.0_13-b05\nJVM Vendor:     Sun Microsystems Inc.\n\n===============\n\nGot below exceptions when the tomcat is running on the Linux server, error trace as below:\n\nMar 20, 2008 9:01:29 PM org.apache.coyote.http11.Http11BaseProtocol start\nINFO: Starting Coyote HTTP/1.1 on http-8080\n\n.\n.\n.\n.\n.\n\nMar 20, 2008 9:01:30 PM org.apache.catalina.connector.CoyoteAdapter service\nSEVERE: An exception or error occurred in the container during the request processing\njava.lang.ArrayIndexOutOfBoundsException: 959\n at sun.util.calendar.BaseCalendar.getCalendarDateFromFixedDate(BaseCalendar.java:436)\n at java.util.GregorianCalendar.computeFields(GregorianCalendar.java:2081)\n at java.util.GregorianCalendar.computeFields(GregorianCalendar.java:1996)\n at java.util.Calendar.setTimeInMillis(Calendar.java:1066)\n at java.util.Calendar.setTime(Calendar.java:1032)\n at java.text.SimpleDateFormat.format(SimpleDateFormat.java:785)\n at java.text.SimpleDateFormat.format(SimpleDateFormat.java:778)\n at java.text.DateFormat.format(DateFormat.java:314)\n at org.apache.catalina.valves.AccessLogValve.replace(AccessLogValve.java:874)\n at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:658)\n at org.apache.catalina.authenticator.SingleSignOn.invoke(SingleSignOn.java:392)\n at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107)\n at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148)\n at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:869)\n at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:664)\n at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:527)\n at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80)\n at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)\n at java.lang.Thread.run(Thread.java:595)\n\n\n\nI searched web, said \"it looks like a tomcat bug because the Calendar methods are called by multiple threads through a SimpleDateFormat, which corrupted cache data and caused the exception. As stated in the SimpleDateFormat documentation, SimpleDateFormat isn't thread-safe, so the caller method org.apache.catalina.valves.AccessLogValve.replace should use synchronisation to share a SimpleDateFormat by thread, but it doesn't. \"\n\nAny thoughts.\n\nThanks in advance.\n\n\n/Tony", "id": 115294, "time": "2008-04-03T08:52:16Z", "creator": "tonyzwsun@hotmail.com", "creation_time": "2008-04-03T08:52:16Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 44748, "attachment_id": null, "is_private": false, "id": 115296, "time": "2008-04-03T09:33:22Z", "creator": "markt@apache.org", "creation_time": "2008-04-03T09:33:22Z", "text": "\n\n*** This bug has been marked as a duplicate of bug 38483 ***"}]