[{"count": 0, "tags": [], "text": "I'm using Apache 2.0.49, Tomcat 4.1.29, Sun JVM 1.3.1_06, and mod_jk2 2.04 on\nWindows 2000 Server. I'm getting errors in my Apache & Tomcat logs (shown\nbelow), BUT I do not get any errors shown in the browser and my servlet appears\nto be functioning correctly. I guess the fact that it says \"recoverable error\"\nmeans that it recovers which is why users do not see any errors. However I\nsuspect it does mean that the system is working sub-optimally.\n\nApache 2.0.49 error log\n=======================\n[Mon Apr 19 15:48:53 2004] [error] ajp13.service() ajpGetReply recoverable error 3\n[Mon Apr 19 15:48:53 2004] [error] ajp13.service() ajpGetReply recoverable error 3\n[Mon Apr 19 15:48:53 2004] [error] ajp13.service() Error  forwarding\najp13:localhost:8009 1 0\n[Mon Apr 19 15:48:53 2004] [error] mod_jk2.handler() Error connecting to tomcat\n3, status 200\n\n\nTomcat 4.1.29 stderr\n====================\n[ERROR] JkCoyoteHandler - -Error in action code <java.net.SocketException:\nConnection aborted by peer: socket write error>java.net.SocketException:\nConnection aborted by peer: socket write error\n at java.net.SocketOutputStream.socketWrite(Native Method)\n at java.net.SocketOutputStream.write(SocketOutputStream.java:91)\n at org.apache.jk.common.ChannelSocket.send(ChannelSocket.java:457)\n at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:654)\n at org.apache.jk.server.JkCoyoteHandler.action(JkCoyoteHandler.java:435)\n at org.apache.coyote.Response.action(Response.java:222)\n at org.apache.coyote.Response.finish(Response.java:343)\n at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:314)\n at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:387)\n at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:673)\n at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:615)\n at org.apache.jk.common.SocketConnection.runIt(ChannelSocket.java:786)\n at\norg.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:666)\n at java.lang.Thread.run(Thread.java:479)\n\nworkers2.properties\n===================\n#define the shared memory file\n[shm]\nfile=C:/Program Files/Apache Group/Apache2/jk2.shm\n\n# Define the communication channel\n[channel.socket:localhost:8009]\ntomcatId=localhost:8009\n\n[ajp13:localhost:8009]\nchannel=channel.socket:localhost:8009\n\n[uri:/servlet/*]\nworker=ajp13:localhost:8009\n\nserver.xml\n==========\n<Server port=\"8005\" shutdown=\"SHUTDOWN\" debug=\"0\">\n\n\n  <!-- Uncomment these entries to enable JMX MBeans support -->\n  <Listener className=\"org.apache.catalina.mbeans.ServerLifecycleListener\"\n            debug=\"0\"/>\n  <Listener className=\"org.apache.catalina.mbeans.GlobalResourcesLifecycleListener\"\n            debug=\"0\"/>\n\n  <!-- Global JNDI resources -->\n  <GlobalNamingResources>\n\n    <!-- Test entry for demonstration purposes -->\n    <Environment name=\"simpleValue\" type=\"java.lang.Integer\" value=\"30\"/>\n\n    <!-- Editable user database that can also be used by\n         UserDatabaseRealm to authenticate users -->\n    <Resource name=\"UserDatabase\" auth=\"Container\"\n              type=\"org.apache.catalina.UserDatabase\"\n       description=\"User database that can be updated and saved\">\n    </Resource>\n    <ResourceParams name=\"UserDatabase\">\n      <parameter>\n        <name>factory</name>\n        <value>org.apache.catalina.users.MemoryUserDatabaseFactory</value>\n      </parameter>\n      <parameter>\n        <name>pathname</name>\n        <value>conf/tomcat-users.xml</value>\n      </parameter>\n    </ResourceParams>\n\n  </GlobalNamingResources>\n\n\n  <!-- Define the Tomcat Stand-Alone Service -->\n  <Service name=\"Tomcat-Standalone\">\n\n    <!-- Define a non-SSL Coyote HTTP/1.1 Connector on port 8080 -->\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n               port=\"8080\" minProcessors=\"5\" maxProcessors=\"75\"\n               enableLookups=\"true\" redirectPort=\"8443\"\n               acceptCount=\"100\" debug=\"0\" connectionTimeout=\"20000\"\n               useURIValidationHack=\"false\" disableUploadTimeout=\"true\" />\n\n    <!-- Define a Coyote/JK2 AJP 1.3 Connector on port 8009 -->\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n               port=\"8009\" minProcessors=\"5\" maxProcessors=\"100\"\n               enableLookups=\"true\" redirectPort=\"8443\"\n               acceptCount=\"100\" debug=\"0\" connectionTimeout=\"300000\"\n               useURIValidationHack=\"false\"\n               protocolHandlerClassName=\"org.apache.jk.server.JkCoyoteHandler\"/>\n\n    <!-- Define the top level container in our container hierarchy -->\n    <Engine name=\"Standalone\" defaultHost=\"localhost\" debug=\"0\">\n\n      <Logger className=\"org.apache.catalina.logger.FileLogger\"\n              directory=\"D:/logfiles/Tomcat\" prefix=\"tomcat_.\"\nsuffix=\".log\"\n              timestamp=\"true\"/>\n\n      <Realm className=\"org.apache.catalina.realm.UserDatabaseRealm\"\n                 debug=\"0\" resourceName=\"UserDatabase\"/>\n\n\n      <!-- Define the default virtual host -->\n      <Host name=\"localhost\" debug=\"0\" appBase=\"webapps\" \n       unpackWARs=\"true\" autoDeploy=\"true\">\n\n             directory.-->\n        <Logger className=\"org.apache.catalina.logger.FileLogger\"\n                 directory=\"D:/logfiles/Tomcat\" prefix=\"tomcat_\" suffix=\".log\"\n         timestamp=\"true\"/>\n\n        <!-- Tomcat Root Context -->\n          <Context path=\"\" docBase=\"ROOT\" debug=\"0\" swallowOutput=\"true\"/>\n\n      </Host>\n\n    </Engine>\n\n  </Service>\n\n</Server>\n\n\njk2.properties\n==============\n## THIS FILE MAY BE OVERRIDEN AT RUNTIME. MAKE SURE TOMCAT IS STOPED\n## WHEN YOU EDIT THE FILE.\n\n## COMMENTS WILL BE _LOST_\n\n## DOCUMENTATION OF THE FORMAT IN JkMain javadoc.\n\n# Set the desired handler list\n# handler.list=apr,request,channelJni\n#\n# Override the default port for the socketChannel\n# channelSocket.port=8019\n# Default: \n# channelUnix.file=${jkHome}/work/jk2.socket\n# Just to check if the the config  is working\n# shm.file=${jkHome}/work/jk2.shm\n\n# In order to enable jni use any channelJni directive\n# channelJni.disabled = 0\n# And one of the following directives:\n\n# apr.jniModeSo=/opt/apache2/modules/mod_jk2.so\n\n# If set to inprocess the mod_jk2 will Register natives itself\n# This will enable the starting of the Tomcat from mod_jk2\n# apr.jniModeSo=inprocess", "attachment_id": null, "bug_id": 28532, "id": 56235, "time": "2004-04-22T09:08:00Z", "creator": "michael_sanders@yahoo.com", "creation_time": "2004-04-22T09:08:00Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 28532, "attachment_id": null, "id": 56814, "time": "2004-05-04T14:54:39Z", "creator": "alain@reqwireless.com", "creation_time": "2004-05-04T14:54:39Z", "is_private": false, "text": "I too am getting this behaviour, running Apache 2.0.46-32 w/ mod_jk2 under\nRedHat Enterprise Linux 3.0, and running tomcat4.1.29 under RedHat 9.  Most\ndisconcerting."}, {"count": 2, "tags": [], "bug_id": 28532, "attachment_id": null, "id": 59667, "time": "2004-06-21T13:56:05Z", "creator": "mike.gallagher@toro.com", "creation_time": "2004-06-21T13:56:05Z", "is_private": false, "text": "I am experiencing the same bug w/ the following configuration:\n\nApache 2.0.49\nTomcat 4.1.27\nSun JVM 1.4.1_05\njk 22.0.4"}, {"count": 3, "tags": [], "text": "Regarding my comment above, that should be jk2 - 2.0.4", "is_private": false, "id": 59670, "creator": "mike.gallagher@toro.com", "time": "2004-06-21T14:46:16Z", "bug_id": 28532, "creation_time": "2004-06-21T14:46:16Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "As of November 15, 2004, JK2 is no longer supported. All bugs related to JK2 \nwill be marked as WONTFIX. In its place, some of its features have been \nbackported to jk1. Most of those features will be seen in 1.2.7, which is \nslated for release on November 30th, 2004.\n\nAnother alternative is the ajp addition to mod_proxy which will be part of \napache 2.\n\nFor more information on the Tomat connectors docs at\nhttp://jakarta.apache.org/tomcat/connectors-doc/\n\n", "attachment_id": null, "bug_id": 28532, "id": 68852, "time": "2004-12-22T21:52:13Z", "creator": "markt@apache.org", "creation_time": "2004-12-22T21:52:13Z", "is_private": false}]