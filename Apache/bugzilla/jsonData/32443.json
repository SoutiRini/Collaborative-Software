[{"count": 0, "tags": [], "creator": "taotao5831@hotmail.com", "text": "I am try to use mod_proxy to proxy a Windows Media stream on HTTP protocol \nthat generate by Windows Media Service.\nThis is a typical Keep-alive stream. I use Windows Media Player as the client\nand mod_proxy on Apache2.0.52 get stream data from remote stream server, and \npass it to player via HTTP also. It works very well.\nBut when I shutdown the media player, the mod_proxy still connect to the \nremote stream server, and retrive data as before.\nAnd, the error.log grows at at a about 18KB/s speed. \nAll the error like:\nXXXXXXXX info (OS 10053)xxxxxxxxxxxxxxxxx  core_output_filter: writing data to \nthe network\n\nIt seems that mod_proxy does not know the client is shutdown and still try to \nfeed data to client.\n\nAnd, as new access entered, the mod_proxy will open a new session to stream \nserver, and after user shutdown, the connection to stream server is still \nalive. After servral times, I have to stop the Apache.", "id": 67609, "time": "2004-11-30T09:09:21Z", "bug_id": 32443, "creation_time": "2004-11-30T09:09:21Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "text": "\n> And, the error.log grows at at a about 18KB/s speed. \nSorry, it should be 18KB/min.\n\n(In reply to comment #0)\n", "is_private": false, "bug_id": 32443, "id": 67610, "time": "2004-11-30T09:12:20Z", "creator": "taotao5831@hotmail.com", "creation_time": "2004-11-30T09:12:20Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 32443, "attachment_id": null, "text": "I had the same problem and I did some debugging.\n\nThis happends because ap_pass_brigade returns always APR_SUCCESS on\nap_proxy_http_process_response (from server/core.c).\n\nhere is a quick patch for this:\n\nchange line\n                    if (ap_pass_brigade(r->output_filters, bb) != APR_SUCCESS) {\n\non file modules/proxy/proxy_http.c to:\n\n                    if (ap_pass_brigade(r->output_filters, bb) != APR_SUCCESS ||\nc->aborted) {\n\n\n", "id": 69491, "time": "2005-01-10T17:10:46Z", "creator": "janne@cemron.com", "creation_time": "2005-01-10T17:10:46Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "janne@cemron.com", "text": "*** Bug 29644 has been marked as a duplicate of this bug. ***", "id": 69493, "time": "2005-01-10T17:13:14Z", "bug_id": 32443, "creation_time": "2005-01-10T17:13:14Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "text": "Thanks for the patch.  I added the same logic in two other places where it was\nalso needed and committed that.\n\nhttp://svn.apache.org/viewcvs?view=rev&rev=125612 [viewsvn currently disabled]\n", "is_private": false, "bug_id": 32443, "id": 69838, "time": "2005-01-19T12:11:16Z", "creator": "jorton@redhat.com", "creation_time": "2005-01-19T12:11:16Z", "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 32443, "is_private": false, "text": "Created attachment 14046\nbackported patch\n\nbackported version of patch for submission to 2.0", "id": 69839, "time": "2005-01-19T12:13:23Z", "creator": "jorton@redhat.com", "creation_time": "2005-01-19T12:13:23Z", "attachment_id": 14046}, {"count": 6, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 88958, "time": "2006-05-09T14:15:37Z", "bug_id": 32443, "creation_time": "2006-05-09T14:15:37Z", "is_private": false, "text": "*** Bug 39442 has been marked as a duplicate of this bug. ***"}]