[{"count": 0, "tags": [], "bug_id": 9819, "text": "The CSSEngine throw an exception if the font-family name ( set using \nsetProperty on CSSStyleDeclaration ) start with a digit. The CSS2 specification \nfor font-family requires quotes when the font-family name contains whitespaces \nbut not when it starts with a digit. I could get it to work only if I place \nquotes around the font-family name.\n\nhere is a file to test it (click on the text to change it font-family ):\n\n<?xml version=\"1.0\" standalone=\"no\"?>\n\n<svg width=\"5cm\" height=\"3cm\"  viewBox=\"0 0 500 300\" \nxmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\n\n<script><![CDATA[\n    function set(evt){\n        var e = evt.target;\n        var style = e.getStyle();\n        style.setProperty('font-family','4YEOstamp',\"\");\n\n        //this next expression will change the value for me\n        //style.setProperty('font-family',\"'4YEOstamp'\",\"\");\n    }\n]]></script>\n\n  <g>\n\n        <text x=\"10\" y=\"100\" font-size=\"50\" onclick=\"set(evt);\">Hello world!\n</text>\n  </g>\n</svg>", "id": 17709, "time": "2002-06-12T21:04:56Z", "creator": "nicolas.socheleau@bitflash.com", "creation_time": "2002-06-12T21:04:56Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 9819, "text": "it is also true for a font name with bracket:\n\nThe problem can be traced to this line :\n    <g font-size=\"55\" transform=\"translate(-30 -60)\" fill=\"rgb(0,0,0)\" font-\nfamily=\"Times New Roman (Hebrew)\" baseline-shift=\"0%\" stroke=\"none\">\n\nIf the font-family is changed to a style as follows, it will be handled \ncorrectly \"\n    <g font-size=\"55\" transform=\"translate(-30 -60)\" fill=\"rgb(0,0,0)\" \nstyle=\"font-family:Times New Roman (Hebrew)\" baseline-shift=\"0%\" stroke=\"none\">\n\n\nhere is the exception :\norg.w3c.dom.DOMException: file:/C:/Documents and Settings/white_s/My \nDocuments/comverse_ppt1.svgz:\nThe attribute \"font-family\" represents an invalid CSS value (\"Times New Roman \n(Hebrew)\").\nOriginal message:\nUnexpected token: 14 (see LexicalUnits).\n\n\tat org.apache.batik.css.engine.CSSEngine.getCascadedStyleMap\n(CSSEngine.java:616)\n\n\tat org.apache.batik.css.engine.CSSEngine.getComputedStyle\n(CSSEngine.java:678)\n\n\tat org.apache.batik.bridge.CSSUtilities.getComputedStyle\n(CSSUtilities.java:96)\n\n\tat org.apache.batik.bridge.CSSUtilities.convertDisplay\n(CSSUtilities.java:509)\n\n\tat org.apache.batik.bridge.GVTBuilder.buildGraphicsNode\n(GVTBuilder.java:176)\n\n\tat org.apache.batik.bridge.GVTBuilder.buildComposite\n(GVTBuilder.java:148)\n\n\tat org.apache.batik.bridge.GVTBuilder.build(GVTBuilder.java:76)\n\n\tat org.apache.batik.swing.svg.GVTTreeBuilder.run\n(GVTTreeBuilder.java:81)\n", "id": 22548, "time": "2002-09-09T18:45:06Z", "creator": "nicolas.socheleau@bitflash.com", "creation_time": "2002-09-09T18:45:06Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 9819, "text": "According to the CSS2 BNF your example should be parsed as <Number><Ident>.\nThe CSS spec isn't very clear on this point but I think it's reasonable to\nassume that it intends font-family to be a list of ident or strings  Thus\nyour example is invalid since 4YEOStamp is not a valid ident.\n", "id": 40163, "time": "2003-07-08T12:05:31Z", "creator": "deweese@apache.org", "creation_time": "2003-07-08T12:05:31Z", "is_private": false, "attachment_id": null}]