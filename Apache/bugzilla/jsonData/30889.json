[{"count": 0, "tags": [], "bug_id": 30889, "attachment_id": null, "is_private": false, "id": 62574, "time": "2004-08-27T11:55:18Z", "creator": "eu@md.pp.ru", "creation_time": "2004-08-27T11:55:18Z", "text": "For more details see blog post of Cedric Beust at\nhttp://beust.com/weblog/archives/000174.html"}, {"count": 1, "tags": [], "creator": "peterreilly@apache.org", "attachment_id": null, "id": 92947, "time": "2006-09-03T16:45:10Z", "bug_id": 30889, "creation_time": "2006-09-03T16:45:10Z", "is_private": false, "text": "The java task does use a new ClassLoader for every call.\nFor example:\n<project name=\"statictest\" default=\"static\">\n  <target name=\"static\">\n    <mkdir dir=\"build/classes\"/>\n    <mkdir dir=\"src\"/>\n    <echo file=\"src/StaticTest.java\">\npublic class StaticTest {\n    private static boolean verbose = false;\n\n    public static void main(String[] argv) {\n        System.out.println(\"verbose is \" + verbose);\n        verbose = true;\n    }\n}\n    </echo>\n    <javac srcdir=\"src\" destdir=\"build/classes\"/>\n    <java classname=\"StaticTest\" classpath=\"build/classes\"/>\n    <java classname=\"StaticTest\" classpath=\"build/classes\"/>\n  </target>\n</project>\n\nWill print:\n\nverbose is false\nverbose is false\n\nIf however the class in question is in the ant classpath,\nthe classloader used (in the usual delegated classloader fashion)\nwill be the same as the ant project classloader - which will\nnot be different each time. If it was different all sorts of\nnasty things would happen - i.e. the Project class as see\nfrom the class loaded would be different from the Project class\nthat created the class.\n\nMarking this as WONTFIX - there is a good workaround for the\ncase where the class in question is in the ant classpath - use\nfork=\"yes\".\n"}]