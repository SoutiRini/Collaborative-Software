[{"count": 0, "tags": [], "creator": "hans-peter.stauffer@softwareag.com", "attachment_id": null, "text": "FOP V0.20.1 is never ending, when using in JDK 1.3.02, rendering xml:fo that \ncontains svg to pdf. The dokument will be created correctly, the debugging \noutput seems ok, the main task ends. However, it seems like there are some \nhanging tasks in background, as the application is never ending. There is also \na memory leakage of about 1KByte.\n\nused System: W2000 Prof.\n\ndebugging output:\n\n    using SAX parser org.apache.xerces.parsers.SAXParser\n    building formatting object tree\n    setting up fonts\n     [1]\n     [2]\n     [3]\n     [4] [5] [6] [7] [8] [9] [10>]\n    Parsing of document complete, stopping renderer\n    Initial heap size: 1528Kb\n    Current heap size: 6282Kb\n    Total memory used: 4754Kb\n      Memory use is indicative; no GC was performed\n      These figures should not be used comparatively\n    Total time used: 16063ms\n    Pages rendererd: 10\n    Avg render time: 1606ms/page\n\n\n\nxsl:fo the file is very large (164 kByte). The part that produces the bug is:\n\n<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"415\" width=\"710\" style=\"font-\nfamily:Helvetica, Arial\">\n\t<rect style=\"fill:#FFFFFF; stroke:#000080; stroke-width:1\" height=\"415\" \nwidth=\"710\" y=\"0\" x=\"0\"/>\n\t<g transform=\"scale(0.75)\">\n\t\t<text y=\"40\" x=\"200\" style=\"font-family:Helvetica; font-\nsize:20pt; font-weight:normal; text-anchor:middle; stroke:none\">Anlagegruppen\n\t\t\t\t\t \t\t</text>\n\t\t<text y=\"70\" x=\"200\" style=\"font-size:16; font-weight:normal; \ntext-anchor:middle\">[% vom Gesamtverm\u00f6genswert]\n\t\t\t\t\t\t\t</text>\n\t\t<rect height=\"120\" width=\"260\" y=\"15\" x=\"-30\" \nstyle=\"fill:#F0F0F0; stroke:black; stroke-width:1\" transform=\"translate(100, \n400)\"/>\n\t\t<path d=\"M 130 0 A 130 130 0 0 0          \n118.84933694241413          -52.676703658719155          L 0 0 L 130 0\" \ntransform=\"translate(200, 250) rotate(0)\" style=\"fill:#000080; stroke:black; \nstroke-width:1\"/>\n\t\t<g transform=\"translate(100, 425)\">\n\t\t\t<rect style=\"fill:#000080; stroke:black; stroke-\nwidth:1\" height=\"15\" width=\"25\" y=\"0\" x=\"0\"/>\n\t\t\t<text y=\"15\" x=\"35\" style=\"font-weight:normal; font-\nsize:16; text-anchor:start; stroke:none; fill:black\">Bonds:  6,64 %</text>\n\t\t</g>\n\t\t<path d=\"M 130 0 A 130 130 0 1 0          \n62.34146828112265          114.07690972564859          L 0 0 L 130 0\" \ntransform=\"translate(200, 250) rotate(-23.90461849802542)\" style=\"fill:#FFCC00; \nstroke:black; stroke-width:1\"/>\n\t\t<g transform=\"translate(100, 450)\">\n\t\t\t<rect style=\"fill:#FFCC00; stroke:black; stroke-\nwidth:1\" height=\"15\" width=\"25\" y=\"0\" x=\"0\"/>\n\t\t\t<text y=\"15\" x=\"35\" style=\"font-weight:normal; font-\nsize:16; text-anchor:start; stroke:none; fill:black\">Shares:  82,96 %</text>\n\t\t</g>\n\t\t<path d=\"M 130 0 A 130 130 0 0 0          \n129.99743391129783          -0.8168087155226637          L 0 0 L 130 0\" \ntransform=\"translate(200, 250) rotate(-322.5611713504395)\" style=\"fill:#FF3333; \nstroke:black; stroke-width:1\"/>\n\t\t<g transform=\"translate(100, 475)\">\n\t\t\t<rect style=\"fill:#FF3333; stroke:black; stroke-\nwidth:1\" height=\"15\" width=\"25\" y=\"0\" x=\"0\"/>\n\t\t\t<text y=\"15\" x=\"35\" style=\"font-weight:normal; font-\nsize:16; text-anchor:start; stroke:none; fill:black\">Precious metals:  0,1 %\n</text>\n\t\t</g>\n\t\t<path d=\"M 130 0 A 130 130 0 0 0          \n103.71327714001423          -78.3808404195732          L 0 0 L 130 0\" \ntransform=\"translate(200, 250) rotate(-322.9061082763283)\" style=\"fill:#66FF66; \nstroke:black; stroke-width:1\"/>\n\t\t<g transform=\"translate(100, 500)\">\n\t\t\t<rect style=\"fill:#66FF66; stroke:black; stroke-\nwidth:1\" height=\"15\" width=\"25\" y=\"0\" x=\"0\"/>\n\t\t\t<text y=\"15\" x=\"35\" style=\"font-weight:normal; font-\nsize:16; text-anchor:start; stroke:none; fill:black\">Money Market:  10,3 %\n</text>\n\t\t</g>\n\t</g>\n\t<g transform=\"scale(0.75) translate(550, 0)\">\n\t\t<text y=\"40\" x=\"175\" style=\"font-size:20; font-weight:normal; \ntext-anchor:middle\">Nettoverm\u00f6gen nach W\u00e4hrung\t\t\t\t\t\n\t\t</text>\n\t\t<text y=\"70\" x=\"175\" style=\"font-size:16; font-weight:normal; \ntext-anchor:middle\">[% vom Gesamtverm\u00f6genswert]\n\t\t\t\t\t\t\t</text>\n\t\t<g transform=\"translate(0, 100)\">\n\t\t\t<g style=\"fill:#F0F0F0; stroke:black; stroke-width:1\">\n\t\t\t\t<path d=\"M 0 0 L 0 300 L 350 300 L 350 0 L 0 0 \nZ\"/>\n\t\t\t</g>\n\t\t\t<g style=\"fill:none; stroke:#666666; stroke-width:1; \nstroke-dasharray:2 4\">\n\t\t\t\t<path d=\"M 70 0 L 70 305 Z\"/>\n\t\t\t\t<path d=\"M 140 0 L 140 305 Z\"/>\n\t\t\t\t<path d=\"M 210 0 L 210 305 Z\"/>\n\t\t\t\t<path d=\"M 280 0 L 280 305 Z\"/>\n\t\t\t</g>\n\t\t\t<g style=\"font-size:16; text-anchor:middle\">\n\t\t\t\t<text y=\"320\" x=\"0\">0 %</text>\n\t\t\t\t<text y=\"320\" x=\"70\">20 %</text>\n\t\t\t\t<text y=\"320\" x=\"140\">40 %</text>\n\t\t\t\t<text y=\"320\" x=\"210\">60 %</text>\n\t\t\t\t<text y=\"320\" x=\"280\">80 %</text>\n\t\t\t\t<text y=\"320\" x=\"350\">100 %</text>\n\t\t\t</g>\n\t\t\t<g transform=\"translate(0, 26)\">\n\t\t\t\t<rect style=\"fill:#000080; stroke:black; stroke-\nwidth:1\" height=\"30\" width=\"181.58\" y=\"0\" x=\"0\"/>\n\t\t\t\t<text style=\"font-weight:normal; font-size:16; \ntext-anchor:start; stroke:none\" y=\"-5\" x=\"5\">CHF: \n\t\t\t\t\t\t\t\t\t51,88\n\t\t\t\t\t\t\t\t\t %\n\t\t\t\t\t\t\t\t</text>\n\t\t\t</g>\n\t\t\t<g transform=\"translate(0, 26)\">\n\t\t\t\t<rect style=\"fill:#FFCC00; stroke:black; stroke-\nwidth:1\" height=\"30\" width=\"47.25\" y=\"60\" x=\"0\"/>\n\t\t\t\t<text style=\"font-weight:normal; font-size:16; \ntext-anchor:start; stroke:none\" y=\"55\" x=\"5\">USD: \n\t\t\t\t\t\t\t\t\t13,5\n\t\t\t\t\t\t\t\t\t %\n\t\t\t\t\t\t\t\t</text>\n\t\t\t</g>\n\t\t\t<g transform=\"translate(0, 26)\">\n\t\t\t\t<rect style=\"fill:#FF3333; stroke:black; stroke-\nwidth:1\" height=\"30\" width=\"57.22500000000001\" y=\"120\" x=\"0\"/>\n\t\t\t\t<text style=\"font-weight:normal; font-size:16; \ntext-anchor:start; stroke:none\" y=\"115\" x=\"5\">EUR: \n\t\t\t\t\t\t\t\t\t16,35\n\t\t\t\t\t\t\t\t\t %\n\t\t\t\t\t\t\t\t</text>\n\t\t\t</g>\n\t\t\t<g transform=\"translate(0, 26)\">\n\t\t\t\t<rect style=\"fill:#66FF66; stroke:black; stroke-\nwidth:1\" height=\"30\" width=\"56.279999999999994\" y=\"180\" x=\"0\"/>\n\t\t\t\t<text style=\"font-weight:normal; font-size:16; \ntext-anchor:start; stroke:none\" y=\"175\" x=\"5\">GBP: \n\t\t\t\t\t\t\t\t\t16,08\n\t\t\t\t\t\t\t\t\t %\n\t\t\t\t\t\t\t\t</text>\n\t\t\t</g>\n\t\t\t<g transform=\"translate(0, 26)\">\n\t\t\t\t<rect style=\"fill:grey; stroke:black; stroke-\nwidth:1\" height=\"30\" width=\"7.665\" y=\"240\" x=\"0\"/>\n\t\t\t\t<text style=\"font-weight:normal; font-size:16; \ntext-anchor:start; stroke:none\" y=\"235\" x=\"5\">JPY: \n\t\t\t\t\t\t\t\t\t2,19\n\t\t\t\t\t\t\t\t\t %\n\t\t\t\t\t\t\t\t</text>\n\t\t\t</g>\n\t\t\t<g style=\"stroke-width:3; stroke:black\">\n\t\t\t\t<path d=\"M 0 0 L 0 300 L 350 300 L 0 300 Z\"/>\n\t\t\t</g>\n\t\t</g>\n\t</g>\n</svg>\n\nthe java methods:\n\n    public static void renderPDF(String foFile, String pdfFile) {\n        try {\n            // create Parser\n            XMLReader parser = createParser();\n            setParserFeatures(parser);\n            InputStream inFo = new BufferedInputStream(new FileInputStream\n(foFile));\n            InputSource is = new InputSource(inFo);\n            OutputStream  os = new BufferedOutputStream(new FileOutputStream\n(pdfFile));\n            internalRenderPDF(parser,is,os);\n            os.close();\n      //      System.exit(0);\n        }\n\tcatch (Exception e) {\n            System.out.println(\"PdfProcessor failed: \" + e);\n        }\n    }\n\n    protected static void internalRenderPDF(XMLReader parser, InputSource \nsource, OutputStream os) throws Exception{\n        try{\n            org.apache.fop.apps.Driver driver = new Driver();\n            driver.setRenderer(Driver.RENDER_PDF);\n            driver.setupDefaultMappings();\n            driver.setOutputStream(os);\n            driver.render(parser, source);\n            os.flush();\n        }\n        catch(Exception e){\n            MessageHandler.errorln(\"Error in internalRenderPDF: \"+e);\n            throw e;\n        }\n    }", "id": 8086, "time": "2001-11-20T02:57:00Z", "bug_id": 4965, "creation_time": "2001-11-20T02:57:00Z", "is_private": false}, {"count": 1, "attachment_id": null, "creator": "keiron@aftexsw.com", "text": "This is a java problem.", "id": 9034, "time": "2001-12-19T00:50:23Z", "bug_id": 4965, "creation_time": "2001-12-19T00:50:23Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 4965, "attachment_id": null, "text": "batch transition to closed remaining pre-FOP1.0 resolved bugs", "id": 156814, "time": "2012-04-01T13:53:15Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T13:53:15Z", "is_private": false}]