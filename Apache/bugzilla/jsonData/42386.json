[{"count": 0, "tags": [], "bug_id": 42386, "attachment_id": null, "text": "When painting org.apache.batik.gvt.GraphicsNode uses utility class \norg.apache.batik.ext.awt.image.GraphicsUtil. This utility fails to check for \nnull return values from Graphics2D.getDeviceConfiguration in at least two \nplaces.\n\nSteps two reproduce:\nCreate a GraphicsNode from a SVGDocument, paint onto SVGGraphics2D (or any \nother Graphics2D impl whose getDeviceConfiguration returns null)\n\n\njava.lang.NullPointerException\n\tat \norg.apache.batik.ext.awt.image.GraphicsUtil.getDestination(GraphicsUtil.java:498)\n\tat \norg.apache.batik.ext.awt.image.GraphicsUtil.getDestinationColorModel(GraphicsUtil.java:511)\n\tat \norg.apache.batik.ext.awt.image.GraphicsUtil.getDestinationColorSpace(GraphicsUtil.java:533)\n\tat \norg.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:131)\n\tat \norg.apache.batik.ext.awt.image.GraphicsUtil.drawImage(GraphicsUtil.java:451)\n\tat \norg.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:522)\n\tat \norg.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:159)\n\tat \norg.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:488)\n\tat \norg.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:159)\n\tat \norg.apache.batik.gvt.CanvasGraphicsNode.primitivePaint(CanvasGraphicsNode.java:158)\n\tat \norg.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:488)\n\tat \norg.apache.batik.gvt.CompositeGraphicsNode.primitivePaint(CompositeGraphicsNode.java:159)\n\tat \norg.apache.batik.gvt.AbstractGraphicsNode.paint(AbstractGraphicsNode.java:488)", "id": 103044, "time": "2007-05-10T10:17:44Z", "creator": "thomas.behr@yworks.com", "creation_time": "2007-05-10T10:17:44Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 42386, "text": "Created attachment 20163\nbug fix: added relevant null checking\n\nAlthough this fixes the NPE, it would probably be a good idea to change\nSVGGraphics2D's implementation of getDeviceConfiguration", "id": 103045, "time": "2007-05-10T10:22:15Z", "creator": "thomas.behr@yworks.com", "creation_time": "2007-05-10T10:22:15Z", "is_private": false, "attachment_id": 20163}, {"count": 2, "tags": [], "creator": "cam@apache.org", "text": "Hi Thomas.\n\nYes there should be checks in there, I think.  I'm not sure what behaviour makes\nsense for a GraphicsConfiguration on SVGGraphics2D, since it doesn't work on a\nraster image.  So for now I'll leave getDeviceConfiguration() returning null. \nI've added the null checks into GraphicsUtil.\n\nBTW I met your colleague Michael Kaufmann last week when he was visiting us at\nMonash Uni.", "id": 108691, "time": "2007-09-26T21:11:49Z", "bug_id": 42386, "creation_time": "2007-09-26T21:11:49Z", "is_private": false, "attachment_id": null}]