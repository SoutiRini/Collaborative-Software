[{"count": 0, "tags": [], "creator": "zikfat@gmail.com", "attachment_id": 33743, "text": "Created attachment 33743\nPatch file with a fix. Based off of the trunk of the Tomcat 8.0 branch.\n\nThe org.apache.coyote.Response class's setLocale method sets the Content-Language header based on the Java Locale object passed in, but the language tag it produces is only based on the Locale's language and region. It should allow the full variety of language tags described in RFC 5646.\n\nFor example, this code sets a Locale object on a response for the Chinese language, in China, with the traditional chinese script variant:\n\nLocale locale = Locale.forLanguageTag(\"zh-hant-CN\");\nresponse.setLocale(locale);\n\nBut the Content-Language header produced in the response will look like this, with the script variant being lost:\n\nContent-Language:zh-CN\n\nI believe the solution is simply to set the Content-Language header by using the Locale's toLanguageTag method instead of manually creating the language tag strings as the setLocale method currently does.", "id": 190087, "time": "2016-04-08T22:39:41Z", "bug_id": 59295, "creation_time": "2016-04-08T22:39:41Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 59295, "attachment_id": null, "id": 190154, "time": "2016-04-11T21:07:15Z", "creator": "markt@apache.org", "creation_time": "2016-04-11T21:07:15Z", "is_private": false, "text": "Thanks for the report and the patch. It has been applied to:\n- 9.0.x for 9.0.0.M5\n- 8.5.x for 8.5.1\n- 8.0.x for 8.0.34"}]