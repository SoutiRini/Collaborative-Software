[{"count": 0, "tags": [], "creator": "dev@tomcat.apache.org", "attachment_id": null, "id": 238, "time": "2000-11-28T07:42:56Z", "bug_id": 261, "creation_time": "2000-11-28T07:42:56Z", "is_private": false, "text": "Using ANT to do nightly builds, I would like to receive an\r\nemail of the result, fail or not.  However, I could not\r\nfind a way to catch a failure in my build file.\r\n\r\nHere's what I would want to do:\r\n\r\n- if a failure occured, clean up any directory my build\r\ncreated, rollback any changes I already made and send\r\nthe log file, including the error, by mail;\r\n- if the build whent through, send the log file by mail.\r\n\r\nThe second one I can do easily.  The last target executed\r\nsimply sends an email.  However, if a failure occured,\r\nthe build process stops and I am never notified.\r\n\r\nSince I could not find an easy way to do this (other than\r\nwriting an event listener, and even then I'm not sure if\r\nit would work), I took it upon myself to modify the Project\r\nclass to include two new attributes: failure and done.  So,\r\nmy build XML file now starts with:\r\n\r\n  <project name=\"myBuild\"\r\n           default=\"mainTarget\"\r\n           failure=\"failTarget\"\r\n           done=\"doneTarget\"\r\n           basedir=\".\">\r\n\r\n\r\nand I added the call to the \"failure\" and \"done\" targets in\r\nthe execution.  That way, I am always notified whenever\r\nthere's a failure in my build."}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "attachment_id": null, "id": 703, "creation_time": "2001-02-15T06:43:38Z", "time": "2001-02-15T06:43:38Z", "bug_id": 261, "text": "BuildListeners provide an easy way to achieve what you want.\n\nSee the FAQ for an example of a listener that sends out an email on build\nfailure or the optional sound task in Ant 1.3 which adds listeners that play\ndifferent sounds depending on build results.", "is_private": false}]