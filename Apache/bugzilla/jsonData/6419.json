[{"count": 0, "tags": [], "bug_id": 6419, "text": "Catalina does not stop neither on Linux nor Win2000 .\n\nI had to use `kill -TERM $PID` to stop remaining ( about 14 processes ) .\nWithout it catalina does not start next time.\n\nIn 4.0.1 release it was OK with it.", "id": 10634, "time": "2002-02-13T09:10:00Z", "creator": "maint@intercollab.com", "creation_time": "2002-02-13T09:10:00Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 6419, "text": "Some test case (or a lot more information) will be required here, or I'll close \nthe bug with WORKSFORME.\nTwo deadlocks in the shutdown code were fixed since 4.0.1 (which was relatively \neasy to cause to hang when shutting down), and there is no known problem with \nit in 4.0.2.", "id": 10635, "time": "2002-02-13T09:19:20Z", "creator": "remm@apache.org", "creation_time": "2002-02-13T09:19:20Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "text": "Here are the debug messages I got in FileLogger for Engine \"Standalone\" :\nAnd Tomcat sleeps . Maybe I must use another debug levels ? What and where ?\n\n2002-02-13 12:07:14 HttpConnector Opening server socket on all host IP addresses\n2002-02-13 12:07:18 EngineConfig: EngineConfig: Processing START\n2002-02-13 12:07:18 HttpConnector[8080] Starting background thread\n2002-02-13 12:07:18 HttpProcessor[8080][0] Starting background thread\n2002-02-13 12:07:18 HttpProcessor[8080][0]  Background thread has been started\n2002-02-13 12:07:18 HttpProcessor[8080][1] Starting background thread\n2002-02-13 12:07:18 HttpProcessor[8080][1]  Background thread has been started\n2002-02-13 12:07:18 HttpProcessor[8080][2] Starting background thread\n2002-02-13 12:07:18 HttpProcessor[8080][2]  Background thread has been started\n2002-02-13 12:07:18 HttpProcessor[8080][3] Starting background thread\n2002-02-13 12:07:18 HttpProcessor[8080][3]  Background thread has been started\n2002-02-13 12:07:18 HttpProcessor[8080][4] Starting background thread\n2002-02-13 12:07:18 HttpProcessor[8080][4]  Background thread has been started\n2002-02-13 12:07:18 Ajp13Connector[8009] Opening server socket on all host IP \naddresses\n2002-02-13 12:07:18 Ajp13Connector[8009] Starting background thread\n2002-02-13 12:07:18 Ajp13Processor[8009][0] Starting background thread\n2002-02-13 12:07:18 Ajp13Processor[8009][0]  Background thread has been started\n2002-02-13 12:07:18 Ajp13Processor[8009][1] Starting background thread\n2002-02-13 12:07:18 Ajp13Processor[8009][1]  Background thread has been started\n2002-02-13 12:07:18 Ajp13Processor[8009][2] Starting background thread\n2002-02-13 12:07:18 Ajp13Processor[8009][2]  Background thread has been started\n2002-02-13 12:07:18 Ajp13Processor[8009][3] Starting background thread\n2002-02-13 12:07:18 Ajp13Processor[8009][3]  Background thread has been started\n2002-02-13 12:07:18 Ajp13Processor[8009][4] Starting background thread\n2002-02-13 12:07:18 Ajp13Processor[8009][4]  Background thread has been started\n2002-02-13 12:07:37 HttpProcessor[8080][4] Stopping background thread\n2002-02-13 12:07:37 HttpProcessor[8080][3] Stopping background thread\n2002-02-13 12:07:37 HttpProcessor[8080][2] Stopping background thread\n2002-02-13 12:07:37 HttpProcessor[8080][1] Stopping background thread\n2002-02-13 12:07:37 HttpProcessor[8080][0] Stopping background thread\n2002-02-13 12:07:37 HttpConnector[8080] Stopping background thread\n2002-02-13 12:07:37 Ajp13Processor[8009][4] Stopping background thread\n2002-02-13 12:07:37 Ajp13Processor[8009][4] not currently handling a request, \nnot waiting.\n2002-02-13 12:07:37 Ajp13Processor[8009][3] Stopping background thread\n2002-02-13 12:07:37 Ajp13Processor[8009][3] not currently handling a request, \nnot waiting.\n2002-02-13 12:07:37 Ajp13Processor[8009][2] Stopping background thread\n2002-02-13 12:07:37 Ajp13Processor[8009][2] not currently handling a request, \nnot waiting.\n2002-02-13 12:07:37 Ajp13Processor[8009][1] Stopping background thread\n2002-02-13 12:07:37 Ajp13Processor[8009][1] not currently handling a request, \nnot waiting.\n2002-02-13 12:07:37 Ajp13Processor[8009][0] Stopping background thread\n2002-02-13 12:07:37 Ajp13Processor[8009][0] not currently handling a request, \nnot waiting.\n2002-02-13 12:07:37 Ajp13Connector[8009] Stopping background thread\n2002-02-13 12:07:43 Ajp13Connector[8009] run():  stopped, so breaking\n2002-02-13 12:07:43 EngineConfig: EngineConfig: Processing STOP\n", "is_private": false, "id": 10637, "creator": "maint@intercollab.com", "time": "2002-02-13T10:12:56Z", "bug_id": 6419, "creation_time": "2002-02-13T10:12:56Z", "attachment_id": null}, {"count": 3, "tags": [], "creator": "remm@apache.org", "text": "The main problem is usually stopping the connectors. Here, they did shutdown \nfine.\nlocalhost_log should contain the useful information, then. Can you send it ?\n\nI'm bumping down the priority, as having no active request means that there's \nalmost no chance of causing any problems by killing the process.", "id": 10648, "time": "2002-02-13T17:03:48Z", "bug_id": 6419, "creation_time": "2002-02-13T17:03:48Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 6419, "attachment_id": null, "id": 10649, "time": "2002-02-13T17:21:00Z", "creator": "maint@intercollab.com", "creation_time": "2002-02-13T17:21:00Z", "is_private": false, "text": "I had a web application that Tomcat processed automatically because it was\nlocated in appBase. After removing the entire catalog /Gypco Catalina\nstopped normally.   ----\n\nBut with actual working server.xml configuration it does not stop.\n\n------\n\n\n2002-02-13 19:09:51 StandardContext[/manager]: Starting\n2002-02-13 19:09:51 StandardContext[/manager]: Processing start(), current \navailable=false\n2002-02-13 19:09:51 StandardContext[/manager]: Configuring default Resources\n2002-02-13 19:09:51 StandardContext[/manager]: Configuring non-privileged \ndefault Loader\n2002-02-13 19:09:51 StandardContext[/manager]: Configuring default Manager\n2002-02-13 19:09:51 StandardContext[/manager]: Processing standard container \nstartup\n2002-02-13 19:09:51 WebappLoader[/manager]: Deploying class repositories to \nwork directory C:\\apache\\catalina\\work\\localhost\\manager\n2002-02-13 19:09:51 StandardManager[/manager]: Seeding random number generator \nclass java.security.SecureRandom\n2002-02-13 19:09:51 StandardManager[/manager]: Seeding of random number \ngenerator has been completed\n2002-02-13 19:09:51 ContextConfig[/manager]: ContextConfig: Processing START\n2002-02-13 19:09:51 StandardContext[/manager]: Setting deployment descriptor \npublic ID to '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN'\n2002-02-13 19:09:52 StandardContext[/manager]: Setting deployment descriptor \npublic ID to '-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN'\n2002-02-13 19:09:52 ContextConfig[/manager]: Scanning web.xml tag libraries\n2002-02-13 19:09:52 ContextConfig[/manager]: Scanning library JAR files\n2002-02-13 19:09:52 Authenticator[/manager]: No SingleSignOn Valve is present\n2002-02-13 19:09:52 ContextConfig[/manager]: Configured an authenticator for \nmethod BASIC\n2002-02-13 19:09:52 ContextConfig[/manager]: Pipline Configuration:\n2002-02-13 19:09:52 ContextConfig[/manager]:   \norg.apache.catalina.authenticator.BasicAuthenticator/1.0\n2002-02-13 19:09:52 ContextConfig[/manager]:   \norg.apache.catalina.core.StandardContextValve/1.0\n2002-02-13 19:09:52 ContextConfig[/manager]: ======================\n2002-02-13 19:09:52 StandardContext[/manager]: Configuring application event \nlisteners\n2002-02-13 19:09:52 StandardContext[/manager]: Sending application start events\n2002-02-13 19:09:52 StandardContext[/manager]: Starting filters\n2002-02-13 19:09:52 StandardContext[/manager]: Posting standard context \nattributes\n2002-02-13 19:09:52 StandardWrapper[/manager:default]: Loading container \nservlet default\n2002-02-13 19:09:52 default: init\n2002-02-13 19:09:52 StandardWrapper[/manager:invoker]: Loading container \nservlet invoker\n2002-02-13 19:09:52 invoker: init\n2002-02-13 19:09:52 jsp: init\n2002-02-13 19:09:52 StandardWrapper[/manager:ssi]: Loading container servlet ssi\n2002-02-13 19:09:52 ssi: init\n2002-02-13 19:09:52 StandardWrapper[/manager:cgi]: Loading container servlet cgi\n2002-02-13 19:09:52 cgi: init\n2002-02-13 19:09:52 cgi: init: loglevel set to 6\n2002-02-13 19:09:52 StandardContext[/manager]: Starting completed\n2002-02-13 19:09:52 HostConfig[localhost]: HostConfig: Processing START\n2002-02-13 19:09:52 HostConfig[localhost]: Deploying discovered web applications\n2002-02-13 19:09:52 HostConfig[localhost]: Deploying web application directory \nGypco\n2002-02-13 19:09:52 StandardHost[localhost]: Installing web application at \ncontext path /Gypco from URL file:C:\\apache\\catalina\\webapps\\Gypco\n2002-02-13 19:09:52 WebappLoader[/Gypco]: Deploying class repositories to work \ndirectory C:\\apache\\catalina\\work\\localhost\\Gypco\n2002-02-13 19:09:52 WebappLoader[/Gypco]: Deploy JAR /WEB-INF/lib/js.jar to \nC:\\apache\\catalina\\webapps\\Gypco\\WEB-INF\\lib\\js.jar\n2002-02-13 19:09:52 WebappLoader[/Gypco]: Deploy JAR /WEB-INF/lib/jstl.jar to \nC:\\apache\\catalina\\webapps\\Gypco\\WEB-INF\\lib\\jstl.jar\n2002-02-13 19:09:52 WebappLoader[/Gypco]: Deploy JAR /WEB-INF/lib/junit.jar to \nC:\\apache\\catalina\\webapps\\Gypco\\WEB-INF\\lib\\junit.jar\n2002-02-13 19:09:52 WebappLoader[/Gypco]: Deploy JAR /WEB-INF/lib/log4j.jar to \nC:\\apache\\catalina\\webapps\\Gypco\\WEB-INF\\lib\\log4j.jar\n2002-02-13 19:09:52 WebappLoader[/Gypco]: Deploy JAR /WEB-INF/lib/pgsql.jar to \nC:\\apache\\catalina\\webapps\\Gypco\\WEB-INF\\lib\\pgsql.jar\n2002-02-13 19:09:52 WebappLoader[/Gypco]: Deploy JAR /WEB-\nINF/lib/postgresql.jar to C:\\apache\\catalina\\webapps\\Gypco\\WEB-\nINF\\lib\\postgresql.jar\n2002-02-13 19:09:52 StandardManager[/Gypco]: Seeding random number generator \nclass java.security.SecureRandom\n2002-02-13 19:09:52 StandardManager[/Gypco]: Seeding of random number generator \nhas been completed\n2002-02-13 19:09:53 ContextConfig[/Gypco]: Configured an authenticator for \nmethod FORM\n2002-02-13 19:09:53 service: init\n2002-02-13 19:09:53 StandardWrapper[/Gypco:default]: Loading container servlet \ndefault\n2002-02-13 19:09:53 default: init\n2002-02-13 19:09:54 prodSave: init\n2002-02-13 19:09:54 StandardWrapper[/Gypco:invoker]: Loading container servlet \ninvoker\n2002-02-13 19:09:54 invoker: init\n2002-02-13 19:09:54 jsp: init\n2002-02-13 19:09:54 StandardWrapper[/Gypco:ssi]: Loading container servlet ssi\n2002-02-13 19:09:54 ssi: init\n2002-02-13 19:09:54 StandardWrapper[/Gypco:cgi]: Loading container servlet cgi\n2002-02-13 19:09:54 cgi: init\n2002-02-13 19:09:54 cgi: init: loglevel set to 6\n2002-02-13 19:09:54 HostConfig[localhost]: Deploying web application directory \nROOT\n2002-02-13 19:09:54 StandardHost[localhost]: Installing web application at \ncontext path  from URL file:C:\\apache\\catalina\\webapps\\ROOT\n2002-02-13 19:09:54 WebappLoader[]: Deploying class repositories to work \ndirectory C:\\apache\\catalina\\work\\localhost\\_\n2002-02-13 19:09:54 StandardManager[]: Seeding random number generator class \njava.security.SecureRandom\n2002-02-13 19:09:54 StandardManager[]: Seeding of random number generator has \nbeen completed\n2002-02-13 19:09:54 StandardWrapper[:default]: Loading container servlet default\n2002-02-13 19:09:54 default: init\n2002-02-13 19:09:54 StandardWrapper[:invoker]: Loading container servlet invoker\n2002-02-13 19:09:54 invoker: init\n2002-02-13 19:09:54 jsp: init\n2002-02-13 19:09:54 StandardWrapper[:ssi]: Loading container servlet ssi\n2002-02-13 19:09:54 ssi: init\n2002-02-13 19:09:54 StandardWrapper[:cgi]: Loading container servlet cgi\n2002-02-13 19:09:54 cgi: init\n2002-02-13 19:09:54 cgi: init: loglevel set to 6\n2002-02-13 19:09:54 HostConfig[localhost]: Deploying web application directory \ntomcat-docs\n2002-02-13 19:09:54 StandardHost[localhost]: Installing web application at \ncontext path /tomcat-docs from URL file:C:\\apache\\catalina\\webapps\\tomcat-docs\n2002-02-13 19:09:54 WebappLoader[/tomcat-docs]: Deploying class repositories to \nwork directory C:\\apache\\catalina\\work\\localhost\\tomcat-docs\n2002-02-13 19:09:54 StandardManager[/tomcat-docs]: Seeding random number \ngenerator class java.security.SecureRandom\n2002-02-13 19:09:54 StandardManager[/tomcat-docs]: Seeding of random number \ngenerator has been completed\n2002-02-13 19:09:54 StandardWrapper[/tomcat-docs:default]: Loading container \nservlet default\n2002-02-13 19:09:54 default: init\n2002-02-13 19:09:54 StandardWrapper[/tomcat-docs:invoker]: Loading container \nservlet invoker\n2002-02-13 19:09:54 invoker: init\n2002-02-13 19:09:54 jsp: init\n2002-02-13 19:09:54 StandardWrapper[/tomcat-docs:ssi]: Loading container \nservlet ssi\n2002-02-13 19:09:54 ssi: init\n2002-02-13 19:09:54 StandardWrapper[/tomcat-docs:cgi]: Loading container \nservlet cgi\n2002-02-13 19:09:54 cgi: init\n2002-02-13 19:09:54 cgi: init: loglevel set to 6\n2002-02-13 19:09:54 HostConfig[localhost]: Deploying web application directory \nwebdav\n2002-02-13 19:09:54 StandardHost[localhost]: Installing web application at \ncontext path /webdav from URL file:C:\\apache\\catalina\\webapps\\webdav\n2002-02-13 19:09:54 WebappLoader[/webdav]: Deploying class repositories to work \ndirectory C:\\apache\\catalina\\work\\localhost\\webdav\n2002-02-13 19:09:54 StandardManager[/webdav]: Seeding random number generator \nclass java.security.SecureRandom\n2002-02-13 19:09:54 StandardManager[/webdav]: Seeding of random number \ngenerator has been completed\n2002-02-13 19:09:55 StandardWrapper[/webdav:default]: Loading container servlet \ndefault\n2002-02-13 19:09:55 default: init\n2002-02-13 19:09:55 StandardWrapper[/webdav:invoker]: Loading container servlet \ninvoker\n2002-02-13 19:09:55 invoker: init\n2002-02-13 19:09:55 jsp: init\n2002-02-13 19:09:55 StandardWrapper[/webdav:ssi]: Loading container servlet ssi\n2002-02-13 19:09:55 ssi: init\n2002-02-13 19:09:55 StandardWrapper[/webdav:cgi]: Loading container servlet cgi\n2002-02-13 19:09:55 cgi: init\n2002-02-13 19:09:55 cgi: init: loglevel set to 6\n2002-02-13 19:10:28 HostConfig[localhost]: HostConfig: Processing STOP\n2002-02-13 19:10:28 HostConfig[localhost]: Undeploying deployed web applications\n2002-02-13 19:10:28 HostConfig[localhost]: Undeploying web application at \ncontext path /examples\n2002-02-13 19:10:28 StandardHost[localhost]: Removing web application at \ncontext path /examples\n2002-02-13 19:10:28 HostConfig[localhost]: Undeploying web application at \ncontext path /webdav\n2002-02-13 19:10:28 StandardHost[localhost]: Removing web application at \ncontext path /webdav\n2002-02-13 19:10:28 cgi: destroy\n2002-02-13 19:10:28 ssi: destroy\n2002-02-13 19:10:28 HostConfig[localhost]: Undeploying web application at \ncontext path /Gypco\n2002-02-13 19:10:28 StandardHost[localhost]: Removing web application at \ncontext path /Gypco\n2002-02-13 19:10:28 service: destroy\n2002-02-13 19:10:28 cgi: destroy\n2002-02-13 19:10:28 prodSave: destroy\n2002-02-13 19:10:28 ssi: destroy\n2002-02-13 19:10:28 HostConfig[localhost]: Undeploying web application at \ncontext path /tomcat-docs\n2002-02-13 19:10:28 StandardHost[localhost]: Removing web application at \ncontext path /tomcat-docs\n2002-02-13 19:10:28 cgi: destroy\n2002-02-13 19:10:28 ssi: destroy\n2002-02-13 19:10:28 HostConfig[localhost]: Undeploying web application at \ncontext path /manager\n2002-02-13 19:10:28 StandardHost[localhost]: Removing web application at \ncontext path /manager\n2002-02-13 19:10:28 StandardContext[/manager]: Stopping\n2002-02-13 19:10:28 StandardContext[/manager]: Stopping filters\n2002-02-13 19:10:28 StandardContext[/manager]: Sending application stop events\n2002-02-13 19:10:28 StandardContext[/manager]: Processing standard container \nshutdown\n2002-02-13 19:10:28 ContextConfig[/manager]: ContextConfig: Processing STOP\n2002-02-13 19:10:28 cgi: destroy\n2002-02-13 19:10:28 ssi: destroy\n2002-02-13 19:10:28 StandardContext[/manager]: Stopping complete\n2002-02-13 19:10:28 HostConfig[localhost]: Undeploying web application at \ncontext path \n2002-02-13 19:10:28 StandardHost[localhost]: Removing web application at \ncontext path \n2002-02-13 19:10:28 cgi: destroy\n2002-02-13 19:10:28 ssi: destroy\n"}, {"count": 5, "tags": [], "bug_id": 6419, "attachment_id": null, "text": "Well, Catalina stops fine for me regardless of which web application are in my \nwebapps folder. Unless you can provide a test case (a test war maybe), this \nworks fine for me.", "id": 10650, "time": "2002-02-13T17:31:17Z", "creator": "remm@apache.org", "creation_time": "2002-02-13T17:31:17Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 6419, "text": "The logs indicate that all webapps and Catalina components have been properly\nshut down (connectors + all webapps).\nAll of the remaining Tomcat threads should be daemon threads, so the VM should\nexit. If it doesn't, then it means there are still some non-daemon threads\nrunning, but they were not started by Tomcat itself.", "id": 10683, "time": "2002-02-14T08:40:55Z", "creator": "remm@apache.org", "creation_time": "2002-02-14T08:40:55Z", "is_private": false, "attachment_id": null}]