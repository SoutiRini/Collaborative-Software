[{"count": 0, "attachment_id": null, "creator": "giambattista.didonna@nettest.com", "is_private": false, "id": 79293, "time": "2005-09-01T16:50:34Z", "bug_id": 36464, "creation_time": "2005-09-01T16:50:34Z", "tags": [], "text": "Task: \"tar\"\n\nThe \"dirmode\" attribute settings in the nested \"tarfileset\" element don't work.\nI seems that in the built tar file the \"order\" of files and directories is not \ncorrect. \nIf a directory appears after some contained file, then the directory permission \nis 777 without respect to the dirmode setting.\n\nExample: tar file containing 1 directory \"aaa\" and 1 file \"b\" contained \ninto \"aaa\".\n\nIf the order in the tar file is the following:\n/aaa/b 600\n/aaa   700\nthe result from the extraction will be wrong: \"aaa\" with 777 permissions!\n\nIn the cases when the directory appears before contained files, we are lucky. \nIn fact, if the order of the above example is opposite:\n/aaa   700\n/aaa/b 600\nthe result will be correct."}, {"count": 1, "tags": [], "creator": "murthy_gandikota@yahoo.com", "is_private": false, "text": "The tar file created does not preserve file permissions. From ant script \n<chmod perm=\"ugo+x\" dir=\"${ac}/util\" type=\"file\" includes=\"**\" />\n \n <tar tarfile=\"${tarname}\" compression=\"gzip\" basedir=\"${a}/package\"\nlongfile=\"warn\"/>\n\nThe resulting tar file has 644 permissions for the files under util\nsubdirectory. They should have been 755 or basically executable.\n\nThanks\n\nIf you want to inform me the status please send email to\nmurthy_gandikota@yahoo.com(In reply to comment #0)\n> Task: \"tar\"\n> \n> The \"dirmode\" attribute settings in the nested \"tarfileset\" element don't work.\n> I seems that in the built tar file the \"order\" of files and directories is not \n> correct. \n> If a directory appears after some contained file, then the directory permission \n> is 777 without respect to the dirmode setting.\n> \n> Example: tar file containing 1 directory \"aaa\" and 1 file \"b\" contained \n> into \"aaa\".\n> \n> If the order in the tar file is the following:\n> /aaa/b 600\n> /aaa   700\n> the result from the extraction will be wrong: \"aaa\" with 777 permissions!\n> \n> In the cases when the directory appears before contained files, we are lucky. \n> In fact, if the order of the above example is opposite:\n> /aaa   700\n> /aaa/b 600\n> the result will be correct.\n\n", "id": 86525, "time": "2006-03-06T15:52:58Z", "bug_id": 36464, "creation_time": "2006-03-06T15:52:58Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 36464, "attachment_id": null, "text": "Murthy, your comment (a) doesnt have anything to do with the reported problem\nand (b), if it was a self contained bug, would be invalid. <tar> doesnt pick up\nfile permission from the file system, because it cant. End of discussion. ", "id": 86530, "time": "2006-03-06T17:06:32Z", "creator": "stevel@apache.org", "creation_time": "2006-03-06T17:06:32Z", "is_private": false}, {"count": 3, "attachment_id": null, "creator": "alexeys@inventigo.com", "is_private": false, "id": 86534, "time": "2006-03-06T18:08:09Z", "bug_id": 36464, "creation_time": "2006-03-06T18:08:09Z", "tags": [], "text": "... at least not before Java 6 is out."}, {"count": 4, "attachment_id": 17972, "creator": "giambattista.didonna@nettest.com", "is_private": false, "id": 87221, "time": "2006-03-24T17:21:50Z", "bug_id": 36464, "creation_time": "2006-03-24T17:21:50Z", "tags": [], "text": "Created attachment 17972\nTest case\n\nExtract, execute \"go\" command and check result with build.xml"}, {"count": 5, "tags": [], "text": "at least after eight years I get the expected result when running your testcase, the extracted bin directory has permissions 755.  Must have been fixed at one point in time, the only thing I'm sure of is it is fixed in 1.9.3 - because that's what I tested.", "attachment_id": null, "id": 172082, "creator": "bodewig@apache.org", "time": "2014-01-05T14:04:38Z", "bug_id": 36464, "creation_time": "2014-01-05T14:04:38Z", "is_private": false}]