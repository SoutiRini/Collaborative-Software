[{"count": 0, "tags": [], "bug_id": 33765, "text": "htdigest creates its digest files with both suid and sgid bits set. I traced its\nexecution and noticed that it actually tries to create the file with full 07777\npermissions, but the FreeBSD kernel ignores sticky, because it's a regular file.\n\nIn htdigest.c is a call to apr_file_open() for the digest file, with -1 in the\nperm argument.\n\nhtpasswd, which uses APR_OS_DEFAULT for the perm argument, creates its files\nwith proper permissions.", "id": 71592, "time": "2005-02-28T08:04:18Z", "creator": "chris+apache@chrullrich.de", "creation_time": "2005-02-28T08:04:18Z", "is_private": false, "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 33765, "is_private": false, "id": 71593, "time": "2005-02-28T08:43:39Z", "creator": "nd@perlig.de", "creation_time": "2005-02-28T08:43:39Z", "tags": [], "text": "Hmm, I'd guess your APR headers are outdated (i.e. not matching the lib\nversion). Could this be?"}, {"count": 2, "tags": [], "bug_id": 33765, "is_private": false, "text": "(In reply to comment #1)\n> Hmm, I'd guess your APR headers are outdated (i.e. not matching the lib\n> version). Could this be?\n\nI don't think so. One, I installed the whole thing from the FreeBSD ports\ncollection, and the APR headers are in the same package as the server, and two,\nthe bug doesn't have anything to do with a wrong #define. In support/htdigest.c,\neven in HEAD, there is a call to apr_file_open() with -1 as fourth argument. Not\nsomething that's #defined to -1, but a literal -1.\n\nAPR_OS_DEFAULT (what htpasswd uses instead) is 07777, but it's special-cased in\nlibapr to use 00666.", "id": 71603, "time": "2005-02-28T13:08:25Z", "creator": "chris+apache@chrullrich.de", "creation_time": "2005-02-28T13:08:25Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 33765, "text": "Good catch! Committed to trunk, will propose for 2.0.x:\n\nhttp://svn.apache.org/viewcvs.cgi?rev=155681&view=rev", "id": 71612, "time": "2005-02-28T15:29:43Z", "creator": "jorton@redhat.com", "creation_time": "2005-02-28T15:29:43Z", "tags": [], "is_private": false}, {"count": 4, "tags": [], "bug_id": 33765, "attachment_id": null, "text": "And committed for 2.0.54, revision 155762.  Thanks for the report!", "id": 71660, "time": "2005-03-01T11:02:53Z", "creator": "jorton@redhat.com", "creation_time": "2005-03-01T11:02:53Z", "is_private": false}]