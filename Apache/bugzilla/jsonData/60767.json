[{"count": 0, "tags": [], "text": "I get an NPE during unit testing of GenerateKey.DistinguishedName class. \n\npublic void test() throws Throwable {\n  DistinguishedName name = new DistinguishedName();\n  name.createParam();\n  name.toString();\n}\n\nCall Stack\norg.apache.tools.ant.taskdefs.GenerateKey$DistinguishedName.encode(GenerateKey.java:138)\norg.apache.tools.ant.taskdefs.GenerateKey$DistinguishedName.toString(GenerateKey.java:122)\ntest()\n\n\npublic String toString() {\n  final int size = params.size();\n  final StringBuffer sb = new StringBuffer();\n  boolean firstPass = true;\n\n  for (int i = 0; i < size; i++) {\n    if (!firstPass) {\n      sb.append(\" ,\");\n    }\n    firstPass = false;\n\n    final DnameParam param = (DnameParam) params.elementAt(i);\n    sb.append(encode(param.getName())); // line 122 \n    sb.append('=');\n    sb.append(encode(param.getValue()));\n  }\n\n  return sb.toString();\n}\n\npublic String encode(final String string) {\n  int end = string.indexOf(','); // line 138 - NPE because string is null\n  ...\n}\n\n\nAt line 138, NPE occurs because DnameParam object (param) created in createParam() does not set its fields properly. So, param.getName() in toString() returns null and passed as an argument of encode(...).\nTo avoid a crash, I think either createParam() should set its fields with default values at least, or a null-checker should be added in toString or encode methods.", "is_private": false, "bug_id": 60767, "id": 197215, "time": "2017-02-22T16:06:05Z", "creator": "mjkim0324@hotmail.com", "creation_time": "2017-02-22T16:06:05Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 60767, "is_private": false, "id": 197691, "attachment_id": null, "creator": "bodewig@apache.org", "creation_time": "2017-03-15T16:53:14Z", "time": "2017-03-15T16:53:14Z", "text": "fixed for 1.9.10 and 1.10.2. Thanks!"}]