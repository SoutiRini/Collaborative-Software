[{"attachment_id": null, "tags": [], "bug_id": 47622, "text": "Element Server HTTP Proxy doesn't permit to record a navigation session on a HTTPS website.\nThis functionality isn't exists in JMeter.", "count": 0, "id": 129373, "time": "2009-08-02T07:55:28Z", "creator": "milamber@apache.org", "creation_time": "2009-08-02T07:55:28Z", "is_private": false}, {"count": 1, "tags": [], "creator": "milamber@apache.org", "attachment_id": 24078, "is_private": false, "id": 129374, "time": "2009-08-02T07:57:16Z", "bug_id": 47622, "creation_time": "2009-08-02T07:57:16Z", "text": "Created attachment 24078\nPatch to add HTTPS's recording with proxy"}, {"count": 2, "tags": [], "text": "Created attachment 24079\nThis zip file contains a (fake) JMeter SSL certificat which show to browser, and start SSL connection. \n\nThe file server.p12 must be put in JMETER_HOME/bin", "attachment_id": 24079, "id": 129375, "creator": "milamber@apache.org", "time": "2009-08-02T07:58:04Z", "bug_id": 47622, "creation_time": "2009-08-02T07:58:04Z", "is_private": false}, {"count": 3, "tags": [], "text": "To test :\nIn Proxy configuration, \"Attempt HTTPS Spoofing\" no need checked.\nUse HTTP Request or HTTP Request HTTPClient (better)\n\nWith your browser, use same proxy (host:port) for all protocols\n\n(If this patch is good, can be replace HTTPS spoofing features in a future release.)", "is_private": false, "id": 129376, "creator": "milamber@apache.org", "time": "2009-08-02T07:59:50Z", "bug_id": 47622, "creation_time": "2009-08-02T07:59:50Z", "attachment_id": null}, {"count": 4, "tags": [], "creator": "milamber@apache.org", "attachment_id": null, "id": 129377, "time": "2009-08-02T08:03:25Z", "bug_id": 47622, "creation_time": "2009-08-02T08:03:25Z", "is_private": false, "text": "I have testing this patch with Firefox 2.0 (linux), 3.0 (linux), 3.5 (windows xp) and Internet Explorer 7 and 8 (xp), no problem to record (after accepting the JMeter ssl cert)\n\n\nHTTPS: Test with issues.apache.org (login, navigate)\nHTTPS: Test with a Alfresco site in https (homepage, login, navigate)\nHTTPS: Test with a Wordpress site with SSL authentication (using SSL Manager in JMeter during proxy record) + HTTP basic authentication, and homepage, login, dashboard, write post, display draft)\nHTTPS: Gmail (login, send mail, read mail, logout)\nHTTPS: Google Docs (new doc)\n\nHTTP: Test with same Alfresco site in http (homepage, login, navigate)\nHTTP: some navigation in Google News, and several news site"}, {"attachment_id": null, "tags": [], "bug_id": 47622, "text": "If you want create your ssl cert:\n\n\nGenerate SSL fake certificate\n===================\nPassword (for ssl cert in zipfile): password\n\n##### Create certificate\nroot@svrtest2:~#  openssl req -new -x509 -days 3652 -keyout serverkey.pem -out servercert.pem\nGenerating a 1024 bit RSA private key\n........++++++\n........................++++++\nwriting new private key to 'serverkey.pem'\nEnter PEM pass phrase:\nVerifying - Enter PEM pass phrase:\n-----\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [AU]:MA\nState or Province Name (full name) [Some-State]:Rabat\nLocality Name (eg, city) []:Temara\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:JMeter\nOrganizational Unit Name (eg, section) []:JMeter\nCommon Name (eg, YOUR name) []:Apache JMeter proxy recorder\nEmail Address []:webmaster@apache.org\n\n###### export to pkcs12 format\nroot@svrtest2:~# openssl pkcs12 -export -in servercert.pem -inkey serverkey.pem -name \"Apache JMeter proxy recorder\" -clcerts -out server.p12\nEnter pass phrase for serverkey.pem:\nEnter Export Password:\nVerifying - Enter Export Password:", "count": 5, "id": 129378, "time": "2009-08-02T08:11:21Z", "creator": "milamber@apache.org", "creation_time": "2009-08-02T08:11:21Z", "is_private": false}, {"count": 6, "tags": [], "bug_id": 47622, "attachment_id": 24103, "id": 129457, "time": "2009-08-04T16:19:37Z", "creator": "milamber@apache.org", "creation_time": "2009-08-04T16:19:37Z", "is_private": false, "text": "Created attachment 24103\nPatch to add HTTPS's recording with proxy\n\nI upgraded the patch to include in file 'build.xml' the server.p12 in the ZIP/TGZ package construction,\nand modified a log message when a ssl request is canceled by browser (ca_unknown / anti-phishing method)."}, {"attachment_id": null, "tags": [], "bug_id": 47622, "is_private": false, "count": 7, "id": 129507, "time": "2009-08-05T17:04:55Z", "creator": "sebb@apache.org", "creation_time": "2009-08-05T17:04:55Z", "text": "Thanks very much for this work - it's fantastic to have HTTPS recording at last.\n\nI made some minor changes to the patch:\n- Generated a new certificate using the Java keytool\n- added scripts to recreate the keystore\n- Renamed store as proxserver.jks\n- added some more properties to configure the keystore\n- tidied up the error handling a bit\n- added some documentation\n\nApplied as \n\nURL: http://svn.apache.org/viewvc?rev=801473&view=rev\nLog:\nBug 47622 - enable recording of HTTPS sessions\nMany thanks to Milamber.\n\nIt will be in nightly builds after r801473."}, {"count": 8, "tags": [], "text": "Thanks for your improvements and integration's patch.\nI'm very happy too for have this functionality in my favorite tool!", "is_private": false, "bug_id": 47622, "id": 129511, "time": "2009-08-05T23:42:54Z", "creator": "milamber@apache.org", "creation_time": "2009-08-05T23:42:54Z", "attachment_id": null}, {"count": 9, "tags": [], "text": "Created attachment 24114\nSmall patch to correct a twice \"Connection\" header on a HTTPS sampler recording by proxy\n\nWhen proxy record a https request, it's put a \"Connection: keep-alive\" header in Headers Manager, but this header is already manage (or not) by HTTP sampler's keep-alive option.\nIn a HTTP request, the \"Connection\" header is \"Proxy-Connection: keep-alive\n\", which is already excluded\n\n(and unused import removed)", "attachment_id": 24114, "bug_id": 47622, "id": 129550, "time": "2009-08-06T15:20:33Z", "creator": "milamber@apache.org", "creation_time": "2009-08-06T15:20:33Z", "is_private": false}, {"count": 10, "tags": [], "creator": "sebb@apache.org", "attachment_id": null, "id": 129607, "time": "2009-08-11T06:42:24Z", "bug_id": 47622, "creation_time": "2009-08-11T06:42:24Z", "is_private": false, "text": "Thanks, added to SVN:\n\nURL: http://svn.apache.org/viewvc?rev=803117&view=rev\nLog:\nBug 47622 - don't add Connection header from browser"}, {"count": 11, "tags": [], "bug_id": 47622, "attachment_id": null, "id": 133374, "time": "2010-01-06T02:47:54Z", "creator": "arijit72@gmail.com", "creation_time": "2010-01-06T02:47:54Z", "is_private": false, "text": "Hi\n\nI was trying to use this patch to record an https login (to our product interface).  In the browser, I had to accept the certificate, and everything worked ok - but when the recorded script is rerun, all I get (in the server response) is the login screen - and this is happening for gmail too.\n\nNot sure whether I should have posted it here - but this is the only relevant link I found. Sorry if this isn't the right place.\n\nRegards\nArijit"}, {"count": 12, "tags": [], "text": "\nYour problem seems be a user sessions status mecanism in your application. Without link with HTTPS proxy. (thus the best place to this problem is the JMeter user list http://jakarta.apache.org/site/mail2.html#JMeter)\nYou must have a \"HTTP Cookie Manager\" in your JMeter test plan for the ID session mechanism, which is used to look up authenticated session. Or some Regular expression post-processor to extract \"view state\" mecanism from your application.\nPlease, check all HTTP parameters / cookies for find sessions status's mecanisms.\n\nMilamber", "attachment_id": null, "id": 133395, "creator": "milamber@apache.org", "time": "2010-01-06T14:24:26Z", "bug_id": 47622, "creation_time": "2010-01-06T14:24:26Z", "is_private": false}, {"count": 13, "tags": [], "bug_id": 47622, "text": "(In reply to comment #12)\n> Your problem seems be a user sessions status mecanism in your application.\n> Without link with HTTPS proxy. (thus the best place to this problem is the\n> JMeter user list http://jakarta.apache.org/site/mail2.html#JMeter)\n> You must have a \"HTTP Cookie Manager\" in your JMeter test plan for the ID\n> session mechanism, which is used to look up authenticated session. Or some\n> Regular expression post-processor to extract \"view state\" mecanism from your\n> application.\n> Please, check all HTTP parameters / cookies for find sessions status's\n> mecanisms.\n> \n> Milamber\n\nThank you. I'll check the user list. One more question - is this patch now part of the stable build? Or should I use the latest nightly builds? I mean I couldn't find the releases mentioned in this thread (except the source files in SVN) - I was wondering whether the latest nightly builds will contain this patch or not...", "id": 133404, "time": "2010-01-06T22:43:43Z", "creator": "arijit72@gmail.com", "creation_time": "2010-01-06T22:43:43Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 47622, "text": "This patch will come with the next JMeter release (2.4) - no release date planned. \nSince this patch is commited in SVN, it is in all nightly builds\nTips: You can use lastest nightly builds to record scenario in HTTPS, and use a version 2.3.4 for run a load tests.", "count": 14, "id": 133405, "time": "2010-01-06T23:39:17Z", "creator": "milamber@apache.org", "creation_time": "2010-01-06T23:39:17Z", "is_private": false}, {"count": 15, "tags": [], "text": "I found a small bug - if I run JMeter and the current directory is not jmeter/bin, HTTPS recording feature does not work, seems JMeter can not read certificate file in this case.", "attachment_id": null, "id": 134346, "creator": "vklepikovskiy@gmail.com", "time": "2010-02-08T14:47:57Z", "bug_id": 47622, "creation_time": "2010-02-08T14:47:57Z", "is_private": false}, {"count": 16, "tags": [], "text": "Thanks for the report. The code has been changed to default to the JMeter bin directory instead of the current working directory:\n\nURL: http://svn.apache.org/viewvc?rev=907847&view=rev\nLog:\nBug 47622 - dummy JMeter certificate resides in the bin directory\nDocument the properties\n\nModified:\n   jakarta/jmeter/trunk/src/protocol/http/org/apache/jmeter/protocol/http/proxy/Proxy.java\n   jakarta/jmeter/trunk/xdocs/usermanual/component_reference.xml", "attachment_id": null, "bug_id": 47622, "id": 134349, "time": "2010-02-08T15:51:09Z", "creator": "sebb@apache.org", "creation_time": "2010-02-08T15:51:09Z", "is_private": false}]