[{"count": 0, "tags": [], "creator": "mathieu.malaterre@gmail.com", "attachment_id": 25014, "text": "Created attachment 25014\nfo file\n\nHere is my input docbook file:\n\n<?xml version='1.0' encoding='UTF-8'?>\n<!DOCTYPE article PUBLIC \"-//OASIS//DTD DocBook XML V4.5//EN\"\n\"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd\" []>\n<article>\n<section>\n <title>title</title>\n<blockquote>\n<para>\nThe <emphasis role=\"bold\"><anchor\nid=\"example.anchor.1\"/>anchor</emphasis> element is empty and\ncontributes\nnothing to the flow of the content in which it occurs.  It is only useful\nas a target.\n</para>\n</blockquote>\n</section>\n</article>\n\nwhich I process with:\n\n/usr/bin/xsltproc --stringparam fop1.extensions 1 --stringparam\nulink.show 0 --xinclude -o test2.fo\n/usr/share/xml/docbook/stylesheet/nwalsh/fo/docbook.xsl test2.xml\n\nand lead to:\n\n$ ./fop test2.fo test2.pdf\nFeb 17, 2010 2:52:18 PM org.apache.fop.apps.FOURIResolver resolve\nSEVERE: Error with opening URL\n'http://docbook.sourceforge.net/release/images/draft.png': Network is\nunreachable\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:9588)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:10285)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:10980)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:11672)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:12361)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:13050)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:13736)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:14427)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:15118)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:15806)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:16496)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:17186)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:17873)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:18563)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:19253)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:19940)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:20631)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:21322)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nSEVERE: Image not found. URI:\nhttp://docbook.sourceforge.net/release/images/draft.png. (See position\n2:22010)\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nWARNING: Font \"Symbol,normal,700\" not found. Substituting with\n\"Symbol,normal,400\".\nFeb 17, 2010 2:52:18 PM org.apache.fop.events.LoggingEventListener processEvent\nWARNING: Font \"ZapfDingbats,normal,700\" not found. Substituting with\n\"ZapfDingbats,normal,400\".\nFeb 17, 2010 2:52:18 PM org.apache.fop.cli.Main startFOP\nSEVERE: Exception\njava.lang.NullPointerException\n       at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:302)\n       at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:130)\n       at org.apache.fop.cli.Main.startFOP(Main.java:174)\n       at org.apache.fop.cli.Main.main(Main.java:205)\n\n---------\n\njava.lang.NullPointerException\n       at org.apache.fop.layoutmgr.inline.InlineStackingLayoutManager.getChangedKnuthElements(InlineStackingLayoutManager.java:375)\n       at org.apache.fop.layoutmgr.inline.InlineLayoutManager.getChangedKnuthElements(InlineLayoutManager.java:537)\n       at org.apache.fop.layoutmgr.inline.InlineStackingLayoutManager.getChangedKnuthElements(InlineStackingLayoutManager.java:380)\n       at org.apache.fop.layoutmgr.inline.InlineLayoutManager.getChangedKnuthElements(InlineLayoutManager.java:537)\n       at org.apache.fop.layoutmgr.inline.LineLayoutManager.findHyphenationPoints(LineLayoutManager.java:1359)\n       at org.apache.fop.layoutmgr.inline.LineLayoutManager.findOptimalBreakingPoints(LineLayoutManager.java:797)\n       at org.apache.fop.layoutmgr.inline.LineLayoutManager.createLineBreaks(LineLayoutManager.java:763)\n       at org.apache.fop.layoutmgr.inline.LineLayoutManager.getNextKnuthElements(LineLayoutManager.java:592)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:571)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:552)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextKnuthElements(BlockStackingLayoutManager.java:280)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:123)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:115)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:571)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:552)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextKnuthElements(BlockStackingLayoutManager.java:280)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:123)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:115)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:571)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:552)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextKnuthElements(BlockStackingLayoutManager.java:280)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:123)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:115)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:571)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextChildElements(BlockStackingLayoutManager.java:552)\n       at org.apache.fop.layoutmgr.BlockStackingLayoutManager.getNextKnuthElements(BlockStackingLayoutManager.java:280)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:123)\n       at org.apache.fop.layoutmgr.BlockLayoutManager.getNextKnuthElements(BlockLayoutManager.java:115)\n       at org.apache.fop.layoutmgr.FlowLayoutManager.getNextChildElements(FlowLayoutManager.java:199)\n       at org.apache.fop.layoutmgr.FlowLayoutManager.addChildElements(FlowLayoutManager.java:140)\n       at org.apache.fop.layoutmgr.FlowLayoutManager.addChildElements(FlowLayoutManager.java:129)\n       at org.apache.fop.layoutmgr.FlowLayoutManager.getNextKnuthElements(FlowLayoutManager.java:70)\n       at org.apache.fop.layoutmgr.PageBreaker.getNextKnuthElements(PageBreaker.java:216)\n       at org.apache.fop.layoutmgr.AbstractBreaker.getNextBlockList(AbstractBreaker.java:692)\n       at org.apache.fop.layoutmgr.PageBreaker.getNextBlockList(PageBreaker.java:149)\n       at org.apache.fop.layoutmgr.PageBreaker.getNextBlockList(PageBreaker.java:132)\n       at org.apache.fop.layoutmgr.AbstractBreaker.doLayout(AbstractBreaker.java:337)\n       at org.apache.fop.layoutmgr.PageBreaker.doLayout(PageBreaker.java:85)\n       at org.apache.fop.layoutmgr.PageSequenceLayoutManager.activateLayout(PageSequenceLayoutManager.java:107)\n       at org.apache.fop.area.AreaTreeHandler.endPageSequence(AreaTreeHandler.java:238)\n       at org.apache.fop.fo.pagination.PageSequence.endOfNode(PageSequence.java:120)\n       at org.apache.fop.fo.FOTreeBuilder$MainFOHandler.endElement(FOTreeBuilder.java:349)\n       at org.apache.fop.fo.FOTreeBuilder.endElement(FOTreeBuilder.java:177)\n       at org.apache.xalan.transformer.TransformerIdentityImpl.endElement(TransformerIdentityImpl.java:1101)\n       at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source)\n       at org.apache.xerces.xinclude.XIncludeHandler.endElement(Unknown Source)\n       at org.apache.xerces.impl.XMLNSDocumentScannerImpl.scanEndElement(Unknown\nSource)\n       at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown\nSource)\n       at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown\nSource)\n       at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n       at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)\n       at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)\n       at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)\n       at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)\n       at org.apache.xalan.transformer.TransformerIdentityImpl.transform(TransformerIdentityImpl.java:484)\n       at org.apache.fop.cli.InputHandler.transformTo(InputHandler.java:299)\n       at org.apache.fop.cli.InputHandler.renderTo(InputHandler.java:130)\n       at org.apache.fop.cli.Main.startFOP(Main.java:174)\n       at org.apache.fop.cli.Main.main(Main.java:205)", "id": 134640, "time": "2010-02-18T11:40:55Z", "bug_id": 48765, "creation_time": "2010-02-18T11:40:55Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "mathieu.malaterre@gmail.com", "is_private": false, "count": 1, "id": 134641, "time": "2010-02-18T11:42:05Z", "bug_id": 48765, "creation_time": "2010-02-18T11:42:05Z", "text": "one possible way to work around this segfault is to pass the following to the xsltproc engine:\n\n\n      --stringparam hyphenate 0"}, {"count": 2, "tags": [], "bug_id": 48765, "is_private": false, "text": "This is the offending fo:block\n\n<fo:block space-before.optimum=\"1em\" space-before.minimum=\"0.8em\" space-before.maximum=\"1.2em\" >\nThe <fo:inline font-weight=\"bold\">\n\t\t<fo:inline id=\"example.anchor.1\"/>anchor</fo:inline> element is empty and contributes\nnothing to the flow of the content in which it occurs.  It is only useful\nas a target.\n</fo:block>\n\nAdding hyphenate=\"false\" to the fo:block avoids the NPE. \nAdding a text to the empty fo:inline avoids the NPE. \nRemoving the id attibute avoids the NPE.", "id": 134642, "time": "2010-02-18T11:54:25Z", "creator": "gd@geneon.de", "creation_time": "2010-02-18T11:54:25Z", "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "vhennebert@gmail.com", "is_private": false, "count": 3, "id": 134644, "time": "2010-02-18T12:10:52Z", "bug_id": 48765, "creation_time": "2010-02-18T12:10:52Z", "text": "Might have something to do with bug #46386"}, {"attachment_id": 25073, "tags": [], "creator": "mathieu.malaterre@gmail.com", "is_private": false, "count": 4, "id": 134965, "time": "2010-03-01T09:53:59Z", "bug_id": 48765, "creation_time": "2010-03-01T09:53:59Z", "text": "Created attachment 25073\nproposed patch"}, {"count": 5, "tags": [], "bug_id": 48765, "text": "(In reply to comment #4)\n> Created an attachment (id=25073) [details]\n> proposed patch\n\nI patched my fop and then it worked, but this patch opens up this issue again: #42748, where a <fo:inline id=\"{$id}\"/> cause a \"WARNING: Page ?: Unresolved id reference \"???\" found.\"", "id": 137055, "time": "2010-05-23T15:07:18Z", "creator": "post@belahausmann.name", "creation_time": "2010-05-23T15:07:18Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 48765, "is_private": false, "text": "I found a dirty workaround so that everything works 'till this is fixed:\n\nAdd this to your fo XSL file\n\n<xsl:template match=\"anchor\">\n  <xsl:variable name=\"id\">\n    <xsl:call-template name=\"object.id\"/>\n  </xsl:variable>\n  <fo:inline id=\"{$id}\">\ufeff</fo:inline>\n</xsl:template>\n\nNote that there should be the ZERO WIDTH NO-BREAK SPACE unicode charater (U+FEFF) in the fo:inline tag (<fo:inline id=\"{$id}\">U+FEFF</fo:inline>). A unicode font is probably needed for this to work.", "id": 137056, "time": "2010-05-23T15:34:47Z", "creator": "post@belahausmann.name", "creation_time": "2010-05-23T15:34:47Z", "attachment_id": null}, {"count": 7, "tags": [], "bug_id": 48765, "text": "I'm also having problems with hyphenation and DocBook <anchor> tags. Do you already know when this bug will be resolved? Thanks!\n\nMichel", "id": 147706, "time": "2011-07-03T12:15:12Z", "creator": "michel@undercouch.de", "creation_time": "2011-07-03T12:15:12Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "resetting P2 open bugs to P3 pending further review", "is_private": false, "bug_id": 48765, "id": 157599, "time": "2012-04-07T01:45:08Z", "creator": "gadams@apache.org", "creation_time": "2012-04-07T01:45:08Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 48765, "text": "*** Bug 53586 has been marked as a duplicate of this bug. ***", "id": 160828, "time": "2012-07-23T11:20:38Z", "creator": "psancho.asf@gmail.com", "creation_time": "2012-07-23T11:20:38Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "creator": "psancho.asf@gmail.com", "is_private": false, "count": 10, "id": 162532, "time": "2012-10-03T07:02:09Z", "bug_id": 48765, "creation_time": "2012-10-03T07:02:09Z", "text": "*** Bug 53955 has been marked as a duplicate of this bug. ***"}]