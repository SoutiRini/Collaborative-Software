[{"count": 0, "tags": [], "bug_id": 48563, "is_private": false, "text": "Created attachment 24852\nPatches dist.xml to first detect whether output/extras exists before trying to copy its content.\n\nRunning:\n\n$ ant -f dist.xml\n\nin trunk fails right now with this output at the end:\n\nrelease:\n     [copy] Copying 1 file to /home/jasonb/svn/tomcat-trunk/output/release/v7.0.0-dev\n     [copy] Copying 1 file to /home/jasonb/svn/tomcat-trunk/output/release/v7.0.0-dev\n     [copy] Copying 1 file to /home/jasonb/svn/tomcat-trunk/output/release/v7.0.0-dev\n     [copy] Copying 1 file to /home/jasonb/svn/tomcat-trunk/output/release/v7.0.0-dev/bin\n    [mkdir] Created dir: /home/jasonb/svn/tomcat-trunk/output/release/v7.0.0-dev/bin/extras\n\nBUILD FAILED\n/home/jasonb/svn/tomcat-trunk/dist.xml:384: /home/jasonb/svn/tomcat-trunk/output/extras not found.\n\nIt fails this way when I build in this order:\n\n$ ant download\n$ ant\n$ ant -f dist.xml\n\nI've attached a patch that fixes the problem.\n\nThanks.\n--\nJason", "id": 133664, "time": "2010-01-17T16:08:42Z", "creator": "jason.brittain@gmail.com", "creation_time": "2010-01-17T16:08:42Z", "attachment_id": 24852}, {"count": 1, "tags": [], "bug_id": 48563, "attachment_id": null, "is_private": false, "id": 133665, "time": "2010-01-17T16:39:39Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2010-01-17T16:39:39Z", "text": "Neither TC 7 nor TC 6 build will fail if you build it in this order:\n\n$ ant download\n$ ant\n$ ant -f extras.xml\n$ ant -f dist.xml release\n\n\nA release has to include extras, so I doubt that this deserves be fixed, but others may have a different opinion on this.\n\nAt least we can add some \"check-extras\" target into the dependencies list of \"release\" one, so to fail earlier."}, {"count": 2, "tags": [], "creator": "jason.brittain@gmail.com", "text": "Whether extras are required to be built and distributed or not is subjective, I agree.  Here are the reasons I thought building extras was optional:\n- The name \"extras\" makes it sound optional\n- The fact that it is a separate, additional command to build extras\n- Extras' build is split out into a separate Ant build file from that of the rest of Tomcat\n- Not everyone who is building their own Tomcat zip or tar.gz (ready to run) will need or wants the extras\n- The one thing that I could see that was preventing it from being optional was this single directory check (now fixed)", "id": 133666, "time": "2010-01-17T18:52:56Z", "bug_id": 48563, "creation_time": "2010-01-17T18:52:56Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 134001, "time": "2010-01-28T13:05:59Z", "bug_id": 48563, "creation_time": "2010-01-28T13:05:59Z", "is_private": false, "text": "I'd like to move to a single build.xml file and to clean up the various dependencies between the build targets. Since the extras are part of the release, even if they aren't part of the standard download, I don't see the harm in moving to a single file.\n\nThe end goal is to be able to do:\nsvn co https://svn.apache.org/repos/asf/tomcat/trunk\nant release\n\nand have a complete release locally with one or more targets to upload the release files to the right places on ASF infrastructure. The other targets will be retained, with the correct dependencies, for folks that want to run a specific target for whatever reason."}, {"count": 4, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 134134, "time": "2010-02-02T05:19:09Z", "bug_id": 48563, "creation_time": "2010-02-02T05:19:09Z", "is_private": false, "text": "build.xml, extras.xml and dist.xml have been merged and the dependencies fixed."}]