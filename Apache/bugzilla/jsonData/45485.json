[{"count": 0, "tags": [], "bug_id": 45485, "text": "Created attachment 22319\nAgent.java rewritten with reflection\n\nAs part of an effort to remove the need to download components manually (outside Maven) I have found that when compiling with Java 5+ it is only Agent.java which need the jmxtools.jar in the compilation class path.\n\nThe attached patch is a rewrite of Agent.java using reflection so it can compile without the presence of jmxtools.jar.  I would appreciate help in getting a test environment running.", "id": 119026, "time": "2008-07-25T10:30:14Z", "creator": "thorbjoern@gmail.com", "creation_time": "2008-07-25T10:30:14Z", "is_private": false, "attachment_id": 22319}, {"count": 1, "attachment_id": 22340, "creator": "thorbjoern@gmail.com", "is_private": false, "id": 119189, "time": "2008-07-31T09:13:45Z", "bug_id": 45485, "creation_time": "2008-07-31T09:13:45Z", "tags": [], "text": "Created attachment 22340\nWhole file (if patch is bad)"}, {"attachment_id": null, "tags": [], "creator": "thorbjoern@gmail.com", "text": "Additionally these dependencies can be removed from pom.xml\n\n   <dependency>\n      <groupId>com.sun.jdmk</groupId>\n      <artifactId>jmxtools</artifactId>\n      <version>1.2.1</version>\n      <optional>true</optional>\n    </dependency>\n    <dependency>\n      <groupId>com.sun.jmx</groupId>\n      <artifactId>jmxri</artifactId>\n      <version>1.2.1</version>\n      <optional>true</optional>\n    </dependency>\n", "count": 2, "id": 119190, "time": "2008-07-31T09:14:59Z", "bug_id": 45485, "creation_time": "2008-07-31T09:14:59Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 45485, "text": "While I like the idea of removing the compile time dependency to those evil Sun jars, I'm not so sure swallowing an exception is such a good idea, from a stylistic point I think wrapping that exception and throwing an IllegalStateException would be better.\n\nLets face it, if the Exception does happen, the use probably wants to know about it (yes there's logging, but is continuing in the face of error a good idea here?)\n\nStill, that removal of the Sun jar dependency is tempting! :)", "id": 119204, "time": "2008-07-31T15:32:33Z", "creator": "psmith@apache.org", "creation_time": "2008-07-31T15:32:33Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 45485, "is_private": false, "count": 4, "id": 119209, "time": "2008-07-31T15:43:33Z", "creator": "thorbjoern@gmail.com", "creation_time": "2008-07-31T15:43:33Z", "text": "(In reply to comment #3)\n> While I like the idea of removing the compile time dependency to those evil Sun\n> jars, I'm not so sure swallowing an exception is such a good idea, from a\n> stylistic point I think wrapping that exception and throwing an\n> IllegalStateException would be better.\n> \n> Lets face it, if the Exception does happen, the use probably wants to know\n> about it (yes there's logging, but is continuing in the face of error a good\n> idea here?)\n> \n> Still, that removal of the Sun jar dependency is tempting! :)\n\nYes.\n\nFrom what I understand the try-catch-log.error-return approach is the way it is done elsewhere.\n"}, {"count": 5, "tags": [], "bug_id": 45485, "is_private": false, "text": "Created attachment 22389\nAlternative patch that preserves existing log4j behavior\n\nThis patch changes the checked exceptions raised by reflection into the equivalent error that would occur with the previous code in the same scenario.", "id": 119420, "time": "2008-08-05T12:15:22Z", "creator": "carnold@apache.org", "creation_time": "2008-08-05T12:15:22Z", "attachment_id": 22389}, {"count": 6, "tags": [], "bug_id": 45485, "text": "Committed last patch in rev 682879, modified to throw RuntimeException instead of Errors in rev 682998 and 683009 per discussion on log4j-dev.", "id": 119721, "time": "2008-08-12T08:45:37Z", "creator": "carnold@apache.org", "creation_time": "2008-08-12T08:45:37Z", "is_private": false, "attachment_id": null}]