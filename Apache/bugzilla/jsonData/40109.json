[{"count": 0, "tags": [], "creator": "bhaktavatsalam.yadlapalli@radian.biz", "text": "I am tomcat 4.1.29 as standalone web server with the CoyoteConnector and the \nconfiguration as follows\n\n \n\n    <Connector className=\"org.apache.coyote.tomcat4.CoyoteConnector\"\n\nport=\"8080\"               minProcessors=\"5\" maxProcessors=\"75\"\n\n               enableLookups=\"true\" redirectPort=\"8443\"\n\n               acceptCount=\"100\" debug=\"0\" connectionTimeout=\"20000\"\n\n               useURIValidationHack=\"false\" disableUploadTimeout=\"true\" />\n\n \n\nI noticed the memory leak if there are multiple repeated requests from same \nbrowser simultaneously without waiting for response. It is keep accumulating \nthe memory and not releasing for eve r(even after the session timeout). \n\n \n\nSimilar test case with 100 requests ( ran to completion) one after other is \nnot leaking any memory.\n\n \n\nWe are using Synchronized Token while submitting the forms but we are not \nusing the same in other cases like HTTP/GET.\n\n \n\nI ran the tomcat with JProfiler and noticed that the memory leak is pointing \nto org.apache.coyote.http11.InternalInputBuffer.\n\n \n\nI used the Tomcat 4.1.31 and still has same problem.", "id": 91575, "time": "2006-07-25T13:05:35Z", "bug_id": 40109, "creation_time": "2006-07-25T13:05:35Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "id": 91633, "time": "2006-07-26T23:38:45Z", "bug_id": 40109, "creation_time": "2006-07-26T23:38:45Z", "is_private": false, "text": "This is as expected. The InputBuffers, along with other objects, are recycled\nbetween requests. Sequential requests will probably use the same thread so no\nnew objects are created. Parallel requsts use multiple threads hence multiple\nobjects. Therefore memory usage grows under load to a maximum. You are just\nseeing the initial stages of this."}, {"count": 2, "tags": [], "creator": "bhaktavatsalam.yadlapalli@radian.biz", "attachment_id": null, "id": 91655, "time": "2006-07-27T12:16:07Z", "bug_id": 40109, "creation_time": "2006-07-27T12:16:07Z", "is_private": false, "text": "The memory is keep increasing if I do the same test every time and the memory \nis poingint to InternalInputBuffer as mentioned.\n\nI tried the same with Tomcat 5.0.28 and there memory accumulation in this \nversion."}]