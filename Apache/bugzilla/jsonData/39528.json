[{"count": 0, "tags": [], "text": "the check in modules/proxy/ajp_header.c line 712:\nexpected_len = msg->len - (AJP_HEADER_LEN + AJP_HEADER_SZ_LEN + 1 + 1);\nIs giving me \"off by one errors\":\n[Tue May 09 09:59:58 2006] [error] ajp_parse_data: Wrong chunk length. Length of\nchunk is 8186, expected length is 8185.\n[Tue May 09 09:59:58 2006] [error] (120007)APR does not understand this error\ncode: proxy: send body failed to (null) (server)\n[Tue May 09 09:59:59 2006] [error] ajp_parse_data: Wrong chunk length. Length of\nchunk is 135, expected length is 134.\n[Tue May 09 09:59:59 2006] [error] (120007)APR does not understand this error\ncode: proxy: send body failed to (null) (server)\n\nChanging the line to:\nexpected_len = msg->len - (AJP_HEADER_LEN + AJP_HEADER_SZ_LEN + 1 );\nMakes it work right.", "is_private": false, "id": 88944, "creator": "edward@linpro.no", "time": "2006-05-09T08:20:50Z", "bug_id": 39528, "creation_time": "2006-05-09T08:20:50Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 39528, "is_private": false, "id": 88956, "time": "2006-05-09T14:10:26Z", "creator": "rpluem@apache.org", "creation_time": "2006-05-09T14:10:26Z", "tags": [], "text": "What kind of ajp server are you using? If Tomcat please let me know the version\nyou are using."}, {"count": 2, "tags": [], "creator": "edward@linpro.no", "is_private": false, "id": 88960, "creation_time": "2006-05-09T14:19:33Z", "time": "2006-05-09T14:19:33Z", "bug_id": 39528, "text": "Server: Oracle Application Server Containers for J2EE 10g (9.0.4.0.0)", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 39528, "is_private": false, "id": 88983, "time": "2006-05-10T05:30:36Z", "creator": "rpluem@apache.org", "creation_time": "2006-05-10T05:30:36Z", "tags": [], "text": "So the Oracle Application Server does not sent the correct chunk length as\nmod_proxy_ajp works fine with Tomcat. As stated in the comment above the code\nthe terminating zero of the message does not belong to the chunk itself and is\nnot contained in the chunk length (but in the message length). This works this\nway since Tomcat 4.0.x. Changing the line to what you have proposed would make\nmod_proxy_ajp stop working with Tomcat.\n"}, {"count": 4, "tags": [], "creator": "edward@linpro.no", "is_private": false, "id": 88991, "creation_time": "2006-05-10T12:39:19Z", "time": "2006-05-10T12:39:19Z", "bug_id": 39528, "text": "ok!\nMore testing shows that running mod_proxy_ajp (with my fix) makes my oc4j\nservers crash :) ", "attachment_id": null}, {"count": 5, "tags": [], "text": "I'm having the same problem with OC4J-10.1.3.3 using mod_proxy_ajp in Apache-2.2.9. Anyone knows a fix for this?", "attachment_id": null, "id": 119340, "creator": "andreak@officenet.no", "time": "2008-08-04T01:52:58Z", "bug_id": 39528, "creation_time": "2008-08-04T01:52:58Z", "is_private": false}]