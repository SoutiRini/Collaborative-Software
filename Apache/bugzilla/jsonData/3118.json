[{"count": 0, "tags": [], "bug_id": 3118, "text": "I am not able to get the log4j.properties file properly initialized using the \nlog4j example JSP pages.  I've tried it in both Tomcat (3.2) and JRun (3.1) \nwith the same results.  I read the documentation and followed the suggestion of \nleaving the log4j.properties file in the WEB-INF\\classes file.\n\nBriefly here are the steps I followed to get the error:\n\n1. unzipped the contents of \"log-examples.war\" into \"\\tomcat\\webapps\\log4j\".\n2. verified the WEB-INF\\web.xml file contained the references to the log.tld.\n3. verified the log4j jar files were in the WEB-INF\\lib directory.\n4. created a log4j webapp in Tomcat's server.xml.\n5. opened url http://localhost/log4j/index.html.\n6. clicked on the \"test1\" link and the test1.jsp displayed \"Test debug; you \nshould see output in the debug logs now\".\n\nI was expecting to find log messages in the Tomcat stdout file, based on the \nlog4j.properties file (left it asis; no changes were made to it from the \ndistribution).\n\n\nBELOW ARE LAST LINES OF TOMCAT STDOUT FILE WITH LOG4J ERRORS:\n2001-08-14 09:28:17 - ContextManager: Adding context Ctx( /log4j )\n2001-08-14 09:28:17 - ContextManager: Adding context Ctx( /servlet )\n2001-08-14 09:28:17 - ContextManager: Adding context Ctx( /admin )\n2001-08-14 09:28:17 - ContextManager: Adding context Ctx(  )\n2001-08-14 09:28:19 - PoolTcpConnector: Starting HttpConnectionHandler on 80\n2001-08-14 09:28:19 - PoolTcpConnector: Starting Ajp12ConnectionHandler on 8007\nlog4j:ERROR No appenders could be found for category (root).\nlog4j:ERROR Please initialize the log4j system properly.\n\n\nBELOW IS OUTPUT OF JASPER LOGFILE SHOWING CLASSPATH INFO:\n2001-08-14 09:28:18 - IMPORTANT: Do not modify the generated servlets\n2001-08-14 09:28:45 - JspEngine --> /test1.jsp\n2001-08-14 09:28:45 - \t     ServletPath: /test1.jsp\n2001-08-14 09:28:45 - \t        PathInfo: null\n2001-08-14 09:28:45 - \t        RealPath: D:\\tomcat\\webapps\\log4j\\test1.jsp\n2001-08-14 09:28:45 - \t      RequestURI: /log4j/test1.jsp\n2001-08-14 09:28:45 - \t     QueryString: null\n2001-08-14 09:28:45 - \t  Request Params: \n2001-08-14 09:28:45 - Classpath according to the Servlet Engine is: \nD:\\tomcat\\webapps\\log4j\\WEB-INF\\classes;D:\\tomcat\\webapps\\log4j\\WEB-\nINF\\lib\\log.jar;D:\\tomcat\\webapps\\log4j\\WEB-INF\\lib\\log4j-core.jar", "id": 4554, "time": "2001-08-14T07:14:15Z", "creator": "ghughlett@mtwcorp.com", "creation_time": "2001-08-14T07:14:15Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "ghughlett@mtwcorp.com", "is_private": false, "id": 4555, "attachment_id": 421, "bug_id": 3118, "creation_time": "2001-08-14T07:16:11Z", "time": "2001-08-14T07:16:11Z", "text": "Created attachment 421\nmy log4j.properties file"}, {"count": 2, "tags": [], "bug_id": 3118, "is_private": false, "id": 4561, "creation_time": "2001-08-14T11:22:30Z", "time": "2001-08-14T11:22:30Z", "creator": "cgu@qos.ch", "text": "\nWrong buglist. You probably want to try on the taglibs project.", "attachment_id": null}, {"count": 3, "tags": [], "creator": "ghughlett@mtwcorp.com", "attachment_id": null, "text": "Sorry, but according to the Taglib team this is the place to enter Taglib \nbugs...Isn't that what \"Product\" above means ?", "id": 4570, "time": "2001-08-14T13:26:42Z", "bug_id": 3118, "creation_time": "2001-08-14T13:26:42Z", "is_private": false}, {"count": 4, "text": "\nI am reassigning bug to the owner of Taglibs. Regards, Ceki\n\n", "bug_id": 3118, "is_private": false, "id": 4571, "time": "2001-08-14T13:33:48Z", "creator": "cgu@qos.ch", "creation_time": "2001-08-14T13:33:48Z", "tags": [], "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 3118, "attachment_id": null, "id": 4619, "time": "2001-08-18T09:19:56Z", "creator": "ghughlett@mtwcorp.com", "creation_time": "2001-08-18T09:19:56Z", "is_private": false, "text": "any idea as to when the Taglib team will be looking into my problem?"}, {"count": 6, "tags": [], "creator": "jstrachan@apache.org", "attachment_id": null, "id": 4620, "time": "2001-08-18T12:52:32Z", "bug_id": 3118, "creation_time": "2001-08-18T12:52:32Z", "is_private": false, "text": "AFAIK log4j should find the logj4.properties file in WEB-INF/classes. Maybe the \nJSP / taglib code doesn't have access to the WEB-INF/classes ClassLoader on \nTomcat 3.2 / JRun 3.1.\n\nI've tried this with Tomcat 4.0 beta 6 and it appears to work fine.\n\nMaybe a workaround on Tomcat 3.2 and JRun 3.1 is to explicitly add a directory \nto your system CLASSPATH and put log4j.properties in that directory, so that \nlog4j.properties can be found properly.\n\nOr an alternative could be to write a Servlet to initialize log4j on startup.\n\nThe problem appears to be that taglib code using log4j doesn't seem to be able \nto see the log4j.properties file on the CLASSPATH - which sounds like a \ncontainer problem.\n\nThere is nothing the taglib can do to change how log4j looks for its \nlog4j.properties file, nor can it work around class loader wierdness in \ncontainers - so I'm afraid a work around is required to initialise log4j.\n\nMaybe log4j could come with a standard Servlet that could be used to initialise \nlog4j in circumstances such as these."}]