[{"count": 0, "tags": [], "bug_id": 45488, "text": "I am new to this system so hopefully I am not breaking any honor code by filing this report. I have found several bug reports related to trying to use Kupu to change content and saving. Some of those bug reports lead me to belive that the problem is fixed. So like a good lemming I went and checked out the trunk and did a build to see for myself. The problem still exists.\n\nThe only benefit I care about other than cms as a whole is that I can turn over content development to completely non-technical marketing people. So this problem makes Lenya useless to me. I still have to be involved to change website content. Can someone please fix this problem once and for all?\n\nI went into the default publication after the build clicked the create defualt content, edited the home page with Kupu inserted a 2x2 table using the toolbar and tried to save.\n\nMessage: Error saving your data. Response status: 415 Check your server log for more information. \n\n2008-07-27 10:03:20,173 [SocketListener0-9] ERROR lenya.publication - error: element \"table\" from namespace \"http://www.w3.org/1999/xhtml\" not allowed in this context\n2008-07-27 10:03:20,173 [SocketListener0-9] ERROR lenya.publication - error: attribute \"border\" not allowed at this point; ignored\n2008-07-27 10:03:20,173 [SocketListener0-9] ERROR lenya.publication - error: unknown element \"tbody\" from namespace \"http://www.w3.org/1999/xhtml\"\n2008-07-27 10:03:20,173 [SocketListener0-9] ERROR lenya.publication - error: unfinished element", "id": 119042, "time": "2008-07-27T10:23:34Z", "creator": "brian_f_johnson@yahoo.com", "creation_time": "2008-07-27T10:23:34Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 45488, "attachment_id": null, "text": "I also encountered this problem early on in the evaluation of Lenya.  From what I discovered, it is not due to a bug in the code, but a configuration issue.\n\nI have found three ways you can resolve the problem:\n\n1. Remove the offending tags in Kupu's HTML mode (not always appropriate)\n2. Have Kupu filter the tags before sending them to Lenya\n3. Relax the DTD for XHTML in Lenya\n\nTo have Kupu filter the tags, you need to take a look at the NonXHTMLTagFilter() function in lenya/modules/kupu/resources/kupu/common/kupucontentfilters.js.  The comments in the function explain how the array affects the filtering.\n\nTo have Lenya relax it's XHTML schema, you need to look at the following files:\n\nlenya/modules/xhtml/resources/schemas/xhtml.rng\nlenya/modules/xhtml/resources/schemas/xhtml/xhtml-basic.rng\nlenya/modules/xhtml/resources/schemas/xhtml/modules/*.rng\n\nThe first two just describe which of the modules/*.rng will get used.  You need to check the entire include path to ensure the correct .rng files get used and then edit them appropriately (if required).\n\nFor the issue you have described below, including table.rng instead of basic-table.rng will resolve it.  Kupu puts <tbody> and <thead> tags into the XHTML for you and they are not defined in the table-basic.rng.\n\nThis is probably not the best way to achieve this, but for the moment it suits my needs.  If I figure out a more appropriate workaround I'll post it here.\n\nHTH,\nScott\n\n", "id": 123623, "time": "2008-12-30T03:18:01Z", "creator": "scott.deakin@ntlworld.com", "creation_time": "2008-12-30T03:18:01Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 45488, "text": "*** Bug 44332 has been marked as a duplicate of this bug. ***", "id": 123625, "time": "2008-12-30T03:22:51Z", "creator": "scott.deakin@ntlworld.com", "creation_time": "2008-12-30T03:22:51Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 45488, "text": "(In reply to comment #1)\n\n> For the issue you have described below, including table.rng instead of\n> basic-table.rng will resolve it.  Kupu puts <tbody> and <thead> tags into the\n> XHTML for you and they are not defined in the table-basic.rng.\n\nRudolf has implemented this workaround. Can we close this issue?", "id": 126281, "time": "2009-04-16T04:35:11Z", "creator": "andreas@apache.org", "creation_time": "2009-04-16T04:35:11Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 45488, "text": "(In reply to comment #3)\n> (In reply to comment #1)\n> \n> > For the issue you have described below, including table.rng instead of\n> > basic-table.rng will resolve it.  Kupu puts <tbody> and <thead> tags into the\n> > XHTML for you and they are not defined in the table-basic.rng.\n> \n> Rudolf has implemented this workaround. Can we close this issue?\n\nThis influences all editors, eg TinyMCE as well. Filtering the HTML might be better. I append a patch that seems to work without this workaround.\n\n Rainer", "id": 127648, "time": "2009-06-04T08:22:15Z", "creator": "rainer.schoepf@gmx.net", "creation_time": "2009-06-04T08:22:15Z", "is_private": false, "attachment_id": null}, {"count": 5, "tags": [], "bug_id": 45488, "attachment_id": 23762, "id": 127651, "time": "2009-06-04T08:29:25Z", "creator": "rainer.schoepf@gmx.net", "creation_time": "2009-06-04T08:29:25Z", "is_private": false, "text": "Created attachment 23762\nPatch to kupu config to filter non-basic XHTML tags."}, {"count": 6, "tags": [], "bug_id": 45488, "attachment_id": null, "id": 127653, "time": "2009-06-04T08:37:47Z", "creator": "rfrovarp@apache.org", "creation_time": "2009-06-04T08:37:47Z", "is_private": false, "text": "(In reply to comment #5)\n> Created an attachment (id=23762) [details]\n> Patch to kupu config to filter non-basic XHTML tags.\n\nOne small problem. Everything under src/modules/kupu/resources/kupu is actually in the Kupu repo. I posted a patch to their dev list last year or the year before and it never received action. Is there someone in our group that has commit access to their svn?"}, {"count": 7, "tags": [], "text": "I added a build script in revision 790621 which applies the patch. Please test, TIA!", "attachment_id": null, "id": 128484, "creator": "andreas@apache.org", "time": "2009-07-02T08:16:15Z", "bug_id": 45488, "creation_time": "2009-07-02T08:16:15Z", "is_private": false}, {"count": 8, "tags": [], "bug_id": 45488, "attachment_id": null, "id": 138387, "time": "2010-07-13T11:33:09Z", "creator": "rfrovarp@apache.org", "creation_time": "2010-07-13T11:33:09Z", "is_private": false, "text": "Should be fixed in 2.0.3.\n\nKupu will not be supported in future versions."}]