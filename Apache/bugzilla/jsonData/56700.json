[{"count": 0, "tags": [], "bug_id": 56700, "attachment_id": null, "is_private": false, "id": 176261, "time": "2014-07-06T23:22:23Z", "creator": "trejkaz@trypticon.org", "creation_time": "2014-07-06T23:22:23Z", "text": "Our builds always clean the build dir like this:\n\n    <delete dir=\"build\" />\n\nHowever, I just deleted a couple of my applications, thanks to having a symlink to /Applications and Ant's default behaviour being to follow the symlinks.\n\nI now know that I have to do this to get safe behaviour (added in Bug 22632):\n\n    <delete quiet=\"true\" removeNotFollowedSymlinks=\"true\">\n        <fileset dir=\"build\" followsymlinks=\"false\"/>\n    </delete>\n\nI know that having the less useful defaults for tasks is something like an Ant culture, but in this particular case, the potential for damage is quite high, so I think that the default behaviour should be the safe behaviour."}, {"count": 1, "tags": [], "creator": "trejkaz@trypticon.org", "is_private": false, "text": "This workaround of using removeNotFollowedSymlinks=\"true\" doesn't appear to delete symlinks... so I'm not sure there is a real workaround without using <exec>.\n\nCurrently we have to use rm directly.\n\n        <exec executable=\"rm\">\n            <arg value=\"-rf\"/>\n            <arg path=\"build\"/>\n        </exec>", "id": 190399, "time": "2016-04-20T06:54:30Z", "bug_id": 56700, "creation_time": "2016-04-20T06:54:30Z", "attachment_id": null}]