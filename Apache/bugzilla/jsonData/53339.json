[{"count": 0, "tags": [], "bug_id": 53339, "text": "I'm trying to do a JNDI lookup inside the \"onOpen\" method of my StreamInbound class, but it gives me the exception below.  The code works if I move my JNP JARs to the server lib instead of the webapp lib.  The code also works fine from anywhere else, like in the \"doGet\" method.\n\n\nERROR http-bio-8080-exec-3 Test \njavax.naming.NoInitialContextException: Cannot instantiate class: org.jnp.interfaces.NamingContextFactory [Root exception is java.lang.ClassNotFoundException: org.jnp.interfaces.NamingContextFactory]\n\tat javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:657)\n\tat javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)\n\tat javax.naming.InitialContext.init(InitialContext.java:223)\n\tat javax.naming.InitialContext.<init>(InitialContext.java:197)\n\tat Test$TestStreamInbound.onOpen(Test.java:103)\n\tat org.apache.catalina.websocket.StreamInbound.onUpgradeComplete(StreamInbound.java:180)\n\tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)\n\tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\n\tat java.lang.Thread.run(Thread.java:662)", "id": 159572, "time": "2012-05-31T18:20:53Z", "creator": "ajkrank70@gmail.com", "creation_time": "2012-05-31T18:20:53Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 53339, "text": "I suspect we need to set the TCCL correctly for web socket calls.", "id": 159573, "time": "2012-05-31T18:22:48Z", "creator": "markt@apache.org", "creation_time": "2012-05-31T18:22:48Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 53339, "text": "Fixed in trunk and 7.0.x and will be included in 7.0.28 onwards.", "id": 159654, "time": "2012-06-03T18:51:09Z", "creator": "markt@apache.org", "creation_time": "2012-06-03T18:51:09Z", "is_private": false, "attachment_id": null}]