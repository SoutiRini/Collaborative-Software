[{"text": "I have running nexus web application server (sonatype corp) on tomcat.\n\nTo I tried to stop tomcat, I executed \"bin/catalina.sh stop\". It seemed that it would work. As a result, I could not connect tomcat.\nBut tomcat daemon was alive for 20 minutes like below.\n\n# ps -ef | grep java\nroot      1398     1  7 20:01 pts/2    00:00:24 /usr/local/j2se/bin/java -Djava.util.logging.config.file=/usr/local/tomcat6/conf/logging.properties -Xms1000m -Xmx1000m -XX:+UseParallelGC -XX:+UseParallelOldGC -XX:+DisableExplicitGC -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/local/tomcat6/endorsed -classpath /usr/local/tomcat6/bin/bootstrap.jar -Dcatalina.base=/usr/local/tomcat6 -Dcatalina.home=/usr/local/tomcat6 -Djava.io.tmpdir=/usr/local/tomcat6/temp org.apache.catalina.startup.Bootstrap start\n\nSo, I generated thread dump like below.\n# /usr/local/j2se/bin/jstack -F -l 1398 > 2012.txt\nAttaching to process ID 1398, please wait...\nDebugger attached successfully.\nServer compiler detected.\nJVM version is 19.1-b02\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\nFinding object size using Printezis bits and skipping over...\n#\n\nafter 5 minutes, I runned \"thread dump\". \nThe content of two thread dump is equal.\n\nSo. I added an attachement of thread dump.\nThere are pattern of thread in thread dump like below\n\nThread 1465: (state = BLOCKED)\n - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\n - java.lang.Object.wait() @bci=2, line=485 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.await() @bci=8, line=458 (Interpreted frame)\n - org.apache.tomcat.util.net.JIoEndpoint$Worker.run() @bci=11, line=484 (Interpreted frame)\n - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\n\nLocked ownable synchronizers:\n    - None\n\n\n\n\nThread 1428: (state = BLOCKED)\n - sun.misc.Unsafe.park(boolean, long) @bci=0 (Interpreted frame)\n - java.util.concurrent.locks.LockSupport.parkNanos(java.lang.Object, long) @bci=20, line=198 (Interpreted frame)\n - java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(long) @bci=68, line=2025 (Interpreted frame)\n - java.util.concurrent.DelayQueue.take() @bci=57, line=164 (Interpreted frame)\n - java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take() @bci=4, line=609 (Interpreted frame)\n - java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take() @bci=1, line=602 (Interpreted frame)\n - java.util.concurrent.ThreadPoolExecutor.getTask() @bci=78, line=947 (Interpreted frame)\n - java.util.concurrent.ThreadPoolExecutor$Worker.run() @bci=18, line=907 (Interpreted frame)\n - java.lang.Thread.run() @bci=11, line=662 (Interpreted frame)\n\nLocked ownable synchronizers:\n    - None\n\n\nThread 1415: (state = BLOCKED)\n - java.lang.Object.wait(long) @bci=0 (Interpreted frame)\n - java.lang.ref.ReferenceQueue.remove(long) @bci=44, line=118 (Interpreted frame)\n - java.lang.ref.ReferenceQueue.remove() @bci=2, line=134 (Interpreted frame)\n - java.lang.ref.Finalizer$FinalizerThread.run() @bci=3, line=159 (Interpreted frame)\n\n\n* My Environment \n jdk : 1.6.0_24\n Tomcat : 6.0.28\n linux : CentOS release 5.3 (Final)\n\n# netstat -anp | grep java\nunix  2      [ ACC ]     STREAM     LISTENING     90571504 1398/java           /usr/local/tomcat6/temp/.java_pid1398.tmp\n\n\nI tried netstat -anp and tomcat port is not listed there but still I am \n unable to start the service. So, I had to kill by using \"kill\" command.", "tags": [], "creator": "knight@nhn.com", "is_private": false, "count": 0, "id": 144500, "time": "2011-02-23T06:29:36Z", "bug_id": 50820, "creation_time": "2011-02-23T06:29:36Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "This question belongs on the users list.", "attachment_id": null, "id": 144501, "creator": "markt@apache.org", "time": "2011-02-23T06:36:13Z", "bug_id": 50820, "creation_time": "2011-02-23T06:36:13Z", "is_private": false}]