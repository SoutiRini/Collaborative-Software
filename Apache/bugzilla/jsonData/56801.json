[{"count": 0, "tags": [], "creator": "xshao@ebay.com", "attachment_id": 31865, "text": "Created attachment 31865\nPatch for Matcher\n\nThe loop in matchName,\n\n    public static boolean matchName(Set<String> patternSet, String fileName) {\n        for (String pattern: patternSet) {\n            if (match(pattern, fileName, true)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n\nOptimized,\n\n    public static boolean matchName(Set<String> patternSet, String fileName) {\n        char[] charArray = fileName.toCharArray();\n        for (String pattern: patternSet) {\n            if (match(pattern, charArray, true)) {\n                return true;\n            }\n        }\n        return false;\n    }", "id": 176822, "time": "2014-08-01T02:31:24Z", "bug_id": 56801, "creation_time": "2014-08-01T02:31:24Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 56801, "attachment_id": null, "text": "I think the real question is whether or not the String.toCharArray even belongs here. Back in the dark days, only fools used String.charAt and instead used String.toCharArray followed by direct index access. I haven't done any performance measurements, but String.toCharArray may be more trouble than it's worth these days.", "id": 176837, "time": "2014-08-01T22:13:31Z", "creator": "chris@christopherschultz.net", "creation_time": "2014-08-01T22:13:31Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 56801, "attachment_id": null, "id": 176911, "time": "2014-08-05T07:39:34Z", "creator": "markt@apache.org", "creation_time": "2014-08-05T07:39:34Z", "is_private": false, "text": "Based on the quality of patches the OP has provided in the past, I'm confident that a) the proposed change will be faster and b) there is unlikely to be a better way.\n\nI've applied a variation of this patch to 8.0.x for 8.0.11 onwards."}, {"count": 3, "tags": [], "creator": "knst.kolinko@gmail.com", "attachment_id": null, "text": "(In reply to Christopher Schultz from comment #1)\n> I think the real question is whether or not the String.toCharArray even\n> belongs here.\n\nAgreed. I changed visibility of the new method to be private, so that we were able to review the API later.  There is also a question that patterns are also repeatedly converted to arrays.\n\nI backported this to Tomcat 7 in r1617475 and it will be in 7.0.56 onwards.", "id": 177111, "time": "2014-08-12T13:54:31Z", "bug_id": 56801, "creation_time": "2014-08-12T13:54:31Z", "is_private": false}]