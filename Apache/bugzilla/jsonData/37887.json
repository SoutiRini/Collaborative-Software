[{"count": 0, "tags": [], "creator": "u.voellger@intershop.de", "attachment_id": null, "text": "On HP-UX, the exec task hangs when used to start processes that starts \nbackground processes.\n\nIn our environment, we use Ant to start a shell script, which starts the \nweblogic server. The exec command is completely finished, but does not return \nso following tasks are not executed. STDOUT and STDERR are forwarded to files. \nThe same problem occurs when starting other background processes.\n\nEverything works fine on Solaris, Linux and Windows.\n\nHere is an example of our exec task:\n        <exec executable=\"/usr/bin/sh\"\n              dir=\"/export/weblogic/weblogic8.1.4/user_projects/domains/ES2\"\n              failonerror=\"true\">\n            <arg value=\"-c\"/>\n            <arg \nvalue=\"/export/weblogic/weblogic8.1.4/user_projects/domains/ES2/startWebLogic.sh\n 1&gt;/expot/autotest/start2.log 2&gt;&amp;1 &amp;\"/>\n        </exec>\n\nIf spawn is used, everything works fine, but that is not what I need since \ncontrolling of the shell script execution is missing:\n        <exec executable=\"/usr/bin/sh\"\n              dir=\"/export/weblogic/weblogic8.1.4/user_projects/domains/ES2\"\n              spawn=\"true\">\n            <arg value=\"-c\"/>\n            <arg \nvalue=\"/export/weblogic/weblogic8.1.4/user_projects/domains/ES2/startWebLogic.sh\n 1&gt;/expot/autotest/start2.log 2&gt;&amp;1 &amp;\"/>\n        </exec>\n\nHere is an stack trace:\nFull thread dump  [Tue Dec 13 15:06:57 MET 2005] (Java HotSpot(TM) Server VM \n1.4.2 1.4.2.09-050713-05:46-PA_RISC2.0 PA2.0 (aCC_AP) mixed mode):\n\n\"Thread-3\" daemon prio=10 tid=00051008 nid=17 lwp_id=212267 runnable \n[0x53ef7000..0x53ef74f0]\n\tat java.io.FileInputStream.readBytes(Native Method)\n\tat java.io.FileInputStream.read(FileInputStream.java:177)\n\tat java.lang.UNIXProcess$DeferredCloseInputStream.read\n(UNIXProcess.java:243)\n\tat org.apache.tools.ant.taskdefs.StreamPumper.run(StreamPumper.java:90)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Thread-0\" daemon prio=10 tid=00050bd0 nid=14 lwp_id=212255 runnable \n[0x5407a000..0x5407a4f0]\n\tat java.io.FileInputStream.readBytes(Native Method)\n\tat java.io.FileInputStream.read(FileInputStream.java:177)\n\tat java.lang.UNIXProcess$DeferredCloseInputStream.read\n(UNIXProcess.java:243)\n\tat org.apache.tools.ant.taskdefs.StreamPumper.run(StreamPumper.java:90)\n\tat java.lang.Thread.run(Thread.java:534)\n\n\"Signal Dispatcher\" daemon prio=10 tid=00050798 nid=7 lwp_id=212247 waiting on \ncondition [0x00000000..0xffffffff]\n\n\"Finalizer\" daemon prio=10 tid=00050630 nid=5 lwp_id=212245 in Object.wait() \n[0x6defe000..0x6defe4f0]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <6e5801d0> (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)\n\t- locked <6e5801d0> (a java.lang.ref.ReferenceQueue$Lock)\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:188)\n\n\"Reference Handler\" daemon prio=10 tid=000504c8 nid=4 lwp_id=212244 in \nObject.wait() [0x6df7f000..0x6df7f4f0]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <6e580238> (a java.lang.ref.Reference$Lock)\n\tat java.lang.Object.wait(Object.java:429)\n\tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:120)\n\t- locked <6e580238> (a java.lang.ref.Reference$Lock)\n\n\"main\" prio=10 tid=00050360 nid=1 lwp_id=212237 in Object.wait() \n[0x7f7f1000..0x7f7f1770]\n\tat java.lang.Object.wait(Native Method)\n\t- waiting on <6e280580> (a java.lang.Thread)\n\tat java.lang.Thread.join(Thread.java:1001)\n\t- locked <6e280580> (a java.lang.Thread)\n\tat java.lang.Thread.join(Thread.java:1054)\n\tat org.apache.tools.ant.taskdefs.PumpStreamHandler.stop\n(PumpStreamHandler.java:137)\n\tat org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:476)\n\tat org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:576)\n\tat org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:617)\n\tat org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:452)\n\tat org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:275)\n\tat org.apache.tools.ant.Task.perform(Task.java:364)\n\tat org.apache.tools.ant.Target.execute(Target.java:341)\n\tat org.apache.tools.ant.Target.performTasks(Target.java:369)\n\tat org.apache.tools.ant.Project.executeSortedTargets(Project.java:1216)\n\tat org.apache.tools.ant.Project.executeTarget(Project.java:1185)\n\tat org.apache.tools.ant.helper.DefaultExecutor.executeTargets\n(DefaultExecutor.java:40)\n\tat org.apache.tools.ant.Project.executeTargets(Project.java:1068)\n\tat org.apache.tools.ant.Main.runBuild(Main.java:668)\n\tat org.apache.tools.ant.Main.startAnt(Main.java:187)\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:246)\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:67)\n\n\"VM Thread\" prio=10 tid=0001f6e8 nid=3 lwp_id=212243 runnable \n\n\"VM Periodic Task Thread\" prio=8 tid=00017f60 nid=11 lwp_id=212251 waiting on \ncondition \n\"Suspend Checker Thread\" prio=10 tid=0001f770 nid=6 lwp_id=212246 runnable", "id": 83600, "time": "2005-12-13T16:05:05Z", "bug_id": 37887, "creation_time": "2005-12-13T16:05:05Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 37887, "attachment_id": null, "is_private": false, "id": 119940, "time": "2008-08-20T08:04:39Z", "creator": "bodewig@apache.org", "creation_time": "2008-08-20T08:04:39Z", "text": "the \"duplicate\" resolution is my best guess.  Try inputstring=\"\".\n\n\n\n*** This bug has been marked as a duplicate of bug 34461 ***"}]