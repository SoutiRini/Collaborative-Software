[{"count": 0, "tags": [], "bug_id": 39607, "attachment_id": null, "is_private": false, "id": 89237, "time": "2006-05-18T11:18:39Z", "creator": "julien.ayme@gmail.com", "creation_time": "2006-05-18T11:18:39Z", "text": "The changes in the class RtfTableRow between 0.91 and 0.92 now generate a\nNullPointerException, \ndue to the variable tableBorderAttributes declared at line 189:\nRtfAttributes tableBorderAttributes = getTable().getBorderAttributes();\nbeing null when the code: \ntableBorderAttributes.getValue(....)   (line 209)\nis called.\n\nExample of java code which worked under 0.91 and doesn't work anymore:\n\n// Start of class\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\nimport org.apache.fop.render.rtf.rtflib.rtfdoc.RtfDocumentArea;\nimport org.apache.fop.render.rtf.rtflib.rtfdoc.RtfFile;\nimport org.apache.fop.render.rtf.rtflib.rtfdoc.RtfParagraph;\nimport org.apache.fop.render.rtf.rtflib.rtfdoc.RtfSection;\nimport org.apache.fop.render.rtf.rtflib.rtfdoc.RtfTable;\nimport org.apache.fop.render.rtf.rtflib.rtfdoc.RtfTableRow;\n\npublic class TestFop {\n\n    public static void main(String[] args) {\n        try {\n            FileWriter writer = new FileWriter(new File(\"C:/test.doc\"));\n            RtfFile f = new RtfFile(writer);\n\n            RtfDocumentArea doc = f.startDocumentArea();\n\n            RtfSection section = doc.newSection();\n\n            RtfParagraph paragraph = section.newParagraph();\n            paragraph.newText(\"Testing fop - rtf module - class RtfTableRow\");\n            paragraph.close();\n\n            RtfTable table = section.newTable(null); \n            RtfTableRow row = table.newTableRow();\n            row.newTableCell(2000).newParagraph().newText(\"blah\");\n            row.newTableCell(5000).newParagraph().newText(\"doubleBlah\");\n            row.close();\n            table.close();\n            section.close();\n            doc.close();\n            f.flush();\n            \n        } catch (IOException ioe) {\n            ioe.printStackTrace();\n        }\n    }\n}\n//End of class\n\n\nStacktrace when the code is executed:\nException in thread \"main\" java.lang.NullPointerException\n\tat\norg.apache.fop.render.rtf.rtflib.rtfdoc.RtfTableRow.writeRowAndCellsDefintions(RtfTableRow.java:209)\n\tat\norg.apache.fop.render.rtf.rtflib.rtfdoc.RtfTableRow.writeRtfContent(RtfTableRow.java:142)\n\tat org.apache.fop.render.rtf.rtflib.rtfdoc.RtfElement.writeRtf(RtfElement.java:85)\n\tat\norg.apache.fop.render.rtf.rtflib.rtfdoc.RtfContainer.writeRtfContent(RtfContainer.java:134)\n\tat org.apache.fop.render.rtf.rtflib.rtfdoc.RtfElement.writeRtf(RtfElement.java:85)\n\tat\norg.apache.fop.render.rtf.rtflib.rtfdoc.RtfContainer.writeRtfContent(RtfContainer.java:134)\n\tat org.apache.fop.render.rtf.rtflib.rtfdoc.RtfElement.writeRtf(RtfElement.java:85)\n\tat\norg.apache.fop.render.rtf.rtflib.rtfdoc.RtfContainer.writeRtfContent(RtfContainer.java:134)\n\tat org.apache.fop.render.rtf.rtflib.rtfdoc.RtfElement.writeRtf(RtfElement.java:85)\n\tat\norg.apache.fop.render.rtf.rtflib.rtfdoc.RtfContainer.writeRtfContent(RtfContainer.java:134)\n\tat org.apache.fop.render.rtf.rtflib.rtfdoc.RtfElement.writeRtf(RtfElement.java:85)\n\tat org.apache.fop.render.rtf.rtflib.rtfdoc.RtfFile.flush(RtfFile.java:218)\n\tat test.TestFop.main(TestFop.java:37)\n\n\n\nSimple way to fix this:\nadd a test to check wether tableBorderAttributes is null.\n(I will join the modified RtfTableRow.java later)"}, {"count": 1, "tags": [], "bug_id": 39607, "attachment_id": 18311, "is_private": false, "id": 89238, "time": "2006-05-18T11:20:24Z", "creator": "julien.ayme@gmail.com", "creation_time": "2006-05-18T11:20:24Z", "text": "Created attachment 18311\nsource of TestFop.java"}, {"text": "Created attachment 18312\nmodified RtfTableRow.java\n\nI've added the following lines: 203,204,237", "tags": [], "creator": "julien.ayme@gmail.com", "is_private": false, "count": 2, "id": 89239, "time": "2006-05-18T11:22:39Z", "bug_id": 39607, "creation_time": "2006-05-18T11:22:39Z", "attachment_id": 18312}, {"count": 3, "tags": [], "bug_id": 39607, "attachment_id": null, "id": 89249, "time": "2006-05-18T14:03:03Z", "creator": "jeremias@apache.org", "creation_time": "2006-05-18T14:03:03Z", "is_private": false, "text": "Applied. Thanks, especially for the sample code to reproduce the problem!\nhttp://svn.apache.org/viewvc?rev=407553&view=rev\n\nJulien, please send proposed code changes as Subversion patches in the future.\nThat makes it a lot easier for us. Thank you! See:\nhttp://xmlgraphics.apache.org/fop/dev/index.html#patches"}, {"count": 4, "tags": [], "bug_id": 39607, "attachment_id": null, "id": 155595, "time": "2012-04-01T06:29:49Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:29:49Z", "is_private": false, "text": "batch transition pre-FOP1.0 resolved+fixed bugs to closed+fixed"}]