[{"count": 0, "tags": [], "creator": "luke@nuix.com", "text": "Created attachment 28741\nThe patch to fix encoding problems.\n\nA small patch to fix some encoding problems with older Visio documents and handle errors more robustly.\n\nI've signed an ICLA for a Derby patch previously.", "id": 158901, "time": "2012-05-08T07:11:58Z", "bug_id": 53205, "creation_time": "2012-05-08T07:11:58Z", "is_private": false, "attachment_id": 28741}, {"attachment_id": null, "tags": [], "creator": "yegor@dinom.ru", "text": "Finally I had time to review your patch, thanks for your patience.\n\nThe patch looks good, but needs some work.\n\n POI is compatible with JDK 1.5 but your patch isn't. The Chunk class constructs strings with String(byte[],int,int,java.nio.charset.Charset) which wasd introduced in JDK 1.6. The old code used StringUtil.getFromUnicodeLE(contents, startsAt, strLen) which assumed that encoding is always UTF-16LE. I see that in your patch the encoding is either ASCII or UTF-16LE depending on the chunk type. Can you write some unit tests that show it is really so? \n\nRegards,\nYegor", "count": 1, "id": 160787, "time": "2012-07-22T11:12:32Z", "bug_id": 53205, "creation_time": "2012-07-22T11:12:32Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 53205, "attachment_id": 29111, "id": 160888, "time": "2012-07-25T05:34:42Z", "creator": "luke@nuix.com", "creation_time": "2012-07-25T05:34:42Z", "is_private": false, "text": "Created attachment 29111\nPatch to fix 1.5 support and add tests.\n\nI think my changes in the latest patch should fix the JDK 1.5 support. I've also added two unit tests and a sample file.\n\nCheers,\n\nLuke"}, {"count": 3, "tags": [], "creator": "yegor@dinom.ru", "text": "Patch applied in r1365638\n\nThanks,\nYegor", "id": 160904, "time": "2012-07-25T15:45:57Z", "bug_id": 53205, "creation_time": "2012-07-25T15:45:57Z", "is_private": false, "attachment_id": null}]