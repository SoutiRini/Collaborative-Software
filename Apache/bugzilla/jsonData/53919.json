[{"count": 0, "tags": [], "bug_id": 53919, "text": "DEFAULT_LOG_FORMAT is not RFC6302 compliant.\n\nTo reproduce:\n\n* Enabling default logging setting in Apache HTTPD 2.4 or greater\n* Visit the HTTP server from a web browser\n* Check access_log\n* Source port and seconds are not logged", "id": 162330, "time": "2012-09-21T15:38:05Z", "creator": "jjmb@jjmb.com", "creation_time": "2012-09-21T15:38:05Z", "is_private": false, "attachment_id": null}, {"attachment_id": 29405, "tags": [], "creator": "jjmb@jjmb.com", "text": "Created attachment 29405\nUpdated #define DEFAULT_LOG_FORMAT in mod_log_config.c\n\nUpdated the #define for DEFAULT_LOG_FORMAT to be RFC6302 compliant.", "count": 1, "id": 162331, "time": "2012-09-21T15:41:58Z", "bug_id": 53919, "creation_time": "2012-09-21T15:41:58Z", "is_private": false}, {"count": 2, "tags": [], "text": "*** Bug 53920 has been marked as a duplicate of this bug. ***", "is_private": false, "bug_id": 53919, "id": 162336, "time": "2012-09-21T17:33:56Z", "creator": "covener@gmail.com", "creation_time": "2012-09-21T17:33:56Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 53919, "text": "Is this even used in modern configurations? I don't think it's wise to update the default to anything other then NCSA common log format.  Anyone else with strong opinions?", "id": 162337, "time": "2012-09-21T17:34:44Z", "creator": "covener@gmail.com", "creation_time": "2012-09-21T17:34:44Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 53919, "is_private": false, "text": "With the increased used of IPv4 address sharing there seems to be a need to ensure that source port and second are logged by default.", "id": 162338, "time": "2012-09-21T17:36:18Z", "creator": "jjmb@jjmb.com", "creation_time": "2012-09-21T17:36:18Z", "attachment_id": null}, {"count": 5, "attachment_id": null, "bug_id": 53919, "text": "(In reply to comment #4)\n> With the increased used of IPv4 address sharing there seems to be a need to\n> ensure that source port and second are logged by default.\n\nI don't personally agree, especially for the hard-coded default.", "id": 162339, "time": "2012-09-21T17:47:49Z", "creator": "covener@gmail.com", "creation_time": "2012-09-21T17:47:49Z", "tags": [], "is_private": false}, {"count": 6, "attachment_id": null, "bug_id": 53919, "is_private": false, "id": 162340, "time": "2012-09-21T18:30:05Z", "creator": "trawick@apache.org", "creation_time": "2012-09-21T18:30:05Z", "tags": [], "text": "IMO the patch can be to the default conf which adds another non-default log format."}, {"count": 7, "tags": [], "bug_id": 53919, "text": "So a change to the default httpd.conf?", "id": 162341, "time": "2012-09-21T19:57:02Z", "creator": "jjmb@jjmb.com", "creation_time": "2012-09-21T19:57:02Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "bug_id": 53919, "attachment_id": null, "is_private": false, "id": 162342, "time": "2012-09-21T23:17:32Z", "creator": "trawick@apache.org", "creation_time": "2012-09-21T23:17:32Z", "text": ">So a change to the default httpd.conf?\nYes.  httpd.conf.\n\nThe source of that is docs/conf/httpd.conf.in in the source tree, which already has three LogFormat directives."}, {"count": 9, "tags": [], "bug_id": 53919, "is_private": false, "text": "Quick question, is there a documented naming convention for new LogFormat directives in httpd.conf?\n\nPer the thread below I am ready to submit the following, however, I wanted to solicit some feedback on the naming convention before doing so:\n\nLogFormat \"%t %h %{remote}p %l %u \\\"%r\\\" %>s %b\" detailed\n\nThanks,\n\nJohn", "id": 163689, "time": "2012-11-28T02:07:08Z", "creator": "jjmb@jjmb.com", "creation_time": "2012-11-28T02:07:08Z", "attachment_id": null}, {"count": 10, "tags": [], "text": "John, I don't have a strong opinion on the LogFormat though your proposal looks reasonable. I don't know that it needs to be a default setting yet but as CGN gains momentum, I believe this type of logging may be something LEOs will require certain providers to enable. I assume changing the defaults might require a lot of folks to change log file parsers.", "is_private": false, "bug_id": 53919, "id": 164055, "time": "2012-12-13T17:02:11Z", "creator": "brett@the-watsons.org", "creation_time": "2012-12-13T17:02:11Z", "attachment_id": null}, {"count": 11, "attachment_id": null, "bug_id": 53919, "text": "It's not just a LEO issue.  When CGN is deployed, an IPv4 address will be shared by several people.  This level of logging is required for data analytics, abuse response/address reputation, tracking unique visitors, and targeted advertising.  Logging the IPv4 address alone (e.g. without port information) paints with too broad a brush, and will be insufficient to identify a user/household. So, a lot of people will need to change log parsers, anyways.", "id": 164359, "time": "2013-01-03T16:23:45Z", "creator": "c.donley@cablelabs.com", "creation_time": "2013-01-03T16:23:45Z", "tags": [], "is_private": false}, {"count": 12, "tags": [], "bug_id": 53919, "text": "In fact, \"CGN\" is already in wide use by most mobile providers (cell phones). The use in residential broadband is what's coming and it's coming fast. Source port and seconds need to be logged by default ASAP, or we will see more and more address-sharing related problems from LEA, abuse departments, security folks, etc, etc.\n\nJohn is proposing a much needed change.", "id": 164484, "time": "2013-01-08T17:15:33Z", "creator": "cgrundemann@gmail.com", "creation_time": "2013-01-08T17:15:33Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "bug_id": 53919, "attachment_id": null, "text": "> John is proposing a much needed change.\n\nIt's not a much needed change. Administrators can set whatever log format they like today.", "id": 164485, "time": "2013-01-08T17:18:00Z", "creator": "covener@gmail.com", "creation_time": "2013-01-08T17:18:00Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "c.donley@cablelabs.com", "text": "If it's not the default, most administrators won't enable it, and that will lead to problems. John's change should be the default; administrators who want to use the older format can then set it in the config file, as you said.", "count": 14, "id": 164486, "time": "2013-01-08T17:22:35Z", "bug_id": 53919, "creation_time": "2013-01-08T17:22:35Z", "is_private": false}, {"count": 15, "tags": [], "bug_id": 53919, "attachment_id": null, "is_private": false, "id": 164487, "time": "2013-01-08T17:28:24Z", "creator": "covener@gmail.com", "creation_time": "2013-01-08T17:28:24Z", "text": "(In reply to comment #14)\n> If it's not the default, most administrators won't enable it, and that will\n> lead to problems. John's change should be the default; administrators who\n> want to use the older format can then set it in the config file, as you said.\n\nAFAIK there is no plan to have the proposed named format be the default in the shipped configuration file.  The best place to discuss that would be the development mailing list."}, {"attachment_id": null, "tags": [], "creator": "cgrundemann@gmail.com", "is_private": false, "count": 16, "id": 164537, "time": "2013-01-09T21:31:57Z", "bug_id": 53919, "creation_time": "2013-01-09T21:31:57Z", "text": "(In reply to comment #15)\n> AFAIK there is no plan to have the proposed named format be the default in\n> the shipped configuration file.\n\nThat is a problem.\n\nInsufficient logging is tantamount to no logging and I posit that logging is required by default."}, {"count": 17, "tags": [], "text": "+1\nCGNs are a reality. We need RFC6302 support on Internet facing servers, as such I support making this the default. If not, it will never be turned on, as people will simply not think about it. \n\nAlain.", "is_private": false, "bug_id": 53919, "id": 164542, "time": "2013-01-10T01:04:46Z", "creator": "adurand@juniper.net", "creation_time": "2013-01-10T01:04:46Z", "attachment_id": null}, {"count": 18, "tags": [], "bug_id": 53919, "attachment_id": null, "text": "Plugging your own RFC as if a project that precedes it by 15 years is suddenly guilty of war crimes is hardly the way to go. I could argue that anything on port 80 is in violation of the SSL RFC and demand that SSL be default for everything, but that's not an enhancement or a bug in httpd, that's a _request for change_ that has a great impact on a lot of people, which _needs to be discussed on the mailing list, not in Bugzilla_. Please, take this discussion to the mailing list, or you will likely not get any constructive dialogue going, and certainly not the change you are hoping for.\n\nPlease see http://httpd.apache.org/lists.html for information on how to subscribe to our developer mailing list.", "id": 164562, "time": "2013-01-10T14:27:32Z", "creator": "humbedooh@apache.org", "creation_time": "2013-01-10T14:27:32Z", "is_private": false}, {"attachment_id": null, "tags": [], "creator": "covener@gmail.com", "is_private": false, "count": 19, "id": 164563, "time": "2013-01-10T14:27:52Z", "bug_id": 53919, "creation_time": "2013-01-10T14:27:52Z", "text": "> * Source port and seconds are not logged\n\nAren't seconds in there by default?  Is there a patch for the default configuration that is minimally invasive to existing log parsers? Is UTC important?"}, {"attachment_id": null, "tags": [], "creator": "jjmb@jjmb.com", "is_private": false, "count": 20, "id": 166199, "time": "2013-03-28T12:17:37Z", "bug_id": 53919, "creation_time": "2013-03-28T12:17:37Z", "text": "Daniel,\n\nFWIW - I made the initial reference to RFC6302 when I submitted the original patch.  I am not an author or contributor to RFC6302.\n\nJohn"}]