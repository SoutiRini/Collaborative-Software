[{"count": 0, "tags": [], "text": "Created attachment 33460\nScripts reproducing the issue.\n\nUnder certain conditions, some targets are called two times.\nThe attached archive contains some simple scripts to reproduce the issue (build file is main.xml). It involves the usage of an extension point, and importing scripts in separated folders.\nThe script fails if the target bar is called two times, succeed otherwise.\n\nThe bug appears since version 1.9.4 (1.9.3 works fine, 1.9.6 still contains the issue).\nThe bug seems OS independent and can be reproduce on Windows or MacOSX.", "is_private": false, "id": 187804, "creation_time": "2016-01-18T16:17:59Z", "time": "2016-01-18T16:17:59Z", "creator": "sebastien.eon@microej.com", "bug_id": 58886, "attachment_id": 33460}, {"count": 1, "tags": [], "creator": "bodewig@apache.org", "is_private": false, "text": "Not a solution or a complete analysis so far, but running ant -v will tell you\n\nBuild sequence for target(s) `platform' is [bar, foo/export, bar.bar, extpoint, platform]\n\nso the target \"bar\" is executed twice, once with its prefixed name and once with its plain name. At first I thought it might by depends and extensionOf colliding, but removing the depends from foo/export yields\n\nBuild sequence for target(s) `platform' is [foo/export, bar, bar.bar, extpoint, platform]\n\nwhich only rearranges the targets but keeps bar inside of the list twice.\n\nThis certainly looks like a bug and I'm trying to figure out which change in 1.9.4 may have caused it.", "id": 187946, "time": "2016-01-24T17:32:38Z", "bug_id": 58886, "creation_time": "2016-01-24T17:32:38Z", "attachment_id": null}, {"count": 2, "tags": [], "text": "Found the root cause which was responsible for Ant importing files twice. Fixed with git commit 7046631.\n\nMany thanks for providing the testcase, it help a lot.", "is_private": false, "id": 187947, "creation_time": "2016-01-24T18:38:26Z", "time": "2016-01-24T18:38:26Z", "creator": "bodewig@apache.org", "bug_id": 58886, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 58886, "text": "s/help/helped/", "id": 187948, "time": "2016-01-24T18:39:11Z", "creator": "bodewig@apache.org", "creation_time": "2016-01-24T18:39:11Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "text": "Now that I know the problem is that Ant didn't \"normalize\" the filename and so didn't realize it had imported bar before, there is a workaround for you.\n\nIn foo use\n\n        <property name=\"x\" location=\"${foo.dir}/../bar/bar.xml\"/>\n\t<import file=\"${x}\"/>\n\ninstead of your original import. This will normalize the file name and should make your script work for 1.9.4 to 1.9.6.", "is_private": false, "id": 187949, "creation_time": "2016-01-25T05:02:33Z", "time": "2016-01-25T05:02:33Z", "creator": "bodewig@apache.org", "bug_id": 58886, "attachment_id": null}]