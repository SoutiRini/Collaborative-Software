[{"count": 0, "tags": [], "text": "we have created a virtual directory on \\\\10.10.10.81\\Recordings and have placed\nan xml file (recordings.xml) in $APACHEDIR\\conf\\catalina\\localhost on our web\nserver (10.10.10.80). When 10.10.10.81 is rebooted, or goes off-network, the\nwebserver reports the directory as unreadable (error message below) AND THEN\nDELETES RECORDINGS.XML. Needless to say, this isn't desired behavior.\n\n\njava.lang.IllegalArgumentException: Document base \\\\10.10.10.81\\Recordings does\nnot exist or is not a readable directory\nSEVERE: Context [/Recordings] startup failed due to previous errors\nINFO: Container\norg.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/Recordings] has\nnot been started", "attachment_id": null, "bug_id": 40050, "id": 91325, "time": "2006-07-14T21:11:16Z", "creator": "bugs@johnm.net", "creation_time": "2006-07-14T21:11:16Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 40050, "attachment_id": null, "id": 91326, "time": "2006-07-14T22:27:51Z", "creator": "bugs@johnm.net", "creation_time": "2006-07-14T22:27:51Z", "is_private": false, "text": "the contents of recordings.xml:\n\n<Context path=\"/Recordings\" docBase=\"//10.10.10.81/Recordings\" debug=\"0\"\nreloadable=\"true\" />"}, {"count": 2, "tags": [], "text": "Agreed this is bad behavior.  Oddly enough, I can't seem to find that error\nmessage in the current code.  So the code must have changed.", "is_private": false, "id": 97312, "creator": "yoavs@computer.org", "time": "2006-12-26T05:17:04Z", "bug_id": 40050, "creation_time": "2006-12-26T05:17:04Z", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 40050, "text": "Do you have the anti(Resource|JAR)Locking flag enabled?  I see a place in\norg.apache.catalina.startup.ContextConfig#antiLocking (line 964 in current SVN\nversion of code) that deletes the docBase file.\n\nThese two flags are false by default, so you probably don't have them enabled,\nbut I still wanted to ask.  (See\nhttp://tomcat.apache.org/tomcat-5.5-doc/config/context.html for the\nconfiguration explanation of these two flags).\n\nAlso, if you wouldn't mind testing on v5.5.20, the latest stable release, that'd\nbe awesome.", "id": 97313, "time": "2006-12-26T05:20:20Z", "creator": "yoavs@computer.org", "creation_time": "2006-12-26T05:20:20Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 40050, "attachment_id": null, "id": 97969, "time": "2007-01-11T14:45:38Z", "creator": "chris@sourcelabs.com", "creation_time": "2007-01-11T14:45:38Z", "is_private": false, "text": "I tried to repro this on 5.5.20 with no success.\n\nI created a standalone webapp directory (in ${CATALINA_BASE}/test) and a context\nfile (under ${CATALINA_BASE}/conf/Catalina/localhost) that referenced it.  I\nincluded 'path' and 'reloadable' attributes as in the OP's post.  I then tested\ninitial deployment and redeployment of the webapp with the webapp directory both\nreadable and unreadable by the tomcat process user.\n\nIn all circumstances when the webapp was unreadable the webapp failed to deploy\n(or redeploy) with an IllegalArgumentException, but the context file was never\ndeleted.  Using antiresource/jar locking made no difference."}, {"attachment_id": null, "tags": [], "bug_id": 40050, "is_private": false, "count": 5, "id": 124751, "time": "2009-02-09T11:45:11Z", "creator": "markt@apache.org", "creation_time": "2009-02-09T11:45:11Z", "text": "You need to turn off autoDeploy. If Tomcat detects that a war or dir has been deleted and autoDeploy=\"true\" it will undeploy (ie delete) all the associated resources, including the context.xml file."}]