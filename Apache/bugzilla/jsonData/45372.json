[{"count": 0, "attachment_id": 22242, "creator": "mikhail.vladimirov@db.com", "is_private": false, "id": 118449, "time": "2008-07-10T04:41:41Z", "bug_id": 45372, "creation_time": "2008-07-10T04:41:41Z", "tags": [], "text": "Created attachment 22242\nProperty substitution routines\n\nbuild.xml:\n\n<project default=\"print\">\n  <property file=\"build.properties\" />\n  <target name=\"print\">\n    <echo message=\"a: ${a}\" />\n    <echo message=\"b: ${b}\" />\n    <echo message=\"c: ${c}\" />\n    <echo message=\"d: ${d}\" />\n    <echo message=\"e: ${e}\" />\n    <echo message=\"f: ${f}\" />\n  </target>\n</project>\n\nbuild.properies:\n\na: $\nb: {\nc: }\nd: x\ne: ${a}${b}d${c}\n# f: ${e}\n\nresult:\n\n     [echo] a: $\n     [echo] b: {\n     [echo] c: }\n     [echo] d: x\n     [echo] e: ${d}\n     [echo] f: ${f}\n\nThis is fine.\n\nIf we uncomment last line in build.properties, the result is quite surprising:\n\n     [echo] a: $\n     [echo] b: {\n     [echo] c: }\n     [echo] d: x\n     [echo] e: x\n     [echo] f: ${d}\n\nThe value of 'e' property changed, while we've just defined one more property.  For me this is odd behavior.\n\nMy property-substitution code is attached.  Maybe it can help to make ant's substitution algorithm more predictable."}, {"count": 1, "tags": [], "bug_id": 45372, "is_private": false, "text": "Can you run with Ant's current trunk and see what that gives you?", "id": 118484, "time": "2008-07-10T09:45:19Z", "creator": "mbenson@apache.org", "creation_time": "2008-07-10T09:45:19Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 45372, "is_private": false, "text": "Version from trunk (revision 675850) looks better.  Outputs are:\n\n     [echo] a: $\n     [echo] b: {\n     [echo] c: }\n     [echo] d: x\n     [echo] e: ${d}\n     [echo] f: ${f}\n\nand\n\n     [echo] a: $\n     [echo] b: {\n     [echo] c: }\n     [echo] d: x\n     [echo] e: ${d}\n     [echo] f: ${d}\n\nboth look fine for me.", "id": 118550, "time": "2008-07-11T03:34:51Z", "creator": "mikhail.vladimirov@db.com", "creation_time": "2008-07-11T03:34:51Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "creator": "bodewig@apache.org", "is_private": false, "id": 118554, "time": "2008-07-11T04:08:42Z", "bug_id": 45372, "creation_time": "2008-07-11T04:08:42Z", "tags": [], "text": "so we can mark it fixed for 1.8.0, right?"}, {"count": 4, "tags": [], "creator": "mikhail.vladimirov@db.com", "is_private": false, "text": "The problem was not about this particular case (actually not very realistic) but about unpredictable results of property substitution in general.  If algorithm itself was fixed to be more predictable, then this issue could be closed.  If algorithm was changed somehow and as side effect this particular case was fixed, then this issue is still open.  Can you identify what particular change fixed the problem?\n\nAt least, I think it is good idea to add this case as test case to code base.", "id": 118555, "time": "2008-07-11T04:18:15Z", "bug_id": 45372, "creation_time": "2008-07-11T04:18:15Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "mbenson@apache.org", "text": "(In reply to comment #4)\n> The problem was not about this particular case (actually not very realistic)\n> but about unpredictable results of property substitution in general.  If\n> algorithm itself was fixed to be more predictable, then this issue could be\n> closed.  If algorithm was changed somehow and as side effect this particular\n> case was fixed, then this issue is still open.  Can you identify what\n> particular change fixed the problem?\n> \n\nAnt's property handling has undergone a large refactoring this past year in the trunk.  The resolution of properties was extracted into a separate class for clarity's sake and this had the effect of firming up that code so that the vanishing of an old error is unsurprising.\n\n> At least, I think it is good idea to add this case as test case to code base.\n> \n\nThat sounds reasonable.  I'll reopen pending that.", "id": 118571, "time": "2008-07-11T08:52:46Z", "bug_id": 45372, "creation_time": "2008-07-11T08:52:46Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "text": "Committed revision 676096. (test)", "is_private": false, "id": 118588, "creation_time": "2008-07-11T16:06:57Z", "time": "2008-07-11T16:06:57Z", "creator": "mbenson@apache.org", "bug_id": 45372, "attachment_id": null}]