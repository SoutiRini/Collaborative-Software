[{"count": 0, "tags": [], "creator": "gadbois@computer.org", "text": "In order to set up Tomcat 5.5.2 alpha so that it would compile JSPs that\ncontained Java code with Java 1.5 features, I had to do the following:\n\n1. Specify the Ant compiler in $CATALINA_HOME/conf/web.xml:\n\n    <servlet>\n        <servlet-name>jsp</servlet-name>\n        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>\n        <init-param>\n            <param-name>fork</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <param-name>xpoweredBy</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <param-name>compiler</param-name>\n            <param-value>modern</param-value>\n        </init-param>\n        <init-param>\n            <param-name>compilerTargetVM</param-name>\n            <param-value>1.5</param-value>\n        </init-param>\n        <load-on-startup>3</load-on-startup>\n    </servlet>\n\n2. Drop ant.jar and ant-launcher.jar from a Tomcat 5.0.x distribution into\n$CATALINA_HOME/common/lib.\n\n3. Add a command line argument to the Tomcat start up script:\n\n    -Djavac.source=1.5\n\nThis is a big pain.  Recommendations:\n\n1. Bundle the necessary Ant jars.\n\n2. Add a \"compilerSource\" parameter to the Jasper configuration parameters. \nBetter yet, have a single \"source\" parameter since cross-compilation is an\nunlikely use case.\n\n3. Default the source to 1.5.\n\n4. Document the procedure ala the documentation for using Jikes.", "id": 63680, "time": "2004-09-16T22:28:03Z", "bug_id": 31269, "creation_time": "2004-09-16T22:28:03Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "remm@apache.org", "text": "My advice is that you stop using scriplets, and esp Java 5 scriplets, and rely\non the container generating the right code. This way, you won't need funky\noptions or Java 5 support (which is coming soon to JDT, but is only alpha right\nnow so it's not the JDT version bundled). Of course, you do what you want.\n\nWe won't document using Jikes as it's dead. In memory Java compilers, such as\nJDT, are the future.", "id": 63681, "time": "2004-09-16T22:33:36Z", "bug_id": 31269, "creation_time": "2004-09-16T22:33:36Z", "is_private": false, "attachment_id": null}, {"attachment_id": null, "tags": [], "bug_id": 31269, "text": "This is a bit of a bogus resolution -- except that there is hope that JDT will\nhave 1.5 support eventually.\n\nThis is a regression from the latest 5.0 sources, so anyone who wants 1.5\nscriplet support should use Tomcat 5.0.30 when it comes out, I guess.", "count": 2, "id": 67303, "time": "2004-11-21T23:52:33Z", "creator": "jessh@ptc.com", "creation_time": "2004-11-21T23:52:33Z", "is_private": false}, {"count": 3, "tags": [], "text": "If you want to code with Java 5.0 inside your JSPs, you can:\n- hack in the alpha JDT compiler\n- configure Jasper to use Ant\n- precompile your JSPs\nPlease do not reopen this bug report.", "is_private": false, "bug_id": 31269, "id": 67327, "time": "2004-11-22T12:23:24Z", "creator": "remm@apache.org", "creation_time": "2004-11-22T12:23:24Z", "attachment_id": null}, {"count": 4, "tags": [], "text": "In addition to the suggested configuration changes, I also had to add another\ninit parameter in web.xml:\n\n  <init-param>\n    <param-name>compilerSourceVM</param-name>\n    <param-value>1.5</param-value>\n  </init-param>\n\nI like using Java 1.5 and scriptlets and suggest that this somehow be made\neasier to use. Perhaps the default compiler target and source VMs could be the\nsame as the JVM that is running Tomcat. ", "attachment_id": null, "bug_id": 31269, "id": 78735, "time": "2005-08-19T23:32:12Z", "creator": "bugzilla@ambergini.com", "creation_time": "2005-08-19T23:32:12Z", "is_private": false}]