[{"count": 0, "attachment_id": 34866, "bug_id": 60900, "text": "Created attachment 34866\nserver.xml configure file\n\nEnvironment:\n\nOS: Red Hat Enterprise Linux Server release 6.7  2.6.32-573.el6.x86_64\nJDK: version \"1.8.0_65\" Java HotSpot(TM) 64-Bit Server VM\nMemory: 16G\nCPU: 1\nTomcat:  tested 8.5.3 and 8.5.11\nAPR: 1.5.2-1\n\n\nTest step:\n\n1. Install tomcat\n2. Test home page\n\n./wrk -t2000 -c 2000 -d 100s http://testhost:8080/\n\n\nException throws in catalina.log:\n\n22-Mar-2017 09:09:04.344 WARNING [http-apr-8080-Poller] org.apache.tomcat.util.net.AprEndpoint$Poller.run Unexpected poller error\n java.lang.NullPointerException\n        at org.apache.tomcat.util.net.AprEndpoint$AprSocketWrapper.access$400(AprEndpoint.java:2292)\n        at org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1703)\n        at java.lang.Thread.run(Thread.java:745)", "id": 197892, "time": "2017-03-22T01:33:54Z", "creator": "llbgurs@gmail.com", "creation_time": "2017-03-22T01:33:54Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "llbgurs@gmail.com", "is_private": false, "id": 197893, "time": "2017-03-22T01:35:35Z", "bug_id": 60900, "creation_time": "2017-03-22T01:35:35Z", "tags": [], "text": "The similar bug https://bz.apache.org/bugzilla/show_bug.cgi?id=54513"}, {"count": 2, "tags": [], "bug_id": 60900, "attachment_id": null, "id": 197913, "creation_time": "2017-03-23T05:45:19Z", "time": "2017-03-23T05:45:19Z", "creator": "llbgurs@gmail.com", "text": "Any update? Server closed connection and Client will receive RST due to this issue.", "is_private": false}, {"count": 3, "tags": [], "bug_id": 60900, "is_private": false, "text": "I have been unable to reproduce this with 9.0.x or 8.5.x.\n\nNext step is a code review to try and identify a code path that could trigger this. I don't want to just ignore the null without understanding what is going on.", "id": 197919, "time": "2017-03-23T07:47:48Z", "creator": "markt@apache.org", "creation_time": "2017-03-23T07:47:48Z", "attachment_id": null}, {"count": 4, "attachment_id": null, "creator": "markt@apache.org", "is_private": false, "id": 197925, "time": "2017-03-23T09:45:35Z", "bug_id": 60900, "creation_time": "2017-03-23T09:45:35Z", "tags": [], "text": "One additional question. Which version of Tomcat Native are you using?"}, {"count": 5, "tags": [], "bug_id": 60900, "text": "I was looking at possible triggers for this around concurrent timeout/close and new data arriving. While I was doing that I found and fixed some edge cases that made this bug easier to trigger. I have therefore fixed this bug too.\n\nFixed in:\n- trunk for 9.0.0.M19 onwards\n- 8.5.x for 8.5.13 onwards", "id": 197936, "time": "2017-03-23T12:28:12Z", "creator": "markt@apache.org", "creation_time": "2017-03-23T12:28:12Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "bug_id": 60900, "is_private": false, "id": 197954, "creation_time": "2017-03-24T01:00:54Z", "time": "2017-03-24T01:00:54Z", "creator": "llbgurs@gmail.com", "text": "Tomcat 8.5.3, Tomcat Native 1.2.7\nTOmcat 8.5.11 Tomcat Native 1.2.10\n\nThanks Mark, I will test fixed version when it is available.", "attachment_id": null}, {"count": 7, "attachment_id": null, "bug_id": 60900, "text": "The fix for Bug 60900 (https://bz.apache.org/bugzilla/show_bug.cgi?id=60900) should also be applied to Tomcat 7.0.x.  The issue still exists in 7.0.81, as the wrapper assigned on AprEndpoint.java:1898 is not checked for null prior to reference on AprEndpoint.java:1906.", "id": 200545, "time": "2017-08-31T18:04:12Z", "creator": "dmaglidt@cognitivemedicine.com", "creation_time": "2017-08-31T18:04:12Z", "tags": [], "is_private": false}, {"count": 8, "tags": [], "creator": "markt@apache.org", "attachment_id": null, "text": "I've back-ported the NPE fix to:\n- 8.0.x for 8.0.47 onwards\n- 7.0.x for 7.0.82 onwards\n\nI didn't back-port the edge case fixes as the refactoring in 8.5.x means the associated code is different (e.g. it has Comet handling) and I didn't want to risk triggering a regression.", "id": 200559, "time": "2017-09-01T09:33:57Z", "bug_id": 60900, "creation_time": "2017-09-01T09:33:57Z", "is_private": false}]