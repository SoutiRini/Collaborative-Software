[{"count": 0, "tags": [], "bug_id": 7227, "is_private": false, "text": "if i use this:\n<error-page>\n    <error-code>404</error-code>\n    <location>/error.html</location>\n</error-page>\n\nI get stack overflow:\n......\nat org.apache.tomcat.core.Handler.service(Handler.java(Compiled Code))\nat org.apache.tomcat.core.ServletWrapper.service(ServletWrapper.java\n(Compiled Code))\nat org.apache.tomcat.core.ContextManager.handleStatus\n(ContextManager.java:1049)\nat org.apache.tomcat.request.FileHandler.doService\n(StaticInterceptor.java(Compiled Code))\nat org.apache.tomcat.core.Handler.service(Handler.java(Compiled Code))\nat org.apache.tomcat.core.ServletWrapper.service(ServletWrapper.java\n(Compiled Code))\nat org.apache.tomcat.core.ContextManager.handleStatus\n(ContextManager.java:1049)\nat org.apache.tomcat.core.ContextManager.internalService\n(ContextManager.java(Compiled Code))\nat org.apache.tomcat.core.ContextManager.service(ContextManager.java\n(Compiled Code))\nat \norg.apache.tomcat.service.http.HttpConnectionHandler.processConnection\n(HttpConnectionHandler.java(Compiled Code))\nat org.apache.tomcat.service.TcpWorkerThread.runIt\n(PoolTcpEndpoint.java(Compiled Code))\nat org.apache.tomcat.util.ThreadPool$ControlRunnable.run\n(ThreadPool.java:498)\nat java.lang.Thread.run(Thread.java:498)\n\nif i try this:\n<error-page>\n    <error-code>404</error-code>\n    <location>error.html</location>\n</error-page>\nthen It don't ignores my setting at all, so I get this on page:\nError: 404\nLocation: /txkxx/makeerror.html\nnull", "id": 11975, "time": "2002-03-19T00:36:23Z", "creator": "kennethxu@hotmail.com", "creation_time": "2002-03-19T00:36:23Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "bug_id": 7227, "is_private": false, "id": 12102, "time": "2002-03-20T20:19:26Z", "creator": "kennethxu@hotmail.com", "creation_time": "2002-03-20T20:19:26Z", "tags": [], "text": "version 3.3a of tomcat works with error code 404 now, but it still \ndon't like 500. i.e., this still doesn't work:\n\n<error-page>\n    <error-code>500</error-code>\n    <location>/error.html</location>\n</error-page>\n"}, {"count": 2, "tags": [], "text": "It should work for 500 errors if you explicitly call response.sendError(500),\nhowever if an exception is allowed to propogate to container, it does not work.\n There was another bug filed for this, however it was closed because one can\ninterpret the Servlet spec 2.3 to mean that the current behavior is acceptable.  \n\nBecause there seem to be so many user questions about this, I don't think users\nexpect the server to respond the way it does.  Re-routing on 'Exception' doesn't\nwork either, because it won't allow you to handle specific Exceptions\ndifferently (NullPointerExceptions going to one page, ClassNotFoundException\ngoing to another, etc.).  All Exceptions that are thrown will be picked up by\nthe 'Exception' error page.\n\nI've done some digging, and a fix for this is pretty simple.  In the\nErrorDispatcherValve.throwable(request, response, throwable) method, it attempts\nto get the error page location by the type of the throwable (and if throwable is\na ServletException, by testing against the root cause).  If neither of these\nmatch a registered error page, it then quits.  What I think it's safe to assume\nhere is that we should then look to see if the user has registered an error page\nto the error code 500.  It ends up setting it to 500 later anyway, and this way,\nat least we can handle it properly.  The code is simple:\n\n        if(errorPage == null) {\n            errorPage =\ncontext.findErrorPage(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n        }\n\n... and it even works... Now can someone give me some tips about how to get this\nfix in?", "attachment_id": null, "id": 20563, "creation_time": "2002-08-01T18:31:36Z", "time": "2002-08-01T18:31:36Z", "creator": "coreym12065@yahoo.com", "bug_id": 7227, "is_private": false}, {"count": 3, "tags": [], "creator": "sriramnrn@gmail.com", "text": "Marking as FIXED. Later Tomcat releases have this fix.", "id": 93438, "attachment_id": null, "bug_id": 7227, "creation_time": "2006-09-12T17:39:04Z", "time": "2006-09-12T17:39:04Z", "is_private": false}]