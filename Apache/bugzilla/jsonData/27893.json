[{"count": 0, "tags": [], "bug_id": 27893, "text": "I submit a utf-8 form to my jsp, and i get the parameter after\nrequest.setCharacterEncoding(\"UTF-8\"). It is successful when there isn't <%@page\ncontentType=\"text/html;charset=UTF-8\" %> and it was failed when add  <%@page\ncontentType=\"text/html;charset=UTF-8\" %>. And it can right work in tomcat 4.1.27.\n\nMy locale is zh_CN.\nMy request url is\n\"http://127.0.0.1:8080/HttpRequestDumper.jsp?to=%2B88888&from=%2B00000&data=test+%E4%BD%A0%E5%A5%BD&service=test&operator=tester&pricecode=100\".\n\nThere is my html and jsp.\n<html>\n<head>\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n</head>\n\n<body>\n\t<form name=\"TestHttpGatewayForm\"\naction=\"http://127.0.0.1:8080/HttpRequestDumper.jsp\" method=\"GET\" >\n\t\t<table border=\"1\">\n\t\t\t<caption>TestForm<br></caption>\n\t\t\t<tbody>\n\t\t\t<tr>\n\t\t\t\t<td>to</td>\n\t\t\t\t<td><input type=\"text\" name=\"to\" value=\"+88888\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>from</td>\n\t\t\t\t<td><input type=\"text\" name=\"from\" value=\"+00000\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>data</td>\n\t\t\t\t<td><input type=\"text\" name=\"data\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>service</td>\n\t\t\t\t<td><input type=\"text\" name=\"service\" value=\"test\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>operator</td>\n\t\t\t\t<td><input type=\"text\" name=\"operator\" value=\"tester\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td>pricecode</td>\n\t\t\t\t<td><input type=\"text\" name=\"pricecode\" value=\"100\"></td>\n\t\t\t</tr>\n\t\t\t<tr>\n\t\t\t\t<td><input type=\"submit\" value=\"submit\" title=\"Copy license files\"></td>\n\t\t\t</tr>\n      </tbody>\n    </table>\n  </form>\n</body>\n</html>\n\n<%@page import=\"java.util.Enumeration\" %>\n<%@page contentType=\"text/html;charset=UTF-8\" %>\n\n<%\n\trequest.setCharacterEncoding(\"UTF-8\");\n%>\n\n<html>  \n  <body bgcolor=\"white\">\n    <table id=\"genenal\" border=\"1\">\n      <caption>Request Information<br></caption>\n      <tbody>\n        <tr>\n          <td>JSP Request Method</td>\n          <td><%= request.getMethod() %></td>\n        </tr>        \n        <tr>\n          <td>Request Protocol</td>\n          <td><%= request.getProtocol() %></td>\n        </tr>\n        <tr>\n          <td>Server name</td>\n          <td><%= request.getServerName() %></td>\n        </tr>\n        <tr>\n          <td>Server port</td>\n          <td><%= request.getServerPort() %></td>\n        </tr>\n        <tr>\n          <td>Request URI</td>\n          <td><%= request.getRequestURI() %></td>\n        </tr>\n        <tr>\n          <td>Servlet path</td>\n          <td><%= request.getServletPath() %></td>\n        </tr>\n        <tr>\n          <td>Locale</td>\n          <td><%= request.getLocale() %></td>\n        </tr>\n      </tbody>\n    </table>\n\n    <table id=\"parameters\" border=\"1\">\n      <caption>Request Parameters<br></caption>\n      <tbody>\n      \t<%\n\t\tEnumeration paramNames = request.getParameterNames();\n\t\twhile (paramNames.hasMoreElements()) {\n\t\t\tString paramName = (String) paramNames.nextElement();\n      \t%>\n        <tr>\n          <td><%= paramName %></td>\n          <td><%= request.getParameter(paramName) %></td>\n        </tr>\n      \t<% } %>        \n      </tbody>\n    </table>\n    <table id=\"headers\" border=\"1\">\n      <caption>Request Headers<br></caption>\n      <tbody>\n      \t<%\n\t\tEnumeration headerNames = request.getHeaderNames();\n\t\twhile (headerNames.hasMoreElements()) {\n\t\t\tString headerName = (String) headerNames.nextElement();\n      \t%>\n        <tr>\n          <td><%= headerName %></td>\n          <td><%= request.getHeader(headerName) %></td>\n        </tr>\n      \t<% } %>        \n      </tbody>\n    </table>\n  </body>\n</html>", "id": 54534, "time": "2004-03-24T07:30:03Z", "creator": "xuliang_net@163.com", "creation_time": "2004-03-24T07:30:03Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 27893, "text": "Created attachment 10940\nThe html submit a utf-8 form.", "id": 54535, "time": "2004-03-24T07:38:02Z", "creator": "xuliang_net@163.com", "creation_time": "2004-03-24T07:38:02Z", "is_private": false, "attachment_id": 10940}, {"attachment_id": 10941, "tags": [], "creator": "xuliang_net@163.com", "text": "Created attachment 10941\nThe jsp with contentType description", "count": 2, "id": 54536, "time": "2004-03-24T07:39:11Z", "bug_id": 27893, "creation_time": "2004-03-24T07:39:11Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 27893, "text": "Created attachment 10942\nThe JSP without contentType description.", "id": 54537, "time": "2004-03-24T07:39:41Z", "creator": "xuliang_net@163.com", "creation_time": "2004-03-24T07:39:41Z", "is_private": false, "attachment_id": 10942}, {"count": 4, "tags": [], "text": "Created attachment 10943\nThe result HTML of the JSP with contentType description.", "attachment_id": 10943, "id": 54538, "creator": "xuliang_net@163.com", "time": "2004-03-24T07:40:19Z", "bug_id": 27893, "creation_time": "2004-03-24T07:40:19Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 27893, "attachment_id": 10944, "id": 54539, "time": "2004-03-24T07:40:49Z", "creator": "xuliang_net@163.com", "creation_time": "2004-03-24T07:40:49Z", "is_private": false, "text": "Created attachment 10944\nThe result HTML of the JSP without contentType description."}, {"count": 6, "tags": [], "bug_id": 27893, "attachment_id": null, "id": 54548, "time": "2004-03-24T09:10:42Z", "creator": "remm@apache.org", "creation_time": "2004-03-24T09:10:42Z", "is_private": false, "text": "Please look at the HTTP connector documentation: URI parameters are now handled\ndifferently by default."}, {"count": 7, "tags": [], "bug_id": 27893, "attachment_id": null, "id": 54566, "time": "2004-03-24T13:04:54Z", "creator": "xuliang_net@163.com", "creation_time": "2004-03-24T13:04:54Z", "is_private": false, "text": "Thank you for answer. Now i know the attribute \"URIEncoding\" and\n\"useBodyEncodingForURI\". In my tomcat5 they was default value \"ISO-8859-1\" and\n\"false\". \nBut now i has the new question why the JSP without content type description can\nget right value if Request.setCharacterEncoding is invalib."}]