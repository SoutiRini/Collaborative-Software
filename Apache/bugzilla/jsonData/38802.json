[{"count": 0, "tags": [], "bug_id": 38802, "attachment_id": null, "text": "In reviewing the source, see line 149 of java\\org\\apache\\lenya\\ac\\Identity.java\n\nIn the code snippet:\n\n        while (belongs && i < _identifiables.length) {\n            if (_identifiables[i] instanceof User) {\n                User user = (User) _identifiables[i];\n                User otherUser = manager.getUserManager().getUser(user.getId());\n                belongs = belongs && user == otherUser;\n            }\n            i++;\n        }\n\nInstead of comparing \"user == otherUser\", I suggest using equals() since \ncomparing object references only works correctly under a few circumstances \n(like singletons).", "id": 86291, "time": "2006-02-28T03:34:48Z", "creator": "anthony@whitford.com", "creation_time": "2006-02-28T03:34:48Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 38802, "attachment_id": null, "id": 86292, "time": "2006-02-28T09:22:08Z", "creator": "andreas@apache.org", "creation_time": "2006-02-28T09:22:08Z", "is_private": false, "text": "Thanks for spotting this.\n\nBut - in this case, equals() wouldn't be sufficient. The check may only return\ntrue if both references point to the same object. If two equal users from\ndifferent accreditable managers are compared, it shall fail.\n\nBTW, this issue has already been discussed (IIRC there's another bug entry)."}, {"count": 2, "tags": [], "creator": "thorsten@apache.org", "attachment_id": null, "text": "Renaming Lenya 1.4 to 2.0", "id": 105508, "time": "2007-07-16T01:58:57Z", "bug_id": 38802, "creation_time": "2007-07-16T01:58:57Z", "is_private": false}]