[{"count": 0, "tags": [], "creator": "corneel.booysen@metastorm.com", "attachment_id": null, "text": "We have been using ANT for the last three years and suddenly started to get \nthis failure when we try to build:\n\nBUILD FAILED\nfile:/u/DEVCCB/sandbox/b722/xmcommon/ant/build.xml:1: Character conversion \nerror: \"Unconvertible UTF-8 character beginning with 0xa7\" (line number may be \ntoo low).\n\nThe build.xml file is checked into CVS as a text file - so when it is checked \nout it is converted to EBCDIC even though the XML states it is UTF-8.\n\nThis never seem to have bothered ANT and it was always able to read the XML \nbuild files up this week when something mysteriously changed and we were not \nable to build anymore.\n\nShould the build.xml files be checked into CVS as binary or is ANT able to read\nXML files in the native codepage as well? \n\nThe diagnostics are:\n\n------- Ant diagnostics report -------\nApache Ant version 1.5 compiled on October 16 2003\n\n-------------------------------------------\n Implementation Version (JDK1.2+ only)\n-------------------------------------------\ncore tasks     : 1.5\noptional tasks : 1.5\n\n-------------------------------------------\n ANT_HOME/lib jar listing\n-------------------------------------------\nant.jar (718980 bytes)\nantcontrib.jar (20877 bytes)\nbsf.jar (105573 bytes)\ncpptasks.jar (472934 bytes)\ncqtasks.jar (459534 bytes)\ncrimson.jar (206725 bytes)\ndom4j.jar (456914 bytes)\njakarta-oro-2.0.6.jar (65368 bytes)\njs.jar (390767 bytes)\njt400Native.jar (2762892 bytes)\njunit.jar (121070 bytes)\noptional.jar (530764 bytes)\nrecjava.jar (229652 bytes)\nrecordio.jar (209111 bytes)\nxalan.jar (2645149 bytes)\nxml-apis.jar (108484 bytes)\nNetComponents.jar (92484 bytes)\n\n-------------------------------------------\n Tasks availability\n-------------------------------------------\nwlrun : Not Available\nicontract : Not Available\nvajload : Not Available\nstlist : Not Available\nantlr : Not Available\nnetrexxc : Not Available\nstarteam : Not Available\nstylebook : Not Available\nstlabel : Not Available\njdepend : Not Available\nstcheckin : Not Available\nvajexport : Not Available\nstcheckout : Not Available\nejbc : Not Available\nvajimport : Not Available\nwlstop : Not Available\nddcreator : Not Available\n\n-------------------------------------------\n org.apache.env.Which diagnostics\n-------------------------------------------\nNot available.\nDownload it at http://xml.apache.org/commons/\n\n-------------------------------------------\n System properties\n-------------------------------------------\njava.assistive : ON\nplatform.notASCII : true\njava.runtime.name : Java(TM) 2 Runtime Environment, Standard Edition\nsun.boot.library.path : /usr/lpp/java/IBM/J1.3/bin\njava.vm.version : 1.3.1\njava.vm.vendor : IBM Corporation\njava.vendor.url : http://www.ibm.com/\npath.separator : :\njava.vm.name : Classic VM\nfile.encoding.pkg : sun.io\njava.vm.specification.name : Java Virtual Machine Specification\nuser.dir : /u/DEVCCB/sandbox/b722/ant/bin\njava.runtime.version : 1.3.1\njava.fullversion : J2RE 1.3.1 IBM OS/390 Persistent Reusable VM build cm131s-\n20040117 (JIT enabled: jitc)\njava.awt.graphicsenv : sun.awt.X11GraphicsEnvironment\nos.arch : 390\njava.io.tmpdir : /tmp\nline.separator :\n\njava.vm.specification.vendor : Sun Microsystems Inc.\njava.awt.fonts :\nos.name : z/OS\nant.home : /u/DEVCCB/sandbox/b722/ant\njava.library.path : /usr/lpp/java/IBM/J1.3/bin/:/usr/lpp/java/IBM/J1.3/bin/class\nic:/usr/lpp/Printsrv/lib:/lib:/usr/lib:.:/usr/lib\njava.specification.name : Java Platform API Specification\njava.class.version : 46.0\ninvokedviajava :\nos.version : 01.04.00\nuser.home : /u/DEVCCB\nuser.timezone : EST\njava.awt.printerjob : sun.awt.motif.PSPrinterJob\nfile.encoding : Cp1047\njava.specification.version : 1.3\njava.class.path : /u/DEVCCB/sandbox/b722/ant/lib/xml-\napis.jar:/u/DEVCCB/sandbox/b722/ant/lib/xalan.jar:/u/DEVCCB/sandbox/b722/ant/lib\n/recordio.jar:/u/DEVCCB/san\ndbox/b722/ant/lib/recjava.jar:/u/DEVCCB/sandbox/b722/ant/lib/optional.jar:/u/DEV\nCCB/sandbox/b722/ant/lib/junit.jar:/u/DEVCCB/sandbox/b722/ant/lib/jt400Native.ja\nr:/u/DEVCCB/sandbox/b722/ant/lib/js.jar:/u/DEVCCB/sandbox/b722/ant/lib/jakarta-\noro-\n2.0.6.jar:/u/DEVCCB/sandbox/b722/ant/lib/dom4j.jar:/u/DEVCCB/sandbox/b722/ant\n/lib/crimson.jar:/u/DEVCCB/sandbox/b722/ant/lib/cqtasks.jar:/u/DEVCCB/sandbox/b7\n22/ant/lib/cpptasks.jar:/u/DEVCCB/sandbox/b722/ant/lib/bsf.jar:/u/DEVCCB/sandbox\n/b722/ant/lib/antcontrib.jar:/u/DEVCCB/sandbox/b722/ant/lib/ant.jar:/u/DEVCCB/sa\nndbox/b722/ant/lib/NetComponents.jar:/usr/lpp/java/IBM/J1.3/lib/tools.jar\nuser.name : DEVCCB\njava.vm.specification.version : 1.0\njava.home : /usr/lpp/java/IBM/J1.3\nuser.language : en\njava.specification.vendor : Sun Microsystems Inc.\njava.vm.info : J2RE 1.3.1 IBM OS/390 Persistent Reusable VM build cm131s-\n20040117 (JIT enabled: jitc)\njava.version : 1.3.1\njava.ext.dirs : /usr/lpp/java/IBM/J1.3/lib/ext\nsun.boot.class.path : /usr/lpp/java/IBM/J1.3/lib/rt.jar:/usr/lpp/java/IBM/J1.3/l\nib/i18n.jar:/usr/lpp/java/IBM/J1.3/classes\njava.vendor : IBM Corporation\nfile.separator : /\njava.vendor.url.bug :\njava.compiler : jitc\nsun.io.unicode.encoding : UnicodeBig\n\nThe build with the -v option shows:\n\nApache Ant version 1.5 compiled on October 16 2003\nBuildfile: build.xml\nDetected Java version: 1.3 in: /usr/lpp/java/IBM/J1.3\nDetected OS: z/OS\nparsing buildfile build.xml with URI = \nfile:/u/DEVCCB/sandbox/b722/xmcommon/ant/build.xml\n\nBUILD FAILED\nfile:/u/DEVCCB/sandbox/b722/xmcommon/ant/build.xml:1: Character conversion \nerror: \"Unconvertible UTF-8 character beginning with 0xa7\" (line number may be \ntoo lo\nw).\n        at org.apache.tools.ant.helper.ProjectHelperImpl.parse\n(ProjectHelperImpl.java:170)\n        at org.apache.tools.ant.ProjectHelper.configureProject\n(ProjectHelper.java:117)\n        at org.apache.tools.ant.Main.runBuild(Main.java:597)\n        at org.apache.tools.ant.Main.start(Main.java:196)\n        at org.apache.tools.ant.Main.main(Main.java:235)", "id": 82514, "time": "2005-11-15T16:44:42Z", "bug_id": 37508, "creation_time": "2005-11-15T16:44:42Z", "is_private": false}, {"count": 1, "tags": [], "creator": "corneel.booysen@metastorm.com", "attachment_id": null, "text": "This issue was resolved by using the override option:\n\nANT_OPTS=\"-Dcrimson.use.native.encoding=true\"", "id": 82515, "time": "2005-11-15T17:10:50Z", "bug_id": 37508, "creation_time": "2005-11-15T17:10:50Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 37508, "attachment_id": null, "id": 82517, "time": "2005-11-15T18:05:02Z", "creator": "stevel@apache.org", "creation_time": "2005-11-15T18:05:02Z", "is_private": false, "text": "This isnt an Ant problem; its an XML parser issue. If you have a file marked as\nUTF-8 and you are not using UTF-8 encoding, then the parser is correct ro reject\nthe character.\n\nI dont know about EBCDIC handling, I think that is an XML1.1 quirk. But unless\nyou have a file representation matching that of your XML declaration, everything\nis out of our hands."}]