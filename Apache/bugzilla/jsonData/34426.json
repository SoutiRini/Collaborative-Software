[{"count": 0, "attachment_id": null, "creator": "praveen.soni@st.com", "text": "Hello,\n\nI have installed Apache 2.0.53 & Tomcat 5.0.28 with mod_jk 1.2.10 AJP connector\non  Red Hat AS 2.1 on machine A and another Tomcat 5.0.28 instance on Machine B.\n\nAnd we have configured loadbalancing worker at apache level, BUT some time what\nwe have seen in Load Testing for 250 concurrentusers, load was distributed on\nboth machine A and B and some time all the request were moving on machine A only\nand there were no performance gain.\n\nhere I have attached used mod_jk.properties and workers.properties configuration\n, please suggest me what can be the best configuration for such scenario.\n\nmod_jk.properties\n=================\nLoadModule      jk_module modules/mod_jk.so\n\n<IfModule mod_jk.c>\n    JkWorkersFile conf/workers.properties\n    JkLogFile \"/ora_9ias/ias/Apache-Tomcat/logs/mod_jk.log\"\n\n    JkLogLevel emerg\n    # JkLogLevel error\n    # JkLogLevel info\n\n    JkMount /stonline/productcatalog/servlet/* loadbalancer\n    JkMount /stonline/productcatalog/* loadbalancer\n    JkMount /stonline/productcatalog/*.jsp loadbalancer\n\n    # Deny direct access to WEB-INF and META-INF\n    #\n    <Location \"/stonline/productcatalog/WEB-INF/*\">\n        AllowOverride None\n        deny from all\n    </Location>\n\n    <Location \"/stonline/productcatalog/META-INF/*\">\n        AllowOverride None\n        deny from all\n    </Location>\n</IfModule>\n\n\nworkers.properties\n==================\n#\n# workers.properties\n#\n\n#\n# In Unix, we use forward slashes:\n#\nps=/\n\n#\n# list the workers by name\n#\nworker.list=stpcqc,stpcias,loadbalancer\n\n# ------------------------\n# First tomcat server\n# ------------------------\nworker.stpcqc.port=10011\nworker.stpcqc.host=machineA\nworker.stpcqc.type=ajp13\n\n# Specify the size of the open connection cache.\nworker.stpcqc.cachesize=10\n\nworker.stpcqc.cache_timeout=100\n\n#\n# Specifies the load balance factor when used with\n# a load balancing worker.\n# Note:\n#  ----> lbfactor must be > 0\n#  ----> Low lbfactor means less work done by the worker.\nworker.stpcqc.lbfactor=50\n\n# ------------------------\n# Second tomcat server\n# ------------------------\nworker.stpcias.port=10022\nworker.stpcias.host=machineB\nworker.stpcias.type=ajp13\n\n# Specify the size of the open connection cache.\nworker.stpcias.cachesize=10\n\nworker.stpcias.cache_timeout=100\n\n#\n# Specifies the load balance factor when used with\n# a load balancing worker.\n# Note:\n#  ----> lbfactor must be > 0\n#  ----> Low lbfactor means less work done by the worker.\nworker.stpcias.lbfactor=50\n\n\n# ------------------------\n# Load Balancer worker\n# ------------------------\n\n#\n# The loadbalancer (type lb) worker performs weighted round-robin\n# load balancing with sticky sessions.\n# Note:\n#  ----> If a worker dies, the load balancer will check its state\n#        once in a while. Until then all work is redirected to peer\n#        worker.\nworker.loadbalancer.type=lb\nworker.loadbalancer.balanced_workers=stpcqc,stpcias\nworker.loadbalancer.method=Request\n\n#\n# END workers.properties\n#\n\nThanks & Regards,\n-Praveen Soni", "id": 73600, "time": "2005-04-13T07:38:51Z", "bug_id": 34426, "creation_time": "2005-04-13T07:38:51Z", "tags": [], "is_private": false}, {"count": 1, "attachment_id": null, "creator": "mturk@apache.org", "is_private": false, "id": 73602, "time": "2005-04-13T08:42:26Z", "bug_id": 34426, "creation_time": "2005-04-13T08:42:26Z", "tags": [], "text": "Hi,\n\nThe bugzilla is not support forum :).\nYour problems are probably related to missconfiguration with\nTomcat instances unabled to handle the load.\n\nPlease post those kind of questions to Tomcat-User list.\n\nRegards,\nMladen."}]