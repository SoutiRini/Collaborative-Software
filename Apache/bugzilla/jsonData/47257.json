[{"count": 0, "tags": [], "text": "I have a block of Javascript code that does something like:\n\ntry {\n  //reference some undeclared variable\n} catch (e) {}\n\nThis causes Rhino to generate an EcmaError, which it then tries to wrap in a Java object. However the RhinoClassShutter prevents accessing all rhino classes (for good reason) including the EcmaError class, thereby negating the usefulness of try/catch. \n\nPerhaps the RhinoClassShutter should allow exception/error classes to be referenced/instantiated even if they are in the org.mozilla.javascript package. The only work around (other than making sure the Javascript never generates an EcmaError) seems to be to replace RhinoInterpreterFactory with your own, just to override the RhinoClassShutter, which has some more quirks if you are using the batik jars (which also install the RhinoInterpreterFactory). \n\n\nAccess to Java class \"org.mozilla.javascript.EcmaError\" is prohibited. (Inline <script> http://....:-1#4)\n\tat org.apache.batik.transcoder.SVGAbstractTranscoder$SVGAbstractTranscoderUserAgent.displayError(SVGAbstractTranscoder.java:863)\n\tat org.apache.batik.bridge.BaseScriptingEnvironment.handleInterpreterException(BaseScriptingEnvironment.java:694)\n\tat org.apache.batik.bridge.BaseScriptingEnvironment.loadScripts(BaseScriptingEnvironment.java:522)\n\tat org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:214)\n\tat org.apache.batik.transcoder.image.ImageTranscoder.transcode(ImageTranscoder.java:92)\n\tat org.apache.batik.transcoder.XMLAbstractTranscoder.transcode(XMLAbstractTranscoder.java:142)\n\tat org.apache.batik.transcoder.SVGAbstractTranscoder.transcode(SVGAbstractTranscoder.java:156)", "attachment_id": null, "id": 127332, "creator": "vgoenka@apache.org", "time": "2009-05-23T13:18:58Z", "bug_id": 47257, "creation_time": "2009-05-23T13:18:58Z", "is_private": false}, {"count": 1, "tags": [], "text": "(In reply to comment #0)\n> I have a block of Javascript code that does something like:\n> \n> try {\n>   //reference some undeclared variable\n> } catch (e) {}\n> \n> This causes Rhino to generate an EcmaError, which it then tries to wrap in a\n> Java object. However the RhinoClassShutter prevents accessing all rhino classes\n> (for good reason) including the EcmaError class, thereby negating the\n> usefulness of try/catch. \n\nI'm sure this makes sense and, although I haven't tried to reproduce, Batik recently (see revision 701300 for example) had a few improvements which may help (compatibility with 1.6R7). Unfortunately, I'm fairly convinced they don't address this specific issue...\n\n\n> The only work around (other than making sure the Javascript never generates an\n> EcmaError) seems to be to replace RhinoInterpreterFactory with your own, just\n> to override the RhinoClassShutter, which has some more quirks if you are using\n> the batik jars (which also install the RhinoInterpreterFactory). \n\nIf you are aware of this workaround, why not sharing the solution proposal? Patches are always welcome... ;-)\n\n\nAlso, I've decrease importance (\"critical\" was just too much, specially considering a workaround [1] was already proposed).\n\n\nHope this helps,\n Helder\n\n\n[1] https://issues.apache.org/bugzilla/page.cgi?id=fields.html#importance", "attachment_id": null, "id": 127341, "creator": "helder.magalhaes@gmail.com", "time": "2009-05-24T03:07:54Z", "bug_id": 47257, "creation_time": "2009-05-24T03:07:54Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 47257, "attachment_id": null, "id": 127342, "time": "2009-05-24T03:12:59Z", "creator": "helder.magalhaes@gmail.com", "creation_time": "2009-05-24T03:12:59Z", "is_private": false, "text": "(In reply to comment #0)\n> I have a block of Javascript code that does something like:\n> \n> try {\n>   //reference some undeclared variable\n> } catch (e) {}\n> \n> This causes Rhino to generate an EcmaError, which it then tries to wrap in a\n> Java object.\n\n(Forgot to mention in my previous message...) Could you attach a reduced test case [1]? A self-contained SVG file seemed like appropriate. Making issues easy to reproduce is a giant step in raising the chances someone will take a look at them. ;-)\n\nHope this helps,\n Helder\n\n[1] http://webkit.org/quality/reduction.html"}]