[{"count": 0, "tags": [], "creator": "david@hedley.org", "attachment_id": null, "text": "My (Spring framework) webapp has a number of JAR files in WEB-INF/lib, one of\nwhich contains all the class files for my web application (including Jasper\ncompiled JSP). I've noticed that after stopping and undeploying the application,\nTomcat continues to hold an open file handle to the webapp's JAR file. This is\nevidenced by it not undeploying properly when running under Windows (sharing\nviolation/file in use), and by the creation of .nfsxxxx files when the webapps\ndirectory is NFS mounted. Only by stopping Tomcat entirely can the application\ndirectory be removed.\n\nAlthough when the application is running normally this isn't a problem, in\ndevelopment when the app is deployed/undeployed many times it is proving very\nirritating.\n\nIf the application is deployed with the class files under classes/ instead of\ninside the JAR then everything works as expected and the application can be\nundeployed OK.\n \nIs there a reason for Tomcat to hold an open filehandle to the JAR file, and can\nit be fixed?", "id": 89289, "time": "2006-05-19T12:47:26Z", "bug_id": 39616, "creation_time": "2006-05-19T12:47:26Z", "is_private": false}, {"count": 1, "attachment_id": null, "bug_id": 39616, "is_private": false, "id": 89291, "time": "2006-05-19T13:01:09Z", "creator": "markt@apache.org", "creation_time": "2006-05-19T13:01:09Z", "tags": [], "text": "This is outside of Tomcat's control. There are workarounds. Seach\nhttp://tomcat.apache.org/tomcat-5.5-doc/config/context.html for locking\n\nThere is plenty of detail about the root cuase of this in the archives but I am\ntoo lazy too search for it to reference it here. AFAIR the XML parser accesses\nxml files in jars in a manner that means they remain locked on windows platforms."}]