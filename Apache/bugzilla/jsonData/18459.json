[{"count": 0, "tags": [], "bug_id": 18459, "attachment_id": null, "id": 34036, "time": "2003-03-28T11:31:50Z", "creator": "tivv@gtech-ua.com", "creation_time": "2003-03-28T11:31:50Z", "is_private": false, "text": "For most classes catalina creates MBean with name as last part of class name.\nThis results in an exception when \"foreign\" class name is used and it's last\npart is equal to catalina's one.\nAn example: I've created a valve with class name Debug (in my com.gtechua...\npackage)\nWhen I've tried to use it I've got:\nBootstrap: Create Catalina server\nBootstrap: Starting service\nServerLifecycleListener: createMBeans: MBeanException\njava.lang.Exception: ManagedBean is not found with Debug\n        at org.apache.catalina.mbeans.MBeanUtils.createMBean(MBeanUtils.java:783)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:644)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:590)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:783)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:751)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:339)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.lifecycleEvent(ServerLifecycleListener.java:206)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:166)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:2182)\n        at\norg.apache.catalina.startup.CatalinaService.start(CatalinaService.java:271)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at\norg.apache.catalina.startup.BootstrapService.start(BootstrapService.java:245)\n        at\norg.apache.catalina.startup.BootstrapService.main(BootstrapService.java:307)\nStarting service Tomcat-Outer\nApache Tomcat/4.1.12-LE-jdk14\nStarting service Tomcat-Internal\nApache Tomcat/4.1.12-LE-jdk14"}, {"count": 1, "tags": [], "bug_id": 18459, "attachment_id": null, "is_private": false, "id": 34037, "time": "2003-03-28T11:51:27Z", "creator": "tivv@gtech-ua.com", "creation_time": "2003-03-28T11:51:27Z", "text": "The problem seems to be not in Name, but in nonexistance of the name in the\nregistry."}, {"count": 2, "tags": [], "bug_id": 18459, "attachment_id": null, "is_private": false, "id": 35871, "time": "2003-04-23T10:42:35Z", "creator": "remm@apache.org", "creation_time": "2003-04-23T10:42:35Z", "text": "You can declare whatever extra MBeans as needed. Otherwise, disable the JMX\nfeatures (only used for administration in Tomcat 4.1.x)."}, {"count": 3, "attachment_id": null, "bug_id": 18459, "is_private": false, "id": 35971, "time": "2003-04-24T10:43:58Z", "creator": "tivv@gtech-ua.com", "creation_time": "2003-04-24T10:43:58Z", "tags": [], "text": "Ok, but let me change this bug a little: what about JDBCAccessLogValve. It is\nnot foreign, but still creates an exception:\njava.lang.Exception: ManagedBean is not found with JDBCAccessLogValve\n        at org.apache.catalina.mbeans.MBeanUtils.createMBean(MBeanUtils.java:810)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:721)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:667)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:860)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:828)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.createMBeans(ServerLifecycleListener.java:372)\n        at\norg.apache.catalina.mbeans.ServerLifecycleListener.lifecycleEvent(ServerLifecycleListener.java:226)\n        at\norg.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:166)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:2183)\n        at\norg.apache.catalina.startup.CatalinaService.start(CatalinaService.java:273)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at\nsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at\nsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:324)\n        at\norg.apache.catalina.startup.BootstrapService.start(BootstrapService.java:245)\n        at\norg.apache.catalina.startup.BootstrapService.main(BootstrapService.java:307)\n"}, {"count": 4, "tags": [], "text": "JDBCAccessLogValve is not one of valve mbeans defined since it's not supported\nin admin.  You'll need to add the definition in the descriptor for it.  Please\nsee http://jakarta.apache.org/tomcat/tomcat-4.1-doc/mbeans-descriptor-howto.html.  ", "attachment_id": null, "id": 35997, "creator": "amyroh@apache.org", "time": "2003-04-24T17:22:51Z", "bug_id": 18459, "creation_time": "2003-04-24T17:22:51Z", "is_private": false}, {"count": 5, "attachment_id": null, "bug_id": 18459, "is_private": false, "id": 36054, "time": "2003-04-25T08:02:48Z", "creator": "tivv@gtech-ua.com", "creation_time": "2003-04-25T08:02:48Z", "tags": [], "text": "But I really don't think that enabling standard feature in the server.xml should\nproduce logged exception (that may confuse user who don't know anything about\nmanaged beans). Yet, understanding that this really not critical I am changing\nseverity to Enhancement.\nAs of me, good enhancement would be:\n1)Not to produce exception log record\n2)Produce a warning with clear text for anyone not knowing about manager bean."}, {"count": 6, "tags": [], "bug_id": 18459, "attachment_id": null, "is_private": false, "id": 37421, "time": "2003-05-19T10:33:10Z", "creator": "tivv@gtech-ua.com", "creation_time": "2003-05-19T10:33:10Z", "text": "I've just tried to use Admin application on a tomcat with such a exception and\ncould not. It simply won't work. \nI think that this is _wrong_ even if there is some unknown (but valid)\nconfiguration statement, but it if very bad if this is known statement from\ndefault installation (as JDBCAccessValve in my case).\nChanging this to major bug."}, {"count": 7, "tags": [], "bug_id": 18459, "attachment_id": null, "is_private": false, "id": 37426, "time": "2003-05-19T12:32:26Z", "creator": "remm@apache.org", "creation_time": "2003-05-19T12:32:26Z", "text": "I think this subject has been beaten to the death, and this will not be fixed in\n4.1.x. Please don't reopen the report (you can try to lobby to have Tomcat 5\nbehave differently, though)."}, {"count": 8, "tags": [], "bug_id": 18459, "is_private": false, "text": "I won't (until Tomcat 5) but I still think that using out-of-box tomcat feature\n(JDBCAccessValve) should not break Admin application as it does now.", "id": 37427, "time": "2003-05-19T12:50:44Z", "creator": "tivv@gtech-ua.com", "creation_time": "2003-05-19T12:50:44Z", "attachment_id": null}, {"count": 9, "tags": [], "bug_id": 18459, "attachment_id": null, "is_private": false, "id": 37428, "time": "2003-05-19T13:01:47Z", "creator": "remm@apache.org", "creation_time": "2003-05-19T13:01:47Z", "text": "Ok, so you just want the JDBCAccessLogValve to be included in the descriptors ?\nHave you verified that it was being saved correctly by the admin webapp once it\nis added to the main descriptor file, or a sub descriptor file (otherwise,\nthere's no point) ?\nYou can read the instructions on the MBean HOWTO page."}]