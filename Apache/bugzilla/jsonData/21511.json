[{"count": 0, "tags": [], "bug_id": 21511, "attachment_id": null, "id": 40465, "time": "2003-07-11T13:46:47Z", "creator": "brunner@pixel.de", "creation_time": "2003-07-11T13:46:47Z", "is_private": false, "text": "Custom file selectors for file sets can't use their project member (e.g. for\nlogging or for resolving properties) as it is always null.\n\nProvided a minimum example below.\n\nBye Rudi\n\n-------------------------- Java code --------------------------\npackage my.selector;\n\nimport org.apache.tools.ant.types.selectors.BaseSelector;\nimport java.io.File;\n\npublic class MySelector extends BaseSelector\n{\n    public boolean isSelected(File file, String s, File file1)\n    {\n        System.out.println(\"project = \" + project);\n        return true;\n    }\n}\n---------------------------------------------------------------\n\n-------------------------- Ant build file ---------------------\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<project name=\"MySelector\" default=\"compile\">\n\n    <property name=\"classesdir\" value=\"classes\" />\n    <property name=\"srcdir\" value=\"src\" />\n\n    <target name=\"test\">\n        <zip destfile=\"test.zip\">\n            <fileset dir=\"${srcdir}\" includes=\"**/*.java\">\n                <custom classname=\"my.selector.MySelector\"\nclasspath=\"${classesdir}\"/>\n            </fileset>\n        </zip>\n    </target>\n\n    <target name=\"compile\">\n        <mkdir dir=\"${classesdir}\"/>\n        <javac srcdir=\"${srcdir}\" destdir=\"${classesdir}\"/>\n    </target>\n\n    <target name=\"clean\">\n        <delete dir=\"${classesdir}\" />\n    </target>\n\n</project>\n---------------------------------------------------------------"}, {"count": 1, "tags": [], "text": "Fixed in ant nightly build,\nalso you should use getProject() and not the field project.\n\n*** This bug has been marked as a duplicate of 14834 ***", "is_private": false, "id": 40466, "creation_time": "2003-07-11T13:57:24Z", "time": "2003-07-11T13:57:24Z", "creator": "peter.reilly@corvil.com", "bug_id": 21511, "attachment_id": null}]