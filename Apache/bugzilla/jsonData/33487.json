[{"count": 0, "tags": [], "text": "When I try to write a Document with this code:\n\nSystem.setProperty(DOMImplementationRegistry.PROPERTY,\n                        \"org.apache.xerces.dom.DOMImplementationSourceImpl\");\nDOMImplementationRegistry registry =\n                                   DOMImplementationRegistry.newInstance();\n\nDOMImplementationLS impl =\n                      (DOMImplementationLS)registry.getDOMImplementation(\"LS\");\nLSOutput output = impl.createLSOutput();\noutput.setSystemId(uri);\nLSSerializer writer = impl.createLSSerializer();\nwriter.write(document, output);\n\n\nI recieve this error:\n     [java] java.io.IOException: The replacement text of the entity node\n'entity' contains an element node 'example1' with an attribute 'xmlns:exa' an\nundeclared prefix 'xmlns'.\n     [java] \tat org.apache.xml.serialize.BaseMarkupSerializer.fatalError(Unknown\nSource)\n     [java] \tat\norg.apache.xml.serialize.XMLSerializer.checkUnboundNamespacePrefixedNode(Unknown\nSource)\n     [java] \tat\norg.apache.xml.serialize.BaseMarkupSerializer.serializeNode(Unknown Source)\n     [java] \tat org.apache.xml.serialize.XMLSerializer.serializeElement(Unknown\nSource)\n     [java] \tat\norg.apache.xml.serialize.BaseMarkupSerializer.serializeNode(Unknown Source)\n     [java] \tat\norg.apache.xml.serialize.BaseMarkupSerializer.serializeNode(Unknown Source)\n     [java] \tat org.apache.xml.serialize.BaseMarkupSerializer.serialize(Unknown\nSource)\n     [java] \tat org.apache.xml.serialize.DOMSerializerImpl.write(Unknown Source)\n\nThese are the xml files that I am using:\nXML:\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n<!DOCTYPE Root PUBLIC \"-//Example//DTD Example/EN\"\n\"http://www.example.com/example\" [\n\n<!ENTITY entity SYSTEM 'entity.inc'>\n]>\n\n<Root\n name=\"root\"\n xmlns=\"http://www.example.com/example\"     \n xmlns:exa=\"http://www.example.com/example\">\n\n\n   &entity;\n\n\n</Root>\n\nENTITY:\n<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n\n<example1 xmlns:exa=\"http://www.example.com/example\">\n   <exa:example2>ss</exa:example2>\n</example1>\n\n\nI have been investigating the source code of Xerces and I think that the error\nis in org\\apache\\xerces\\util\\NamespaceSupport.java. The method \"String\ngetURI(String prefix)\" compare two string but uses \"==\" instead of \"equals\". I\nhave modified this code and previous example does not produce errors.\n\nDIFF between original code and my modified code:\n\n232c232\n<             if (fNamespace[i - 2] == prefix) {\n---\n>             if (fNamespace[i - 2].equals(prefix)) {", "attachment_id": null, "id": 70744, "creator": "ijorge@ignos.com", "time": "2005-02-10T11:33:58Z", "bug_id": 33487, "creation_time": "2005-02-10T11:33:58Z", "is_private": false}, {"count": 1, "tags": [], "creator": "mrglavas@ca.ibm.com", "attachment_id": null, "text": "New bugs, or modifications to existing bugs should be made using JIRA. Some \ntime ago tracking of bugs and issues in Xerces moved from Bugzilla to JIRA at: \nhttp://nagoya.apache.org/jira. Please open this bug report there.\n\nThe URL for Xerces in JIRA is: http://issues.apache.org/jira/browse/XERCESJ. In \norder to create a new bug or issue in JIRA, you will need to create a JIRA \naccount (assuming you don't already have one).", "id": 70751, "time": "2005-02-10T14:06:22Z", "bug_id": 33487, "creation_time": "2005-02-10T14:06:22Z", "is_private": false}]