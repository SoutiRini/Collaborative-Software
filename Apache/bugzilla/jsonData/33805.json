[{"count": 0, "tags": [], "bug_id": 33805, "text": "Using Fedora Core 3.\n\n--\n# rpm -q httpd\nhttpd-2.0.52-3.1\n--\n\n--\n# rpm -q mod_python\nmod_python-3.1.3-5.2\n--\n\n/etc/httpd/conf.d/python.conf\n--\n# Add .psp to types\nAddType application/x-httpd-psp .psp\n\n# Handle .psp documents with mod_python\nAddHandler mod_python .psp\nPythonHandler mod_python.psp\n\n# Add index.psp to index documents\nDirectoryIndex index.psp\n\n# Enable debug under /psp directory\n<Directory /var/www/html/psp>\nAddHandler mod_python .psp_\nPythonDebug On\n</Directory>\n--\n\n/var/www/html/psp/index.psp\n--\n<html>\n\nsid: <%=session.id()%>\n\n</html>\n--\n\nlynx localhost/psp\n--\nMod_python error: \"PythonHandler mod_python.psp\"\n\nTraceback (most recent call last):\n\n  File \"/usr/lib/python2.3/site-packages/mod_python/apache.py\", line 299, in \nHandlerDispatch\n    result = object(req)\n\n  File \"/usr/lib/python2.3/site-packages/mod_python/psp.py\", line 297, in \nhandler\n    p.run()\n\n  File \"/usr/lib/python2.3/site-packages/mod_python/psp.py\", line 191, in run\n    session = Session.Session(req)\n\n  File \"/usr/lib/python2.3/site-packages/mod_python/Session.py\", line 389, in \nSession\n    timeout=timeout, lock=lock)\n\n  File \"/usr/lib/python2.3/site-packages/mod_python/Session.py\", line 294, in \n__init__\n    timeout=timeout, lock=lock)\n\n  File \"/usr/lib/python2.3/site-packages/mod_python/Session.py\", line 132, in \n__init__\n    Cookie.add_cookie(self._req, self.make_cookie())\n\n  File \"/usr/lib/python2.3/site-packages/mod_python/Session.py\", line 160, in \nmake_cookie\n    c.path = dirpath[len(docroot):]\n\nTypeError: unsubscriptable object\n--\n\nFirst the page worked like a charm. But then I figured I'd like to see how \nmod_python handles a situation where the page has an infinite loop in it.\n\nI coded a page with a code like \"while True:\" etc. in it and ran it. (The code \nhad a call to session too, so session was initialized.) I noticed that the \nscript was newer killed (this is bad, PHP handles this with its time limit). I \nhad to restart httpd then (which killed the script).\n\nNow after that loop test the session variable does not work anymore. I get \nthat \"unsubscriptable object\" error message.\n\nI figured that maybe the session data is corrupted and deleted the dbm file \nfrom /tmp. That did not help. I've also restarted httpd multiple times.\n\nThe weirdest thing about this is that the httpd is preforked, so the session \nshould exists only in memory. If the session exists only in memory, restarting \nhttpd should be enough.\n\nWhere can that corrupted session data be stored now? Does httpd save its state \ninto some files? Even rebooting the whole machine did not help.\n\nI consider this bug a very serious thing because this is a blocker. Sessions \ndon't work anymore.\n\nAlso, some kind of handling for infinite loops should be implemented. Yes I \nknow, that should be described in another bug report, but let's fix this \nsession thing first.\n\nI have high hopes for mod_python as it integrates an excellent language to an \nexcellent web server and because it enables a powerfull and easy alternative to \nPHP.", "id": 71713, "time": "2005-03-02T13:57:35Z", "creator": "jval@wippies.com", "creation_time": "2005-03-02T13:57:35Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 72128, "time": "2005-03-10T14:35:23Z", "bug_id": 33805, "creation_time": "2005-03-10T14:35:23Z", "is_private": false, "text": "mod_python uses JIRA for bug tracking - could you refile this issue over there? \n\nhttp://issues.apache.org/jira/"}, {"count": 2, "tags": [], "bug_id": 33805, "attachment_id": null, "id": 72139, "time": "2005-03-10T15:02:05Z", "creator": "jval@wippies.com", "creation_time": "2005-03-10T15:02:05Z", "is_private": false, "text": "Refiled: http://issues.apache.org/jira/browse/MODPYTHON-31\n\n"}]