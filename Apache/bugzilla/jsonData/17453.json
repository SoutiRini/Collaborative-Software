[{"count": 0, "tags": [], "creator": "schtool@yahoo.com", "is_private": false, "text": "apache will not stream a large file.  server is syrinx.  client is\ninstall-qrbldsp.  This happens with all versions including 2.0.43.\n\n[jhf@syrinx]:/export/ni> uname -a\nSunOS syrinx 5.9 Generic sun4u sparc SUNW,Ultra-60\n[jhf@syrinx]:/export/ni> grep ^DocumentRoot /etc/apache/httpd.conf\nDocumentRoot \"/export\"\n[jhf@syrinx]:/export/ni> /usr/apache/bin/httpd -version\nServer version: Apache/1.3.12 (Unix)\nServer built:   Oct 17 2000 14:52:39\n[jhf@syrinx]:/export/ni> pgrep httpd\n2895\n2899\n2896\n2897\n2894\n2900\n4828\n2898\n\n[jhf@syrinx]:/export/ni> ls -l *file\n-rw-r--r--   1 root     other    2318311396 Nov 15 14:56 hugefile\n-rw-r--r--   1 root     other         21 Nov 15 17:25 smallfile\n[jhf@syrinx]:/export/ni> cat smallfile\nthis is a small file\n\n\nNow.. I go to another machine and try to get these files.  I can\nretrieve the small one just fine.  The large one doesn't go so well:\n\n\n[jhf@install-qrbldsp]:/tmp> telnet syrinx 80\nTrying 129.146.89.216...\nConnected to syrinx.\nEscape character is '^]'.\nGET /ni/smallfile HTTP/1.0\nHost: syrinx   \n\nHTTP/1.1 200 OK\nDate: Thu, 16 Nov 2000 01:28:11 GMT\nServer: Apache/1.3.12 (Unix) mod_perl/1.24 ApacheJserv/1.1.2\nLast-Modified: Thu, 16 Nov 2000 01:25:10 GMT\nETag: \"4c50e-15-3a133776\"\nAccept-Ranges: bytes\nContent-Length: 21\nConnection: close\nContent-Type: text/plain\n\nthis is a small file\nConnection closed by foreign host.\n[jhf@install-qrbldsp]:/tmp> telnet syrinx 80\nTrying 129.146.89.216...\nConnected to syrinx.\nEscape character is '^]'.\nGET /ni/hugefile HTTP/1.0\nHost: syrinx\n\nHTTP/1.1 403 Forbidden\nDate: Thu, 16 Nov 2000 01:28:24 GMT\nServer: Apache/1.3.12 (Unix) mod_perl/1.24 ApacheJserv/1.1.2\nConnection: close\nContent-Type: text/html; charset=iso-8859-1\n\n<!DOCTYPE HTML PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<HTML><HEAD>\n<TITLE>403 Forbidden</TITLE>\n</HEAD><BODY>\n<H1>Forbidden</H1>\nYou don't have permission to access /ni/hugefile\non this server.<P>\n<HR>\n<ADDRESS>Apache/1.3.12 Server at syrinx Port 80</ADDRESS>\n</BODY></HTML>\nConnection closed by foreign host.\n\nI got lucky and picked the right http process to truss.. Here's what\nit gets:\n\n# truss -p -f 4924\n4924:\taccept(16, 0xFFBEF9C4, 0xFFBEF9D4, 1) (sleeping...)\n4924:\taccept(16, 0xFFBEF9C4, 0xFFBEF9D4, 1)\t\t= 5\n4924:\tfcntl(18, F_SETLKW, 0x00071158)\t\t\t= 0\n4924:\tsigaction(SIGUSR1, 0xFFBEF888, 0xFFBEF908)\t= 0\n4924:\tgetsockname(5, 0xFFBEF9B4, 0xFFBEF9D4, 1)\t= 0\n4924:\tsetsockopt(5, 6, 1, 0xFFBEF944, 4, 1)\t\t= 0\n4924:\tread(5, 0x00083D50, 4096)\t(sleeping...)\n4924:\tread(5, \" G E T   / n i / h u g e\".., 4096)\t= 27\n4924:\tsigaction(SIGUSR1, 0xFFBED7B8, 0xFFBED838)\t= 0\n4924:\ttime()\t\t\t\t\t\t= 974338384\n4924:\tread(5, \" H o s t :   s y r i n x\".., 4096)\t= 14\n4924:\tread(5, 0x00083D50, 4096)\t(sleeping...)\n4924:\tread(5, \"\\r\\n\", 4096)\t\t\t\t= 2\n4924:\tstat(\"/export/ni/hugefile\", 0x000EBCE8)\t\tErr#79 EOVERFLOW\n4924:\ttime()\t\t\t\t\t\t= 974338385\n4924:\twrite(15, \" [ W e d   N o v   1 5  \".., 131)\t= 131\n4924:\twrite(5, \" H T T P / 1 . 1   4 0 3\".., 461)\t= 461\n4924:\ttime()\t\t\t\t\t\t= 974338385\n4924:\twrite(17, \" 1 9 2 . 1 6 8 . 9 0 . 6\".., 83)\t= 83\n4924:\tshutdown(5, 1, 1)\t\t\t\t= 0\n4924:\tpoll(0xFFBEF618, 1, 2000)\t\t\t= 1\n4924:\tread(5, 0xFFBEF6C0, 512)\t\t\t= 0\n4924:\tclose(5)\t\t\t\t\t= 0\n4924:\tsigaction(SIGUSR1, 0xFFBEF888, 0xFFBEF908)\t= 0\n4924:\tfcntl(18, F_SETLKW, 0x0007117C)\t(sleeping...)\n\nSo it's an EOVERFLOW.", "id": 32040, "time": "2003-02-26T20:46:25Z", "bug_id": 17453, "creation_time": "2003-02-26T20:46:25Z", "attachment_id": null}, {"count": 1, "tags": [], "creator": "jim@apache.org", "text": "This will not be addressed in the 1.3 tree. 2.x is much better at this and would be easier \nto get around the assumptions of the size of signed ints.", "id": 34734, "time": "2003-04-08T15:10:53Z", "bug_id": 17453, "creation_time": "2003-04-08T15:10:53Z", "is_private": false, "attachment_id": null}, {"count": 2, "attachment_id": null, "bug_id": 17453, "text": "*** Bug 24729 has been marked as a duplicate of this bug. ***", "id": 47568, "time": "2003-11-18T18:41:02Z", "creator": "erik@codefaktor.de", "creation_time": "2003-11-18T18:41:02Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "bug_id": 17453, "attachment_id": null, "is_private": false, "id": 47570, "time": "2003-11-18T18:41:57Z", "creator": "erik@codefaktor.de", "creation_time": "2003-11-18T18:41:57Z", "text": "*** Bug 24777 has been marked as a duplicate of this bug. ***"}]