[{"attachment_id": null, "tags": [], "creator": "lizzardo@ix.netcom.com", "text": "It would be desirable if the LoadFile task supported the \"quiet\" attribute to\nsuppress the java.io.FileNotFoundException if the file does not exist.  \n\nI have a case where it is not an error if the file doesn't exist, but the\nexception still appears in the build report.  There are a several possible\nworkarounds to keep the report clean of false warnings, but it would be cleaner\nif the task itself supported it.", "count": 0, "id": 84577, "time": "2006-01-13T02:23:31Z", "bug_id": 38249, "creation_time": "2006-01-13T02:23:31Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 38249, "is_private": false, "text": "Created attachment 17405\npatch for LoadFile.java\n\nI made the suggested enhancement locally.  The attached file is the output from\nthe following command:\n\n  diff -u LoadFile.java.orig LoadFile.java > LoadFile.patch", "id": 84584, "time": "2006-01-13T03:37:34Z", "creator": "lizzardo@ix.netcom.com", "creation_time": "2006-01-13T03:37:34Z", "attachment_id": 17405}, {"count": 2, "attachment_id": 17405, "creator": "lizzardo@ix.netcom.com", "is_private": false, "id": 84606, "time": "2006-01-13T16:33:05Z", "bug_id": 38249, "creation_time": "2006-01-13T16:33:05Z", "tags": [], "text": "Comment on attachment 17405\npatch for LoadFile.java\n\n--- LoadFile.java.orig\t2005-06-02 16:19:58.000000000 -0700\n+++ LoadFile.java\t2006-01-13 07:25:55.947056800 -0800\n@@ -48,6 +48,11 @@\n     private boolean failOnError = true;\n\n     /**\n+     * suppress error message if it goes pear-shaped, sets failOnError=false \n+     */\n+    private boolean quiet = false;\n+    \n+    /**\n      * Encoding to use for filenames, defaults to the platform's default\n      * encoding.\n      */\n@@ -57,7 +62,7 @@\n      * name of property\n      */\n     private String property = null;\n-\n+    \n     /**\n      * Holds FilterChains\n      */\n@@ -109,6 +114,16 @@\n\t failOnError = fail;\n     }\n\n+    /**\n+     * If true\n+     * @param quiet The new Quiet value\n+     */\n+    public void setQuiet(boolean quiet) {\n+\t this.quiet = quiet;\n+\t if (quiet) {\n+\t     this.failOnError = false;\n+\t }\n+    }\n\n     /**\n      * read in a source file to a property\n@@ -124,6 +139,10 @@\n\t if (property == null) {\n\t     throw new BuildException(\"output property not defined\");\n\t }\n+\t if (quiet && failOnError) {\n+\t     throw new BuildException(\"quiet and failonerror cannot both be \"\n+\t\t\t\t      + \"set to true\");\n+\t }\n\t FileInputStream fis = null;\n\t BufferedInputStream bis = null;\n\t Reader instream = null;\n@@ -169,7 +188,8 @@\n\t     if (failOnError) {\n\t\t throw new BuildException(message, ioe, getLocation());\n\t     } else {\n-\t\t log(message, Project.MSG_ERR);\n+\t\t log(message, quiet ? Project.MSG_VERBOSE\n+\t\t\t\t    : Project.MSG_WARN);\n\t     }\n\t } catch (final BuildException be) {\n\t     if (failOnError) {"}, {"count": 3, "attachment_id": 17405, "creator": "lizzardo@ix.netcom.com", "is_private": false, "id": 84608, "time": "2006-01-13T16:36:18Z", "bug_id": 38249, "creation_time": "2006-01-13T16:36:18Z", "tags": [], "text": "Comment on attachment 17405\npatch for LoadFile.java\n\n--- LoadFile.java.orig\t2005-06-02 16:19:58.000000000 -0700\n+++ LoadFile.java\t2006-01-13 07:25:55.947056800 -0800\n@@ -48,6 +48,11 @@\n     private boolean failOnError = true;\n\n     /**\n+     * suppress error message if it goes pear-shaped, sets failOnError=false \n+     */\n+    private boolean quiet = false;\n+    \n+    /**\n      * Encoding to use for filenames, defaults to the platform's default\n      * encoding.\n      */\n@@ -57,7 +62,7 @@\n      * name of property\n      */\n     private String property = null;\n-\n+    \n     /**\n      * Holds FilterChains\n      */\n@@ -109,6 +114,16 @@\n\t failOnError = fail;\n     }\n\n+    /**\n+     * If true\n+     * @param quiet The new Quiet value\n+     */\n+    public void setQuiet(boolean quiet) {\n+\t this.quiet = quiet;\n+\t if (quiet) {\n+\t     this.failOnError = false;\n+\t }\n+    }\n\n     /**\n      * read in a source file to a property\n@@ -124,6 +139,10 @@\n\t if (property == null) {\n\t     throw new BuildException(\"output property not defined\");\n\t }\n+\t if (quiet && failOnError) {\n+\t     throw new BuildException(\"quiet and failonerror cannot both be \"\n+\t\t\t\t      + \"set to true\");\n+\t }\n\t FileInputStream fis = null;\n\t BufferedInputStream bis = null;\n\t Reader instream = null;\n@@ -169,7 +188,8 @@\n\t     if (failOnError) {\n\t\t throw new BuildException(message, ioe, getLocation());\n\t     } else {\n-\t\t log(message, Project.MSG_ERR);\n+\t\t log(message, quiet ? Project.MSG_VERBOSE\n+\t\t\t\t    : Project.MSG_WARN);\n\t     }\n\t } catch (final BuildException be) {\n\t     if (failOnError) {"}, {"attachment_id": 17417, "tags": [], "bug_id": 38249, "text": "Created attachment 17417\npatch of loadfile.html\n\nThis is a patch for the html doc file that goes with the modified patch to\nLoadFile.java.\tThe modified patch is in the comment (sorry for the duplicate\ncommnet of that).  \n\nThe only difference in the modified patch of hte Java source is that it sets\nfailonerror to false when it sets quiet to true.  This made it more consistent\nwith other ant behavior.\n\nThe attached is the output from the following command:\n\ndiff -u loadfile.html.orig loadfile.html > loadfile.patch", "count": 4, "id": 84609, "time": "2006-01-13T16:45:50Z", "creator": "lizzardo@ix.netcom.com", "creation_time": "2006-01-13T16:45:50Z", "is_private": false}, {"count": 5, "tags": [], "bug_id": 38249, "text": "Commited the patch.\nThanks for the report.\n", "id": 95790, "time": "2006-11-13T13:11:52Z", "creator": "peterreilly@apache.org", "creation_time": "2006-11-13T13:11:52Z", "is_private": false, "attachment_id": null}]