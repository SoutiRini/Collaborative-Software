[{"count": 0, "tags": [], "bug_id": 13331, "attachment_id": null, "id": 23998, "time": "2002-10-05T17:28:03Z", "creator": "steve53@earthlink.net", "creation_time": "2002-10-05T17:28:03Z", "is_private": false, "text": "When attempting to start Tomcat 4.04 under OS/2, startup fails with\n\njava.util.zip.ZipException: The file or directory specified is read-only.\n\tat java.util.zip.ZipFile.open(Native Method)\n\tat java.util.zip.ZipFile.<init>(ZipFile.java:127)\n\tat java.util.jar.JarFile.<init>(JarFile.java:138)\n\tat java.util.jar.JarFile.<init>(JarFile.java:80)\n\tat\norg.apache.catalina.loader.StandardClassLoader.addRepositoryInternal(StandardClassLoader.java:1216)\n\tat\norg.apache.catalina.loader.StandardClassLoader.<init>(StandardClassLoader.java:221)\n\tat\norg.apache.catalina.startup.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:204)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:153)\nBootstrap: Class loader creation threw exception\njava.lang.IllegalArgumentException: addRepositoryInternal:\njava.util.zip.ZipException: The file or directory specified is read-only.\n\tat\norg.apache.catalina.loader.StandardClassLoader.addRepositoryInternal(StandardClassLoader.java:1246)\n\tat\norg.apache.catalina.loader.StandardClassLoader.<init>(StandardClassLoader.java:221)\n\tat\norg.apache.catalina.startup.ClassLoaderFactory.createClassLoader(ClassLoaderFactory.java:204)\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:153)\n\nThis occurs because Tomcat class loader attempts to open the classes directory\nas a file.  Without looking at the Tomcat code, I suspect its attempting to\ncheck if the directory exists.  OS/2 does not allow directories to be opened as\na files.\n\nA temporary workaround is to rename the classes directories so that file open fails.\n\nThanks"}, {"count": 1, "tags": [], "bug_id": 13331, "attachment_id": null, "text": "FYI: This is/was a bug in bootstrap.jar whereby the authors were assuming\ndirectory names always end with a backslash. This is a bad assumption; they\nshould have used File.isDirectory() for this check.\n\nAttached is a patch version of bootstrap.jar based upon Tomcat 4.0.4 final. I\nhacked it myself ;)\n\nAs well, I believe this issue has been fixed in newer builds of Tomcat; would be\nnice if someone could verify that. If you see the bug no longer occurs in newer\nbuilds, please close this bug as \"FIXED\".\n\nThanks,\nGili", "id": 24392, "time": "2002-10-12T08:16:27Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2002-10-12T08:16:27Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 13331, "attachment_id": 3440, "id": 24393, "time": "2002-10-12T08:17:36Z", "creator": "cowwoc@bbs.darktech.org", "creation_time": "2002-10-12T08:17:36Z", "is_private": false, "text": "Created attachment 3440\nPatched bootstap.jar which fixes the aforementioned issue"}, {"count": 3, "tags": [], "bug_id": 13331, "attachment_id": null, "id": 63778, "time": "2004-09-18T21:37:16Z", "creator": "markt@apache.org", "creation_time": "2004-09-18T21:37:16Z", "is_private": false, "text": "The code has been patched (4.1.6 and later) in this area but using an \nalternative method. I believe that this should resolve the issue but I do not \nhave access to an OS/2 box to test this.\n\nPlease re-open this bug if it still occurs under OS/2."}]