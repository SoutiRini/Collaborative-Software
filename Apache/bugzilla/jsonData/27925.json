[{"count": 0, "attachment_id": null, "bug_id": 27925, "is_private": false, "id": 54613, "time": "2004-03-24T23:10:55Z", "creator": "juergen@jwi.de", "creation_time": "2004-03-24T23:10:55Z", "tags": [], "text": "If you run with crosscontext enabled:\n\n<%\n\njavax.servlet.ServletContext context =\npageContext.getServletContext().getContext(\"/jsp-examples/cal/\");\n\nif (null!= context)\n{\n\tout.print(context.getRealPath(\"/\"));\n}\n%>\n\n\nFine, result is: \n\nD:\\java\\jakarta-tomcat-5.0.19\\webapps\\jsp-examples\\\n\n\nIf you call getContext(\"/anothercontext\");\n\nit still works if /anothercontext is included with a context.xml file in \nD:\\java\\jakarta-tomcat-5.0.19\\conf\\Catalina\\localhost\n\n\nBut getContext(\"/anothercontext/\") i.e. the slash or any existing path appended\n\nresults in D:\\java\\jakarta-tomcat-5.0.19\\webapps\\ROOT\\\n\nIt seems the context-lookup algorithm checks only the part specified with \n<Context path=\"/anothercontext\" in the xml file.\n\nBut getContext() should find a context, regardless how the context is made known\nto the container."}, {"count": 1, "tags": [], "text": "Obviously not.", "is_private": false, "id": 54615, "creator": "remm@apache.org", "time": "2004-03-24T23:24:02Z", "bug_id": 27925, "creation_time": "2004-03-24T23:24:02Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 27925, "text": "I get \n\nC:\\java\\jakarta-tomcat-5.0.19\\webapps\\ROOT\\\n\nC:\\java\\jakarta-tomcat-5.0.19\\webapps\\ROOT\\\n\nC:\\java\\jakarta-tomcat-5.0.19\\webapps\\..\\server\\webapps\\manager\\ \n\nfor \n\n<%\njavax.servlet.ServletContext context;\n\ncontext = pageContext.getServletContext().getContext(\"/manager/\");\nif (null!= context)\n{\n\tout.print(context.getRealPath(\"/\"));\n}\n\nout.print(\"<p>\");\n\ncontext = pageContext.getServletContext().getContext(\"/manager/manager-howto.html\");\nif (null!= context)\n{\n\tout.print(context.getRealPath(\"/\"));\n}\n\nout.print(\"<p>\");\n\ncontext = pageContext.getServletContext().getContext(\"/manager\");\nif (null!= context)\n{\n\tout.print(context.getRealPath(\"/\"));\n}\n\n%>\n\nNote that the scriptlet must be run from a context with crossContext=\"true\".\n\nThe output should be three times the third output line,\ncorresponding to\nhttp://jakarta.apache.org/tomcat/tomcat-5.0-doc/servletapi/javax/servlet/ServletContext.html#getContext(java.lang.String)", "id": 54646, "time": "2004-03-25T08:59:50Z", "creator": "juergen@jwi.de", "creation_time": "2004-03-25T08:59:50Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 27925, "text": "I did test it. Thanks for not wasting my time.", "id": 54649, "time": "2004-03-25T10:53:48Z", "creator": "remm@apache.org", "creation_time": "2004-03-25T10:53:48Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "bug_id": 27925, "attachment_id": null, "id": 54804, "time": "2004-03-29T07:51:39Z", "creator": "juergen@jwi.de", "creation_time": "2004-03-29T07:51:39Z", "is_private": false, "text": "For those that also run into this bug, it was fixed after the release of\njakarta-tomcat-5.0.19.\n\nIn ApplicationContextFacade.java there was\n\nwhile (true) {\n                child = (Context) host.findChild(mapuri);\n                if (context != null)\n                    break;\n                int slash = mapuri.lastIndexOf('/');\n                if (slash < 0)\n                    break;\n                mapuri = mapuri.substring(0, slash);\n            }\n\nThe if (context != null) was always true, it is now if (child != null).\n"}]