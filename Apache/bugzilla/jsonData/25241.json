[{"count": 0, "tags": [], "bug_id": 25241, "text": "With versions prior to 5x a jsp:getProperty tag will print a zero length string\nif the String (object) property being accessed is null.\n\nWith version 5x it prints \"null\".  \n\nThis will cause problems for developers moving applications from 4x to 5x.\n\nI submitted a patch that fixes this to the Tomcat Developer list.\nIt is also available at the following URL:\nhttp://www.souther.us/JspRuntimeLibrary.patch\n\nThank you,\nBen Souther", "id": 48565, "time": "2003-12-05T13:58:05Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-05T13:58:05Z", "is_private": false, "attachment_id": null}, {"text": "Revision 1.7 of JspRuntimeLibrary seems to indicate this was done on purpose for\nthis Jasper release.", "tags": [], "bug_id": 25241, "is_private": false, "count": 1, "id": 48568, "time": "2003-12-05T15:18:30Z", "creator": "remm@apache.org", "creation_time": "2003-12-05T15:18:30Z", "attachment_id": null}, {"count": 2, "attachment_id": null, "creator": "bsouther@fwdco.com", "text": "Is there a reason why this change was made?\n\nI searched bugzilla with keyword \"getProperty\" before writing the patch and\nwasn't able to find anything.\n\nWhen using &lt;%=bean.getXXX()%&gt; one would expect to see \"null\" printed but,\nsince the XML syntax tags coerce native types to their respective String values,\nit made sense (IMHO) for nulls to be converted to empty strings.\n\nMy own app has hundreds of text fields that now have \"null\" for thier initial\nvalue. I imagine this will be the case for many other applications.", "id": 48571, "time": "2003-12-05T15:46:44Z", "bug_id": 25241, "creation_time": "2003-12-05T15:46:44Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "funkman@joedog.org", "attachment_id": null, "is_private": false, "id": 48579, "time": "2003-12-05T16:56:01Z", "bug_id": 25241, "creation_time": "2003-12-05T16:56:01Z", "text": "Since this was the only change in a revision:\nhttp://cvs.apache.org/viewcvs.cgi/jakarta-tomcat-jasper/jasper2/src/share/org/apache/jasper/runtime/JspRuntimeLibrary.java?rev=1.7&view=markup\n\nGiven that this was done by developer from Sun, this seems to be the correct\nbehavior. The spec says:\n\"The conversion to String is done as in the println() methods\" which in the case\nof nulls, does print the word \"null\".\n "}, {"count": 4, "tags": [], "bug_id": 25241, "attachment_id": null, "is_private": false, "id": 48581, "time": "2003-12-05T18:08:13Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-05T18:08:13Z", "text": "If I were to write a patch to make this configurable via the jsp servlet tag in\nweb.xml for backward compatibility, would I have a snowball's chance in hell of\ngetting it committed?"}, {"text": "I looked in the spec: paragraph 5.3 points to inserting \"null\", same as println\n(= String.valueOf). Now, the same paragraph in the spec mentions it's also\nequivalent to doing a toString on the Object. Maybe not ;-)", "tags": [], "bug_id": 25241, "is_private": false, "count": 5, "id": 48584, "time": "2003-12-05T18:37:47Z", "creator": "remm@apache.org", "creation_time": "2003-12-05T18:37:47Z", "attachment_id": null}, {"count": 6, "tags": [], "creator": "bsouther@fwdco.com", "attachment_id": null, "is_private": false, "id": 48589, "time": "2003-12-05T18:57:19Z", "bug_id": 25241, "creation_time": "2003-12-05T18:57:19Z", "text": "Thanks Remy,\nI'll submit a patch."}, {"count": 7, "tags": [], "bug_id": 25241, "text": "Created attachment 9436\nPatch to allow the behavior of jsp:getProperty (when accessing null properites) to be configured via the global web.xml file.", "id": 48657, "time": "2003-12-08T02:40:31Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-08T02:40:31Z", "is_private": false, "attachment_id": 9436}, {"count": 8, "attachment_id": null, "bug_id": 25241, "is_private": false, "id": 48658, "time": "2003-12-08T02:42:11Z", "creator": "bsouther@fwdco.com", "creation_time": "2003-12-08T02:42:11Z", "tags": [], "text": "The above patche when applied to Tomcat 5.0.16 will allow a user\nto configure the behavior of a jsp:getProperty tag accssing a null\nbean property.\n\nPrior to version 5, a jsp:getProperty call would print an empty string\nto the page if the bean's property was of type Object and the property\nwas null.  In version 5, it prints the string \"null\".\n\nThe following changes were made:\n\n- web.xml\n    Added xml comment explaining the jspTagShowNull option\n\n- Options.java\n    Added the isJspTagShowNull definition.\n\n- EmbeddedServletOptions.java\n    Added the isJspTagShowNull implementation.\n\n- JspC.java\n    Added the DONT_SHOW_NULL command line option.\n\n- JspRuntimeLibrary.java\n    Added a second (boolean) argument to all the toString(type)\n    methods as well as code to optionally suppress the \"null\"\n    output for the toString(object, boolean) method.\n\n- Generator.java\n    Added code to print the second argument to the generated servlet\n    code.\n\n- messages.properties\n    Added the warning text for the jspTagShowNull option.\n\n"}, {"text": "Sorry, I think there was a misunderstanding: the spec is clear that \"null\"\nshould be printed out, so we won't include a feature which violates the spec. So\nno patch will be accepted.", "tags": [], "bug_id": 25241, "is_private": false, "count": 9, "id": 48665, "time": "2003-12-08T10:06:56Z", "creator": "remm@apache.org", "creation_time": "2003-12-08T10:06:56Z", "attachment_id": null}, {"count": 10, "tags": [], "creator": "funkman@joedog.org", "text": "*** Bug 27215 has been marked as a duplicate of this bug. ***", "id": 52927, "time": "2004-02-25T13:17:57Z", "bug_id": 25241, "creation_time": "2004-02-25T13:17:57Z", "is_private": false, "attachment_id": null}, {"count": 11, "tags": [], "bug_id": 25241, "attachment_id": null, "text": "is the bug fixed for 5.0.18 version.. or else need to apply the patch\n\nthks Sudhakar", "id": 52928, "time": "2004-02-25T13:24:01Z", "creator": "sudhakar@agastha.com", "creation_time": "2004-02-25T13:24:01Z", "is_private": false}, {"count": 12, "attachment_id": null, "creator": "funkman@joedog.org", "is_private": false, "id": 52930, "time": "2004-02-25T13:33:33Z", "bug_id": 25241, "creation_time": "2004-02-25T13:33:33Z", "tags": [], "text": "No, the patch will not be applied. It violates the spec per previous comments in\nthis bug report."}]