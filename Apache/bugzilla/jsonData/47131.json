[{"attachment_id": null, "tags": [], "bug_id": 47131, "is_private": false, "count": 0, "id": 126654, "time": "2009-04-30T05:06:11Z", "creator": "akik_r@yahoo.co.uk", "creation_time": "2009-04-30T05:06:11Z", "text": "The Tomcat connector is configured as below\n\n<!-- Define a non-SSL HTTP/1.1 Connector on port 8080 --> <Connector port=\"8080\" maxHttpHeaderSize=\"8192\" maxThreads=\"350\" minSpareThreads=\"25\" maxSpareThreads=\"75\" enableLookups=\"false\" redirectPort=\"8443\" acceptCount=\"100\" connectionTimeout=\"20000\" disableUploadTimeout=\"true\" />\n\n<!-- Define a SSL HTTP/1.1 Connector on port 8443 --> <Connector port=\"8443\" maxHttpHeaderSize=\"8192\" maxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\" enableLookups=\"false\" disableUploadTimeout=\"true\" connectionTimeout=\"20000\" acceptCount=\"100\" scheme=\"https\" secure=\"false\" proxyPort=\"443\"/>\n\n<!-- Define an AJP 1.3 Connector on port 8009 --> <Connector port=\"8009\" enableLookups=\"false\" redirectPort=\"8443\" protocol=\"AJP/1.3\" />\n\nThe issue is that Tomcat stops listening on port 8443 after a while of running. This means no HTML is returned to end users browsers.\n\nI know this as I am getting a HTTP error code 502 from the apache 2.2.4 webserver that is proxying the request to Tomcat.\n\nThe setup I have is that SSL is terminated at a load balancer and forwards the request to port 8443 to apache, which then proxy passes the request to Tomcat to port 8443 and then Tomcat passes this request to the content server on port 443 (as this is a secure request).\n\nOne theory is that end users are abruptly terminating their session with Tomcat (by cancelling their secure requests or closing their browsers) and Tomcat is not closing the thread when this happens. Therefore running out of threads. I am not sure about this and need some way to prove it."}, {"count": 1, "tags": [], "bug_id": 47131, "is_private": false, "text": "This looks like a configuration issue and should be discussed on the users list.", "id": 126655, "time": "2009-04-30T05:08:51Z", "creator": "markt@apache.org", "creation_time": "2009-04-30T05:08:51Z", "attachment_id": null}]