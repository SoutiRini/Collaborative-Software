[{"attachment_id": null, "tags": [], "bug_id": 35581, "is_private": false, "count": 0, "id": 76877, "time": "2005-07-01T14:10:34Z", "creator": "vaucher@fermat.fr", "creation_time": "2005-07-01T14:10:34Z", "text": "It seems the ant-antlr optional task does a little bit of parsing of the ANTLR\ngrammar file, probably to detemine dependencies. But it is a bit more strict on\nthe content than the actual ANTLR tool in that it requires that the class\ndeclaration and its 'extends' declaration lie on the same line. Otherwise, the\ndreaded 'Unable to determine generated class' is thrown.\n\nFor instance a file containing :\n\nclass MyLexer extends Lexer;\n\nwill work. But one containing :\n\nclass MyLexer\n  extendsLexer;\n\nwon't with ant. It still perfectly works with standalone ANTLR."}, {"count": 1, "tags": [], "bug_id": 35581, "text": "I've just tested this with the following config:\n- no CLASSPATH\n- antlr-2.7.5.jar\n- Ant 1.6.5 - works with line break\n- Ant svn trunk - works with line break\n\nboth on Java1.6-rc Windows XP SP2\n\nattached build file and test grammar\n\nbuild.xml\n---\n<?xml version=\"1.0\"?>\n<project name=\"test-antlr-bug#35581\" basedir=\".\" default=\"run\">\n\n  <target name=\"clean\">\n    <delete dir=\"${basedir}/src\"/>\n    <mkdir dir=\"${basedir}/src\"/>\n  </target>\n  \n  <target name=\"run\" depends=\"clean\">\n    <antlr target=\"test.g\" outputdirectory=\"src\">\n      <classpath>\n        <pathelement location=\"${basedir}/antlr-2.7.5.jar\"/>\n      </classpath>\t      \n    </antlr>\n  </target>\n</project>\n\ntest.g\n---\n\nclass P extends Parser;\n\nstartRule\n    :   n:NAME\n        {System.out.println(\"Hi there, \"+n.getText());}\n    ;\n\nclass L \n  extends Lexer; //broken across lines to test ant task\n\n// one-or-more letters followed by a newline\nNAME:   ( 'a'..'z'|'A'..'Z' )+ NEWLINE\n    ;\n\nNEWLINE\n    :   '\\r' '\\n'   // DOS\n    |   '\\n'        // UNIX\n    ;\n\nAs I can't see where in the ANTLR task we could possibly be breaking and causing\nthis issue, and as it works under test conditions (albeit a simple test), I'm\ngoing to close this - please REOPEN if you can provide a test grammar + build\nfile where this fails for you - my guess is that this was fixed a long time ago\nand was never closed.\n\nThanks for teh report", "id": 85735, "time": "2006-02-13T06:17:32Z", "creator": "kevin.jackson@it.fts-vn.com", "creation_time": "2006-02-13T06:17:32Z", "is_private": false, "attachment_id": null}]