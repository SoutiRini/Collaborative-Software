[{"count": 0, "tags": [], "bug_id": 45321, "is_private": false, "text": "Created attachment 22204\nProposed patch\n\nThis is httpd's bug in the first place. But the best place to fix it is apr, so it's why it's here.\n\nProblem:\n\nIPV6_V6ONLY option (for IPv4 mapped addresses) is not in Windows before Vista. If an application running on older Windows calls apr_socket_opt_get() with this option, it gets that the option is not set (previous call to apr_socket_opt_set() fails with OS error or APR_ENOTIMPL depending on SDK version used to compile it). Option not set means that IPv6 socket can accept both IPv6 and IPv4 connections. But it's not possible there, because separate IPv4/6 stacks don't allow mapped addresses.\nIn this case, if httpd is requested to listen on both 0.0.0.0 and ::, it discards 0.0.0.0, because it thinks that :: will handle it all, but it's wrong.\n\nSolution:\n\na) every application could manually check current OS version and behave accordingly\n\nb) apr could emulate the option for older Windows to allow writing easily portable code; it's what attached patch does", "id": 118172, "time": "2008-07-01T16:40:59Z", "creator": "sob@hisoftware.cz", "creation_time": "2008-07-01T16:40:59Z", "attachment_id": 22204}, {"count": 1, "tags": [], "bug_id": 45321, "attachment_id": null, "text": "committed to trunk as r1091757\n\nI plan to commit to 1.5.x and 1.4.x prior to the apr 1.4.3 release unless someone complains soon.", "id": 145741, "time": "2011-04-13T08:01:51Z", "creator": "trawick@apache.org", "creation_time": "2011-04-13T08:01:51Z", "is_private": false}, {"count": 2, "tags": [], "text": "now in 1.5.x and 1.4.x\nthanks!", "attachment_id": null, "bug_id": 45321, "id": 145751, "time": "2011-04-13T11:40:37Z", "creator": "trawick@apache.org", "creation_time": "2011-04-13T11:40:37Z", "is_private": false}]