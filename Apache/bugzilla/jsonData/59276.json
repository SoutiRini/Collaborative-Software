[{"count": 0, "tags": [], "creator": "knst.kolinko@gmail.com", "is_private": false, "text": "Filing into Bugzilla to better document the issue.\n\nAs I noted in commit message for r1737833, simply dropping in Checkstyle 6.17 (6.16.1, 6.16) - any version later than 6.15 - results in notable drop in performance of reruns.\n\nA more detailed observation is that running Checkstyle 6.17 does not create the cache files (output/res/checkstyle/*), so 6.17 is so slow because it is running without a cache.\n\nIn changelog for Checkstyle 6.16 [1] there is the following item:\n\n* Move Treewalker cache to Checker. Author: Andrei Selkin #569 [2]\n\n[1] http://checkstyle.sourceforge.net/releasenotes.html\n[2] https://github.com/checkstyle/checkstyle/issues/569\n\n[3] Commit that fixes issue 569: https://github.com/MEZk/checkstyle/commit/d46c2cf0e9df06bb5f424dbd7645574f082f7609\n\n\nThis means that \"setCacheFile()\" method was added to Checker class. It means that our configurations (res/checkstyle/*) need to be updated:\n\nThe fix is to move\n\n  <property name=\"cacheFile\" ...>\n\nfrom within <module name=\"TreeWalker\">\ninto top-level <module name=\"Checker\"> element.\n\n\nIt is easy to do the change for command-line users of checkstyle. A question is whether the same configuration files are used by developers running Checkstyle plugin in IDEs. Moving the property will remove caching from older versions of Xhexkstyle.\n\n\nA temporary backwards-compatible workaround may be to keep the property in both places (as setting the duplicate property on TreeWalker does not cause a runtime error with 6.17), but it is expected that the setter method will be removed from TreeWalker in some future release [4]\n\n[4] https://github.com/checkstyle/checkstyle/issues/2883\n#2883 - Remove `cache` field from TreeWalker in Checkstyle 8.0", "id": 189989, "time": "2016-04-06T00:25:41Z", "bug_id": 59276, "creation_time": "2016-04-06T00:25:41Z", "attachment_id": null}, {"text": "(In reply to Konstantin Kolinko from comment #0)\n> \n> A temporary backwards-compatible workaround may be to keep the property in\n> both places (as setting the duplicate property on TreeWalker does not cause\n> a runtime error with 6.17), but it is expected that the setter method will\n> be removed from TreeWalker in some future release [4]\n> \n> [4] https://github.com/checkstyle/checkstyle/issues/2883\n> #2883 - Remove `cache` field from TreeWalker in Checkstyle 8.0\n\nSuch workaround is not possible. Checkstyle 6.15 does not have setCacheFile() method on Walker. An attempt to run updated configuration with 6.15 results in\n\nBUILD FAILED\n\\build.xml:586: Unable to create a Checker: configLocation\n {<...>\\trunk\\res\\checkstyle\\javax-checkstyle.xml}, classpath {null}.\n\nwithout any further details provided by the error message.\n\nI changed the configuration in Tomcat 9 in r1737903.\n\nTomcat 8, 8.5 are TODO.\n\nTomcat 7 is using Checkstyle 6.1.1 as running 6.2 requires Java 7.", "tags": [], "bug_id": 59276, "attachment_id": null, "count": 1, "id": 189990, "time": "2016-04-06T00:44:26Z", "creator": "knst.kolinko@gmail.com", "creation_time": "2016-04-06T00:44:26Z", "is_private": false}, {"count": 2, "tags": [], "bug_id": 59276, "attachment_id": null, "is_private": false, "id": 191677, "time": "2016-06-15T13:57:07Z", "creator": "markt@apache.org", "creation_time": "2016-06-15T13:57:07Z", "text": "Fixed for 8.5.x and 8.0.x as well."}]