[{"count": 0, "tags": [], "text": "It is common for build scripts to compile their own tasks and then taskdef them.\nUnfortunately there is then no standard way to find ant.jar to put in the\nclasspath (assuming you use ${build.sysclasspath}=ignore), unless you happen to\ninclude a copy of this JAR with your project.\n\nYou can use ${ant.home}/lib/ant.jar which works with command-line Ant from\napache.org but might not work with (1) IDEs which bundle Ant, (2) the RPM from\njpackage.org which uses a different directory structure, etc.\n\nSuggest a new built-in property, ${ant.jar}, specifically for a JAR file\ncontaining central Ant classes you would want to import into custom task\nsources. (org.apache.tools.ant.*, basic datatypes and utilities, MatchingTask, etc.)\n\nMotivation:\n\nhttp://www.netbeans.org/issues/show_bug.cgi?id=35123", "attachment_id": null, "id": 41327, "creator": "jesse.glick@netbeans.com", "time": "2003-07-24T15:22:57Z", "bug_id": 21856, "creation_time": "2003-07-24T15:22:57Z", "is_private": false}, {"count": 1, "tags": [], "text": "Created attachment 7494\nSuggested patch", "attachment_id": 7494, "bug_id": 21856, "id": 41366, "time": "2003-07-24T16:06:52Z", "creator": "jesse.glick@netbeans.com", "creation_time": "2003-07-24T16:06:52Z", "is_private": false}, {"count": 2, "attachment_id": null, "bug_id": 21856, "text": "Can you use the Locator class in o.a.t.a.launch?\n", "id": 41472, "time": "2003-07-25T01:30:44Z", "creator": "conor@apache.org", "creation_time": "2003-07-25T01:30:44Z", "tags": [], "is_private": false}, {"count": 3, "tags": [], "creator": "jesse.glick@netbeans.com", "attachment_id": null, "id": 41473, "time": "2003-07-25T01:54:37Z", "bug_id": 21856, "creation_time": "2003-07-25T01:54:37Z", "is_private": false, "text": "Yes, probably Locator.getClassSource would work as well as using\njava.security.CodeSource.\n\nNote that Locator.fromURI is obsoleted by the File(URI) constructor in JRE 1.4 -\nI think I already filed that separately."}, {"count": 4, "tags": [], "text": "yes but we are going for 1.2 compat now - not 1.4", "attachment_id": null, "id": 41475, "creator": "conor@apache.org", "time": "2003-07-25T02:00:35Z", "bug_id": 21856, "creation_time": "2003-07-25T02:00:35Z", "is_private": false}, {"count": 5, "tags": [], "creator": "jesse.glick@netbeans.com", "text": "[Re. File(URI)] - yes of course, I meant using reflection, when available.", "id": 41476, "time": "2003-07-25T02:13:32Z", "bug_id": 21856, "creation_time": "2003-07-25T02:13:32Z", "is_private": false, "attachment_id": null}, {"count": 6, "tags": [], "creator": "jglick@apache.org", "text": "Cf. also bug #32405.", "id": 67662, "time": "2004-11-30T22:34:48Z", "bug_id": 21856, "creation_time": "2004-11-30T22:34:48Z", "is_private": false, "attachment_id": null}, {"count": 7, "tags": [], "creator": "mbenson@apache.org", "text": "can we close this issue?", "id": 72020, "time": "2005-03-08T23:44:00Z", "bug_id": 21856, "creation_time": "2005-03-08T23:44:00Z", "is_private": false, "attachment_id": null}, {"count": 8, "tags": [], "text": "I still think it would be helpful, but am willing to drop it if others disagree\n(or to work on a patch if others agree).", "is_private": false, "bug_id": 21856, "id": 72073, "time": "2005-03-09T20:14:20Z", "creator": "jglick@apache.org", "creation_time": "2005-03-09T20:14:20Z", "attachment_id": null}, {"count": 9, "attachment_id": null, "bug_id": 21856, "text": "For the 1.4 introspection or another way to find ant.jar ?", "id": 72075, "time": "2005-03-09T20:29:42Z", "creator": "mbenson@apache.org", "creation_time": "2005-03-09T20:29:42Z", "tags": [], "is_private": false}, {"count": 10, "tags": [], "text": "Doesn't really matter since there is a general util method to take URI -> File,\nwhich should in the future be fixed to behave correctly under JDK 1.4+ (and use\nwhatever tricks on 1.2 + 1.3).", "attachment_id": null, "id": 72077, "creator": "jglick@apache.org", "time": "2005-03-09T20:33:32Z", "bug_id": 21856, "creation_time": "2005-03-09T20:33:32Z", "is_private": false}, {"count": 11, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "text": "I don't see any reason you can't add whatever you want in that regard.", "id": 72082, "time": "2005-03-09T20:39:43Z", "bug_id": 21856, "creation_time": "2005-03-09T20:39:43Z", "is_private": false}, {"count": 12, "tags": [], "bug_id": 21856, "text": "In any event, the original request here is satisfied:\n\nFile antjar = org.apache.tools.ant.launch.Locator.getClassSource(\n  org.apache.tools.ant.Project.class);", "id": 75373, "time": "2005-05-25T20:24:07Z", "creator": "mbenson@apache.org", "creation_time": "2005-05-25T20:24:07Z", "is_private": false, "attachment_id": null}, {"count": 13, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "text": "From *code* it's available, but not from a build script.", "id": 75398, "time": "2005-05-26T01:59:10Z", "bug_id": 21856, "creation_time": "2005-05-26T01:59:10Z", "is_private": false}, {"count": 14, "tags": [], "creator": "mbenson@apache.org", "text": "Against CVS HEAD:\n\n  <whichresource class=\"org.apache.tools.ant.Main\" property=\"main\" />\n  <pathconvert>\n    <string value=\"${main}\" />\n    <chainedmapper>\n      <globmapper from=\"*!/org/apache/tools/ant/Main.class\" to=\"*\" />\n      <globmapper from=\"jar:*\" to=\"*\" />\n      <!-- if you want to assume it's a file, use:\n      <globmapper from=\"jar:file:/*\" to=\"*\" /-->\n    </chainedmapper>\n  </pathconvert>\n\nyields:\n[pathconvert] file:/D:/ant/lib/ant.jar\n\nan alternative would be\n\n  <pathconvert>\n    <url javaresource=\"org/apache/tools/ant/Main.class\" />\n    <chainedmapper>\n      <globmapper from=\"*!/org/apache/tools/ant/Main.class\" to=\"*\" />\n      <globmapper from=\"jar:*\" to=\"*\" />\n      <!-- if you want to assume it's a file, use:\n      <globmapper from=\"jar:file:/*\" to=\"*\" /-->\n    </chainedmapper>\n  </pathconvert>\n\ni.e., <url javaresource=\"\" /> overlaps <whichresource> somewhat.", "id": 75422, "time": "2005-05-26T16:47:02Z", "bug_id": 21856, "creation_time": "2005-05-26T16:47:02Z", "is_private": false, "attachment_id": null}, {"count": 15, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "text": "1. That's way too complicated. Few people would ever figure out such a thing for\nthemselves.\n\n2. URL -> file conversion using prefix removal is not safe on all platforms /\nfilesystems and for all directory names.", "id": 75423, "time": "2005-05-26T18:17:13Z", "bug_id": 21856, "creation_time": "2005-05-26T18:17:13Z", "is_private": false}, {"count": 16, "tags": [], "creator": "jglick@apache.org", "attachment_id": null, "id": 87259, "time": "2006-03-25T16:32:21Z", "bug_id": 21856, "creation_time": "2006-03-25T16:32:21Z", "is_private": false, "text": "Also poses a problem for running the NB IDE over JNLP (under development) using\nthe bundled Ant, since the original Ant directory structure is not preserved:\n\nhttp://www.netbeans.org/nonav/issues/show_bug.cgi?id=73990"}, {"count": 17, "tags": [], "creator": "jkf@apache.org", "attachment_id": null, "text": "I have implemented this using ingredients from matt, jesse and myself.\nI have called the property ant.core.lib as to not tie the property to a jar file\nper se.\n", "id": 87270, "time": "2006-03-25T22:36:00Z", "bug_id": 21856, "creation_time": "2006-03-25T22:36:00Z", "is_private": false}, {"count": 18, "tags": [], "creator": "mbenson@apache.org", "attachment_id": null, "id": 87322, "creation_time": "2006-03-27T16:08:10Z", "time": "2006-03-27T16:08:10Z", "bug_id": 21856, "text": "(In reply to comment #15)\n> 1. That's way too complicated. Few people would ever figure out such a thing for\n> themselves.\n\n\nJust reread this and had me laughing my a$$ off... yes, it was way too\ncomplicated, but oh what fun!  :)\n\n-Matt\n", "is_private": false}]