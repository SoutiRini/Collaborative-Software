[{"count": 0, "tags": [], "creator": "shahs@yahoo-inc.com", "is_private": false, "text": "In our own usage sometimes the call to conn.getResponseCode(); would return -1\nfor no apparent reason when in fact the responseCode was 200.  We could not pin\ndown the source of this problem and had to hadd the following lines to parse the\nHTTP Response Message and use that as the response code.\n\n      if(errorLevel == - 1) {\n        try {\n          int code = Integer.parseInt(res.getResponseMessage().substring(0, 3));\n          res.setResponseCode(Integer.toString(code));\n          res.setSuccessful(200 <= code && code <= 399);\n        } catch (Exception e) {\n          res.setSuccessful(false);\n        }\n      }\n\nObviously this is a hack, but I'm sending this out in case anyone else \nruns across this and wants to see how we worked around it.\n\n\nFYI patch works on trunk and 2.1.1 branch as of this writing.", "id": 86624, "time": "2006-03-08T23:24:22Z", "bug_id": 38902, "creation_time": "2006-03-08T23:24:22Z", "attachment_id": null}, {"count": 1, "tags": [], "text": "Created attachment 17852\nPatch to HTTPSampler.java", "is_private": false, "id": 86625, "creator": "shahs@yahoo-inc.com", "time": "2006-03-08T23:24:44Z", "bug_id": 38902, "creation_time": "2006-03-08T23:24:44Z", "attachment_id": 17852}, {"count": 2, "tags": [], "text": "It's a bit odd, because the Java code appears to be doing much the same.\n\nI'll add the code, but log a warning to show that the return code has been\nrecalculated.", "attachment_id": null, "id": 86626, "creator": "sebb@apache.org", "time": "2006-03-08T23:37:18Z", "bug_id": 38902, "creation_time": "2006-03-08T23:37:18Z", "is_private": false}, {"count": 3, "tags": [], "bug_id": 38902, "attachment_id": null, "is_private": false, "id": 86627, "time": "2006-03-08T23:53:21Z", "creator": "sebb@apache.org", "creation_time": "2006-03-08T23:53:21Z", "text": "Thanks, a fix has been committed to the 2.1 branch"}]