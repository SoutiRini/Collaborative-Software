[{"count": 0, "tags": [], "bug_id": 5497, "attachment_id": null, "is_private": false, "id": 9028, "time": "2001-12-18T15:42:31Z", "creator": "tim.nolan@solnet.com.au", "creation_time": "2001-12-18T15:42:31Z", "text": "Loading a page with a single JSP include directive works in IE5, NS4 but not in \nNS6.1, unless you do a Shift-Refresh (no-cache reload), or modify the include \nfile.\n\nMy guess is that Tomcat is not including it because the modify time of the \ninclude file is later than the \"If-Modified-Since\" header.\n\nHere are the successful/failed requests in full (host/URL names mofified). The \ninclude file is between the text \"Before\" and \"After\" and is just the text \"Hey\"\nSuccessful:\nGET http://host:8080/example/test.jsp HTTP/1.1\nHost: host:8080\nUser-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US; rv:0.9.2) Gecko/20010726 \nNetscape6/6.1\nAccept: text/xml, application/xml, application/xhtml+xml, text/html;q=0.9, \nimage/png, image/jpeg, image/gif;q=0.2, text/plain;q=0.8, text/css, */*;q=0.1\nAccept-Language: en-us\nAccept-Encoding: gzip,deflate,compress,identity\nAccept-Charset: ISO-8859-1, utf-8;q=0.66, *;q=0.66\nKeep-Alive: 300\nConnection: keep-alive\nCookie: JSESSIONID=866366D2738128D9A0C1650535F7F531\nIf-Modified-Since: Tue, 18 Dec 2001 23:23:09 GMT\nCache-Control: max-age=0\n\nHTTP/1.0 200 OK\nContent-Type: text/html;charset=ISO-8859-1\nDate: Tue, 18 Dec 2001 23:23:26 GMT\nServer: Apache Tomcat/4.0.1 (HTTP/1.1 Connector)\nX-Cache: MISS from antares\nProxy-Connection: close\n\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\">\n<html>\n<head><title>Untitled</title></head>\n<body>\nBefore\nHey\nAfter\n</body>\n</html>\nFailed:\nGET http://host:8080/example/test.jsp HTTP/1.1\nHost: host:8080\nUser-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US; rv:0.9.2) Gecko/20010726 \nNetscape6/6.1\nAccept: text/xml, application/xml, application/xhtml+xml, text/html;q=0.9, \nimage/png, image/jpeg, image/gif;q=0.2, text/plain;q=0.8, text/css, */*;q=0.1\nAccept-Language: en-us\nAccept-Encoding: gzip,deflate,compress,identity\nAccept-Charset: ISO-8859-1, utf-8;q=0.66, *;q=0.66\nKeep-Alive: 300\nConnection: keep-alive\nCookie: JSESSIONID=866366D2738128D9A0C1650535F7F531\nIf-Modified-Since: Tue, 18 Dec 2001 23:23:26 GMT\nCache-Control: max-age=0\n\nHTTP/1.0 200 OK\nContent-Type: text/html;charset=ISO-8859-1\nDate: Tue, 18 Dec 2001 23:24:16 GMT\nServer: Apache Tomcat/4.0.1 (HTTP/1.1 Connector)\nX-Cache: MISS from antares\nProxy-Connection: close\n\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\">\n<html>\n<head><title>Untitled</title></head>\n<body>\nBefore\n\nAfter\n</body>\n</html>"}, {"count": 1, "attachment_id": null, "creator": "craig.mcclanahan@sun.com", "is_private": false, "id": 9061, "time": "2001-12-19T17:31:14Z", "bug_id": 5497, "creation_time": "2001-12-19T17:31:14Z", "tags": [], "text": "Tomcat pays no attention at all to changes in files included by the <%@ include \n%> directive (it doesn't matter what your browser is).  If you want the JSP page \nto be recompiled, you must modify the timestamp of the JSP page itself.\n\nHowever, there have been other bug fixes lately related to includes.  Could you \nplease try this against a recent nightly build?\n"}, {"count": 2, "tags": [], "bug_id": 5497, "attachment_id": null, "is_private": false, "id": 9073, "time": "2001-12-20T00:12:34Z", "creator": "remm@apache.org", "creation_time": "2001-12-20T00:12:34Z", "text": "I think this bug is almost valid.\nWhat happens is that the browser incorectly submits an if-modified-since, which \ngets processed by the included servlet (the DefaultServlet). Submitting the if-\nmodified-since is not a good idea, since the server never returned a last-\nmodified (or an etag, etc etc) with any if the responses.\nAdding a check for inclusion in the DefaultServlet should do the job."}, {"count": 3, "tags": [], "text": "Fixed in the 12/21 nightly.", "attachment_id": null, "id": 9083, "creator": "remm@apache.org", "time": "2001-12-20T04:24:25Z", "bug_id": 5497, "creation_time": "2001-12-20T04:24:25Z", "is_private": false}, {"count": 4, "tags": [], "bug_id": 5497, "attachment_id": null, "is_private": false, "id": 9105, "time": "2001-12-20T13:35:53Z", "creator": "remm@apache.org", "creation_time": "2001-12-20T13:35:53Z", "text": "*** Bug 5486 has been marked as a duplicate of this bug. ***"}]