[{"count": 0, "tags": [], "bug_id": 50698, "attachment_id": 26588, "id": 143856, "time": "2011-02-01T06:44:30Z", "creator": "adelmelle@apache.org", "creation_time": "2011-02-01T06:44:30Z", "is_private": false, "text": "Created attachment 26588\nproposed patch addressing potential issue in FOP\n\nIn response to a recent post on fop-users@ (see: http://marc.info/?l=fop-user&m=129646673801270&w=2), the attached patch:\n\n- adds two methods to fop.util.ColorProfileUtil that perform calls to ICC_Profile.getInstance() in a synchronized fashion (only the InputStream and int variants are used)\n- replaces all direct calls to ICC_Profile.getInstance() in FOP's code with calls to one of those new methods\n\nNote: The issue mentioned in the original post is *not* addressed by this patch, as that instance of the issue arises somewhere in XMLGraphics.\n\nProbably a good step to take towards solving this in XG, is to migrate the ColorProfileUtil class there, and have FOP reference that one."}, {"count": 1, "attachment_id": null, "bug_id": 50698, "text": "As you suggested, I'd move ColorProfileUtil over to XGC and apply the changes for that class there. Batik suffers from the same problem apparently (SVGColorProfileElementBridge). Thanks for looking into it. You actually beat me to it. I wanted to do something similar.", "id": 143858, "time": "2011-02-01T07:19:08Z", "creator": "jeremias@apache.org", "creation_time": "2011-02-01T07:19:08Z", "tags": [], "is_private": false}, {"count": 2, "tags": [], "bug_id": 50698, "is_private": false, "text": "\nAlternate approach taken as proposed. Changes to FOP committed in r1066182 (http://svn.apache.org/viewvc?rev=1066182&view=rev)", "id": 143871, "time": "2011-02-01T15:06:29Z", "creator": "adelmelle@apache.org", "creation_time": "2011-02-01T15:06:29Z", "attachment_id": null}, {"count": 3, "attachment_id": null, "bug_id": 50698, "is_private": false, "id": 155489, "time": "2012-04-01T06:18:53Z", "creator": "gadams@apache.org", "creation_time": "2012-04-01T06:18:53Z", "tags": [], "text": "batch transition to closed; if someone wishes to restore one of these to resolved in order to perform a verification step, then feel free to do so"}]