[{"count": 0, "attachment_id": null, "creator": "alexander.andrianov@sun.com", "text": "When compiling on linux, apache uses specific option -rdynamic.\nWhen using linux version of Sunstudio compilation fails with error.\n\nThis happens because sunstudio doesn't support -rdynamic option. Therefore flag\n-rdynamic passes to ld. ld recognizes it as -r flag.\n\nHow it can be reproduced:\n\n$./configure --prefix=/export/Place/installdir/linux\n--exec-prefix=/export/Place/installdir/linux  --enable-module=so\nConfiguring for Apache, Version 1.3.34\n + using installation path layout: Apache (config.layout)\nCreating Makefile\nCreating Configuration.apaci in src\nCreating Makefile in src\n + configured for Linux platform\n + setting C pre-processor to /set/mars/dist/intel-Linux/prod/bin/cc -E\n + using \"tr [a-z] [A-Z]\" to uppercase\n + checking for system header files\n + adding selected modules\n + using system Expat\n + using -ldl for vendor DSO support\n + checking sizeof various data types\n + doing sanity check on compiler and options\nCreating Makefile in src/support\nCreating Makefile in src/regex\nCreating Makefile in src/os/unix\nCreating Makefile in src/ap\nCreating Makefile in src/main\nCreating Makefile in src/modules/standard\n\n$make all CC=$CC\n< .... some lines skipped .... >\n/sunstudio/intel-Linux/prod/bin/cc  -DLINUX=22 -DHAVE_SET_DUMPABLE -DUSE_HSREGEX\n-O `./apaci`   -rdynamic \\\n      -o httpd buildmark.o modules.o modules/standard/libstandard.a\nmain/libmain.a ./os/unix/libos.a ap/libap.a regex/libregex.a   -lm -lcrypt\n-lexpat -ldl\ncc: Warning: illegal option -dynamic\n/usr/bin/ld: cannot find -lm\nmake[2]: *** [target_static] Error 1\nmake[2]: Leaving directory `/export/Place/apache_1.3.34/src'\nmake[1]: *** [build-std] Error 2\nmake[1]: Leaving directory `/export/Place/apache_1.3.34'\nmake: *** [build] Error 2\n\nThe workaround is to exclude -rdynamic from LDFLAGS_SHLIB_EXPORT\nin src/Makefile\n\nI suggest not to use this flag when compiling on linux with sunstudio.", "id": 86329, "time": "2006-03-01T12:16:49Z", "bug_id": 38817, "creation_time": "2006-03-01T12:16:49Z", "tags": [], "is_private": false}, {"count": 1, "tags": [], "creator": "jorton@redhat.com", "attachment_id": null, "id": 90235, "time": "2006-06-15T08:42:30Z", "bug_id": 38817, "creation_time": "2006-06-15T08:42:30Z", "is_private": false, "text": "I'd suggest trying 2.x, does libtool get this right?  Doubt anybody wants to\nmess with this stuff in 1.3 at this point."}]