[{"count": 0, "tags": [], "creator": "tim.gordon@allustra.com", "attachment_id": null, "id": 34236, "time": "2003-04-01T13:19:00Z", "bug_id": 18563, "creation_time": "2003-04-01T13:19:00Z", "is_private": false, "text": "The project field inherited from ProjectComponent by BaseExtendSelector is \nnever set when a user makes use of the <custom> tag for selectors, thus making \nthe owning Project instance inaccessible from within custom selectors.\n\nHave my own candidate fix for 1.5.2 source. Applied same fix to CVS tip which \nyields following CVS diff:\n\nRCS \nfile: /home/cvspublic/ant/src/main/org/apache/tools/ant/types/selectors/ExtendSe\nlector.java,v\nretrieving revision 1.6\ndiff -c -r1.6 ExtendSelector.java\n*** ExtendSelector.java 10 Feb 2003 14:14:35 -0000      1.6\n--- ExtendSelector.java 1 Apr 2003 12:06:55 -0000\n***************\n*** 106,111 ****\n--- 106,114 ----\n                      AntClassLoader.initializeClass(c);\n                  }\n                  dynselector = (FileSelector) c.newInstance();\n+                 if (dynselector instanceof ProjectComponent) {\n+                     ((ProjectComponent)dynselector).setProject(getProject());\n+                 }\n              }\n              catch (ClassNotFoundException cnfexcept) {\n                  setError(\"Selector \" + classname +\n\nalthough perhaps using reflexion to get at a method with a signature the same \nas setProject() would be more suitable, to avoid type dependency on \nProjectComponent, since otherwise implementers of FileSelector would be \nconstrained to work from subclasses of ProjectComponent."}, {"count": 1, "text": "I made a generalization of this bug: 18613\n", "bug_id": 18563, "is_private": false, "id": 34351, "time": "2003-04-02T15:36:54Z", "creator": "peter.reilly@corvil.com", "creation_time": "2003-04-02T15:36:54Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 18563, "is_private": false, "text": "I'm makring as a duplicate of the generalised case Peter created. If you coudl\ntry against a nightly build and let us know if you have any further issues.\n\n*** This bug has been marked as a duplicate of 18613 ***", "id": 42457, "time": "2003-08-09T11:44:49Z", "creator": "conor@apache.org", "creation_time": "2003-08-09T11:44:49Z", "attachment_id": null}]