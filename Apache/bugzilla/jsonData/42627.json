[{"count": 0, "tags": [], "creator": "bugzilla.apache@jamie-thompson.co.uk", "attachment_id": null, "is_private": false, "id": 104280, "time": "2007-06-10T17:11:48Z", "bug_id": 42627, "creation_time": "2007-06-10T17:11:48Z", "text": "Similar sounding to bug http://issues.apache.org/bugzilla/show_bug.cgi?id=40926,\nI cannot authenticate using membership in a group. This used to work when I\nfirst set it up (using some version of Apache 2.0.x), but now it does not.\n\nMy Group object looks like this:\ncn=Post News,ou=Service Authentication,ou=Groups,dc=jamie-thompson,dc=co,dc=uk,dc=.\ncn: Post News\nobjectClass: groupOfUniqueNames\nobjectClass: top\nuniqueMember: uid=testuser,ou=People,ou=Accounts,dc=jamie-thompson,dc=co,dc=uk,dc=.\n\nMy .htaccess looks like this:\n<FilesMatch \"postnews\">\n        #AuthLDAPBindDN <admin dn>\n        #AuthLDAPBindPassword <admin password>\n\n        AuthLDAPURL\nldap://localhost/ou=People,ou=Accounts,dc=jamie-thompson,dc=co,dc=uk,dc=.?uid\n        AuthType Basic\n        AuthBasicProvider ldap\n        AuthzLDAPAuthoritative off\n        AuthName \"Permission to post new news items\"\n        Require group\ncn=Post%20News,ou=Service%20Authentication,ou=Groups,dc=jamie-thompson,dc=co,dc=uk,dc=.\n        #require user testuser\n</FilesMatch>\n\nI have worked through the bug I mentioned earlier, but I was unable to resolve\nmy issue and get things working. I have tried specifying my admin DN in case in\nwas a permission issue, but this made no difference.  I also tried both\nldap-group and group, but this made no difference either. Adding in the\nrequire-user works, but that is a separate bit of functionality so I would\nexpect it to. My group URL used to have unescaped spaces in it, so I have tried\nescaping them, but still this has not helped.\n\nI also turned on the ldap cache info feature, and this shows only the search\nurls. I have the DN of my user account, and nothing under compares or dn compares."}, {"count": 1, "text": "The problem is that you have commented out \n\n#AuthLDAPBindDN <admin dn>\n#AuthLDAPBindPassword <admin password>\n\nThe member and uniquemember attribute are probably private and can not be \naccessed by an anonymous user.  If you allow mod_ldap to log in, it will \nprobably work.\n", "bug_id": 42627, "is_private": false, "id": 104305, "time": "2007-06-11T12:30:00Z", "creator": "bnicholes@apache.org", "creation_time": "2007-06-11T12:30:00Z", "tags": [], "attachment_id": null}, {"count": 2, "tags": [], "creator": "bugzilla.apache@jamie-thompson.co.uk", "text": "No, as I said before, I've already tried that and it does not work. I've just\ntried again just in case, and it still does not work. I merely left the\ncommented out lines in to show the various methods I had already tried to\nresolve this on my own.", "id": 104307, "time": "2007-06-11T12:41:32Z", "bug_id": 42627, "creation_time": "2007-06-11T12:41:32Z", "is_private": false, "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 42627, "text": "Just to further illustrate my point:\n\nldapsearch -LLL \"uniqueMember=*\" -b cn=Post\\ News,ou=Service\\\nAuthentication,ou=Groups,dc=jamie-thompson,dc=co,dc=uk,dc=. uniqueMember -x\n\ndn: cn=Post News,ou=Service Authentication,ou=Groups,dc=jamie-thompson,dc=co,d\n c=uk,dc=.\nuniqueMember: uid=testuser,ou=People,ou=Accounts,dc=jamie-thompson,dc=co,dc=uk,dc\n =.\n\nAs you can see, an anonymous bind returns the result just fine, so I can't see\nhow it could be a permission issue.", "id": 104312, "time": "2007-06-11T13:12:06Z", "creator": "bugzilla.apache@jamie-thompson.co.uk", "creation_time": "2007-06-11T13:12:06Z", "is_private": false, "attachment_id": null}, {"count": 4, "tags": [], "creator": "bnicholes@apache.org", "attachment_id": null, "text": "Not sure what to tell you then.  I just retested this with the 2.2 code and \nthe only way that I was able to reproduce the results that you are seeing is  \nwhen AuthLDAPBindDN and AuthLDAPBindPassword are commented out and ldap binds \nanonymously.  Once the credentials were given, everything worked as expected.  \nAlso, require group in apache 2.2 is file group and not ldap group.  The group \nauthorization type has been defined in 2.2 as specifically a file based group \nwhile ldap-group is defined as an ldap based group.  In order to avoid \nconfusion, the two are no longer interchangable.  The same goes with user vs. \nldap-user.  ", "id": 104314, "time": "2007-06-11T13:16:52Z", "bug_id": 42627, "creation_time": "2007-06-11T13:16:52Z", "is_private": false}, {"count": 5, "text": "Interestingly, I have ldap-group in my current settings and this does not work.\n\nWhen I enable \"require user testuser\", this works with my LDAP credentials (\nhave no file-based auth set up at all), but you say it should not. Is there a\nchance you think that this is a Debian packaging issue perchance?", "bug_id": 42627, "attachment_id": null, "id": 104315, "time": "2007-06-11T13:25:33Z", "creator": "bugzilla.apache@jamie-thompson.co.uk", "creation_time": "2007-06-11T13:25:33Z", "tags": [], "is_private": false}, {"count": 6, "tags": [], "bug_id": 42627, "attachment_id": null, "text": "Couldn't say.  All I know is that mod_authnz_ldap no longer responds to group \nor user.  All ldap authorization types are prefixed with ldap-. My guess is \nthat mod_authz_user and mod_authz_groupfile are probably built-in which is why \nyou aren't seeing an error when you use these auth types.", "id": 104337, "time": "2007-06-12T07:10:15Z", "creator": "bnicholes@apache.org", "creation_time": "2007-06-12T07:10:15Z", "is_private": false}, {"count": 7, "tags": [], "creator": "tony@pc-tony.com", "attachment_id": null, "text": "This example below works for me, with the correct LDAP details of course.\nYou do need to use ldap-group\n\n<Location />\n        AuthType Basic\n        AuthName \"www.example.com\"\n        AuthBasicProvider ldap\n        AuthzLDAPAuthoritative on\n        AuthLDAPGroupAttributeIsDN off\n        AuthLDAPGroupAttribute memberUid\n        AuthLDAPBindDN          cn=ldapbinduid,ou=users,dc=example,dc=com\n        AuthLDAPBindPassword    bindpassword\n        AuthLDAPURL ldap://localhost/dc=example,dc=com?uid\n        require ldap-group cn=wwwedit,ou=groups,dc=example,dc=com\n</Location>", "id": 104338, "time": "2007-06-12T07:17:44Z", "bug_id": 42627, "creation_time": "2007-06-12T07:17:44Z", "is_private": false}, {"count": 8, "tags": [], "creator": "bugzilla.apache@jamie-thompson.co.uk", "attachment_id": null, "text": "Ok, after some fiddling I discovered that, inevitably, the devlopers were once\nagain right and the poor luser was wrong. :)\n\nThis was one of those situations where there were multiple problems, so fixing\neither did not resolve the issue. As part of my fixes I tried escaping the group\nDN as it contained spaces and the config states quite clearly not to use quotes.\nThis turned out to be why my settings were not working using your examples as a\ntemplate.\n\nThe reason I switched to the escaped values in the first place was because I was\noriginally using require group, which no longer works.\n\nMight I humbly suggest that Apache logs an error message when it cannot find the\ngroup DN specified, making it quite clear that this is where the problem lies?", "id": 104378, "time": "2007-06-13T14:30:24Z", "bug_id": 42627, "creation_time": "2007-06-13T14:30:24Z", "is_private": false}]