[{"count": 0, "tags": [], "bug_id": 1626, "attachment_id": null, "text": "It is common for multiple JSP pages to use the same instance of an application\nbean.  The <jsp:usebean ... scope=\"application\"> action is meant to address this\nneed.\n\nA jspInit() method, it seems to me, ought to be able to obtain a reference to a\nbean with application scope--and it can.  E.g.\n\n<jsp:usebean id=\"beanId\" scope=\"application\"\n class=\"com.myco.MyBean\" />\n\n<%!\n\tpublic void jspInit() {\n\t\tMyBean bean = (MyBean) getServletConfig()\n\t\t.getServletContext().getAttribute(\"beanId\");\n\t\t..\n\t}\n%>\n\nThe problem, however, is that in Tomcat 3.2.1 the first JSP page that attempts\nto obtain a reference to an application bean this way, will get a null\nreference.  This, I suspect, is because the bean is created in the body of the\n_jspService() method of the JSP implementation class.\n\nI suggest that an *application* bean be initialized *before* the call to\njspInit():\n\n\tpublic void init(ServletConfig conf)\n\tthrows ServletException {\n\t\t// do the usual stuff . \n\t\t// INITIALIZE any *application* beans declared in the page\n\t\tjspInit();\n\t}\n\nThis is perhaps not very aesthetically appealing, because we must now treat the\njsp:usebean action differently when it has application scope.  But a quick skim\nof the spec appears to allow it.  References below to sections are to the JSP\n1.2 spec (unless o.w. specified):\n\nSection 2.12 (section 2.11 of JSP 1.1) suggests that generally actions are\nperformed at request-time.\n\nSection 4.1 (section 2.13.1 of JSP 1.1) describes the <jsp:usebean> action\nsemantics in more detail but the issue of exactly *when* a bean is created is\nnot dealt with.  (Section 2.8.2 describes scope issues and when a bean is\n*reclaimed*.)\n\nRegards,\nBabak", "id": 2264, "time": "2001-05-04T13:22:25Z", "creator": "babak@topoweb.com", "creation_time": "2001-05-04T13:22:25Z", "is_private": false}, {"count": 1, "tags": [], "creator": "cmanolache@yahoo.com", "text": "jasper34 might address the problem, as we try to optimize and do as much\n as possible in init(). However beans are not the main concern, but taglibs -\nif you want it fixed you might submit a patch :-) \nGiven that the spec doesn't require a specific order, if your code relies on \none or the other behavior it'll no longer be portable ( but depend on container\nand version )", "id": 3079, "time": "2001-06-19T19:16:54Z", "bug_id": 1626, "creation_time": "2001-06-19T19:16:54Z", "is_private": false, "attachment_id": null}]