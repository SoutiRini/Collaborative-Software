[{"count": 0, "tags": [], "text": "Create a servlet that implements doPut()\n\n\tpublic void doPut(HttpServletRequest request, HttpServletResponse response)\n\t\t\t\tthrows ServletException, IOException {\n\t\tresponse.setContentType(\"text/plain\");\n\t\tPrintWriter out = response.getWriter();\n\t\tout.println(\"got PUT call\");\n\t}\n\n\nCall it with a client that does a PUT:\n\n    public  static void main (String args[]) {\n        try {\n\n//\t\t\tURL url = new URL(\"http://localhost:8080/blah/servlets/PutServletTest\");\n\t\t\tURL url = new URL(\"http://localhost:8080/blah/servlet/com.sri.chemsense.server.PutServletTest\");\n\t\t\tHttpURLConnection conn = (HttpURLConnection)url.openConnection();\n            conn.setRequestMethod(\"PUT\");\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n\t\t\t// in real servlet, stuff the contents of a ZIP file down output stream\n\t\t\tconn.getOutputStream().close();\n\n\t\t\t// get input\n            InputStream stream = conn.getInputStream();\n            BufferedInputStream in = new BufferedInputStream(stream);\n            int i = 0;\n            while ((i = in.read()) != -1) {\n                System.out.write(i);\n            }\n            in.close();\n        } catch (Exception e) {\n\t\t\te.printStackTrace();\n        }\n    }\n\n\nThe PUT servlet will not initialize, nor will it return a response.  Now if that servlet also implements doGet, you can send a GET request, and the servlet will initialize, and only then a PUT request will succeed.\n\nSetting\n    <load-on-startup>1</load-on-startup>\ndoes not affect the PUT servlet's ability to receive that first request.\n\nTomcat 3.x does not show this problem, but I have tested on 4.0.3 and 4.0.4 and both show this problem.\n\nThe log file shows that the PUT was received, but doesn't seem to find a \"registered\" servlet.\n\n127.0.0.1 - - [23/Sep/2002:15:45:00 -0800] \"PUT /blah/servlet/PutServletTest HTTP/1.1\" 405 733", "is_private": false, "bug_id": 12938, "id": 23279, "time": "2002-09-23T22:58:56Z", "creator": "bugzilla-apache2@codeguild.com", "creation_time": "2002-09-23T22:58:56Z", "attachment_id": null}, {"count": 1, "attachment_id": null, "creator": "medthomas@ntlworld.com", "is_private": false, "id": 43403, "time": "2003-08-27T20:54:11Z", "bug_id": 12938, "creation_time": "2003-08-27T20:54:11Z", "tags": [], "text": "I have successfully tested this using the heads of tomcat 4.1 and 5.0.\n\nIf, after upgrading to the latest version, you still experience this problem \nplease reopen this bug report and I will be happy to investigate further."}, {"count": 2, "tags": [], "bug_id": 12938, "attachment_id": 8329, "is_private": false, "id": 44591, "time": "2003-09-24T14:27:40Z", "creator": "yoavs@computer.org", "creation_time": "2003-09-24T14:27:40Z", "text": "Created attachment 8329\nAnother WAR that shows this is working fine, not a bug"}]