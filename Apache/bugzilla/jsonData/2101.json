[{"count": 0, "tags": [], "bug_id": 2101, "attachment_id": null, "text": "The run.bat script attempts to locate the Ant directory if the ANT_HOME\nvariable is not set.  First it checks \"%SystemDrive%\\Program Files\\ant\" and\nthen it checks \"%SystemDrive%\\ant\".\n\nThere are two problems with the way it is implemented in run.bat:\n\n1. Attempting to detect a directory using this syntax fails on Windows 9x:\n\n     if not exist \"%SystemDrive%\\Program Files\\ant\" ...\n\n   To detect a directory, you have to append \\nul to the end of the path:\n\n     if not exist \"%SystemDrive%\\Program Files\\ant\\nul\" ...\n\n2. (a) The SystemDrive variable is not normally set on Windows 9x, and forcing\n   the user to set it defeats the purpose of automatically checking for the Ant\n   directory when ANT_HOME is not set; (b) programs can easily be installed\n   on drives other than the system drive, so there's little reason to use that\n   variable even if it were set.\n\n   It would be better to check the C: drive explicitly, since that's where\n   99% of people put their program files, and the other 1% can just set\n   ANT_HOME:\n\n     if not exist \"C:\\Program Files\\ant\\nul\" ...", "id": 2847, "time": "2001-06-10T15:27:45Z", "creator": "eswierk@cs.stanford.edu", "creation_time": "2001-06-10T15:27:45Z", "is_private": false}, {"count": 1, "tags": [], "bug_id": 2101, "text": "Created attachment 204\nProposed diff for ant.bat", "id": 2848, "attachment_id": 204, "creator": "eswierk@cs.stanford.edu", "creation_time": "2001-06-10T16:13:08Z", "time": "2001-06-10T16:13:08Z", "is_private": false}, {"count": 2, "tags": [], "creator": "eswierk@cs.stanford.edu", "is_private": false, "id": 2849, "creation_time": "2001-06-10T16:39:41Z", "time": "2001-06-10T16:39:41Z", "bug_id": 2101, "text": "Actually the patch (id=204) doesn't quite work.  FOR %%I IN (\"%ANT_HOME%\n\\lib\\*.jar\") doesn't work when ANT_HOME has a space in it.  Win98 is so much \nfun!", "attachment_id": null}, {"count": 3, "tags": [], "bug_id": 2101, "attachment_id": null, "is_private": false, "id": 3671, "time": "2001-07-12T05:13:19Z", "creator": "conor@apache.org", "creation_time": "2001-07-12T05:13:19Z", "text": "I have committed a fix - thanks\n\nInterestingly, under NT at least, the /nul trick does not work if the argument \nto exist is quoted. "}]