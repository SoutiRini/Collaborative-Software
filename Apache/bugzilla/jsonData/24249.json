[{"count": 0, "attachment_id": null, "bug_id": 24249, "is_private": false, "id": 46502, "time": "2003-10-30T13:55:55Z", "creator": "nakato@qute.co.jp", "creation_time": "2003-10-30T13:55:55Z", "tags": [], "text": "'to' attribute of mapper in uptodate task is relative to the directory\nspecified by 'dir' attribute of srcfile (not 'baedir' of project).\nInstead of using mapper, in case of 'targetfile' attribute,\nthe value is relative to 'baedir'.\n\nIt works, but it confused me.\nSo, please add some note about this in uptodate task document.\n\nSee also Bug #7114\n  <mapper type=\"merge> misintreprets 'to' attribute in <uptodate> context\n\n\n\nFollowing is an example.\n\n<project name=\"MapperTest\" default=\"test\" basedir=\".\">\n\n<target name=\"checkUptodate\" >\n    <uptodate property=\"checkUptodate.uptodate\">\n\t<srcfiles dir= \"SRC\" includes=\"*\"/>\n        <mapper type=\"merge\" to=\"DEST/output\"/>\n\t<!-- \n\t  Worng. must be \"../DEST/output\"\n\t  But when using targetfile, it must be \"DEST/output\"\n\t -->\n    </uptodate>\n    <echo message=\"checkUptodate result: ${checkUptodate.uptodate}\" />\n</target>\n\n\n<target name=\"convertFiles\" depends=\"checkUptodate\" \n    unless=\"checkUptodate.uptodate\" >\n    <delete dir=\"DEST\"/>\n    <mkdir dir=\"DEST\"/>\n    <echo message=\"Do conversion with SRC/*\" />\n    <!-- Do some thing  -->\n    <touch file=\"DEST/output\"/>\n</target>\n\n<target name=\"makeTestEnv\" >\n    <delete dir=\"DEST\"/>\n    <delete dir=\"SRC\"/>\n    <mkdir dir=\"SRC\"/>\n    <touch file=\"SRC/foo\"/>\n    <touch file=\"SRC/bar\"/>\n</target>\n\n<target name=\"test\" depends=\"makeTestEnv\">\n    <ant target=\"convertFiles\"/>\n    <ant target=\"convertFiles\"/> <!-- Don't want to do twice, but... -->\n</target>\n\n</project>"}, {"count": 1, "tags": [], "text": "Ok, updated the manual page for uptodate to clarify\nthe \"to\" attribute of the mapper nested element.\nShould be available in the next beta version of ant 1.6.", "attachment_id": null, "id": 48025, "creator": "peter.reilly@corvil.com", "time": "2003-11-24T17:22:45Z", "bug_id": 24249, "creation_time": "2003-11-24T17:22:45Z", "is_private": false}]