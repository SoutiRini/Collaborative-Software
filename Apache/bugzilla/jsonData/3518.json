[{"count": 0, "tags": [], "bug_id": 3518, "attachment_id": null, "id": 5288, "time": "2001-09-10T06:06:38Z", "creator": "David.Holscher@nav-international.com", "creation_time": "2001-09-10T06:06:38Z", "is_private": false, "text": "I have an application where the default document is a frameset. The first \naccess to the default document after Tomcat is started always results in \na \"java.lang.LinkageError: duplicate class definition\" exception. The class \nvaries, probably depending on which thread wins. Here is an example exception:\n\njava.lang.LinkageError: duplicate class definition: \njavax/servlet/jsp/JspTagException\n\tat java.lang.ClassLoader.defineClass0(Native Method)\n\tat java.lang.ClassLoader.defineClass(Unknown Source)\n\tat java.security.SecureClassLoader.defineClass(Unknown Source)\n\tat java.net.URLClassLoader.defineClass(Unknown Source)\n\tat java.net.URLClassLoader.access$100(Unknown Source)\n\tat java.net.URLClassLoader$1.run(Unknown Source)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(Unknown Source)\n\tat org.apache.catalina.loader.StandardClassLoader.findClass\n(StandardClassLoader.java:670)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:1088)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:987)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:1108)\n\tat org.apache.catalina.loader.StandardClassLoader.loadClass\n(StandardClassLoader.java:987)\n\tat org.apache.catalina.loader.WebappClassLoader.loadClass\n(WebappClassLoader.java:1250)\n\tat org.apache.catalina.loader.WebappClassLoader.loadClass\n(WebappClassLoader.java:1113)\n\tat org.apache.jasper.servlet.JasperLoader.loadClass\n(JasperLoader.java:198)\n\tat org.apache.jasper.servlet.JasperLoader.loadClass\n(JasperLoader.java:132)\n\tat java.lang.ClassLoader.loadClassInternal(Unknown Source)\n\tat java.lang.Class.newInstance0(Native Method)\n\tat java.lang.Class.newInstance(Unknown Source)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.load\n(JspServlet.java:138)\n\tat \norg.apache.jasper.servlet.JspServlet$JspServletWrapper.loadIfNecessary\n(JspServlet.java:178)\n\tat org.apache.jasper.servlet.JspServlet$JspServletWrapper.service\n(JspServlet.java:188)\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile\n(JspServlet.java:381)\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:473)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:1264)\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter\n(ApplicationFilterChain.java:247)\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter\n(ApplicationFilterChain.java:193)\n\tat org.apache.catalina.core.StandardWrapperValve.invoke\n(StandardWrapperValve.java:243)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContextValve.invoke\n(StandardContextValve.java:215)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke\n(AuthenticatorBase.java:518)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardContext.invoke\n(StandardContext.java:2366)\n\tat org.apache.catalina.core.StandardHostValve.invoke\n(StandardHostValve.java:164)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.valves.AccessLogValve.invoke\n(AccessLogValve.java:462)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:564)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.core.StandardEngineValve.invoke\n(StandardEngineValve.java:163)\n\tat org.apache.catalina.core.StandardPipeline.invokeNext\n(StandardPipeline.java:566)\n\tat org.apache.catalina.core.StandardPipeline.invoke\n(StandardPipeline.java:472)\n\tat org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:943)\n\tat org.apache.catalina.connector.http.HttpProcessor.process\n(HttpProcessor.java:1005)\n\tat org.apache.catalina.connector.http.HttpProcessor.run\n(HttpProcessor.java:1098)\n\tat java.lang.Thread.run(Unknown Source)"}, {"count": 1, "tags": [], "bug_id": 3518, "attachment_id": null, "is_private": false, "id": 5307, "time": "2001-09-10T10:38:24Z", "creator": "remm@apache.org", "creation_time": "2001-09-10T10:38:24Z", "text": "I assume your libraries are in the shared libraries folder ('/lib') ?\n\nI'm very surprised that this call needs some syncing, as I would have assumed \nthe URLClassLoader would be thread safe.\nWhich JDK are you using ?"}, {"count": 2, "tags": [], "creator": "remm@apache.org", "is_private": false, "text": "Should be fixed in CVS (please confirm if you can build from CVS, otherwise, \nwe'll have RC2 released wednesday). The fix should introduce a perfomance drop \nin the class laoding performance, unfortunately, but I don't see any other \nsolution.", "id": 5313, "time": "2001-09-10T11:19:48Z", "bug_id": 3518, "creation_time": "2001-09-10T11:19:48Z", "attachment_id": null}]