[{"count": 0, "tags": [], "bug_id": 45730, "text": "I have a web-application which runs on Apache-Tomcat v6.0.13. Am using the Apache Harmony JRE. When I try to launch the application on the latest FireFox v3.0.1 browser, tomcat errors out with the following message in the catalina.out :\n--------------------------------------------------\nAug 29, 2008 2:52:52 PM org.apache.tomcat.util.net.JIoEndpoint$Acceptor run\nSEVERE: Socket accept failed\nThrowable occurred: java.net.SocketException: SSL handshake error\njavax.net.ssl.SSLException: INTERNAL ERROR\n       at\norg.apache.tomcat.util.net.jsse.JSSESocketFactory.acceptSocket(JSSESocketFactory.java:150)\n       at\norg.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:310)\n       at java.lang.Thread.run(Thread.java:657)\n-------------------------------------------------- \n\nAfter debugging the issue, it turns out to be that the Apache-Tomcat is not able to handle the full set of cipher suites implemented in the latest FireFox v3.0.1. \ndhe_dss_camellia_128_sha (0x000044)\ndhe_dss_camellia_256_sha (0x000087)\ndhe_rsa_camellia_128_sha (0x000045)\ndhe_rsa_camellia_256_sha (0x000088)\nrsa_camellia_128_sha (0x000041)\nrsa_camellia_256_sha (0x000084)\n\nIn order to make my web application to work with FireFox Windows browser(v3.0.1), the above mentioned cipher suites needs to be \"disabled\" in the browser via the \"about:config\" option.\n\nBelow is the snippet of the server.xml config:\n----------------------------\n<Connector port=\"443\" protocol=\"HTTP/1.1\" SSLEnabled=\"true\"\n              maxThreads=\"150\" scheme=\"https\" secure=\"true\"\n              clientAuth=\"false\" sslProtocol=\"TLS\" keystoreType=\"PKCS12\"\n              keystoreFile=\"conf/my-key-store\" keystorePass=\"abcd\"/>\n---------------------------- \n\nHere is my postings in the firefox-security-dev mailing list:\nhttp://www.nabble.com/FireFox-v3.0.1-of-Windows-uses-SSLv2-Record-Layer-even-when-SSLv2-is-disabled-td19239646.html\n\nHere is my postings in the tomcat-user mailing list:\nhttp://www.nabble.com/How-to-make-to-Apache-Tomcat-6.0.13-to-support-all-of-SSLv2-SSLv3-and-TLS-protocols-to19228675.html#a19235053", "id": 120295, "time": "2008-09-02T13:41:08Z", "creator": "suresh.kumar.j@gmail.com", "creation_time": "2008-09-02T13:41:08Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 45730, "text": "This isn't a Tomcat bug. If the JRE and the browser do not have a mutually compatible set of ciphers then an SSL session won't be established.\n\nYou need to enabled SSL debugging (no idea how to do this in harmony) to figure out where the incompatibility lies. It looks like if you disable those ciphers then Firefox provides additional, lower strength, ciphers but you need to do some more debugging to be sure.", "id": 120296, "time": "2008-09-02T13:56:24Z", "creator": "markt@apache.org", "creation_time": "2008-09-02T13:56:24Z", "is_private": false, "attachment_id": null}]