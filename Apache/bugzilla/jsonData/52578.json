[{"count": 0, "tags": [], "bug_id": 52578, "attachment_id": null, "id": 153355, "time": "2012-02-02T09:41:51Z", "creator": "markjenkins@mailfish.de", "creation_time": "2012-02-02T09:41:51Z", "is_private": false, "text": "The log formats \"%B\" and \"%b\" log the full size of the file requested even if the client reads only a few kB and then closes the connection.\n\nUsing \"%O\" from mod_logio is not an option because it counts the headers too instead of just the payload."}, {"count": 1, "tags": [], "text": "You're asking for something non-meaningful.\n\nAt the network or connection level (%O) you can't distinguish between metadata (like the HTTP headers, and chunking information) and payload unless you re-parse the entire response - which would be a huge overhead.\n\nAt the request level (%[Bb]), if a request is aborted you can know how much data has been encoded for the connection level, but not how much of that has been sent down the wire.  The latter may also be affected by such things as SSL encryption.", "attachment_id": null, "id": 153359, "creation_time": "2012-02-02T10:49:34Z", "time": "2012-02-02T10:49:34Z", "creator": "nick@webthing.com", "bug_id": 52578, "is_private": false}, {"count": 2, "tags": [], "creator": "markjenkins@mailfish.de", "is_private": false, "text": "The write() and sendfile() system calls do tell you how much data has been sent down the wire. Even at this level you can distinguish between headers and payload because Apache sends them separately.", "id": 153365, "time": "2012-02-02T12:31:27Z", "bug_id": 52578, "creation_time": "2012-02-02T12:31:27Z", "attachment_id": null}]