[{"count": 0, "tags": [], "creator": "pool@eecg.toronto.edu", "attachment_id": null, "text": "ERROR: /usr/local/apache2_worker/logs/error_log\n[Wed Nov 22 10:45:43 2006] [notice] child pid 14801 exit signal Segmentation\nfault (11), possible coredump in /tmp/apache2-dump\n\nSENARIO:\nI've been loading Apache using Webstone (an open source tool). It only makes\nHTTP 1.0 requests. I've set it to repeatedly GET the same 500 byte file using\n10 client threads on a remote machine (connected through a 100 Mbit switch). I\nget the error log message after a few minutes (which translates to a few\nhundred thousand requests). Apache is running 1 process with 10 worker\nthreads (although, I also tried it with the default number of\nprocesses/threads and still observed a SIGSEGV).\n\nSYSTEM: \n- Intel Core 2 6400 @ 2.13GHz \n- Fedora Core 5 (default DVD install)\n  + Linux 2.6.18 (default compile from kernel.org)\n\nCOMPILE:\n[root@localhost httpd-2.2.3_worker]$ ./configure \\\n> --prefix=/usr/local/apache2_worker \\\n> --with-mpm=worker\n\n[root@localhost linux-2.6.16]$ /usr/local/apache2_worker/bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_authn_file.c\n  mod_authn_default.c\n  mod_authz_host.c\n  mod_authz_groupfile.c\n  mod_authz_user.c\n  mod_authz_default.c\n  mod_auth_basic.c\n  mod_include.c\n  mod_filter.c\n  mod_log_config.c\n  mod_env.c\n  mod_setenvif.c\n  worker.c\n  http_core.c\n  mod_mime.c\n  mod_status.c\n  mod_autoindex.c\n  mod_asis.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_actions.c\n  mod_userdir.c\n  mod_alias.c\n  mod_so.c\n\nCONFIGURATION MODIFICATIONS:\n#\n# This will give us somthing to debug with in the case of a crash.\n#\nCoreDumpDirectory /tmp/apache2-dump\n\n# worker MPM\n# StartServers: initial number of server processes to start\n# MaxClients: maximum number of simultaneous client connections\n# MinSpareThreads: minimum number of worker threads which are kept spare\n# MaxSpareThreads: maximum number of worker threads which are kept spare\n# ThreadsPerChild: constant number of worker threads in each server process\n# MaxRequestsPerChild: maximum number of requests a server process serves\n<IfModule mpm_worker_module>\n    StartServers          1\n    MaxClients           10\n    MinSpareThreads      10\n    MaxSpareThreads      10\n    ThreadsPerChild      10\n    MaxRequestsPerChild   0\n</IfModule>\n\nCORE DUMP:\nI don't think this is a very useful backtrace, but never-the-less, here it is. \nI haven't been able to generate one with more symbol information on my system. \nAny advice on getting a more complete trace would be great. -- This is very \nreproducible. \n\n[root@localhost local]$  gdb /usr/local/apache2_worker/bin/httpd\n/tmp/apache2-dump/core.14801\nGNU gdb Red Hat Linux (6.3.0.0-1.122rh)\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i386-redhat-linux-gnu\"...Using host libthread_db\nlibrary \"/lib/libthread_db.so.1\".\n\nReading symbols from shared object read from target memory...done.\nLoaded system supplied DSO at 0xffffe000\nCore was generated by `/usr/local/apache2/bin/httpd -k start'.\nProgram terminated with signal 11, Segmentation fault.\n\nwarning: svr4_current_sos: Can't read pathname for load map: Input/output\nerror\n\nReading symbols from /lib/libm.so.6...done.\nLoaded symbols for /lib/libm.so.6\nReading symbols from /usr/local/apache2_worker/lib/libaprutil-1.so.0...done.\nLoaded symbols for /usr/local/apache2_worker/lib/libaprutil-1.so.0\nReading symbols from /usr/lib/libsqlite3.so.0...done.\nLoaded symbols for /usr/lib/libsqlite3.so.0\nReading symbols from /lib/libexpat.so.0...done.\nLoaded symbols for /lib/libexpat.so.0\nReading symbols from /usr/local/apache2_worker/lib/libapr-1.so.0...done.\nLoaded symbols for /usr/local/apache2_worker/lib/libapr-1.so.0\nReading symbols from /lib/libuuid.so.1...done.\nLoaded symbols for /lib/libuuid.so.1\nReading symbols from /lib/librt.so.1...done.\nLoaded symbols for /lib/librt.so.1\nReading symbols from /lib/libcrypt.so.1...done.\nLoaded symbols for /lib/libcrypt.so.1\nReading symbols from /lib/libpthread.so.0...done.\nLoaded symbols for /lib/libpthread.so.0\nReading symbols from /lib/libdl.so.2...done.\nLoaded symbols for /lib/libdl.so.2\nReading symbols from /lib/libc.so.6...done.\nLoaded symbols for /lib/libc.so.6\nReading symbols from /lib/ld-linux.so.2...done.\nLoaded symbols for /lib/ld-linux.so.2\nReading symbols from /lib/libnss_files.so.2...done.\nLoaded symbols for /lib/libnss_files.so.2\nReading symbols from /lib/libgcc_s.so.1...done.\nLoaded symbols for /lib/libgcc_s.so.1\n#0  0xb7f09410 in ?? ()\n(gdb) where\n#0  0xb7f09410 in ?? ()\n#1  0xbfa38a68 in ?? ()\n#2  0x00000001 in ?? ()\n#3  0xbfa38a67 in ?? ()\n#4  0x00cc2b8b in __read_nocancel () from /lib/libpthread.so.0\n#5  0x080a17d4 in ap_mpm_pod_check (pod=0x816bd40) at pod.c:54\n#6  0x0809f426 in child_main (child_num_arg=Variable \"child_num_arg\" is not\navailable.\n) at worker.c:1258\n#7  0x0809f5a2 in make_child (s=0x80cdbe8, slot=0) at worker.c:1341\n#8  0x0809f667 in startup_children (number_to_start=1) at worker.c:1375\n#9  0x080a0757 in ap_mpm_run (_pconf=0x80c70a8, plog=0x81051a0, s=0x80cdbe8)\nat worker.c:1725\n#10 0x08062335 in main (argc=135024928, argv=0x0) at main.c:717\n(gdb) thread apply all bt full\n\nThread 12 (process 14803):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb7674168 in ?? ()\nNo symbol table info available.\n#2  0x000007d0 in ?? ()\nNo symbol table info available.\n#3  0x00000001 in ?? ()\nNo symbol table info available.\n#4  0x00bffcac in poll () from /lib/libc.so.6\nNo symbol table info available.\n#5  0xb7edc6b4 in apr_wait_for_io_or_timeout (f=0x0, s=0x8195808, for_read=1)\nat support/unix/waitio.c:51\n        pfd = {fd = 10, events = 1, revents = 17}\n        rc = 1\n        timeout = 2000\n#6  0xb7ed7a40 in apr_socket_recv (sock=0x8195808, buf=0xb76741f4\n\"@{&#1073;\\030Bg&#65533;z&#65533;&#65533;&#65533;\", len=0xb76743f4) at network_io/unix/sendrecv.c:87\n        rv = Variable \"rv\" is not available.\n\nThread 11 (process 14804):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb6e73168 in ?? ()\nNo symbol table info available.\n#2  0x000007d0 in ?? ()\nNo symbol table info available.\n#3  0x00000001 in ?? ()\nNo symbol table info available.\n#4  0x00bffcac in poll () from /lib/libc.so.6\nNo symbol table info available.\n#5  0xb7edc6b4 in apr_wait_for_io_or_timeout (f=0x0, s=0x819d9e8, for_read=1)\nat support/unix/waitio.c:51\n        pfd = {fd = 20, events = 1, revents = 0}\n        rc = -4\n        timeout = 2000\n#6  0xb7ed7a40 in apr_socket_recv (sock=0x819d9e8, buf=0xb6e731f4\n\"&#65533;\\220\\033\\b\\0302&#65533;&#65533;z&#65533;&#65533;&#65533;\", len=0xb6e733f4) at network_io/unix/sendrecv.c:87\n        rv = Variable \"rv\" is not available.\n\nThread 10 (process 14805):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb6672168 in ?? ()\nNo symbol table info available.\n#2  0x000007d0 in ?? ()\nNo symbol table info available.\n#3  0x00000001 in ?? ()\nNo symbol table info available.\n#4  0x00bffcac in poll () from /lib/libc.so.6\nNo symbol table info available.\n#5  0xb7edc6b4 in apr_wait_for_io_or_timeout (f=0x0, s=0x81998f8, for_read=1)\nat support/unix/waitio.c:51\n        pfd = {fd = 17, events = 1, revents = 0}\n        rc = -4\n        timeout = 2000\n#6  0xb7ed7a40 in apr_socket_recv (sock=0x81998f8, buf=0xb66721f4\n\"\\210&#65533;\\032\\b\\030\\\"g&#65533;z&#65533;&#65533;&#65533;\", len=0xb66723f4) at network_io/unix/sendrecv.c:87\n---Type <return> to continue, or q <return> to quit---\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb5e71168 in ?? ()\nNo symbol table info available.\n#2  0x000007d0 in ?? ()\nNo symbol table info available.\n#3  0x00000001 in ?? ()\nNo symbol table info available.\n#4  0x00bffcac in poll () from /lib/libc.so.6\nNo symbol table info available.\n#5  0xb7edc6b4 in apr_wait_for_io_or_timeout (f=0x0, s=0x81bdad8, for_read=1)\nat support/unix/waitio.c:51\n        pfd = {fd = 12, events = 1, revents = 17}\n        rc = 1\n        timeout = 2000\n#6  0xb7ed7a40 in apr_socket_recv (sock=0x81bdad8, buf=0xb5e711f4\n\"\\200{&#65533;&#65533;\\030\\022&#65533;&#65533;z&#65533;&#65533;&#65533;\", len=0xb5e713f4) at network_io/unix/sendrecv.c:87\n        rv = Variable \"rv\" is not available.\n\nThread 8 (process 14807):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb56703e8 in ?? ()\nNo symbol table info available.\n#2  0x0043311d in ?? ()\nNo symbol table info available.\n#3  0x00000000 in ?? ()\nNo symbol table info available.\n\nThread 7 (process 14808):\n#0  0x08090cbb in find_ct (r=0xb1b0a4e8) at mod_mime.c:781\n        conf = (mime_dir_config *) 0x80ffa68\n        exception_list = (apr_array_header_t *) 0xb1b0b9b8\n        ext = Variable \"ext\" is not available.\n\nThread 6 (process 14809):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb466e3e8 in ?? ()\nNo symbol table info available.\n#2  0x0043311c in ?? ()\nNo symbol table info available.\n#3  0x00000000 in ?? ()\nNo symbol table info available.\n\nThread 5 (process 14810):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb3e6d3e8 in ?? ()\nNo symbol table info available.\n#2  0x0043311b in ?? ()\nNo symbol table info available.\n#3  0x00000000 in ?? ()\n---Type <return> to continue, or q <return> to quit---\nNo symbol table info available.\n\nThread 4 (process 14811):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb366c098 in ?? ()\nNo symbol table info available.\n#2  0x0000000b in ?? ()\nNo symbol table info available.\n#3  0x0000000b in ?? ()\nNo symbol table info available.\n#4  0x00b69546 in kill () from /lib/libc.so.6\nNo symbol table info available.\n#5  0x0807c7dd in sig_coredump (sig=14801) at mpm_common.c:1170\nNo locals.\n#6  0xb7f09420 in ?? ()\nNo symbol table info available.\n#7  0x0000000b in ?? ()\nNo symbol table info available.\n#8  0x00000033 in ?? ()\nNo symbol table info available.\n#9  0x00000000 in ?? ()\nNo symbol table info available.\n\nThread 3 (process 14812):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb2e6b3e8 in ?? ()\nNo symbol table info available.\n#2  0x004330c0 in ?? ()\nNo symbol table info available.\n#3  0x00000000 in ?? ()\nNo symbol table info available.\n\nThread 2 (process 14813):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xb266a3d8 in ?? ()\nNo symbol table info available.\n#2  0x0005c97b in ?? ()\nNo symbol table info available.\n#3  0x00000000 in ?? ()\nNo symbol table info available.\n\nThread 1 (process 14801):\n#0  0xb7f09410 in ?? ()\nNo symbol table info available.\n#1  0xbfa38a68 in ?? ()\nNo symbol table info available.\n#2  0x00000001 in ?? ()\nNo symbol table info available.\n---Type <return> to continue, or q <return> to quit---\n#3  0xbfa38a67 in ?? ()\nNo symbol table info available.\n#4  0x00cc2b8b in __read_nocancel () from /lib/libpthread.so.0\nNo symbol table info available.\n#5  0x080a17d4 in ap_mpm_pod_check (pod=0x816bd40) at pod.c:54\n        c = Variable \"c\" is not available.\n(gdb)\n\nADDITIONAL:\nOn one occasion, while running the same scenario that is described above, I hit\na double-free. Bellow is what appeared in the error_log. This only happened\nonce and I have not been able to reproduce to get a core dump. -- related? \n\n[Thu Nov 23 13:34:23 2006] [notice] Apache/2.2.3 (Unix) configured -- resuming\nnormal operations\n[Thu Nov 23 13:34:28 2006] [error] server reached MaxClients setting, consider\nraising the MaxClients setting\n[Thu Nov 23 13:36:16 2006] [notice] child pid 2102 exit signal Segmentation\nfault (11)\n[Thu Nov 23 13:36:36 2006] [notice] child pid 2429 exit signal Segmentation\nfault (11)\n[Thu Nov 23 13:36:40 2006] [notice] child pid 2443 exit signal Segmentation\nfault (11)\n[Thu Nov 23 13:37:30 2006] [notice] child pid 2457 exit signal Segmentation\nfault (11)\n[Thu Nov 23 13:38:22 2006] [notice] child pid 2473 exit signal Segmentation\nfault (11)\n[Thu Nov 23 13:40:03 2006] [notice] child pid 2490 exit signal Segmentation\nfault (11)\n[Thu Nov 23 13:42:11 2006] [error] (22)Invalid argument: apr_socket_accept:\n(client socket)\n*** glibc detected *** /usr/local/apache2/bin/httpd: double free or corruption\n(out): 0x081704f8 ***\n======= Backtrace: =========\n/lib/libc.so.6[0xba4f18]\n/lib/libc.so.6(__libc_free+0x79)[0xba841d]\n/usr/local/apache2_worker/lib/libapr-1.so.0(apr_allocator_destroy+0x2d)[0xb7fa5e6d]\n/usr/local/apache2_worker/lib/libapr-1.so.0(apr_pool_destroy+0x195)[0xb7fa65a5]\n/usr/local/apache2/bin/httpd[0x80a1699]\n/usr/local/apache2_worker/lib/libapr-1.so.0[0xb7fa5ccd]\n/usr/local/apache2_worker/lib/libapr-1.so.0(apr_pool_destroy+0x3d)[0xb7fa644d]\n/usr/local/apache2/bin/httpd[0x809f0f4]\n/usr/local/apache2/bin/httpd[0x809f3c0]\n/usr/local/apache2/bin/httpd[0x809f5a2]\n/usr/local/apache2/bin/httpd(ap_mpm_run+0x887)[0x80a0377]\n/usr/local/apache2/bin/httpd(main+0x825)[0x8062335]\n/lib/libc.so.6(__libc_start_main+0xdc)[0xb567e4]\n/usr/local/apache2/bin/httpd(apr_bucket_mmap_make+0x61)[0x8061561]\n======= Memory map: ========\n0019e000-001fa000 r-xp 00000000 fe:00 13162567   /usr/lib/libsqlite3.so.0.8.6\n001fa000-001fc000 rw-p 0005b000 fe:00 13162567   /usr/lib/libsqlite3.so.0.8.6\n00289000-002a8000 r-xp 00000000 fe:00 46892455   /lib/libexpat.so.0.5.0\n002a8000-002aa000 rw-p 0001e000 fe:00 46892455   /lib/libexpat.so.0.5.0\n0051b000-00526000 r-xp 00000000 fe:00 46892444\n/lib/libgcc_s-4.1.0-20060304.so.1\n00526000-00527000 rw-p 0000a000 fe:00 46892444\n/lib/libgcc_s-4.1.0-20060304.so.1\n0084f000-00855000 r-xp 00000000 fe:00 46892451   /lib/librt-2.4.so\n00855000-00856000 r--p 00005000 fe:00 46892451   /lib/librt-2.4.so\n00856000-00857000 rw-p 00006000 fe:00 46892451   /lib/librt-2.4.so\n00b41000-00c6d000 r-xp 00000000 fe:00 46892441   /lib/libc-2.4.so\n00c6d000-00c70000 r--p 0012b000 fe:00 46892441   /lib/libc-2.4.so\n00c70000-00c71000 rw-p 0012e000 fe:00 46892441   /lib/libc-2.4.so\n00c71000-00c74000 rw-p 00c71000 00:00 0\n00c76000-00c78000 r-xp 00000000 fe:00 46892442   /lib/libdl-2.4.so\n00c78000-00c79000 r--p 00001000 fe:00 46892442   /lib/libdl-2.4.so\n00c79000-00c7a000 rw-p 00002000 fe:00 46892442   /lib/libdl-2.4.so\n00c7c000-00c9f000 r-xp 00000000 fe:00 46892443   /lib/libm-2.4.so\n00c9f000-00ca0000 r--p 00022000 fe:00 46892443   /lib/libm-2.4.so\n00ca0000-00ca1000 rw-p 00023000 fe:00 46892443   /lib/libm-2.4.so\n00cb8000-00cc8000 r-xp 00000000 fe:00 46892445   /lib/libpthread-2.4.so\n00cc8000-00cc9000 r--p 0000f000 fe:00 46892445   /lib/libpthread-2.4.so\n00cc9000-00cca000 rw-p 00010000 fe:00 46892445   /lib/libpthread-2.4.so\n00cca000-00ccc000 rw-p 00cca000 00:00 0\n0226e000-02273000 r-xp 00000000 fe:00 46892449   /lib/libcrypt-2.4.so\n02273000-02274000 r--p 00004000 fe:00 46892449   /lib/libcrypt-2.4.so\n02274000-02275000 rw-p 00005000 fe:00 46892449   /lib/libcrypt-2.4.so\n02275000-0229c000 rw-p 02275000 00:00 0\n08048000-080bb000 r-xp 00000000 fe:00 13861836\n/usr/local/apache2_worker/bin/httpd\n080bb000-080be000 rw-p 00073000 fe:00 13861836\n/usr/local/apache2_worker/bin/httpd\n080be000-08204000 rw-p 080be000 00:00 0          [heap]\nb1e00000-b1e21000 rw-p b1e00000 00:00 0\nb1e21000-b1f00000 ---p b1e21000 00:00 0\nb273e000-b273f000 ---p b273e000 00:00 0\nb273f000-b2f3f000 rw-p b273f000 00:00 0\nb2f3f000-b2f40000 ---p b2f3f000 00:00 0\nb2f40000-b3740000 rw-p b2f40000 00:00 0\nb3740000-b3741000 ---p b3740000 00:00 0\nb3741000-b3f41000 rw-p b3741000 00:00 0\nb3f41000-b3f42000 ---p b3f41000 00:00 0\nb3f42000-b4742000 rw-p b3f42000 00:00 0\nb7f49000-b7f82000 rw-s 00000000 00:07 1019868    /dev/zero (deleted)\nb7f82000-b7f8b000 r-xp 00000000 fe:00 46891049   /lib/libnss_files-2.4.so\nb7f8b000-b7f8c000 r--p 00008000 fe:00 46891049   /lib/libnss_files-2.4.so\nb7f8c000-b7f8d000 rw-p 00009000 fe:00 46891049   /lib/libnss_files-2.4.so\nb7f8d000-b7f8f000 rw-p b7f8d000 00:00 0\nb7f8f000-b7f91000 r-xp 00000000 fe:00 46892462   /lib/libuuid.so.1.2\nb7f91000-b7f92000 rw-p 00002000 fe:00 46892462   /lib/libuuid.so.1.2\nb7f92000-b7fb4000 r-xp 00000000 fe:00 13861773\n/usr/local/apache2_worker/lib/libapr-1.so.0.2.7\nb7fb4000-b7fb5000 rw-p 00022000 fe:00 13861773\n/usr/local/apache2_worker/lib/libapr-1.so.0.2.7\nb7fb5000-b7fb6000 rw-p b7fb5000 00:00 0\nb7fb6000-b7fcb000 r-xp 00000000 fe:00 13861815\n/usr/local/apache2_worker/lib/libaprutil-1.so.0.2.7\nb7fcb000-b7fcc000 rw-p 00014000 fe:00 13861815\n/usr/local/apache2_worker/lib/libaprutil-1.so.0.2.7\nb7fdb000-b7fdc000 rw-p b7fdb000 00:00 0\nb7fdc000-b7ff5000 r-xp 00000000 fe:00 46892440   /lib/ld-2.4.so\nb7ff5000-b7ff6000 r--p 00018000 fe:00 46892440   /lib/ld-2.4.so\nb7ff6000-b7ff7000 rw-p 00019000 fe:00 46892440   /lib/ld-2.4.so\nbf8e2000-bf8f7000 rw-p bf8e2000 00:00 0          [stack]\nffffe000-fffff000 ---p 00000000 00:00 0          [vdso]\n[Thu Nov 23 13:42:11 2006] [notice] child pid 2510 exit signal Aborted (6)", "id": 96126, "time": "2006-11-23T11:59:47Z", "bug_id": 41030, "creation_time": "2006-11-23T11:59:47Z", "is_private": false}, {"count": 1, "tags": [], "text": "I've put in some instrumentation in the kernel that lets me track process\nsystem calls and arguments and record a history of what's happened for later\nanalysis. Using this tool I can see what system calls were made before the\ncrash. You can think of it as a very simple strace, implemented in the kernel\n-- so it's much faster.\n\nI've noticed that before the segmentation fault, one worker thread closes a\nfile descriptor that is opened by another worker. I would call these extra\ncloses because the worker thread is closing files that it hasn't opened during\nthis connection. Based on the trace it looks like these extra close calls are\nhappening in apr_pool_clear/run_cleanups.\n\nThe thread that was using that file or socket will then make system calls with\nbad (corrupted?) file descriptors. For example: sys_poll will be called with a\nfile descriptor that is already closed. The segfault often happens soon after\nthis -- presumably when something in the file structure is dereference.\n\nIs it possible that worker threads are closing files that are opened by other\nworkers? I've skimmed through the Apache MPM worker source and can't see how\nthis could happen.\n", "is_private": false, "bug_id": 41030, "id": 96153, "time": "2006-11-24T08:04:35Z", "creator": "pool@eecg.toronto.edu", "creation_time": "2006-11-24T08:04:35Z", "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 41030, "attachment_id": null, "id": 96192, "time": "2006-11-26T18:23:50Z", "creator": "chip@force-elite.com", "creation_time": "2006-11-26T18:23:50Z", "is_private": false, "text": "Can you run and post a comment with the results of\n'/usr/local/apache2_worker/bin/httpd -M' which lists all modules (including\ndynamic modules)?"}, {"count": 3, "tags": [], "creator": "pool@eecg.toronto.edu", "attachment_id": null, "text": "(In reply to comment #2)\n> Can you run and post a comment with the results of\n> '/usr/local/apache2_worker/bin/httpd -M' which lists all modules (including\n> dynamic modules)?\n\nSure thing:\n\n[root@rocksteady lcuser]$ /usr/local/apache2_worker/bin/httpd -M\nLoaded Modules:\n core_module (static)\n authn_file_module (static)\n authn_default_module (static)\n authz_host_module (static)\n authz_groupfile_module (static)\n authz_user_module (static)\n authz_default_module (static)\n auth_basic_module (static)\n include_module (static)\n filter_module (static)\n log_config_module (static)\n env_module (static)\n setenvif_module (static)\n mpm_worker_module (static)\n http_module (static)\n mime_module (static)\n status_module (static)\n autoindex_module (static)\n asis_module (static)\n negotiation_module (static)\n dir_module (static)\n actions_module (static)\n userdir_module (static)\n alias_module (static)\n so_module (static)\nSyntax OK\n", "id": 96193, "time": "2006-11-26T19:53:17Z", "bug_id": 41030, "creation_time": "2006-11-26T19:53:17Z", "is_private": false}, {"count": 4, "tags": [], "text": "Please do NEVER change the assignment of bugs.", "is_private": false, "bug_id": 41030, "id": 96240, "time": "2006-11-27T14:45:29Z", "creator": "rpluem@apache.org", "creation_time": "2006-11-27T14:45:29Z", "attachment_id": null}, {"count": 5, "tags": [], "creator": "saiu@isti.cnr.it", "attachment_id": null, "text": "Same for me, with essentially the same setup (SMP instead of multicore), and\nusing apache benchmark (ab).", "id": 97024, "time": "2006-12-18T08:42:21Z", "bug_id": 41030, "creation_time": "2006-12-18T08:42:21Z", "is_private": false}, {"count": 6, "tags": [], "creator": "nadav@peer.org.il", "attachment_id": null, "id": 103800, "time": "2007-05-29T23:18:45Z", "bug_id": 41030, "creation_time": "2007-05-29T23:18:45Z", "is_private": false, "text": "I've got a similar problem, using WebLoad\n(Dynamic modules disabled at compile time)\n\n/usr/local/pkg/httpd-2.0.58/bin/httpd -l\nCompiled in modules:\n  core.c\n  mod_perl.c\n  mod_access.c\n  mod_auth.c\n  mod_cache.c\n  mod_disk_cache.c\n  mod_mem_cache.c\n  util_ldap.c\n  mod_auth_ldap.c\n  mod_include.c\n  mod_log_config.c\n  mod_env.c\n  mod_expires.c\n  mod_setenvif.c\n  mod_proxy.c\n  proxy_connect.c\n  proxy_ftp.c\n  proxy_http.c\n  mod_ssl.c\n  worker.c\n  http_core.c\n  mod_mime.c\n  mod_status.c\n  mod_cgid.c\n  mod_negotiation.c\n  mod_dir.c\n  mod_imap.c\n  mod_actions.c\n  mod_alias.c\n  mod_rewrite.c\n  mod_so.c"}, {"count": 7, "tags": [], "creator": "asm@uezku.kemsu.ru", "is_private": false, "text": "Please, install httpd, apr and apr-util debug info and make stack trace \nagain...\n", "id": 111134, "time": "2007-11-27T07:15:57Z", "bug_id": 41030, "creation_time": "2007-11-27T07:15:57Z", "attachment_id": null}, {"count": 8, "tags": [], "creator": "guilhermeassad@uol.com.br", "attachment_id": null, "id": 117308, "creation_time": "2008-06-03T11:28:56Z", "time": "2008-06-03T11:28:56Z", "bug_id": 41030, "text": "I have the same problem with apache 2.2.8 using siege to stress test my environment. When I reached 15000 transactions/second, approximately, apache started to refuse connections and process died with segmentation fault. \n\nAt the error log I found:\n\n*** glibc detected *** /opt/apache-2.2.8/bin/httpd: free(): invalid pointer: 0x75d00048 ***\n======= Backtrace: =========\n/lib/libc.so.6[0xf7d57911]\n/lib/libc.so.6(__libc_free+0x84)[0xf7d58f84]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x160)[0xf7e7d9f0]\n/opt/apache-2.2.8/bin/httpd[0x80896a9]\n/opt/apache-2.2.8/lib/libapr-1.so.0[0xf7e7d14d]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x3d)[0xf7e7d8cd]\n/opt/apache-2.2.8/bin/httpd[0x8087114]\n/opt/apache-2.2.8/bin/httpd[0x80873e0]\n/opt/apache-2.2.8/bin/httpd[0x80875c0]\n/opt/apache-2.2.8/bin/httpd(ap_mpm_run+0x878)[0x8088388]\n/opt/apache-2.2.8/bin/httpd(main+0x845)[0x8062135]\n/lib/libc.so.6(__libc_start_main+0xdc)[0xf7d0987c]\n/opt/apache-2.2.8/bin/httpd(apr_bucket_mmap_make+0x65)[0x8061341]\n======= Memory map: ========\n08048000-0809d000 r-xp 00000000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n0809d000-080a1000 rwxp 00054000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n080a1000-08581000 rwxp 080a1000 00:00 0                                  [heap]\n75b00000-75b21000 rwxp 75b00000 00:00 0\n75b21000-75c00000 ---p 75b21000 00:00 0\n75c00000-75c21000 rwxp 75c00000 00:00 0\n75c21000-75d00000 ---p 75c21000 00:00 0\n75d00000-75d89000 rwxp 75d00000 00:00 0\n75d89000-75e00000 ---p 75d89000 00:00 0\n75e00000-75e21000 rwxp 75e00000 00:00 0\n75e21000-75f00000 ---p 75e21000 00:00 0\n75f00000-75f21000 rwxp 75f00000 00:00 0\n75f21000-76000000 ---p 75f21000 00:00 0\n76079000-76083000 r-xp 00000000 08:05 154940                             /lib/libgcc_s.so.1\n76083000-76084000 rwxp 00009000 08:05 154940                             /lib/libgcc_s.so.1\n7688e000-7688f000 ---p 7688e000 00:00 0\n7688f000-7708f000 rwxp 7688f000 00:00 0\n7708f000-77090000 ---p 7708f000 00:00 0\n77090000-77890000 rwxp 77090000 00:00 0\n77890000-77891000 ---p 77890000 00:00 0\n77891000-78091000 rwxp 77891000 00:00 0\n78091000-78092000 ---p 78091000 00:00 0\n78092000-78892000 rwxp 78092000 00:00 0\nf718f000-f7c80000 rwxs 00000000 00:08 213061645                          /dev/zero (deleted)\nf7c80000-f7c88000 r-xp 00000000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c88000-f7c8a000 rwxp 00007000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c8a000-f7c9b000 r-xp 00000000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9b000-f7c9d000 rwxp 00010000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9d000-f7c9f000 rwxp f7c9d000 00:00 0\nf7c9f000-f7ca5000 r-xp 00000000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca5000-f7ca7000 rwxp 00005000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca7000-f7caf000 r-xp 00000000 08:05 154909                             /lib/libnss_files-2.4.so\nf7caf000-f7cb1000 rwxp 00007000 08:05 154909                             /lib/libnss_files-2.4.so\nf7cba000-f7cc8000 r-xp 00000000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc8000-f7cc9000 rwxp 0000d000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc9000-f7ccc000 r-xp 00000000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccc000-f7ccd000 rwxp 00002000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccd000-f7ccf000 r-xp 00000000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7ccf000-f7cd0000 rwxp 00001000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7cd0000-f7cd4000 r-xp 00000000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd4000-f7cd5000 rwxp 00003000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd5000-f7cd9000 r-xp 00000000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cd9000-f7cda000 rwxp 00004000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cda000-f7cdc000 r-xp 00000000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdc000-f7cdd000 rwxp 00001000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdd000-f7ce0000 r-xp 00000000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce0000-f7ce1000 rwxp 00003000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce1000-f7ce3000 r-xp 00000000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce3000-f7ce4000 rwxp 00001000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce4000-f7ce9000 r-xp 00000000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7ce9000-f7cea000 rwxp 00004000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7cea000-f7cf1000 r-xp 00000000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf1000-f7cf2000 rwxp 00006000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf2000-f7cf4000 rwxp f7cf2000 00:00 0\nf7cf4000-f7e0d000 r-xp 00000000 08:05 154892                             /lib/libc-2.4.so\nf7e0d000-f7e0f000 r-xp 00118000 08:05 154892                             /lib/libc-2.4.so\nf7e0f000-f7e11000 rwxp 0011a000 08:05 154892                             /lib/libc-2.4.so\nf7e11000-f7e14000 rwxp f7e11000 00:00 0\nf7e14000-f7e16000 r-xp 00000000 08:05 154898                             /lib/libdl-2.4.so\nf7e16000-f7e18000 rwxp 00001000 08:05 154898                             /lib/libdl-2.4.so\nf7e18000-f7e28000 r-xp 00000000 08:05 154918                             /lib/libpthread-2.4.so\nf7e28000-f7e2a000 rwxp 0000f000 08:05 154918                             /lib/libpthread-2.4.so\nf7e2a000-f7e2c000 rwxp f7e2a000 00:00 0\nf7e2c000-f7e35000 r-xp 00000000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e35000-f7e38000 rwxp 00008000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e38000-f7e5f000 rwxp f7e38000 00:00 0\nf7e5f000-f7e66000 r-xp 00000000 08:05 154922                             /lib/librt-2.4.so\nf7e66000-f7e68000 rwxp 00006000 08:05 154922                             /lib/librt-2.4.so\nf7e68000-f7e69000 rwxp f7e68000 00:00 0\nf7e69000-f7e8b000 r-xp 00000000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8b000-f7e8c000 rwxp 00022000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8c000-f7ea9000 r-xp 00000000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7ea9000-f7eab000 rwxp 0001d000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7eab000-f7ebf000 r-xp 00000000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ebf000-f7ec0000 rwxp 00013000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ec0000-f7ee3000 r-xp 00000000 08:05 154900                             /lib/libm-2.4.so\nf7ee3000-f7ee5000 rwxp 00022000 08:05 154900                             /lib/libm-2.4.so\nf7ee5000-f7eea000 r-xp 00000000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eea000-f7eeb000 rwxp 00004000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eeb000-f7eed000 r-xp 00000000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eed000-f7eee000 rwxp 00001000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eee000-f7eef000 rwxp f7eee000 00:00 0\nf7eef000-f7f09000 r-xp 00000000 08:05 154885                             /lib/ld-2.4.so\nf7f09000-f7f0b000 rwxp 00019000 08:05 154885                             /lib/ld-2.4.so\nffff7000-ffffe000 rw-p ffff7000 00:00 0                                  [stack]\nffffe000-fffff000 r-xp ffffe000 00:00 0\n[Tue Jun 03 14:46:42 2008] [notice] child pid 1987 exit signal Aborted (6)\n[Tue Jun 03 14:46:47 2008] [notice] child pid 4370 exit signal Segmentation fault (11)\n*** glibc detected *** /opt/apache-2.2.8/bin/httpd: double free or corruption (out): 0x08141098 ***\n======= Backtrace: =========\n/lib/libc.so.6[0xf7d57911]\n/lib/libc.so.6(__libc_free+0x84)[0xf7d58f84]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_allocator_destroy+0x2d)[0xf7e7d2ed]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x1ad)[0xf7e7da3d]\n/opt/apache-2.2.8/bin/httpd[0x80896a9]\n/opt/apache-2.2.8/lib/libapr-1.so.0[0xf7e7d14d]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x3d)[0xf7e7d8cd]\n/opt/apache-2.2.8/bin/httpd[0x8087114]\n/opt/apache-2.2.8/bin/httpd[0x80873e0]\n/opt/apache-2.2.8/bin/httpd[0x80875c0]\n/opt/apache-2.2.8/bin/httpd(ap_mpm_run+0x878)[0x8088388]\n/opt/apache-2.2.8/bin/httpd(main+0x845)[0x8062135]\n/lib/libc.so.6(__libc_start_main+0xdc)[0xf7d0987c]\n/opt/apache-2.2.8/bin/httpd(apr_bucket_mmap_make+0x65)[0x8061341]\n======= Memory map: ========\n08048000-0809d000 r-xp 00000000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n0809d000-080a1000 rwxp 00054000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n080a1000-085f3000 rwxp 080a1000 00:00 0                                  [heap]\n75d00000-75d37000 rwxp 75d00000 00:00 0\n75d37000-75e00000 ---p 75d37000 00:00 0\n75e00000-75e65000 rwxp 75e00000 00:00 0\n75e65000-75f00000 ---p 75e65000 00:00 0\n75f00000-75f7e000 rwxp 75f00000 00:00 0\n75f7e000-76000000 ---p 75f7e000 00:00 0\n76079000-76083000 r-xp 00000000 08:05 154940                             /lib/libgcc_s.so.1\n76083000-76084000 rwxp 00009000 08:05 154940                             /lib/libgcc_s.so.1\n7688e000-7688f000 ---p 7688e000 00:00 0\n7688f000-7708f000 rwxp 7688f000 00:00 0\n7708f000-77090000 ---p 7708f000 00:00 0\n77090000-77890000 rwxp 77090000 00:00 0\n77890000-77891000 ---p 77890000 00:00 0\n77891000-78091000 rwxp 77891000 00:00 0\n78091000-78092000 ---p 78091000 00:00 0\n78092000-78892000 rwxp 78092000 00:00 0\nf718f000-f7c80000 rwxs 00000000 00:08 213061645                          /dev/zero (deleted)\nf7c80000-f7c88000 r-xp 00000000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c88000-f7c8a000 rwxp 00007000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c8a000-f7c9b000 r-xp 00000000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9b000-f7c9d000 rwxp 00010000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9d000-f7c9f000 rwxp f7c9d000 00:00 0\nf7c9f000-f7ca5000 r-xp 00000000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca5000-f7ca7000 rwxp 00005000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca7000-f7caf000 r-xp 00000000 08:05 154909                             /lib/libnss_files-2.4.so\nf7caf000-f7cb1000 rwxp 00007000 08:05 154909                             /lib/libnss_files-2.4.so\nf7cba000-f7cc8000 r-xp 00000000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc8000-f7cc9000 rwxp 0000d000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc9000-f7ccc000 r-xp 00000000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccc000-f7ccd000 rwxp 00002000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccd000-f7ccf000 r-xp 00000000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7ccf000-f7cd0000 rwxp 00001000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7cd0000-f7cd4000 r-xp 00000000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd4000-f7cd5000 rwxp 00003000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd5000-f7cd9000 r-xp 00000000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cd9000-f7cda000 rwxp 00004000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cda000-f7cdc000 r-xp 00000000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdc000-f7cdd000 rwxp 00001000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdd000-f7ce0000 r-xp 00000000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce0000-f7ce1000 rwxp 00003000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce1000-f7ce3000 r-xp 00000000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce3000-f7ce4000 rwxp 00001000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce4000-f7ce9000 r-xp 00000000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7ce9000-f7cea000 rwxp 00004000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7cea000-f7cf1000 r-xp 00000000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf1000-f7cf2000 rwxp 00006000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf2000-f7cf4000 rwxp f7cf2000 00:00 0\nf7cf4000-f7e0d000 r-xp 00000000 08:05 154892                             /lib/libc-2.4.so\nf7e0d000-f7e0f000 r-xp 00118000 08:05 154892                             /lib/libc-2.4.so\nf7e0f000-f7e11000 rwxp 0011a000 08:05 154892                             /lib/libc-2.4.so\nf7e11000-f7e14000 rwxp f7e11000 00:00 0\nf7e14000-f7e16000 r-xp 00000000 08:05 154898                             /lib/libdl-2.4.so\nf7e16000-f7e18000 rwxp 00001000 08:05 154898                             /lib/libdl-2.4.so\nf7e18000-f7e28000 r-xp 00000000 08:05 154918                             /lib/libpthread-2.4.so\nf7e28000-f7e2a000 rwxp 0000f000 08:05 154918                             /lib/libpthread-2.4.so\nf7e2a000-f7e2c000 rwxp f7e2a000 00:00 0\nf7e2c000-f7e35000 r-xp 00000000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e35000-f7e38000 rwxp 00008000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e38000-f7e5f000 rwxp f7e38000 00:00 0\nf7e5f000-f7e66000 r-xp 00000000 08:05 154922                             /lib/librt-2.4.so\nf7e66000-f7e68000 rwxp 00006000 08:05 154922                             /lib/librt-2.4.so\nf7e68000-f7e69000 rwxp f7e68000 00:00 0\nf7e69000-f7e8b000 r-xp 00000000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8b000-f7e8c000 rwxp 00022000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8c000-f7ea9000 r-xp 00000000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7ea9000-f7eab000 rwxp 0001d000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7eab000-f7ebf000 r-xp 00000000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ebf000-f7ec0000 rwxp 00013000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ec0000-f7ee3000 r-xp 00000000 08:05 154900                             /lib/libm-2.4.so\nf7ee3000-f7ee5000 rwxp 00022000 08:05 154900                             /lib/libm-2.4.so\nf7ee5000-f7eea000 r-xp 00000000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eea000-f7eeb000 rwxp 00004000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eeb000-f7eed000 r-xp 00000000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eed000-f7eee000 rwxp 00001000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eee000-f7eef000 rwxp f7eee000 00:00 0\nf7eef000-f7f09000 r-xp 00000000 08:05 154885                             /lib/ld-2.4.so\nf7f09000-f7f0b000 rwxp 00019000 08:05 154885                             /lib/ld-2.4.so\nffff7000-ffffe000 rw-p ffff7000 00:00 0                                  [stack]\nffffe000-fffff000 r-xp ffffe000 00:00 0\n[Tue Jun 03 14:47:30 2008] [notice] child pid 23953 exit signal Aborted (6)\n[Tue Jun 03 14:47:34 2008] [notice] child pid 25768 exit signal Segmentation fault (11)\n[Tue Jun 03 14:47:39 2008] [notice] child pid 28099 exit signal Segmentation fault (11)\n*** glibc detected *** /opt/apache-2.2.8/bin/httpd: double free or corruption (out): 0x08141098 ***\n======= Backtrace: =========\n/lib/libc.so.6[0xf7d57911]\n/lib/libc.so.6(__libc_free+0x84)[0xf7d58f84]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x160)[0xf7e7d9f0]\n/opt/apache-2.2.8/bin/httpd[0x80896a9]\n/opt/apache-2.2.8/lib/libapr-1.so.0[0xf7e7d14d]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x3d)[0xf7e7d8cd]\n/opt/apache-2.2.8/bin/httpd[0x8087114]\n/opt/apache-2.2.8/bin/httpd[0x80873e0]\n/opt/apache-2.2.8/bin/httpd[0x80875c0]\n/opt/apache-2.2.8/bin/httpd(ap_mpm_run+0x878)[0x8088388]\n/opt/apache-2.2.8/bin/httpd(main+0x845)[0x8062135]\n/lib/libc.so.6(__libc_start_main+0xdc)[0xf7d0987c]\n/opt/apache-2.2.8/bin/httpd(apr_bucket_mmap_make+0x65)[0x8061341]\n======= Memory map: ========\n08048000-0809d000 r-xp 00000000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n0809d000-080a1000 rwxp 00054000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n080a1000-0859d000 rwxp 080a1000 00:00 0                                  [heap]\n75900000-75935000 rwxp 75900000 00:00 0\n75935000-75a00000 ---p 75935000 00:00 0\n75b00000-75b3d000 rwxp 75b00000 00:00 0\n75b3d000-75c00000 ---p 75b3d000 00:00 0\n75c00000-75c31000 rwxp 75c00000 00:00 0\n75c31000-75d00000 ---p 75c31000 00:00 0\n75d00000-75d23000 rwxp 75d00000 00:00 0\n75d23000-75e00000 ---p 75d23000 00:00 0\n75e00000-75e39000 rwxp 75e00000 00:00 0\n75e39000-75f00000 ---p 75e39000 00:00 0\n75f00000-75f45000 rwxp 75f00000 00:00 0\n75f45000-76000000 ---p 75f45000 00:00 0\n76079000-76083000 r-xp 00000000 08:05 154940                             /lib/libgcc_s.so.1\n76083000-76084000 rwxp 00009000 08:05 154940                             /lib/libgcc_s.so.1\n7688e000-7688f000 ---p 7688e000 00:00 0\n7688f000-7708f000 rwxp 7688f000 00:00 0\n7708f000-77090000 ---p 7708f000 00:00 0\n77090000-77890000 rwxp 77090000 00:00 0\n77890000-77891000 ---p 77890000 00:00 0\n77891000-78091000 rwxp 77891000 00:00 0\n78091000-78092000 ---p 78091000 00:00 0\n78092000-78892000 rwxp 78092000 00:00 0\nf718f000-f7c80000 rwxs 00000000 00:08 213061645                          /dev/zero (deleted)\nf7c80000-f7c88000 r-xp 00000000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c88000-f7c8a000 rwxp 00007000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c8a000-f7c9b000 r-xp 00000000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9b000-f7c9d000 rwxp 00010000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9d000-f7c9f000 rwxp f7c9d000 00:00 0\nf7c9f000-f7ca5000 r-xp 00000000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca5000-f7ca7000 rwxp 00005000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca7000-f7caf000 r-xp 00000000 08:05 154909                             /lib/libnss_files-2.4.so\nf7caf000-f7cb1000 rwxp 00007000 08:05 154909                             /lib/libnss_files-2.4.so\nf7cba000-f7cc8000 r-xp 00000000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc8000-f7cc9000 rwxp 0000d000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc9000-f7ccc000 r-xp 00000000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccc000-f7ccd000 rwxp 00002000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccd000-f7ccf000 r-xp 00000000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7ccf000-f7cd0000 rwxp 00001000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7cd0000-f7cd4000 r-xp 00000000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd4000-f7cd5000 rwxp 00003000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd5000-f7cd9000 r-xp 00000000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cd9000-f7cda000 rwxp 00004000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cda000-f7cdc000 r-xp 00000000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdc000-f7cdd000 rwxp 00001000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdd000-f7ce0000 r-xp 00000000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce0000-f7ce1000 rwxp 00003000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce1000-f7ce3000 r-xp 00000000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce3000-f7ce4000 rwxp 00001000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce4000-f7ce9000 r-xp 00000000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7ce9000-f7cea000 rwxp 00004000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7cea000-f7cf1000 r-xp 00000000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf1000-f7cf2000 rwxp 00006000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf2000-f7cf4000 rwxp f7cf2000 00:00 0\nf7cf4000-f7e0d000 r-xp 00000000 08:05 154892                             /lib/libc-2.4.so\nf7e0d000-f7e0f000 r-xp 00118000 08:05 154892                             /lib/libc-2.4.so\nf7e0f000-f7e11000 rwxp 0011a000 08:05 154892                             /lib/libc-2.4.so\nf7e11000-f7e14000 rwxp f7e11000 00:00 0\nf7e14000-f7e16000 r-xp 00000000 08:05 154898                             /lib/libdl-2.4.so\nf7e16000-f7e18000 rwxp 00001000 08:05 154898                             /lib/libdl-2.4.so\nf7e18000-f7e28000 r-xp 00000000 08:05 154918                             /lib/libpthread-2.4.so\nf7e28000-f7e2a000 rwxp 0000f000 08:05 154918                             /lib/libpthread-2.4.so\nf7e2a000-f7e2c000 rwxp f7e2a000 00:00 0\nf7e2c000-f7e35000 r-xp 00000000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e35000-f7e38000 rwxp 00008000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e38000-f7e5f000 rwxp f7e38000 00:00 0\nf7e5f000-f7e66000 r-xp 00000000 08:05 154922                             /lib/librt-2.4.so\nf7e66000-f7e68000 rwxp 00006000 08:05 154922                             /lib/librt-2.4.so\nf7e68000-f7e69000 rwxp f7e68000 00:00 0\nf7e69000-f7e8b000 r-xp 00000000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8b000-f7e8c000 rwxp 00022000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8c000-f7ea9000 r-xp 00000000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7ea9000-f7eab000 rwxp 0001d000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7eab000-f7ebf000 r-xp 00000000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ebf000-f7ec0000 rwxp 00013000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ec0000-f7ee3000 r-xp 00000000 08:05 154900                             /lib/libm-2.4.so\nf7ee3000-f7ee5000 rwxp 00022000 08:05 154900                             /lib/libm-2.4.so\nf7ee5000-f7eea000 r-xp 00000000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eea000-f7eeb000 rwxp 00004000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eeb000-f7eed000 r-xp 00000000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eed000-f7eee000 rwxp 00001000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eee000-f7eef000 rwxp f7eee000 00:00 0\nf7eef000-f7f09000 r-xp 00000000 08:05 154885                             /lib/ld-2.4.so\nf7f09000-f7f0b000 rwxp 00019000 08:05 154885                             /lib/ld-2.4.so\nffff7000-ffffe000 rw-p ffff7000 00:00 0                                  [stack]\nffffe000-fffff000 r-xp ffffe000 00:00 0\n[Tue Jun 03 14:48:37 2008] [notice] child pid 22144 exit signal Aborted (6)\n[Tue Jun 03 14:48:54 2008] [error] [client 10.6.12.243] request failed: error reading the headers\n[Tue Jun 03 14:48:55 2008] [notice] child pid 30329 exit signal Segmentation fault (11)\n[Tue Jun 03 14:50:08 2008] [notice] child pid 30977 exit signal Segmentation fault (11)\n[Tue Jun 03 14:50:15 2008] [notice] child pid 2153 exit signal Segmentation fault (11)\n[Tue Jun 03 14:50:43 2008] [notice] child pid 14969 exit signal Segmentation fault (11)\n[Tue Jun 03 14:51:51 2008] [notice] child pid 13548 exit signal Segmentation fault (11)\n[Tue Jun 03 14:52:11 2008] [notice] child pid 22652 exit signal Segmentation fault (11)\n*** glibc detected *** /opt/apache-2.2.8/bin/httpd: double free or corruption (out): 0x75f00048 ***\n======= Backtrace: =========\n/lib/libc.so.6[0xf7d57911]\n/lib/libc.so.6(__libc_free+0x84)[0xf7d58f84]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x160)[0xf7e7d9f0]\n/opt/apache-2.2.8/bin/httpd[0x80896a9]\n/opt/apache-2.2.8/lib/libapr-1.so.0[0xf7e7d14d]\n/opt/apache-2.2.8/lib/libapr-1.so.0(apr_pool_destroy+0x3d)[0xf7e7d8cd]\n/opt/apache-2.2.8/bin/httpd[0x8087114]\n/opt/apache-2.2.8/bin/httpd[0x80873e0]\n/opt/apache-2.2.8/bin/httpd[0x80875c0]\n/opt/apache-2.2.8/bin/httpd(ap_mpm_run+0x878)[0x8088388]\n/opt/apache-2.2.8/bin/httpd(main+0x845)[0x8062135]\n/lib/libc.so.6(__libc_start_main+0xdc)[0xf7d0987c]\n/opt/apache-2.2.8/bin/httpd(apr_bucket_mmap_make+0x65)[0x8061341]\n======= Memory map: ========\n08048000-0809d000 r-xp 00000000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n0809d000-080a1000 rwxp 00054000 08:0a 624011                             /opt/apache-2.2.8/bin/httpd\n080a1000-0851a000 rwxp 080a1000 00:00 0                                  [heap]\n75500000-75539000 rwxp 75500000 00:00 0\n75539000-75600000 ---p 75539000 00:00 0\n75700000-7577b000 rwxp 75700000 00:00 0\n7577b000-75800000 ---p 7577b000 00:00 0\n75800000-758a1000 rwxp 75800000 00:00 0\n758a1000-75900000 ---p 758a1000 00:00 0\n75900000-7597f000 rwxp 75900000 00:00 0\n7597f000-75a00000 ---p 7597f000 00:00 0\n75a00000-75a70000 rwxp 75a00000 00:00 0\n75a70000-75b00000 ---p 75a70000 00:00 0\n75b00000-75b72000 rwxp 75b00000 00:00 0\n75b72000-75c00000 ---p 75b72000 00:00 0\n75c00000-75c59000 rwxp 75c00000 00:00 0\n75c59000-75d00000 ---p 75c59000 00:00 0\n75d00000-75d37000 rwxp 75d00000 00:00 0\n75d37000-75e00000 ---p 75d37000 00:00 0\n75e00000-75e6b000 rwxp 75e00000 00:00 0\n75e6b000-75f00000 ---p 75e6b000 00:00 0\n75f00000-76000000 rwxp 75f00000 00:00 0\n76079000-76083000 r-xp 00000000 08:05 154940                             /lib/libgcc_s.so.1\n76083000-76084000 rwxp 00009000 08:05 154940                             /lib/libgcc_s.so.1\n7688e000-7688f000 ---p 7688e000 00:00 0\n7688f000-7708f000 rwxp 7688f000 00:00 0\n7708f000-77090000 ---p 7708f000 00:00 0\n77090000-77890000 rwxp 77090000 00:00 0\n77890000-77891000 ---p 77890000 00:00 0\n77891000-78091000 rwxp 77891000 00:00 0\n78091000-78092000 ---p 78091000 00:00 0\n78092000-78892000 rwxp 78092000 00:00 0\nf718f000-f7c80000 rwxs 00000000 00:08 213061645                          /dev/zero (deleted)\nf7c80000-f7c88000 r-xp 00000000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c88000-f7c8a000 rwxp 00007000 08:05 154913                             /lib/libnss_nis-2.4.so\nf7c8a000-f7c9b000 r-xp 00000000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9b000-f7c9d000 rwxp 00010000 08:05 154903                             /lib/libnsl-2.4.so\nf7c9d000-f7c9f000 rwxp f7c9d000 00:00 0\nf7c9f000-f7ca5000 r-xp 00000000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca5000-f7ca7000 rwxp 00005000 08:05 154905                             /lib/libnss_compat-2.4.so\nf7ca7000-f7caf000 r-xp 00000000 08:05 154909                             /lib/libnss_files-2.4.so\nf7caf000-f7cb1000 rwxp 00007000 08:05 154909                             /lib/libnss_files-2.4.so\nf7cba000-f7cc8000 r-xp 00000000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc8000-f7cc9000 rwxp 0000d000 08:0a 624342                             /opt/apache-2.2.8/modules/mod_rewrite.so\nf7cc9000-f7ccc000 r-xp 00000000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccc000-f7ccd000 rwxp 00002000 08:0a 624326                             /opt/apache-2.2.8/modules/mod_imagemap.so\nf7ccd000-f7ccf000 r-xp 00000000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7ccf000-f7cd0000 rwxp 00001000 08:0a 624351                             /opt/apache-2.2.8/modules/mod_vhost_alias.so\nf7cd0000-f7cd4000 r-xp 00000000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd4000-f7cd5000 rwxp 00003000 08:0a 624328                             /opt/apache-2.2.8/modules/mod_info.so\nf7cd5000-f7cd9000 r-xp 00000000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cd9000-f7cda000 rwxp 00004000 08:0a 624345                             /opt/apache-2.2.8/modules/mod_status.so\nf7cda000-f7cdc000 r-xp 00000000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdc000-f7cdd000 rwxp 00001000 08:0a 624343                             /opt/apache-2.2.8/modules/mod_setenvif.so\nf7cdd000-f7ce0000 r-xp 00000000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce0000-f7ce1000 rwxp 00003000 08:0a 624333                             /opt/apache-2.2.8/modules/mod_mime.so\nf7ce1000-f7ce3000 r-xp 00000000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce3000-f7ce4000 rwxp 00001000 08:0a 624320                             /opt/apache-2.2.8/modules/mod_expires.so\nf7ce4000-f7ce9000 r-xp 00000000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7ce9000-f7cea000 rwxp 00004000 08:0a 624329                             /opt/apache-2.2.8/modules/mod_log_config.so\nf7cea000-f7cf1000 r-xp 00000000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf1000-f7cf2000 rwxp 00006000 08:0a 624307                             /opt/apache-2.2.8/modules/mod_cache.so\nf7cf2000-f7cf4000 rwxp f7cf2000 00:00 0\nf7cf4000-f7e0d000 r-xp 00000000 08:05 154892                             /lib/libc-2.4.so\nf7e0d000-f7e0f000 r-xp 00118000 08:05 154892                             /lib/libc-2.4.so\nf7e0f000-f7e11000 rwxp 0011a000 08:05 154892                             /lib/libc-2.4.so\nf7e11000-f7e14000 rwxp f7e11000 00:00 0\nf7e14000-f7e16000 r-xp 00000000 08:05 154898                             /lib/libdl-2.4.so\nf7e16000-f7e18000 rwxp 00001000 08:05 154898                             /lib/libdl-2.4.so\nf7e18000-f7e28000 r-xp 00000000 08:05 154918                             /lib/libpthread-2.4.so\nf7e28000-f7e2a000 rwxp 0000f000 08:05 154918                             /lib/libpthread-2.4.so\nf7e2a000-f7e2c000 rwxp f7e2a000 00:00 0\nf7e2c000-f7e35000 r-xp 00000000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e35000-f7e38000 rwxp 00008000 08:05 154896                             /lib/libcrypt-2.4.so\nf7e38000-f7e5f000 rwxp f7e38000 00:00 0\nf7e5f000-f7e66000 r-xp 00000000 08:05 154922                             /lib/librt-2.4.so\nf7e66000-f7e68000 rwxp 00006000 08:05 154922                             /lib/librt-2.4.so\nf7e68000-f7e69000 rwxp f7e68000 00:00 0\nf7e69000-f7e8b000 r-xp 00000000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8b000-f7e8c000 rwxp 00022000 08:0a 624262                             /opt/apache-2.2.8/lib/libapr-1.so.0.2.12\nf7e8c000-f7ea9000 r-xp 00000000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7ea9000-f7eab000 rwxp 0001d000 08:08 64848                              /usr/lib/libexpat.so.1.5.0\nf7eab000-f7ebf000 r-xp 00000000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ebf000-f7ec0000 rwxp 00013000 08:0a 624261                             /opt/apache-2.2.8/lib/libaprutil-1.so.0.2.12\nf7ec0000-f7ee3000 r-xp 00000000 08:05 154900                             /lib/libm-2.4.so\nf7ee3000-f7ee5000 rwxp 00022000 08:05 154900                             /lib/libm-2.4.so\nf7ee5000-f7eea000 r-xp 00000000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eea000-f7eeb000 rwxp 00004000 08:0a 624332                             /opt/apache-2.2.8/modules/mod_mem_cache.so\nf7eeb000-f7eed000 r-xp 00000000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eed000-f7eee000 rwxp 00001000 08:0a 624303                             /opt/apache-2.2.8/modules/mod_authz_host.so\nf7eee000-f7eef000 rwxp f7eee000 00:00 0\nf7eef000-f7f09000 r-xp 00000000 08:05 154885                             /lib/ld-2.4.so\nf7f09000-f7f0b000 rwxp 00019000 08:05 154885                             /lib/ld-2.4.so\nffff7000-ffffe000 rw-p ffff7000 00:00 0                                  [stack]\nffffe000-fffff000 r-xp ffffe000 00:00 0\n[Tue Jun 03 14:52:39 2008] [notice] child pid 2521 exit signal Aborted (6)\n[Tue Jun 03 14:52:56 2008] [notice] child pid 10313 exit signal Segmentation fault (11)\n[Tue Jun 03 14:53:59 2008] [notice] child pid 7088 exit signal Segmentation fault (11)\n[Tue Jun 03 14:54:15 2008] [notice] child pid 14367 exit signal Segmentation fault (11)\n\n\nMy apache is running with this modules:\n ./httpd -M\nLoaded Modules:\n core_module (static)\n mpm_worker_module (static)\n http_module (static)\n so_module (static)\n authz_host_module (shared)\n cache_module (shared)\n mem_cache_module (shared)\n log_config_module (shared)\n expires_module (shared)\n mime_module (shared)\n setenvif_module (shared)\n status_module (shared)\n info_module (shared)\n vhost_alias_module (shared)\n imagemap_module (shared)\n rewrite_module (shared)\nSyntax OK\n\nAnd the main performance configuration is set this way:\nServerRoot \"/opt/apache\"\nLockFile logs/accept.lock\nPidFile logs/httpd.pid\n\nTimeout                 20\nKeepAlive               On\nMaxKeepAliveRequests    200\nKeepAliveTimeout        3\n\nThreadLimit             256\nThreadsPerChild         256\nStartServers            5\nServerLimit             200\nMinSpareThreads         512\nMaxSpareThreads         1024\nMaxRequestsPerChild     10000\n\nListenBacklog           1024\n\n\nUser nobody\nGroup nobody\nUseCanonicalName Off\nHostnameLookups Off\nServerSignature Off\n\nEnableMMAP off\nEnableSendFile off\n", "is_private": false}, {"count": 9, "tags": [], "creator": "rpluem@apache.org", "attachment_id": null, "text": "Have you checked (In reply to comment #8)\n> I have the same problem with apache 2.2.8 using siege to stress test my\n> environment. When I reached 15000 transactions/second, approximately, apache\n> started to refuse connections and process died with segmentation fault. \n> \n\nHave you checked if you are hit by PR44402? Can you please try http://svn.apache.org/viewvc?view=rev&revision=631362?", "id": 117316, "time": "2008-06-03T13:29:30Z", "bug_id": 41030, "creation_time": "2008-06-03T13:29:30Z", "is_private": false}, {"count": 10, "tags": [], "creator": "pool@eecg.toronto.edu", "attachment_id": null, "id": 117318, "creation_time": "2008-06-03T14:48:35Z", "time": "2008-06-03T14:48:35Z", "bug_id": 41030, "text": "Yep. I haven't tried the patch to confirm, but that looks like the same issue. Back when I filed this bug, I quickly got around the problem by doing something like this:\n\nvoid ap_push_pool(fd_queue_info_t * queue_info,\n                                    apr_pool_t * pool_to_recycle)\n{\n    /* If we have been given a pool to recycle, atomically link\n     * it into the queue_info's list of recycled pools\n     */\n    if (pool_to_recycle) {\n#if 0\n        struct recycled_pool *new_recycle;\n        new_recycle = (struct recycled_pool *) apr_palloc(pool_to_recycle,\n                                                          sizeof\n                                                          (*new_recycle));\n        new_recycle->pool = pool_to_recycle;\n        for (;;) {\n            new_recycle->next = queue_info->recycled_pools;\n            if (apr_atomic_casptr\n                ((volatile void **) &(queue_info->recycled_pools),\n                 new_recycle, new_recycle->next) == new_recycle->next) {\n                break;\n            }\n        }\n#else\n        apr_pool_destroy(pool_to_recycle);\n#endif\n    }\n}\n\n...Sorry I didn't have time to investigate further at the time. If you're curious, that change gave 5% slowdown on my Webstone benchmark.", "is_private": false}, {"count": 11, "tags": [], "creator": "guilhermeassad@uol.com.br", "attachment_id": null, "id": 117345, "time": "2008-06-04T08:00:22Z", "bug_id": 41030, "creation_time": "2008-06-04T08:00:22Z", "is_private": false, "text": "(In reply to comment #9)\n> Have you checked (In reply to comment #8)\n> > I have the same problem with apache 2.2.8 using siege to stress test my\n> > environment. When I reached 15000 transactions/second, approximately, apache\n> > started to refuse connections and process died with segmentation fault. \n> > \n> \n> Have you checked if you are hit by PR44402? Can you please try\n> http://svn.apache.org/viewvc?view=rev&revision=631362?\n> \n\nIt seems to be related to PR44402. I have some core files with the same pattern from the ones in that bug report.\n\nI will try to patch the apache server with the code you sent. "}, {"count": 12, "tags": [], "creator": "wrowe@apache.org", "attachment_id": null, "is_private": false, "id": 140526, "time": "2010-10-06T19:06:04Z", "bug_id": 41030, "creation_time": "2010-10-06T19:06:04Z", "text": "As this appeared related to 44402, and no further feedback arrived, I'm going ahead and dupping out this report to that bug, which is long fixed.\n\n*** This bug has been marked as a duplicate of bug 44402 ***"}]