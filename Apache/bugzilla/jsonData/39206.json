[{"count": 0, "tags": [], "creator": "cwang@kenwoodusa.com", "is_private": false, "text": "Running httpd-2.2.0-1 on CentOS 4.3 (rebuilt source rpm package).  Found a bug\nwith mod_proxy_balancer module where it does not treat a URL the same as\nmod_proxy module would.\n\nUsing Apache as a reverse proxy with mod_proxy module passing this directive to\na single backend server works just fine:\n\nProxyPass /KenwoodAccess/ http://172.20.111.33:80/KenwoodAccess/\n\nThis next example is a WORKING configuration for mod_proxy_balancer. No errors\nare generated in Apache and passes to the backend servers:\n\nProxyPass /KenwoodAccess balancer://KWA_cluster lbmethod=byrequests\nstickysession=JSESSIONID nofailover=off\n<Proxy balancer://KWA_cluster>\n        BalancerMember http://172.20.111.33:80/KenwoodAccess smax=15 loadfactor=1\n        BalancerMember http://172.20.111.34:80/KenwoodAccess smax=15 loadfactor=1\n        #BalancerMember http://test.kenwoodaccess.com/noworkers.html smax=15\nloadfactor=80\n</Proxy>\n\nWhere the bug happens:\n\nProxyPass /KenwoodAccess/ balancer://KWA_cluster lbmethod=byrequests\n*NOTE: The trailing slash in the first option.\n\nThis will generate an error message in Apache logs:\n\n[Mon Apr 03 17:04:55 2006] [warn] proxy: No protocol handler was valid for the\nURL /site/images/buts/forgotpassword.gif. If you are using a DSO version of\nmod_proxy, make sure the proxy submodules are included in the configuration\nusing LoadModule.\n\nThis error message seems to be misleading when passing options using the\ntrailing slash.  How I am interpreting it is mod_proxy_balancer doesn't want to\ncall on other mod_proxy submodules properly.\n\nGoogling shows that people resolved this Apache error message by adding\n'LoadModule' for the submodules of mod_proxy (ie: mod_proxy_connect,\nmod_proxy_http, etc.).  This is not the case with me, since Apache shows these\nsubmodules as loaded:\n\nhttpd -M\n proxy_module (shared)\n proxy_connect_module (shared)\n proxy_ftp_module (shared)\n proxy_http_module (shared)\n proxy_ajp_module (shared)\n proxy_balancer_module (shared)\n\nThis has been troubleshooted down to trailing slashes as the culprit for\nmod_proxy_balancer and mod_proxy Proxypass directive works just fine with\ntrailing slashes.", "id": 87578, "time": "2006-04-04T21:46:08Z", "bug_id": 39206, "creation_time": "2006-04-04T21:46:08Z", "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 39206, "attachment_id": null, "is_private": false, "id": 87579, "time": "2006-04-04T22:11:52Z", "creator": "rpluem@apache.org", "creation_time": "2006-04-04T22:11:52Z", "text": "\n\n*** This bug has been marked as a duplicate of 39203 ***"}]