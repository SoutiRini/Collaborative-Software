[{"count": 0, "tags": [], "creator": "sbrown@truckstuffusa.com", "text": "Several people have reported this problem on the Focus on Linux Security Focus\nmailing list.\n\nOn an Apache 2.0.50 server compiled without mod_proxy running PHP 4.3.8, an HTTP\nCONNECT command returns an HTTP 200 rather than an HTTP 405 error:\n\n> $ telnet a.somehost.com 80\n> Trying x.x.x.x...\n> Connected to a.somehost.com.\n> Escape character is '^]'.\n> CONNECT www.google.com:80 HTTP/1.0\n> Host: a.somehost.com\n>\n> HTTP/1.1 200 OK\n> Date: Tue, 24 Aug 2004 15:34:55 GMT\n> Server: Apache/2.0.50 (Unix) mod_ssl/2.0.50 OpenSSL/0.9.7d PHP/4.3.8\n> X-Powered-By: PHP/4.3.8\n> Connection: close\n> Content-Type: text/html; charset=ISO-8859-1\n>\n> Unknown server name: www.google.com\n> Connection closed by foreign host. \n\nSince no proxy is enabled on this server, Apache should respond with a 405\nMethod Not Allowed.  However, as you can see, it responds with a 200 OK. \nInterestingly, this does not occur on Apache without PHP (or some other\nlanguage, e.g. perl) installed:\n\n> $ telnet b.somehost.com 80\n> Trying y.y.y.y...\n> Connected to b.somehost.com.\n> Escape character is '^]'.\n> CONNECT www.google.com:80 HTTP/1.0\n> Host: b.somehost.com\n>\n> HTTP/1.1 405 Method Not Allowed\n> Date: Tue, 24 Aug 2004 15:52:37 GMT\n> Server: Apache/2.0.50 (Unix) mod_ssl/2.0.50 OpenSSL/0.9.7d PHP/4.3.8\n...\n<snip error doc>\n...\n> Connection closed by foreign host. \n\nSee discussion of this issue on PHP Bugzilla: http://bugs.php.net/bug.php?id=19113\n\nSince spammers are looking for open Apache proxies to forward spam to mail\nservers, this could result in a server getting hammered if some script kiddie\nthinks he has found an open proxy.", "id": 62416, "time": "2004-08-24T16:49:47Z", "bug_id": 30831, "creation_time": "2004-08-24T16:49:47Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "creator": "slive@apache.org", "text": "I can't really figure out why you are reporting this here.\n\nPHP has made a deliberate design choice to accept all methods, bogus or not. \nThere is nothing Apache can do about this.\n\n", "id": 62440, "time": "2004-08-24T23:30:47Z", "bug_id": 30831, "creation_time": "2004-08-24T23:30:47Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "bug_id": 30831, "attachment_id": null, "is_private": false, "id": 62469, "time": "2004-08-25T14:13:38Z", "creator": "sbrown@truckstuffusa.com", "creation_time": "2004-08-25T14:13:38Z", "text": "Because the same thing happens without PHP but with Perl.  Is this also a\ndeliberate design choice of Perl to accept all methods?"}, {"count": 3, "tags": [], "text": "mod_perl is different from mod_php.\nThe design goal of mod_perl is to allow writing apache modules in perl. Since\nevery apache module is responsible for what it's doing - so yes, it a design choice.", "attachment_id": null, "id": 62475, "creator": "nd@perlig.de", "time": "2004-08-25T14:42:44Z", "bug_id": 30831, "creation_time": "2004-08-25T14:42:44Z", "is_private": false}]