[{"count": 0, "tags": [], "bug_id": 27060, "text": "<%@ page language=\"java\" contentType=\"text/html;charset=GBK\"%>\n<%\nrequest.setCharacterEncoding(\"GBK\");\n\nString sel1=(request.getParameter(\"sel1\")==null?\"\":request.getParameter\n(\"sel1\"));\n\n\n\n%>\n\n\n<HTML>\n<HEAD>\n\n<TITLE></TITLE>\n</HEAD>\n<BODY>\n\n<form name=f1 method=GET>\n<input type=\"text\" name=\"sel1\" value=\"<%=sel1%>\">\n</form>\n\n\n</BODY>\n</HTML>", "id": 52530, "time": "2004-02-19T06:47:02Z", "creator": "xukun@public4.sta.net.cn", "creation_time": "2004-02-19T06:47:02Z", "is_private": false, "attachment_id": null}, {"count": 1, "tags": [], "bug_id": 27060, "text": "*** Bug 27059 has been marked as a duplicate of this bug. ***", "id": 52553, "time": "2004-02-19T12:08:16Z", "creator": "funkman@joedog.org", "creation_time": "2004-02-19T12:08:16Z", "is_private": false, "attachment_id": null}, {"count": 2, "tags": [], "creator": "markt@apache.org", "is_private": false, "id": 52829, "creation_time": "2004-02-23T23:23:34Z", "time": "2004-02-23T23:23:34Z", "bug_id": 27060, "text": "This has been discussed at length on both tomcat-dev and tomcat-user in the \npast. The behaviour you see is exactly as per the spec. You may find the \ncharacter encoding summary below useful.\n\nThere are a number of situations where there may be a requirement to use non-\nUS ASCII characters in a URI. These include:\n- Parameters in the query string\n- Servlet paths\n\nThere is a standard for encoding URIs (http://www.w3.org/International/O-URL-\ncode.html) but this standard is not consistently followed by clients. This \ncauses a number of problems.\n\nThe functionality provided by Tomcat (4 and 5) to handle this less than ideal \nsituation is described below.\n\n1. The Coyote HTTP/1.1 connector has a useBodyEncodingForURI attribute which \nif set to true will use the request body encoding to decode the URI query \nparameters.\n  - The default value is true for TC4 (breaks spec but gives consistent \nbehaviour across TC4 versions)\n  - The default value is false for TC5 (spec compliant but there may be \nmigration issues for some apps)\n2. The Coyote HTTP/1.1 connector has a URIEncoding attribute which defaults to \nISO-8859-1.\n3. The parameters class (o.a.t.u.http.Parameters) has a QueryStringEncoding \nfield which defaults to the URIEncoding. It must be set before the parameters \nare parsed to have an effect.\n\nThings to note regarding the servlet API:\n1. HttpServletRequest.setCharacterEncoding() normally only applies to the \nrequest body NOT the URI.\n2. HttpServletRequest.getPathInfo() is decoded by the web container.\n3. HttpServletRequest.getRequestURI() is not decoded by container.\n\nOther tips:\n1. Use POST with forms to return parameters as the parameters are then part of \nthe request body.", "attachment_id": null}]